{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u5e94\u8be5\u662f\u8981\u5199\u4e0b\u4e2a\u4eba\u4ecb\u7ecd\uff1f\u6682\u65f6\u8fd8\u4e0d\u77e5\u9053\u5199\u5565\uff0c\u5148\u8fd9\u6837\u5427","title":"Home"},{"location":"%E7%AC%94%E8%AE%B0/2019%20Revenge%20P5/","text":"Here's another way of determining \\(f\\) (I think it's a lot easier than a1267ab's post) f(n)=\\sum\\binom{1+t_1+t_2+\\dots+t_n}{1+t_1,t_2,\\dots,t_n} Let \\(t_1'=1+t_1\\ge 1\\) , so we only need to find all n-tuples \\((t_1',t_2,\\dots,t_n)\\) that satsisfies \\(t_1'+\\sum_{j>1}j\\times t_j=n+1,t_1'\\ge 1,t_2,\\dots,t_n\\ge 0\\) . Notice that this is actually the number of solution with \\(t_1'\\ge 0\\) subtracted by the number of solution that \\(t_1'=0\\) . By generating function we have \\begin{aligned} \\sum f(n)x^{n+1}&=\\sum (x+x^2+\\cdots)^k-\\sum (x^2+x^3+\\cdots)^k\\\\ &=\\sum(\\frac{x}{1-x})^k-\\sum(\\frac{x^2}{1-x})^k\\\\ &=(1-\\frac{x}{1-x})^{-1}-(1-\\frac{x^2}{1-x})^{-1}\\\\ &=\\frac{1-x}{1-2x}-\\frac{1-x}{1-x-x^2}\\\\ &=(1+\\frac{x}{1-2x})-(1+\\frac{x^2}{1-x-x^2})\\\\ &=x(\\frac{1}{1-2x}-\\frac{x}{1-x-x^2})\\\\ \\end{aligned} Now we know that \\(f(n)=2^n-F_n\\) where \\(F_n\\) is the \\(n\\) th fibonacci number \\((F_1=1,F_2=1,F_{n+2}=F_{n+1}+F_n)\\) It suffices to prove that \\sum_{1\\le i<j<k\\le p-1}\\frac{F_i}{ijk}\\equiv 0\\pmod{p}","title":"2019 Revenge P5"},{"location":"%E7%AC%94%E8%AE%B0/AGC001%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/","text":"AGC001 \u505a\u9898\u8bb0\u5f55 \u00b6 A - BBQ Easy \u00b6 \u8d2a\u5fc3\u5f97\u80fd\u53d6\u5230\u7684\u6700\u5927\u503c\u4e3a \\(L_1+L_3+L_5+\\cdots+L_{2N-1}\\) \uff0c\u7b80\u5355\u8ba1\u7b97\u5e76\u8f93\u51fa\u5373\u53ef\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) using namespace std ; bool cmp ( int x , int y ){ return x < y ;} int main (){ int n , a [ 205 ], ans = 0 ; cin >> n ; rep ( i , 1 , 2 * n ) cin >> a [ i ]; sort ( a + 1 , a + 2 * n + 1 , cmp ); for ( int i = 1 ; i <= 2 * n ; i += 2 ){ ans += a [ i ]; } cout << ans << endl ; return 0 ; } B - Mysterious Light \u00b6 \u5f88\u6709\u610f\u601d\u7684\u6570\u5b66\u9898\u3002\u9996\u5148\u53d1\u73b0\u5149\u7ebf\u5728\u4e24\u6b21\u53cd\u5c04\u8fc7\u540e\u4f1a\u8fdb\u5165\u4e00\u4e2a\u8fb9\u957f\u4e3a \\((x,y)\\) \\((x>y)\\) \u7684\u5e73\u884c\u56db\u8fb9\u5f62\uff0c\u518d\u7ecf\u8fc7\u4e24\u6b21\u53cd\u5c04\u540e \\((x-y,y)\\) \u3002\u53d1\u73b0\u8fd9\u4e2a\u8fc7\u7a0b\u7c7b\u4f3c\u6b27\u51e0\u91cc\u5f97\u7b97\u6cd5\uff0c\u8fb9\u957f\u4f1a\u8fdb\u884c\u8f97\u8f6c\u76f8\u9664\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u4e00\u4e2a\u7c7b\u4f3c\u7684\u9012\u5f52\u51fd\u6570\u8ba1\u7b97\u7b54\u6848\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } ll ans ; inline void dfs ( ll x , ll y ){ if ( x % y == 0 ){ ans += x * 2 - y ; return ; } else { ans += ( x - x % y ) * 2 ; dfs ( y , x % y ); } } int main (){ ll n = read (), x = read (); ans = n ; dfs ( max ( n - x , x ), min ( n - x , x )); cout << ans << endl ; return 0 ; } C - Shorten Diameter \u00b6 \u53c8\u4e00\u9053\u5f88\u4e0d\u9519\u7684\u601d\u7ef4\u9898\u3002\u9996\u5148\u89c2\u5bdf\u6570\u636e\u8303\u56f4\uff0c\u53d1\u73b0\u65f6\u95f4\u590d\u6742\u5ea6\u5927\u6982\u4e3a \\(O(N^2)\\) \u4ee5\u4e0b\u3002\u8003\u8651\u76f4\u5f84\u7684\u51e0\u4f55\u5b9a\u4e49\uff08\u5927\u8349\uff09\uff0c\u6211\u4eec\u679a\u4e3e\u8fd9\u4e2a\u6811\u7684\u5706\u5fc3\uff08\u8349*2\uff09\uff0c\u753b\u4e00\u4e2a\u534a\u5f84\u4e3a \\(K/2\\) \u7684\u5706\uff0c\u5e76\u4e14\u628a\u5706\u5916\u7684\u70b9\u5220\u6389\uff0c\u5224\u65ad\u5220\u6389\u7684\u70b9\u6570\u7684\u6700\u5c0f\u503c\u3002\u8fd9\u6837\u7684\u505a\u6cd5\u662f \\(O(N^2)\\) \u7684\u3002\u7279\u522b\u5730\uff0c\u5f53 \\(K\\) \u4e3a\u5947\u6570\u65f6\u6211\u4eec\u628a\u4e00\u6761\u8fb9\u5f53\u505a\u5706\u5fc3\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e3 + 5 ; vector < int > G [ N ]; int n , k , ans , tot ; inline void dfs ( int u , int fa , int dep ){ ++ tot ; if ( dep == 0 ) return ; for ( int v : G [ u ]){ if ( v == fa ) continue ; dfs ( v , u , dep -1 ); } } int main (){ n = read (), k = read (); rep ( i , 1 , n -1 ){ int u = read (), v = read (); G [ u ]. push_back ( v ); G [ v ]. push_back ( u ); } if ( k % 2 == 0 ){ rep ( i , 1 , n ){ tot = 0 ; dfs ( i , 0 , k / 2 ); ans = max ( ans , tot ); } } else { rep ( i , 1 , n ){ for ( int j : G [ i ]){ tot = 0 ; dfs ( i , j , k / 2 ); dfs ( j , i , k / 2 ); ans = max ( ans , tot ); } } } cout << n - ans << endl ; return 0 ; } D - Arrays and Palindrome \u00b6 \u5f88\u6709MO\u98ce\u683c\u7684\u9898\u76ee\u3002\u4e00\u4e2a \\([l,r]\\) \u4e4b\u95f4\u7684\u56de\u6587\u6761\u4ef6\u76f8\u5f53\u4e8e\u7ed9\u51fa\u4e86 \\(s_l=s_r,s_{l+1}=s_{r-1},\\dots\\) \u603b\u5171 \\(\\lfloor \\dfrac{a_i}{2}\\rfloor\\) \u4e2a\u9650\u5236\u3002\u628a\u8fd9\u4e9b\u9650\u5236\u770b\u4f5c\u8fb9\uff0c\u90a3\u4e48\u4ec5\u5f53\u6240\u6709\u70b9\u5728\u540c\u4e00\u4e2a\u8fde\u901a\u5757\u91cc\u65f6\u6bcf\u4e2a\u5b57\u7b26\u5fc5\u987b\u76f8\u7b49\uff0c\u8fd9\u610f\u5473\u7740\u9700\u8981\u81f3\u5c11 \\(n-1\\) \u6761\u8fb9\u3002\u5982\u679c \\(a_i\\) \u4e2d\u6709\u4e09\u4e2a\u5947\u6570\uff0c\u90a3\u4e48\u4f1a\u6d6a\u8d39\u6389 \\(1.5\\) \u6761\u8fb9\uff0c\u663e\u7136\u4e0d\u5408\u6cd5\u3002 \u4e0b\u9762\u8003\u8651\u6784\u9020\u3002\u53d1\u73b0\u5982\u679c \\([1,n-1],[1,n]\\) \u90fd\u662f\u56de\u6587\u4e32\uff0c\u90a3\u4e48\u6240\u6709\u5143\u7d20\u76f8\u540c\u3002\u4e8e\u662f\u53ef\u4ee5\u628a \\(a\\) \u4e2d\u7684\u5947\u6570\u653e\u5230\u5934\u6216\u5c3e\uff0c \\(b\\) \u6570\u7ec4\u7684\u5934\u548c\u5c3e\u5206\u522b \\(+1,-1\\) \uff0c\u5176\u4ed6\u5143\u7d20\u548c \\(a\\) \u6570\u7ec4\u76f8\u540c\u3002\u8fd9\u6837\u7c7b\u4f3c\u9519\u4f4d\u6446\u653e\u7684\u6b63\u786e\u6027\u662f\u663e\u7136\u7684\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } int n , m , a [ 105 ], b [ 105 ], tot , cnt [ 2 ]; bool cmp ( int x , int y ){ return x % 2 > y % 2 ;} int main (){ n = read (), m = read (); rep ( i , 1 , m ){ a [ i ] = read (); ++ cnt [ a [ i ] & 1 ]; } if ( m == 1 ){ if ( a [ 1 ] == 1 ) printf ( \"1 \\n 1 \\n 1 \\n \" ); else printf ( \"%d \\n %d \\n %d %d \\n \" , a [ 1 ], 2 , 1 , a [ 1 ] -1 ); return 0 ; } if ( cnt [ 1 ] > 2 ) return puts ( \"Impossible\" ), 0 ; sort ( a + 1 , a + m + 1 , cmp ); printf ( \"%d \" , a [ 1 ]); rep ( i , 3 , m ) printf ( \"%d \" , a [ i ]); printf ( \"%d \\n \" , a [ 2 ]); b [ ++ tot ] = a [ 1 ] + 1 ; rep ( i , 3 , m ) b [ ++ tot ] = a [ i ]; if ( a [ 2 ] > 1 ) b [ ++ tot ] = a [ 2 ] -1 ; printf ( \"%d \\n \" , tot ); rep ( i , 1 , tot ) printf ( \"%d \" , b [ i ]); return 0 ; } E - BBQ Hard \u00b6 \\(O(N^2)\\) \u7684\u66b4\u529b\u8ba1\u7b97\u4e0d\u662f\u6211\u4eec\u60f3\u8981\u7684\u3002\u770b\u5230\u5f62\u5982 \\binom{x+y}{x} \u7684\u5f62\u5f0f\u7684\u6570\u6c42\u548c\uff0c\u60f3\u5230\u7ecf\u5178\u7684\u683c\u8def\u8ba1\u6570\u95ee\u9898\u3002\u8fd9\u7b49\u4ef7\u4e8e\u4ece \\((0,0)\\) \u8d70\u5230 \\((x,y)\\) \u7684\u65b9\u6848\u6570\u3002\u4e8e\u662f\u8fd9\u53d8\u6210\u4e86\u6c42 \\((0,0)\\) \u5230\u6240\u6709 \\((a_i+a_j,b_i+b_j)\\) \u7684\u8def\u5f84\u6570\u4e4b\u548c\u3002\u53ef\u4ee5\u901a\u8fc7\u51cf\u5c11\u7ec8\u70b9\u6570\u6765\u4f18\u5316\uff0c\u5e73\u79fb\u8def\u5f84\u5230 \\((-a_i,-b_i)\\rightarrow(a_j,b_j)\\) \u3002\u53ef\u4ee5\u7528\u7b80\u5355\u7684dp\u8ba1\u7b97\uff0c\u6700\u540e\u53bb\u6389 \\(i=j\\) \u65f6\u7684\u7b54\u6848\u5373\u53ef\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 , S = 2e3 + 5 , P = 1e9 + 7 , inv2 = 5e8 + 4 ; ll fpow ( ll x , ll y ){ ll res = 1 ; while ( y ){ if ( y & 1 ) res = res * x % P ; y >>= 1 ; x = x * x % P ; } return res ; } int fac [ 8050 ], ifac [ 8050 ]; ll C ( int n , int m ){ return 1l l * fac [ n ] * ifac [ m ] % P * ifac [ n - m ] % P ;} int n , a [ N ], b [ N ], dp [ 4050 ][ 4050 ]; ll ans ; int main (){ n = read (); rep ( i , 1 , n ){ a [ i ] = read (), b [ i ] = read (); ++ dp [ S - a [ i ]][ S - b [ i ]]; } fac [ 0 ] = 1 ; rep ( i , 1 , 8000 ) fac [ i ] = 1l l * fac [ i -1 ] * i % P ; ifac [ 8000 ] = fpow ( fac [ 8000 ], P -2 ); per ( i , 7999 , 0 ) ifac [ i ] = 1l l * ifac [ i + 1 ] * ( i + 1 ) % P ; rep ( i , 1 , S << 1 ) rep ( j , 1 , S << 1 ){ dp [ i ][ j ] = ( dp [ i ][ j ] + ( dp [ i -1 ][ j ] + dp [ i ][ j -1 ]) % P ) % P ; } rep ( i , 1 , n ){ ans = ( ans + dp [ S + a [ i ]][ S + b [ i ]]) % P ; ans = ( ans - C ( 2 * a [ i ] + 2 * b [ i ], 2 * a [ i ])) % P ; } ans = ( ans + P ) % P * inv2 % P ; cout << ans << endl ; return 0 ; } F - Wide Swap \u00b6 \\(i,j\\) \u4e24\u4e2a\u4f4d\u7f6e\u80fd\u4ea4\u6362\u7684\u6761\u4ef6\u4e3a \\(|i-j|\\ge K\\) \u4e14 \\(|P_i-P_j|= 1\\) \uff0c\u8fd9\u4e2a\u6761\u4ef6\u592a\u7384\u5999\u4e86\uff0c\u8003\u8651\u6784\u9020\u6392\u5217 \\(Q\\) \u6ee1\u8db3 \\(Q_{P_i}=i\\) \uff0c\u90a3\u4e48\u5bf9\u4e8e \\(Q\\) \uff0c \\(|Q_i-Q_j|\\ge K\\) \u4e14 \\(|i-j|=1\\) \u5373 \\(i,j\\) \u76f8\u90bb\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u4ea4\u6362\u3002\u800c\u6c42\u51fa\u5b57\u5178\u5e8f\u6700\u5c0f\u7684 \\(P\\) \u4e5f\u5c31\u7b49\u4ef7\u4e8e \u4f18\u5148\u8003\u8651 \\(1\\) \u5728 \\(Q\\) \u4e0a\u7684\u4e0b\u6807\u6700\u9760\u524d\uff0c\u7136\u540e\u8003\u8651 \\(2\\) \u7684\u4e0b\u6807\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002 \u4e8e\u662f\u6211\u4eec\u53d1\u73b0\u5bf9\u4e8e\u6240\u6709\u5728 \\(Q\\) \u4e2d\u5dee\u503c\u5c0f\u4e8e \\(K\\) \u7684\u6570\u5bf9 \\((u,v)\\) \uff0c\u5b83\u4eec\u65e0\u6cd5\u4ea4\u6362\uff0c\u4e5f\u5c31\u662f\u76f8\u5bf9\u4f4d\u7f6e\u88ab\u56fa\u5b9a\u4e86\u3002\u5bf9\u4e8e\u8fd9\u6837\u7684\u6570\u5bf9 \\((u,v)\\) \uff0c\u6211\u4eec\u628a\u5728 \\(Q\\) \u4e2d\u51fa\u73b0\u8f83\u524d\u7684\u6570\u5411\u51fa\u73b0\u8f83\u540e\u7684\u6570\u8fde\u4e00\u6761\u6709\u5411\u8fb9\uff0c\u4e0d\u96be\u53d1\u73b0\u8fd9\u6837\u5efa\u56fe\u4f1a\u6784\u6210\u4e00\u5f20 \\(DAG\\) \u3002 \\(Q\\) \u53ef\u4ee5\u8f6c\u6362\u6210\u4efb\u610f\u4e00\u4e2a\u6ee1\u8db3\u8be5\u56fe\u62d3\u6251\u5e8f\u7684\u5e8f\u5217\u3002 \u6ce8\u610f\u5230 \\(Q\\) \u7684\u8981\u6c42\u5e76\u4e0d\u662f\u7b80\u5355\u7684 \u5b57\u5178\u5e8f\u6700\u5c0f \uff0c\u56e0\u6b64\u76f4\u63a5\u5efa\u56fe\u540e\u8d2a\u5fc3\u53d6\u6700\u5c0f\u503c\u662f\u9519\u8bef\u7684\uff0c\u6b63\u786e\u7684\u505a\u6cd5\u7c7b\u4f3c [HNOI2015]\u83dc\u80b4\u5236\u4f5c \uff0c\u5e94\u5f53\u5efa\u53cd\u56fe\u540e\u6c42\u53cd\u56fe\u4e2d\u5b57\u5178\u5e8f\u6700\u5927\u7684\u6392\u5217\u3002\u6700\u540e\u8fd8\u6709\u4e00\u4e2a\u95ee\u9898\uff0c\u5982\u679c\u6211\u4eec\u5bf9\u6240\u6709 \\(|u-v|< K\\) \u90fd\u8fde\u8fb9\uff0c\u8fb9\u6570\u662f \\(O(NK)\\) \u7684\uff0c\u6240\u4ee5\u4e0d\u80fd\u663e\u5f0f\u5efa\u56fe\u3002 \u9996\u5148\u628a \\(Q\\) \u4e0a\u5efa\u53cd\u56fe\u6362\u5230\u539f\u5e8f\u5217\u4e0a\uff0c\u7c7b\u4f3c\u7684\uff0c\u5373\u5bf9\u6240\u6709\u70b9 \\(i\\) \u8fde\u4e0a \\(\\{j||i-j|<K,P_j<P_i\\}\\) \uff0c\u82e5\u70b9 \\(i\\) \u5165\u5ea6\u4e3a \\(0\\) \uff0c\u53ef\u4ee5\u53d1\u73b0\u5728\u533a\u95f4 \\((i-K,i+K)\\) \u4e0a \\(P_i\\) \u6700\u5927\u3002\u7528\u5927\u6839\u5806\u7ef4\u62a4\u5165\u5ea6\u4e3a \\(0\\) \u7684\u70b9\u96c6\uff0c\u7ebf\u6bb5\u6811\u7ef4\u62a4\u533a\u95f4\u6700\u503c\uff0c\u5f53\u5220\u9664\u70b9 \\(i\\) \u65f6\uff0c\u5224\u65ad \\((i-K,i),(i,i+K)\\) \u4e24\u4e2a\u533a\u95f4\u7684\u6700\u5927\u503c\u4e2d\u662f\u5426\u6709\u5165\u5ea6\u53d8\u4e3a \\(0\\) \u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N\\log N)\\) \u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define li (i<<1) #define ri (i<<1|1) #define mid (l+r>>1) #define ls li,l,mid #define rs ri,mid+1,r #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 5e5 + 5 , inf = 0x3f3f3f3f , M = 2e6 + 5 ; int n , k , P [ N ], Ans [ N ], mx [ M ]; void upd ( int i ){ mx [ i ] = P [ mx [ li ]] > P [ mx [ ri ]] ? mx [ li ] : mx [ ri ];} void Build ( int i , int l , int r ){ if ( l == r ) return mx [ i ] = l , void (); Build ( ls ), Build ( rs ); upd ( i ); } void del ( int i , int l , int r , int p ){ if ( l == r ) return mx [ i ] = 0 , void (); p <= mid ? del ( ls , p ) : del ( rs , p ); upd ( i ); } int Q ( int i , int l , int r , int a , int b ){ if ( r < a || b < l ) return 0 ; if ( a <= l && r <= b ) return mx [ i ]; int v1 = Q ( ls , a , b ), v2 = Q ( rs , a , b ); return P [ v1 ] > P [ v2 ] ? v1 : v2 ; } bool vis [ N ]; priority_queue < int > pq ; inline void check ( int id ){ if ( vis [ id ]) return ; if ( Q ( 1 , 1 , n , id - k + 1 , id + k -1 ) == id ){ pq . push ( id ); vis [ id ] = 1 ; } } int main (){ n = read (), k = read (); rep ( i , 1 , n ) P [ i ] = read (); P [ 0 ] =- inf ; Build ( 1 , 1 , n ); rep ( i , 1 , n ) check ( i ); for ( int i = n ; i >= 1 ; i -- ){ int u = pq . top (); pq . pop (); Ans [ u ] = i ; del ( 1 , 1 , n , u ); int pos ; if (( pos = Q ( 1 , 1 , n , u - k + 1 , u -1 ))) check ( pos ); if (( pos = Q ( 1 , 1 , n , u + 1 , u + k -1 ))) check ( pos ); } rep ( i , 1 , n ) printf ( \"%d \\n \" , Ans [ i ]); return 0 ; }","title":"AGC001 \u505a\u9898\u8bb0\u5f55"},{"location":"%E7%AC%94%E8%AE%B0/AGC001%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#agc001","text":"","title":"AGC001 \u505a\u9898\u8bb0\u5f55"},{"location":"%E7%AC%94%E8%AE%B0/AGC001%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#a-bbq-easy","text":"\u8d2a\u5fc3\u5f97\u80fd\u53d6\u5230\u7684\u6700\u5927\u503c\u4e3a \\(L_1+L_3+L_5+\\cdots+L_{2N-1}\\) \uff0c\u7b80\u5355\u8ba1\u7b97\u5e76\u8f93\u51fa\u5373\u53ef\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) using namespace std ; bool cmp ( int x , int y ){ return x < y ;} int main (){ int n , a [ 205 ], ans = 0 ; cin >> n ; rep ( i , 1 , 2 * n ) cin >> a [ i ]; sort ( a + 1 , a + 2 * n + 1 , cmp ); for ( int i = 1 ; i <= 2 * n ; i += 2 ){ ans += a [ i ]; } cout << ans << endl ; return 0 ; }","title":"A - BBQ Easy"},{"location":"%E7%AC%94%E8%AE%B0/AGC001%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#b-mysterious-light","text":"\u5f88\u6709\u610f\u601d\u7684\u6570\u5b66\u9898\u3002\u9996\u5148\u53d1\u73b0\u5149\u7ebf\u5728\u4e24\u6b21\u53cd\u5c04\u8fc7\u540e\u4f1a\u8fdb\u5165\u4e00\u4e2a\u8fb9\u957f\u4e3a \\((x,y)\\) \\((x>y)\\) \u7684\u5e73\u884c\u56db\u8fb9\u5f62\uff0c\u518d\u7ecf\u8fc7\u4e24\u6b21\u53cd\u5c04\u540e \\((x-y,y)\\) \u3002\u53d1\u73b0\u8fd9\u4e2a\u8fc7\u7a0b\u7c7b\u4f3c\u6b27\u51e0\u91cc\u5f97\u7b97\u6cd5\uff0c\u8fb9\u957f\u4f1a\u8fdb\u884c\u8f97\u8f6c\u76f8\u9664\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u4e00\u4e2a\u7c7b\u4f3c\u7684\u9012\u5f52\u51fd\u6570\u8ba1\u7b97\u7b54\u6848\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } ll ans ; inline void dfs ( ll x , ll y ){ if ( x % y == 0 ){ ans += x * 2 - y ; return ; } else { ans += ( x - x % y ) * 2 ; dfs ( y , x % y ); } } int main (){ ll n = read (), x = read (); ans = n ; dfs ( max ( n - x , x ), min ( n - x , x )); cout << ans << endl ; return 0 ; }","title":"B - Mysterious Light"},{"location":"%E7%AC%94%E8%AE%B0/AGC001%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#c-shorten-diameter","text":"\u53c8\u4e00\u9053\u5f88\u4e0d\u9519\u7684\u601d\u7ef4\u9898\u3002\u9996\u5148\u89c2\u5bdf\u6570\u636e\u8303\u56f4\uff0c\u53d1\u73b0\u65f6\u95f4\u590d\u6742\u5ea6\u5927\u6982\u4e3a \\(O(N^2)\\) \u4ee5\u4e0b\u3002\u8003\u8651\u76f4\u5f84\u7684\u51e0\u4f55\u5b9a\u4e49\uff08\u5927\u8349\uff09\uff0c\u6211\u4eec\u679a\u4e3e\u8fd9\u4e2a\u6811\u7684\u5706\u5fc3\uff08\u8349*2\uff09\uff0c\u753b\u4e00\u4e2a\u534a\u5f84\u4e3a \\(K/2\\) \u7684\u5706\uff0c\u5e76\u4e14\u628a\u5706\u5916\u7684\u70b9\u5220\u6389\uff0c\u5224\u65ad\u5220\u6389\u7684\u70b9\u6570\u7684\u6700\u5c0f\u503c\u3002\u8fd9\u6837\u7684\u505a\u6cd5\u662f \\(O(N^2)\\) \u7684\u3002\u7279\u522b\u5730\uff0c\u5f53 \\(K\\) \u4e3a\u5947\u6570\u65f6\u6211\u4eec\u628a\u4e00\u6761\u8fb9\u5f53\u505a\u5706\u5fc3\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e3 + 5 ; vector < int > G [ N ]; int n , k , ans , tot ; inline void dfs ( int u , int fa , int dep ){ ++ tot ; if ( dep == 0 ) return ; for ( int v : G [ u ]){ if ( v == fa ) continue ; dfs ( v , u , dep -1 ); } } int main (){ n = read (), k = read (); rep ( i , 1 , n -1 ){ int u = read (), v = read (); G [ u ]. push_back ( v ); G [ v ]. push_back ( u ); } if ( k % 2 == 0 ){ rep ( i , 1 , n ){ tot = 0 ; dfs ( i , 0 , k / 2 ); ans = max ( ans , tot ); } } else { rep ( i , 1 , n ){ for ( int j : G [ i ]){ tot = 0 ; dfs ( i , j , k / 2 ); dfs ( j , i , k / 2 ); ans = max ( ans , tot ); } } } cout << n - ans << endl ; return 0 ; }","title":"C - Shorten Diameter"},{"location":"%E7%AC%94%E8%AE%B0/AGC001%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#d-arrays-and-palindrome","text":"\u5f88\u6709MO\u98ce\u683c\u7684\u9898\u76ee\u3002\u4e00\u4e2a \\([l,r]\\) \u4e4b\u95f4\u7684\u56de\u6587\u6761\u4ef6\u76f8\u5f53\u4e8e\u7ed9\u51fa\u4e86 \\(s_l=s_r,s_{l+1}=s_{r-1},\\dots\\) \u603b\u5171 \\(\\lfloor \\dfrac{a_i}{2}\\rfloor\\) \u4e2a\u9650\u5236\u3002\u628a\u8fd9\u4e9b\u9650\u5236\u770b\u4f5c\u8fb9\uff0c\u90a3\u4e48\u4ec5\u5f53\u6240\u6709\u70b9\u5728\u540c\u4e00\u4e2a\u8fde\u901a\u5757\u91cc\u65f6\u6bcf\u4e2a\u5b57\u7b26\u5fc5\u987b\u76f8\u7b49\uff0c\u8fd9\u610f\u5473\u7740\u9700\u8981\u81f3\u5c11 \\(n-1\\) \u6761\u8fb9\u3002\u5982\u679c \\(a_i\\) \u4e2d\u6709\u4e09\u4e2a\u5947\u6570\uff0c\u90a3\u4e48\u4f1a\u6d6a\u8d39\u6389 \\(1.5\\) \u6761\u8fb9\uff0c\u663e\u7136\u4e0d\u5408\u6cd5\u3002 \u4e0b\u9762\u8003\u8651\u6784\u9020\u3002\u53d1\u73b0\u5982\u679c \\([1,n-1],[1,n]\\) \u90fd\u662f\u56de\u6587\u4e32\uff0c\u90a3\u4e48\u6240\u6709\u5143\u7d20\u76f8\u540c\u3002\u4e8e\u662f\u53ef\u4ee5\u628a \\(a\\) \u4e2d\u7684\u5947\u6570\u653e\u5230\u5934\u6216\u5c3e\uff0c \\(b\\) \u6570\u7ec4\u7684\u5934\u548c\u5c3e\u5206\u522b \\(+1,-1\\) \uff0c\u5176\u4ed6\u5143\u7d20\u548c \\(a\\) \u6570\u7ec4\u76f8\u540c\u3002\u8fd9\u6837\u7c7b\u4f3c\u9519\u4f4d\u6446\u653e\u7684\u6b63\u786e\u6027\u662f\u663e\u7136\u7684\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } int n , m , a [ 105 ], b [ 105 ], tot , cnt [ 2 ]; bool cmp ( int x , int y ){ return x % 2 > y % 2 ;} int main (){ n = read (), m = read (); rep ( i , 1 , m ){ a [ i ] = read (); ++ cnt [ a [ i ] & 1 ]; } if ( m == 1 ){ if ( a [ 1 ] == 1 ) printf ( \"1 \\n 1 \\n 1 \\n \" ); else printf ( \"%d \\n %d \\n %d %d \\n \" , a [ 1 ], 2 , 1 , a [ 1 ] -1 ); return 0 ; } if ( cnt [ 1 ] > 2 ) return puts ( \"Impossible\" ), 0 ; sort ( a + 1 , a + m + 1 , cmp ); printf ( \"%d \" , a [ 1 ]); rep ( i , 3 , m ) printf ( \"%d \" , a [ i ]); printf ( \"%d \\n \" , a [ 2 ]); b [ ++ tot ] = a [ 1 ] + 1 ; rep ( i , 3 , m ) b [ ++ tot ] = a [ i ]; if ( a [ 2 ] > 1 ) b [ ++ tot ] = a [ 2 ] -1 ; printf ( \"%d \\n \" , tot ); rep ( i , 1 , tot ) printf ( \"%d \" , b [ i ]); return 0 ; }","title":"D - Arrays and Palindrome"},{"location":"%E7%AC%94%E8%AE%B0/AGC001%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#e-bbq-hard","text":"\\(O(N^2)\\) \u7684\u66b4\u529b\u8ba1\u7b97\u4e0d\u662f\u6211\u4eec\u60f3\u8981\u7684\u3002\u770b\u5230\u5f62\u5982 \\binom{x+y}{x} \u7684\u5f62\u5f0f\u7684\u6570\u6c42\u548c\uff0c\u60f3\u5230\u7ecf\u5178\u7684\u683c\u8def\u8ba1\u6570\u95ee\u9898\u3002\u8fd9\u7b49\u4ef7\u4e8e\u4ece \\((0,0)\\) \u8d70\u5230 \\((x,y)\\) \u7684\u65b9\u6848\u6570\u3002\u4e8e\u662f\u8fd9\u53d8\u6210\u4e86\u6c42 \\((0,0)\\) \u5230\u6240\u6709 \\((a_i+a_j,b_i+b_j)\\) \u7684\u8def\u5f84\u6570\u4e4b\u548c\u3002\u53ef\u4ee5\u901a\u8fc7\u51cf\u5c11\u7ec8\u70b9\u6570\u6765\u4f18\u5316\uff0c\u5e73\u79fb\u8def\u5f84\u5230 \\((-a_i,-b_i)\\rightarrow(a_j,b_j)\\) \u3002\u53ef\u4ee5\u7528\u7b80\u5355\u7684dp\u8ba1\u7b97\uff0c\u6700\u540e\u53bb\u6389 \\(i=j\\) \u65f6\u7684\u7b54\u6848\u5373\u53ef\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 , S = 2e3 + 5 , P = 1e9 + 7 , inv2 = 5e8 + 4 ; ll fpow ( ll x , ll y ){ ll res = 1 ; while ( y ){ if ( y & 1 ) res = res * x % P ; y >>= 1 ; x = x * x % P ; } return res ; } int fac [ 8050 ], ifac [ 8050 ]; ll C ( int n , int m ){ return 1l l * fac [ n ] * ifac [ m ] % P * ifac [ n - m ] % P ;} int n , a [ N ], b [ N ], dp [ 4050 ][ 4050 ]; ll ans ; int main (){ n = read (); rep ( i , 1 , n ){ a [ i ] = read (), b [ i ] = read (); ++ dp [ S - a [ i ]][ S - b [ i ]]; } fac [ 0 ] = 1 ; rep ( i , 1 , 8000 ) fac [ i ] = 1l l * fac [ i -1 ] * i % P ; ifac [ 8000 ] = fpow ( fac [ 8000 ], P -2 ); per ( i , 7999 , 0 ) ifac [ i ] = 1l l * ifac [ i + 1 ] * ( i + 1 ) % P ; rep ( i , 1 , S << 1 ) rep ( j , 1 , S << 1 ){ dp [ i ][ j ] = ( dp [ i ][ j ] + ( dp [ i -1 ][ j ] + dp [ i ][ j -1 ]) % P ) % P ; } rep ( i , 1 , n ){ ans = ( ans + dp [ S + a [ i ]][ S + b [ i ]]) % P ; ans = ( ans - C ( 2 * a [ i ] + 2 * b [ i ], 2 * a [ i ])) % P ; } ans = ( ans + P ) % P * inv2 % P ; cout << ans << endl ; return 0 ; }","title":"E - BBQ Hard"},{"location":"%E7%AC%94%E8%AE%B0/AGC001%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#f-wide-swap","text":"\\(i,j\\) \u4e24\u4e2a\u4f4d\u7f6e\u80fd\u4ea4\u6362\u7684\u6761\u4ef6\u4e3a \\(|i-j|\\ge K\\) \u4e14 \\(|P_i-P_j|= 1\\) \uff0c\u8fd9\u4e2a\u6761\u4ef6\u592a\u7384\u5999\u4e86\uff0c\u8003\u8651\u6784\u9020\u6392\u5217 \\(Q\\) \u6ee1\u8db3 \\(Q_{P_i}=i\\) \uff0c\u90a3\u4e48\u5bf9\u4e8e \\(Q\\) \uff0c \\(|Q_i-Q_j|\\ge K\\) \u4e14 \\(|i-j|=1\\) \u5373 \\(i,j\\) \u76f8\u90bb\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u4ea4\u6362\u3002\u800c\u6c42\u51fa\u5b57\u5178\u5e8f\u6700\u5c0f\u7684 \\(P\\) \u4e5f\u5c31\u7b49\u4ef7\u4e8e \u4f18\u5148\u8003\u8651 \\(1\\) \u5728 \\(Q\\) \u4e0a\u7684\u4e0b\u6807\u6700\u9760\u524d\uff0c\u7136\u540e\u8003\u8651 \\(2\\) \u7684\u4e0b\u6807\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002 \u4e8e\u662f\u6211\u4eec\u53d1\u73b0\u5bf9\u4e8e\u6240\u6709\u5728 \\(Q\\) \u4e2d\u5dee\u503c\u5c0f\u4e8e \\(K\\) \u7684\u6570\u5bf9 \\((u,v)\\) \uff0c\u5b83\u4eec\u65e0\u6cd5\u4ea4\u6362\uff0c\u4e5f\u5c31\u662f\u76f8\u5bf9\u4f4d\u7f6e\u88ab\u56fa\u5b9a\u4e86\u3002\u5bf9\u4e8e\u8fd9\u6837\u7684\u6570\u5bf9 \\((u,v)\\) \uff0c\u6211\u4eec\u628a\u5728 \\(Q\\) \u4e2d\u51fa\u73b0\u8f83\u524d\u7684\u6570\u5411\u51fa\u73b0\u8f83\u540e\u7684\u6570\u8fde\u4e00\u6761\u6709\u5411\u8fb9\uff0c\u4e0d\u96be\u53d1\u73b0\u8fd9\u6837\u5efa\u56fe\u4f1a\u6784\u6210\u4e00\u5f20 \\(DAG\\) \u3002 \\(Q\\) \u53ef\u4ee5\u8f6c\u6362\u6210\u4efb\u610f\u4e00\u4e2a\u6ee1\u8db3\u8be5\u56fe\u62d3\u6251\u5e8f\u7684\u5e8f\u5217\u3002 \u6ce8\u610f\u5230 \\(Q\\) \u7684\u8981\u6c42\u5e76\u4e0d\u662f\u7b80\u5355\u7684 \u5b57\u5178\u5e8f\u6700\u5c0f \uff0c\u56e0\u6b64\u76f4\u63a5\u5efa\u56fe\u540e\u8d2a\u5fc3\u53d6\u6700\u5c0f\u503c\u662f\u9519\u8bef\u7684\uff0c\u6b63\u786e\u7684\u505a\u6cd5\u7c7b\u4f3c [HNOI2015]\u83dc\u80b4\u5236\u4f5c \uff0c\u5e94\u5f53\u5efa\u53cd\u56fe\u540e\u6c42\u53cd\u56fe\u4e2d\u5b57\u5178\u5e8f\u6700\u5927\u7684\u6392\u5217\u3002\u6700\u540e\u8fd8\u6709\u4e00\u4e2a\u95ee\u9898\uff0c\u5982\u679c\u6211\u4eec\u5bf9\u6240\u6709 \\(|u-v|< K\\) \u90fd\u8fde\u8fb9\uff0c\u8fb9\u6570\u662f \\(O(NK)\\) \u7684\uff0c\u6240\u4ee5\u4e0d\u80fd\u663e\u5f0f\u5efa\u56fe\u3002 \u9996\u5148\u628a \\(Q\\) \u4e0a\u5efa\u53cd\u56fe\u6362\u5230\u539f\u5e8f\u5217\u4e0a\uff0c\u7c7b\u4f3c\u7684\uff0c\u5373\u5bf9\u6240\u6709\u70b9 \\(i\\) \u8fde\u4e0a \\(\\{j||i-j|<K,P_j<P_i\\}\\) \uff0c\u82e5\u70b9 \\(i\\) \u5165\u5ea6\u4e3a \\(0\\) \uff0c\u53ef\u4ee5\u53d1\u73b0\u5728\u533a\u95f4 \\((i-K,i+K)\\) \u4e0a \\(P_i\\) \u6700\u5927\u3002\u7528\u5927\u6839\u5806\u7ef4\u62a4\u5165\u5ea6\u4e3a \\(0\\) \u7684\u70b9\u96c6\uff0c\u7ebf\u6bb5\u6811\u7ef4\u62a4\u533a\u95f4\u6700\u503c\uff0c\u5f53\u5220\u9664\u70b9 \\(i\\) \u65f6\uff0c\u5224\u65ad \\((i-K,i),(i,i+K)\\) \u4e24\u4e2a\u533a\u95f4\u7684\u6700\u5927\u503c\u4e2d\u662f\u5426\u6709\u5165\u5ea6\u53d8\u4e3a \\(0\\) \u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N\\log N)\\) \u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define li (i<<1) #define ri (i<<1|1) #define mid (l+r>>1) #define ls li,l,mid #define rs ri,mid+1,r #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 5e5 + 5 , inf = 0x3f3f3f3f , M = 2e6 + 5 ; int n , k , P [ N ], Ans [ N ], mx [ M ]; void upd ( int i ){ mx [ i ] = P [ mx [ li ]] > P [ mx [ ri ]] ? mx [ li ] : mx [ ri ];} void Build ( int i , int l , int r ){ if ( l == r ) return mx [ i ] = l , void (); Build ( ls ), Build ( rs ); upd ( i ); } void del ( int i , int l , int r , int p ){ if ( l == r ) return mx [ i ] = 0 , void (); p <= mid ? del ( ls , p ) : del ( rs , p ); upd ( i ); } int Q ( int i , int l , int r , int a , int b ){ if ( r < a || b < l ) return 0 ; if ( a <= l && r <= b ) return mx [ i ]; int v1 = Q ( ls , a , b ), v2 = Q ( rs , a , b ); return P [ v1 ] > P [ v2 ] ? v1 : v2 ; } bool vis [ N ]; priority_queue < int > pq ; inline void check ( int id ){ if ( vis [ id ]) return ; if ( Q ( 1 , 1 , n , id - k + 1 , id + k -1 ) == id ){ pq . push ( id ); vis [ id ] = 1 ; } } int main (){ n = read (), k = read (); rep ( i , 1 , n ) P [ i ] = read (); P [ 0 ] =- inf ; Build ( 1 , 1 , n ); rep ( i , 1 , n ) check ( i ); for ( int i = n ; i >= 1 ; i -- ){ int u = pq . top (); pq . pop (); Ans [ u ] = i ; del ( 1 , 1 , n , u ); int pos ; if (( pos = Q ( 1 , 1 , n , u - k + 1 , u -1 ))) check ( pos ); if (( pos = Q ( 1 , 1 , n , u + 1 , u + k -1 ))) check ( pos ); } rep ( i , 1 , n ) printf ( \"%d \\n \" , Ans [ i ]); return 0 ; }","title":"F - Wide Swap"},{"location":"%E7%AC%94%E8%AE%B0/AGC002%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/","text":"AGC002 \u505a\u9898\u8bb0\u5f55 \u00b6 A \u00b6 \u7565\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } int main (){ int a = read (), b = read (); if ( a <= 0 && b >= 0 ) puts ( \"Zero\" ); else if ( b < 0 && ( b - a + 1 ) % 2 == 1 ) puts ( \"Negative\" ); else puts ( \"Positive\" ); return 0 ; } B \u00b6 \u6211\u4eec\u7ef4\u62a4\u6bcf\u4e2a\u76d2\u5b50\u91cc\u9762\u7684\u7403\u6570\u4ee5\u53ca\u5f53\u524d\u662f\u5426\u6709\u7ea2\u7403\uff0c\u8f6c\u79fb\u662f\u663e\u7136\u7684\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 ; int num [ N ]; bool vis [ N ]; int main (){ int n = read (), m = read (), ans = 0 ; vis [ 1 ] = 1 ; rep ( i , 1 , n ) num [ i ] = 1 ; rep ( i , 1 , m ){ int x = read (), y = read (); if ( vis [ x ]) vis [ y ] = 1 ; num [ x ] -- ; num [ y ] ++ ; if ( num [ x ] == 0 ) vis [ x ] = 0 ; } rep ( i , 1 , n ) if ( vis [ i ]) ans ++ ; cout << ans << endl ; return 0 ; } C \u00b6 \u5148\u8003\u8651\u4ec0\u4e48\u65f6\u5019\u65e0\u89e3\u3002\u53d1\u73b0\u5982\u679c\u6700\u957f\u7684\u4e24\u6bb5\u5408\u5e76\u6210\u7684\u4e00\u6bb5\u90fd\u65e0\u6cd5\u526a\u5f00\u7684\u8bdd\uff0c\u90a3\u4e48\u6700\u540e\u81f3\u5c11\u4f1a\u6709\u4e24\u6bb5\u65e0\u6cd5\u526a\u5f00\uff0c\u65e0\u89e3\u3002 \u53cd\u4e4b\u6211\u4eec\u53d1\u73b0\u4e00\u4e2a\u5305\u542b\u53ef\u526a\u5f00\u5b50\u6bb5\u7684\u4e00\u6bb5\u7ef3\u5b50\u4e00\u5b9a\u4e5f\u662f\u53ef\u526a\u5f00\u7684\uff0c\u6211\u4eec\u4fdd\u7559\u6700\u957f\u7684 \\(a_i+a_{i+1}\\) \u5c31\u53ef\u4ee5\u4e86\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 ; int a [ N ]; int main (){ int n = read (), l = read (), len = 0 , pos ; rep ( i , 1 , n ) a [ i ] = read (); rep ( i , 1 , n -1 ){ if ( a [ i ] + a [ i + 1 ] > len ){ len = a [ i ] + a [ i + 1 ]; pos = i ; } } if ( len < l ) return puts ( \"Impossible\" ), 0 ; puts ( \"Possible\" ); rep ( i , 1 , pos -1 ) printf ( \"%d \" , i ); for ( int i = n -1 ; i >= pos ; i -- ) printf ( \"%d \" , i ); puts ( \"\" ); return 0 ; } D \u00b6 \u9898\u76ee\u5f00\u59cb\u6709\u610f\u601d\u4e86\u8d77\u6765 \u6700\u5927\u503c\u6700\u5c0f\u548c\u5355\u8c03\u6027\u63d0\u793a\u4e86\u6211\u4eec\u4e8c\u5206\u7b54\u6848 \\(k\\) \u3002\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u628a \\(id\\le k\\) \u7684\u8fb9\u5168\u90e8\u8fde\u4e0a\uff0c\u5e76\u628a\u5f53\u524d \\(x,y\\) \u6240\u5728\u7684\u8fde\u901a\u5757\u7684\u5927\u5c0f\u52a0\u8d77\u6765\u3002\u5982\u679c \\(\\ge z\\) \u5219\u7b54\u6848\u4e0d\u5927\u4e8e \\(k\\) \uff0c\u53cd\u4e4b\u5927\u4e8e \\(k\\) \u3002 \u8fd9\u6837\u7684\u66b4\u529b\u65f6\u95f4\u590d\u6742\u5ea6\u662f \\(O(QN\\log M)\\) \uff0c\u8003\u8651\u4f18\u5316\u3002\u56e0\u4e3a\u8be2\u95ee\u5168\u90e8\u662f\u79bb\u7ebf\u7684\uff0c\u53ef\u4ee5\u7528\u6574\u4f53\u4e8c\u5206\u7b97\u6cd5\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a \\(O((N+M+Q)\\log M)\\) \u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long #define fi first #define se second using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 ; struct Edge { int x , y ;} e [ N ]; struct Query { int x , y , z ;} q [ N ]; struct Bin { int fi , se , mid ;} p [ N ]; vector < int > v [ N ]; int n , m , Q , ans [ N ], fa [ N ], sz [ N ]; inline int find ( int u ){ return u == fa [ u ] ? u : fa [ u ] = find ( fa [ u ]);} inline void merge ( int u , int v ){ int fu = find ( u ), fv = find ( v ); if ( fu == fv ) return ; fa [ fu ] = fv , sz [ fv ] += sz [ fu ]; } int main (){ n = read (), m = read (); rep ( i , 1 , m ) e [ i ]. x = read (), e [ i ]. y = read (); Q = read (); rep ( i , 1 , Q ){ q [ i ]. x = read (), q [ i ]. y = read (), q [ i ]. z = read (); p [ i ]. fi = 1 , p [ i ]. se = m ; } rep ( t , 1 , 20 ){ rep ( i , 1 , m ) v [ i ]. clear (); rep ( i , 1 , Q ) if ( p [ i ]. fi != p [ i ]. se ) v [ p [ i ]. mid = ( p [ i ]. fi + p [ i ]. se ) >> 1 ]. push_back ( i ); rep ( i , 1 , n ) fa [ i ] = i , sz [ i ] = 1 ; rep ( i , 1 , m ){ merge ( e [ i ]. x , e [ i ]. y ); for ( auto k : v [ i ]) { int x = q [ k ]. x , y = q [ k ]. y , fx = find ( x ), fy = find ( y ); if ( fx != fy ) ans [ k ] = sz [ fx ] + sz [ fy ]; else ans [ k ] = sz [ fx ]; } } rep ( i , 1 , Q ) if ( p [ i ]. fi != p [ i ]. se ) { if ( ans [ i ] >= q [ i ]. z ) p [ i ]. se = p [ i ]. mid ; else p [ i ]. fi = p [ i ]. mid + 1 ; } } rep ( i , 1 , Q ) printf ( \"%d \\n \" , p [ i ]. fi ); return 0 ; } E \u00b6 \u535a\u5f08\u8bba\u7ecf\u5178\u9898\u76ee\u3002 \u53ef\u4ee5\u53d1\u73b0\u5c06\u6570\u7ec4\u964d\u5e8f\u6392\u5217\u540e\u770b\u6210\u4e00\u5806\u65b9\u5757\uff0c\u6bcf\u6b21\u64cd\u4f5c\u76f8\u5f53\u4e8e\u628a\u6700\u5de6\u8fb9\u7684\u4e00\u5217\u6216\u8005\u6700\u5e95\u4e0b\u4e00\u884c\u7684\u65b9\u5757\u6d88\u9664\uff0c\u6d88\u9664\u6700\u540e\u4e00\u4e2a\u65b9\u5757\u7684\u4eba\u8f93\u6389\u6e38\u620f\u3002\u4e0b\u9762\u7528 \\((x,y)\\) \u8868\u793a\u6d88\u6389\u4e86\u524d \\(x\\) \u5217 \u548c\u524d \\(y\\) \u884c\u7684\u6240\u6709\u65b9\u5757\u3002 \uff08\u8fd9\u91cc\u5c31\u4e0d\u518d\u8d58\u8ff0\u5fc5\u80dc\u6001\u548c\u5fc5\u8d25\u6001\u7684\u5b9a\u4e49\u4e86\uff09 \u5f15\u7406\uff1a\u82e5 \\((x+1,y+1)\\) \u6ca1\u6709\u6d88\u9664\u5168\u90e8\u65b9\u5757\uff0c\u90a3\u4e48 \\((x,y)\\) \u548c \\((x+1,y+1)\\) \u7684\u72b6\u6001\u76f8\u540c\u3002 \u8bc1\uff1a \u82e5 \\((x+1,y+1)\\) \u662f\u5fc5\u8d25\u6001\uff0c\u5219\u5148\u624b\u4ece \\((x,y)\\) \u65e0\u8bba\u600e\u4e48\u8d70\uff0c\u540e\u624b\u90fd\u53ef\u4ee5\u8f6c\u79fb\u5230 \\((x+1,y+1)\\) \u8fd9\u4e2a\u72b6\u6001\u3002 \u82e5 \\((x+1,y+1)\\) \u662f\u5fc5\u80dc\u6001\uff0c\u7531\u5b9a\u4e49\u77e5\u9053 \\((x+2,y+1)\\) \u548c \\((x+1,y+2)\\) \u81f3\u5c11\u6709\u4e00\u4e2a\u5fc5\u8d25\u6001\uff08\u6d88\u9664\u5168\u90e8\u65b9\u5757\u540e\u5148\u624b\u5fc5\u80dc\uff0c\u6240\u4ee5\u5fc5\u8d25\u6001\u5fc5\u7136\u6ee1\u8db3\u5047\u8bbe\uff09\u3002\u4e0d\u59a8\u8bbe \\((x+2,y+1)\\) \u662f\u5fc5\u8d25\u6001\uff0c\u90a3\u4e48\u7531\u4e0a\u4e00\u79cd\u60c5\u51b5\u63a8\u51fa \\((x+1,y)\\) \u662f\u5fc5\u8d25\u6001\uff0c\u5b83\u4e0e \\((x,y)\\) \u76f8\u90bb\u3002\u6240\u4ee5 \\((x,y)\\) \u662f\u5fc5\u80dc\u6001\u3002 \u8fd9\u6837\u5c31\u8bc1\u660e\u4e86\u521d\u59cb\u72b6\u6001 \\((0,0)\\) \u7b49\u4ef7\u4e8e\u6700\u5927\u7684 \\((x,x)\\) \u3002\u800c\u6700\u5927\u5316 \\(x\\) \u610f\u5473\u7740\u8fd9\u4e2a\u70b9\u4e4b\u540e\u53ea\u80fd\u6cbf\u5355\u65b9\u5411 \\(+1\\) \uff0c\u5224\u65ad\u662f\u5426\u5b58\u5728\u4e00\u4e2a\u65b9\u5411\u9700\u8981\u5947\u6570\u6b21\u64cd\u4f5c\u6d88\u9664\u5373\u53ef\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 ; int a [ N ], n ; bool cmp ( int x , int y ){ return x > y ;} int main (){ n = read (); rep ( i , 1 , n ) a [ i ] = read (); sort ( a + 1 , a + n + 1 , cmp ); rep ( i , 1 , n ){ if ( i + 1 > a [ i + 1 ]){ int ans = 0 ; for ( int j = i + 1 ; a [ j ] == i ; ++ j ) ans ^= 1 ; ans |= ( a [ i ] - i ) & 1 ; puts ( ans ? \"First\" : \"Second\" ); break ; } } return 0 ; } F \u00b6 \u4e0d\u96be\u53d1\u73b0\u5bf9\u4e8e\u6ee1\u8db3\u6761\u4ef6\u7684\u5e8f\u5217\uff0c\u4efb\u4f55\u524d\u7f00\u4e2d\u767d\u8272\u7403\u7684\u4e2a\u6570\u90fd\u8981\u8d85\u8fc7\u5176\u4ed6\u989c\u8272\u7684\u79cd\u7c7b\u6570\u3002\u4e8e\u662f\u6211\u4eec\u8003\u8651\u4f9d\u6b21\u586b\u5165\u767d\u8272\u7403\u6216\u8005\u4e00\u4e2a\u79cd\u7c7b\u7684\u6240\u6709\u7403\u3002 \u4ee4 \\(dp[i][j]\\) \u4e3a\u586b\u5165\u4e86\u524d \\(i\\) \u4e2a\u767d\u8272\u7403\uff0c\u4ee5\u53ca \\(j\\) \u79cd\u51fa\u73b0\u6700\u9760\u524d\u7684\u5f69\u8272\u7403\u65f6\u7684\u65b9\u6848\u6570\uff0c\u6b64\u65f6\u663e\u7136\u6709 \\(i\\ge j\\) \u3002 \u8003\u8651\u8f6c\u79fb\uff0c \u653e\u5165\u4e00\u4e2a\u767d\u8272\u7403\u3002\u4efb\u4f55\u60c5\u51b5\u90fd\u53ef\u4ee5\u5728\u7b2c\u4e00\u4e2a\u672a\u586b\u5165\u7684\u5730\u65b9\u586b\u4e0a\u767d\u7403\uff0c\u4e8e\u662f\u6709 \\[ dp[i+1][j]+=dp[i][j] \\] \u653e\u5165\u4e00\u79cd\u5f69\u8272\u7403\u3002\u6211\u4eec\u4ece \\(dp[i][j]\\) \u8f6c\u79fb\u5230 \\(dp[i][j+1]\\) \uff0c\u8fd9\u65f6\u9700\u8981\u6ee1\u8db3 \\(i \\ge j+1\\) \u5426\u5219\u65e0\u6cd5\u5408\u6cd5\u653e\u5165\u3002\u6709 \\((n-j)\\) \u79cd\u672a\u51fa\u73b0\u7684\u989c\u8272\u53ef\u4ee5\u7ed9\u6211\u4eec\u9009\u62e9\uff0c\u800c\u586b\u5165\u4e86\u6700\u9760\u524d\u7684\u7a7a\u4f4d\u4e4b\u540e\uff0c\u6211\u4eec\u8fd8\u6709 \\(k-2\\) \u4e2a\u5f69\u8272\u7403\u672a\u653e\u7f6e\u3002\u8fd9\u4e9b\u5f69\u8272\u7403\u6709 \\((nk-i-j(k-1)-1)\\) \u4e2a\u7a7a\u4f4d\u53ef\u9009\uff0c\u4e8e\u662f\u8f6c\u79fb\u4e3a \\[ dp[i][j+1]+=dp[i][j]\\times (n-j)\\times\\binom{nk-i-j(k-1)-1}{k-2} \\] \u65f6\u95f4\u590d\u6742\u5ea6 \\(O(n^2)\\) \u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2005 , P = 1e9 + 7 ; ll fpow ( ll x , ll y ){ ll res = 1 ; while ( y ){ if ( y & 1 ) res = res * x % P ; y >>= 1 ; x = x * x % P ; } return res ; } int n , k , fac [ N * N ], ifac [ N * N ]; ll dp [ N ][ N ]; ll C ( ll n , ll m ){ return 1l l * fac [ n ] * ifac [ m ] % P * ifac [ n - m ] % P ;} int main (){ n = read (), k = read (); if ( k == 1 ) return puts ( \"1\" ), 0 ; fac [ 0 ] = 1 ; rep ( i , 1 , n * k ) fac [ i ] = 1l l * fac [ i -1 ] * i % P ; ifac [ n * k ] = fpow ( fac [ n * k ], P -2 ); for ( int i = n * k ; i >= 1 ; i -- ) ifac [ i -1 ] = 1l l * ifac [ i ] * i % P ; dp [ 0 ][ 0 ] = 1 ; rep ( i , 1 , n ){ rep ( j , 0 , i ){ dp [ i ][ j ] = dp [ i -1 ][ j ]; if ( ! j ) continue ; dp [ i ][ j ] = ( dp [ i ][ j ] + ( n - j + 1 ) * dp [ i ][ j -1 ] % P * C ( n - i + ( n - j + 1 ) * ( k -1 ) -1 , k -2 ) % P ) % P ; } } printf ( \"%lld \\n \" , dp [ n ][ n ]); return 0 ; }","title":"AGC002 \u505a\u9898\u8bb0\u5f55"},{"location":"%E7%AC%94%E8%AE%B0/AGC002%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#agc002","text":"","title":"AGC002 \u505a\u9898\u8bb0\u5f55"},{"location":"%E7%AC%94%E8%AE%B0/AGC002%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#a","text":"\u7565\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } int main (){ int a = read (), b = read (); if ( a <= 0 && b >= 0 ) puts ( \"Zero\" ); else if ( b < 0 && ( b - a + 1 ) % 2 == 1 ) puts ( \"Negative\" ); else puts ( \"Positive\" ); return 0 ; }","title":"A"},{"location":"%E7%AC%94%E8%AE%B0/AGC002%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#b","text":"\u6211\u4eec\u7ef4\u62a4\u6bcf\u4e2a\u76d2\u5b50\u91cc\u9762\u7684\u7403\u6570\u4ee5\u53ca\u5f53\u524d\u662f\u5426\u6709\u7ea2\u7403\uff0c\u8f6c\u79fb\u662f\u663e\u7136\u7684\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 ; int num [ N ]; bool vis [ N ]; int main (){ int n = read (), m = read (), ans = 0 ; vis [ 1 ] = 1 ; rep ( i , 1 , n ) num [ i ] = 1 ; rep ( i , 1 , m ){ int x = read (), y = read (); if ( vis [ x ]) vis [ y ] = 1 ; num [ x ] -- ; num [ y ] ++ ; if ( num [ x ] == 0 ) vis [ x ] = 0 ; } rep ( i , 1 , n ) if ( vis [ i ]) ans ++ ; cout << ans << endl ; return 0 ; }","title":"B"},{"location":"%E7%AC%94%E8%AE%B0/AGC002%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#c","text":"\u5148\u8003\u8651\u4ec0\u4e48\u65f6\u5019\u65e0\u89e3\u3002\u53d1\u73b0\u5982\u679c\u6700\u957f\u7684\u4e24\u6bb5\u5408\u5e76\u6210\u7684\u4e00\u6bb5\u90fd\u65e0\u6cd5\u526a\u5f00\u7684\u8bdd\uff0c\u90a3\u4e48\u6700\u540e\u81f3\u5c11\u4f1a\u6709\u4e24\u6bb5\u65e0\u6cd5\u526a\u5f00\uff0c\u65e0\u89e3\u3002 \u53cd\u4e4b\u6211\u4eec\u53d1\u73b0\u4e00\u4e2a\u5305\u542b\u53ef\u526a\u5f00\u5b50\u6bb5\u7684\u4e00\u6bb5\u7ef3\u5b50\u4e00\u5b9a\u4e5f\u662f\u53ef\u526a\u5f00\u7684\uff0c\u6211\u4eec\u4fdd\u7559\u6700\u957f\u7684 \\(a_i+a_{i+1}\\) \u5c31\u53ef\u4ee5\u4e86\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 ; int a [ N ]; int main (){ int n = read (), l = read (), len = 0 , pos ; rep ( i , 1 , n ) a [ i ] = read (); rep ( i , 1 , n -1 ){ if ( a [ i ] + a [ i + 1 ] > len ){ len = a [ i ] + a [ i + 1 ]; pos = i ; } } if ( len < l ) return puts ( \"Impossible\" ), 0 ; puts ( \"Possible\" ); rep ( i , 1 , pos -1 ) printf ( \"%d \" , i ); for ( int i = n -1 ; i >= pos ; i -- ) printf ( \"%d \" , i ); puts ( \"\" ); return 0 ; }","title":"C"},{"location":"%E7%AC%94%E8%AE%B0/AGC002%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#d","text":"\u9898\u76ee\u5f00\u59cb\u6709\u610f\u601d\u4e86\u8d77\u6765 \u6700\u5927\u503c\u6700\u5c0f\u548c\u5355\u8c03\u6027\u63d0\u793a\u4e86\u6211\u4eec\u4e8c\u5206\u7b54\u6848 \\(k\\) \u3002\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u628a \\(id\\le k\\) \u7684\u8fb9\u5168\u90e8\u8fde\u4e0a\uff0c\u5e76\u628a\u5f53\u524d \\(x,y\\) \u6240\u5728\u7684\u8fde\u901a\u5757\u7684\u5927\u5c0f\u52a0\u8d77\u6765\u3002\u5982\u679c \\(\\ge z\\) \u5219\u7b54\u6848\u4e0d\u5927\u4e8e \\(k\\) \uff0c\u53cd\u4e4b\u5927\u4e8e \\(k\\) \u3002 \u8fd9\u6837\u7684\u66b4\u529b\u65f6\u95f4\u590d\u6742\u5ea6\u662f \\(O(QN\\log M)\\) \uff0c\u8003\u8651\u4f18\u5316\u3002\u56e0\u4e3a\u8be2\u95ee\u5168\u90e8\u662f\u79bb\u7ebf\u7684\uff0c\u53ef\u4ee5\u7528\u6574\u4f53\u4e8c\u5206\u7b97\u6cd5\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a \\(O((N+M+Q)\\log M)\\) \u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long #define fi first #define se second using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 ; struct Edge { int x , y ;} e [ N ]; struct Query { int x , y , z ;} q [ N ]; struct Bin { int fi , se , mid ;} p [ N ]; vector < int > v [ N ]; int n , m , Q , ans [ N ], fa [ N ], sz [ N ]; inline int find ( int u ){ return u == fa [ u ] ? u : fa [ u ] = find ( fa [ u ]);} inline void merge ( int u , int v ){ int fu = find ( u ), fv = find ( v ); if ( fu == fv ) return ; fa [ fu ] = fv , sz [ fv ] += sz [ fu ]; } int main (){ n = read (), m = read (); rep ( i , 1 , m ) e [ i ]. x = read (), e [ i ]. y = read (); Q = read (); rep ( i , 1 , Q ){ q [ i ]. x = read (), q [ i ]. y = read (), q [ i ]. z = read (); p [ i ]. fi = 1 , p [ i ]. se = m ; } rep ( t , 1 , 20 ){ rep ( i , 1 , m ) v [ i ]. clear (); rep ( i , 1 , Q ) if ( p [ i ]. fi != p [ i ]. se ) v [ p [ i ]. mid = ( p [ i ]. fi + p [ i ]. se ) >> 1 ]. push_back ( i ); rep ( i , 1 , n ) fa [ i ] = i , sz [ i ] = 1 ; rep ( i , 1 , m ){ merge ( e [ i ]. x , e [ i ]. y ); for ( auto k : v [ i ]) { int x = q [ k ]. x , y = q [ k ]. y , fx = find ( x ), fy = find ( y ); if ( fx != fy ) ans [ k ] = sz [ fx ] + sz [ fy ]; else ans [ k ] = sz [ fx ]; } } rep ( i , 1 , Q ) if ( p [ i ]. fi != p [ i ]. se ) { if ( ans [ i ] >= q [ i ]. z ) p [ i ]. se = p [ i ]. mid ; else p [ i ]. fi = p [ i ]. mid + 1 ; } } rep ( i , 1 , Q ) printf ( \"%d \\n \" , p [ i ]. fi ); return 0 ; }","title":"D"},{"location":"%E7%AC%94%E8%AE%B0/AGC002%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#e","text":"\u535a\u5f08\u8bba\u7ecf\u5178\u9898\u76ee\u3002 \u53ef\u4ee5\u53d1\u73b0\u5c06\u6570\u7ec4\u964d\u5e8f\u6392\u5217\u540e\u770b\u6210\u4e00\u5806\u65b9\u5757\uff0c\u6bcf\u6b21\u64cd\u4f5c\u76f8\u5f53\u4e8e\u628a\u6700\u5de6\u8fb9\u7684\u4e00\u5217\u6216\u8005\u6700\u5e95\u4e0b\u4e00\u884c\u7684\u65b9\u5757\u6d88\u9664\uff0c\u6d88\u9664\u6700\u540e\u4e00\u4e2a\u65b9\u5757\u7684\u4eba\u8f93\u6389\u6e38\u620f\u3002\u4e0b\u9762\u7528 \\((x,y)\\) \u8868\u793a\u6d88\u6389\u4e86\u524d \\(x\\) \u5217 \u548c\u524d \\(y\\) \u884c\u7684\u6240\u6709\u65b9\u5757\u3002 \uff08\u8fd9\u91cc\u5c31\u4e0d\u518d\u8d58\u8ff0\u5fc5\u80dc\u6001\u548c\u5fc5\u8d25\u6001\u7684\u5b9a\u4e49\u4e86\uff09 \u5f15\u7406\uff1a\u82e5 \\((x+1,y+1)\\) \u6ca1\u6709\u6d88\u9664\u5168\u90e8\u65b9\u5757\uff0c\u90a3\u4e48 \\((x,y)\\) \u548c \\((x+1,y+1)\\) \u7684\u72b6\u6001\u76f8\u540c\u3002 \u8bc1\uff1a \u82e5 \\((x+1,y+1)\\) \u662f\u5fc5\u8d25\u6001\uff0c\u5219\u5148\u624b\u4ece \\((x,y)\\) \u65e0\u8bba\u600e\u4e48\u8d70\uff0c\u540e\u624b\u90fd\u53ef\u4ee5\u8f6c\u79fb\u5230 \\((x+1,y+1)\\) \u8fd9\u4e2a\u72b6\u6001\u3002 \u82e5 \\((x+1,y+1)\\) \u662f\u5fc5\u80dc\u6001\uff0c\u7531\u5b9a\u4e49\u77e5\u9053 \\((x+2,y+1)\\) \u548c \\((x+1,y+2)\\) \u81f3\u5c11\u6709\u4e00\u4e2a\u5fc5\u8d25\u6001\uff08\u6d88\u9664\u5168\u90e8\u65b9\u5757\u540e\u5148\u624b\u5fc5\u80dc\uff0c\u6240\u4ee5\u5fc5\u8d25\u6001\u5fc5\u7136\u6ee1\u8db3\u5047\u8bbe\uff09\u3002\u4e0d\u59a8\u8bbe \\((x+2,y+1)\\) \u662f\u5fc5\u8d25\u6001\uff0c\u90a3\u4e48\u7531\u4e0a\u4e00\u79cd\u60c5\u51b5\u63a8\u51fa \\((x+1,y)\\) \u662f\u5fc5\u8d25\u6001\uff0c\u5b83\u4e0e \\((x,y)\\) \u76f8\u90bb\u3002\u6240\u4ee5 \\((x,y)\\) \u662f\u5fc5\u80dc\u6001\u3002 \u8fd9\u6837\u5c31\u8bc1\u660e\u4e86\u521d\u59cb\u72b6\u6001 \\((0,0)\\) \u7b49\u4ef7\u4e8e\u6700\u5927\u7684 \\((x,x)\\) \u3002\u800c\u6700\u5927\u5316 \\(x\\) \u610f\u5473\u7740\u8fd9\u4e2a\u70b9\u4e4b\u540e\u53ea\u80fd\u6cbf\u5355\u65b9\u5411 \\(+1\\) \uff0c\u5224\u65ad\u662f\u5426\u5b58\u5728\u4e00\u4e2a\u65b9\u5411\u9700\u8981\u5947\u6570\u6b21\u64cd\u4f5c\u6d88\u9664\u5373\u53ef\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 ; int a [ N ], n ; bool cmp ( int x , int y ){ return x > y ;} int main (){ n = read (); rep ( i , 1 , n ) a [ i ] = read (); sort ( a + 1 , a + n + 1 , cmp ); rep ( i , 1 , n ){ if ( i + 1 > a [ i + 1 ]){ int ans = 0 ; for ( int j = i + 1 ; a [ j ] == i ; ++ j ) ans ^= 1 ; ans |= ( a [ i ] - i ) & 1 ; puts ( ans ? \"First\" : \"Second\" ); break ; } } return 0 ; }","title":"E"},{"location":"%E7%AC%94%E8%AE%B0/AGC002%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#f","text":"\u4e0d\u96be\u53d1\u73b0\u5bf9\u4e8e\u6ee1\u8db3\u6761\u4ef6\u7684\u5e8f\u5217\uff0c\u4efb\u4f55\u524d\u7f00\u4e2d\u767d\u8272\u7403\u7684\u4e2a\u6570\u90fd\u8981\u8d85\u8fc7\u5176\u4ed6\u989c\u8272\u7684\u79cd\u7c7b\u6570\u3002\u4e8e\u662f\u6211\u4eec\u8003\u8651\u4f9d\u6b21\u586b\u5165\u767d\u8272\u7403\u6216\u8005\u4e00\u4e2a\u79cd\u7c7b\u7684\u6240\u6709\u7403\u3002 \u4ee4 \\(dp[i][j]\\) \u4e3a\u586b\u5165\u4e86\u524d \\(i\\) \u4e2a\u767d\u8272\u7403\uff0c\u4ee5\u53ca \\(j\\) \u79cd\u51fa\u73b0\u6700\u9760\u524d\u7684\u5f69\u8272\u7403\u65f6\u7684\u65b9\u6848\u6570\uff0c\u6b64\u65f6\u663e\u7136\u6709 \\(i\\ge j\\) \u3002 \u8003\u8651\u8f6c\u79fb\uff0c \u653e\u5165\u4e00\u4e2a\u767d\u8272\u7403\u3002\u4efb\u4f55\u60c5\u51b5\u90fd\u53ef\u4ee5\u5728\u7b2c\u4e00\u4e2a\u672a\u586b\u5165\u7684\u5730\u65b9\u586b\u4e0a\u767d\u7403\uff0c\u4e8e\u662f\u6709 \\[ dp[i+1][j]+=dp[i][j] \\] \u653e\u5165\u4e00\u79cd\u5f69\u8272\u7403\u3002\u6211\u4eec\u4ece \\(dp[i][j]\\) \u8f6c\u79fb\u5230 \\(dp[i][j+1]\\) \uff0c\u8fd9\u65f6\u9700\u8981\u6ee1\u8db3 \\(i \\ge j+1\\) \u5426\u5219\u65e0\u6cd5\u5408\u6cd5\u653e\u5165\u3002\u6709 \\((n-j)\\) \u79cd\u672a\u51fa\u73b0\u7684\u989c\u8272\u53ef\u4ee5\u7ed9\u6211\u4eec\u9009\u62e9\uff0c\u800c\u586b\u5165\u4e86\u6700\u9760\u524d\u7684\u7a7a\u4f4d\u4e4b\u540e\uff0c\u6211\u4eec\u8fd8\u6709 \\(k-2\\) \u4e2a\u5f69\u8272\u7403\u672a\u653e\u7f6e\u3002\u8fd9\u4e9b\u5f69\u8272\u7403\u6709 \\((nk-i-j(k-1)-1)\\) \u4e2a\u7a7a\u4f4d\u53ef\u9009\uff0c\u4e8e\u662f\u8f6c\u79fb\u4e3a \\[ dp[i][j+1]+=dp[i][j]\\times (n-j)\\times\\binom{nk-i-j(k-1)-1}{k-2} \\] \u65f6\u95f4\u590d\u6742\u5ea6 \\(O(n^2)\\) \u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2005 , P = 1e9 + 7 ; ll fpow ( ll x , ll y ){ ll res = 1 ; while ( y ){ if ( y & 1 ) res = res * x % P ; y >>= 1 ; x = x * x % P ; } return res ; } int n , k , fac [ N * N ], ifac [ N * N ]; ll dp [ N ][ N ]; ll C ( ll n , ll m ){ return 1l l * fac [ n ] * ifac [ m ] % P * ifac [ n - m ] % P ;} int main (){ n = read (), k = read (); if ( k == 1 ) return puts ( \"1\" ), 0 ; fac [ 0 ] = 1 ; rep ( i , 1 , n * k ) fac [ i ] = 1l l * fac [ i -1 ] * i % P ; ifac [ n * k ] = fpow ( fac [ n * k ], P -2 ); for ( int i = n * k ; i >= 1 ; i -- ) ifac [ i -1 ] = 1l l * ifac [ i ] * i % P ; dp [ 0 ][ 0 ] = 1 ; rep ( i , 1 , n ){ rep ( j , 0 , i ){ dp [ i ][ j ] = dp [ i -1 ][ j ]; if ( ! j ) continue ; dp [ i ][ j ] = ( dp [ i ][ j ] + ( n - j + 1 ) * dp [ i ][ j -1 ] % P * C ( n - i + ( n - j + 1 ) * ( k -1 ) -1 , k -2 ) % P ) % P ; } } printf ( \"%lld \\n \" , dp [ n ][ n ]); return 0 ; }","title":"F"},{"location":"%E7%AC%94%E8%AE%B0/AGC003%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/","text":"AGC003 \u505a\u9898\u8bb0\u5f55 \u00b6 A \u00b6 \u6bcf\u6b21\u8d70\u8def\u8ddd\u79bb\u81f3\u5c11\u4e3a1\uff0c\u6240\u4ee5\u5357\u5317\u3001\u4e1c\u897f\u5fc5\u987b\u540c\u65f6\u51fa\u73b0\u624d\u80fd\u56de\u5230\u539f\u70b9\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } char s [ 1005 ]; bool a , b , c , d ; int main (){ scanf ( \"%s\" , s + 1 ); for ( int i = 1 ; s [ i ]; ++ i ){ a |= ( s [ i ] == 'S' ); b |= ( s [ i ] == 'N' ); c |= ( s [ i ] == 'E' ); d |= ( s [ i ] == 'W' ); } puts (( a == b && c == d ) ? \"Yes\" : \"No\" ); return 0 ; } B \u00b6 \u8003\u8651\u8d2a\u5fc3\u3002\u6bcf\u79cd\u724c\u53ef\u4ee5\u5148\u81ea\u5df1\u6d88\u8017\uff0c\u5982\u679c\u8fd8\u5269\u4e0b\u4e00\u5f20\u724c\uff0c\u90a3\u4e48\u4e0e\u540e\u9762\u4e00\u79cd\u724c\u914d\u5bf9\u6700\u591a\u4f1a\u8ba9\u540e\u9762\u90a3\u79cd\u724c\u6d6a\u8d39\u4e00\u5f20\uff0c\u8fd9\u6837\u64cd\u4f5c\u6bd4\u7559\u4e0b\u8fd9\u5f20\u724c\u8981\u66f4\u4f18\uff08\u56e0\u4e3a\u8fd9\u5f20\u724c\u5df2\u7ecf\u6ca1\u7528\u4e86\uff09\uff0c\u6309\u8be5\u7b56\u7565\u8d2a\u5fc3\u5373\u53ef\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 ; int n , a [ N ]; ll ans ; int main (){ n = read (); rep ( i , 1 , n ) a [ i ] = read (); rep ( i , 1 , n ){ ans += a [ i ] / 2 ; a [ i ] %= 2 ; if ( a [ i ] && a [ i + 1 ]){ -- a [ i ]; -- a [ i + 1 ]; ++ ans ; } } printf ( \"%lld \\n \" , ans ); return 0 ; } C \u00b6 \u6700\u5c0f\u5316\u64cd\u4f5c\u4e00\u8bf4\u660e\u6211\u4eec\u53ef\u4ee5\u65e0\u9650\u6b21\u4f7f\u7528\u64cd\u4f5c\u4e8c\uff0c\u4e0d\u96be\u53d1\u73b0\u8fd9\u7b49\u4ef7\u4e8e\u4ea4\u6362 \\(a_i,a_{i+2}\\) \u4e24\u4e2a\u5143\u7d20\uff0c\u4e5f\u5c31\u662f\u4ea4\u6362\u76f8\u90bb\u7684\u5947\u6570\u6216\u5076\u6570\u4e0b\u6807\u7684\u5143\u7d20\u3002\u8fd9\u4e9b\u5bf9\u6362\u53ef\u4ee5\u751f\u6210\u6240\u6709\u5947\u6570\u4f4d\u548c\u5076\u6570\u4f4d\u7684\u7f6e\u6362\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5bf9\u4e8e\u6392\u5e8f\u524d\u540e\u7684\u4e0b\u6807\u5947\u5076\u6027\u4e0d\u540c\u7684\u5143\u7d20\u4f7f\u7528\u64cd\u4f5c\u4e00\u5373\u53ef\u3002\u6bcf\u6b21\u64cd\u4f5c\u4e00\u53ef\u4ee5\u51cf\u5c11\u4e24\u4e2a\u8fd9\u6837\u7684\u5143\u7d20\uff0c\u6240\u4ee5\u7b54\u6848\u8981\u9664\u4ee52\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline int read (){ int x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 ; struct node { int v , id ;} a [ N ]; bool cmp ( node a , node b ){ return a . v < b . v ;} int n , ans ; int main (){ n = read (); rep ( i , 1 , n ) a [ i ] = { read (), i }; sort ( a + 1 , a + n + 1 , cmp ); rep ( i , 1 , n ){ if ( i % 2 != a [ i ]. id % 2 ) ans ++ ; } printf ( \"%d \\n \" , ans / 2 ); return 0 ; } D \u00b6 \u6709\u4e00\u8bf4\u4e00\u8fd9\u9898\u6ca1\u5230\u9ed1\u9898\u96be\u5ea6\u5427\uff0c\u7b97\u662f\u6bd4\u8f83\u5e38\u89c4\u7684\u6570\u8bba\u9898\uff08 \u5bf9\u4e8e\u6bcf\u4e2a\u6b63\u6574\u6570 \\(x\\) \u6211\u4eec\u8003\u8651\u4e24\u79cd\u6570\uff0c \\(Pair(x)\\) \u8868\u793a\u4e0e \\(x\\) \u76f8\u4e58\u4e3a\u7acb\u65b9\u6570\u7684\u6700\u5c0f\u6b63\u6574\u6570\uff0c\u800c \\(Norm(x)\\) \u8868\u793a \\(x\\) \u53bb\u6389\u6240\u6709\u7acb\u65b9\u56e0\u5b50\u540e\u7684\u6b63\u6574\u6570\u3002\u53ef\u4ee5\u53d1\u73b0\u4e24\u4e2a\u6570\u5982\u679c\u62e5\u6709\u540c\u6837\u7684 \\(Norm\\) \uff0c\u90a3\u4e48\u4e5f\u4f1a\u6709\u540c\u6837\u7684 \\(Pair\\) \uff0c\u4e5f\u5c31\u662f\u8fd9\u4e24\u4e2a\u6570\u672c\u8d28\u4e0a\u662f\u76f8\u540c\u7684\u3002\u800c\u5982\u679c\u4e00\u4e2a\u6570\u7684 \\(Norm\\) \u662f\u53e6\u4e00\u4e2a\u6570\u7684 \\(Pair\\) \uff0c\u90a3\u4e48\u8fd9\u4e24\u6570\u663e\u7136\u4e0d\u80fd\u540c\u65f6\u9009\u5165\u7b54\u6848\u3002\u4e8e\u662f\u7b54\u6848\u5c31\u662f\u5bf9\u4e8e \\(s[i]\\) \u4e2d\u6240\u6709\u672c\u8d28\u4e0d\u540c\u7684 \\(x\\) \uff0c\u6c42 \\(s[i]\\) \u4e2d\u672c\u8d28\u4e3a \\(Norm(x)\\) \u6216 \\(Pair(x)\\) \u7684\u4e2a\u6570\u7684\u6700\u5927\u503c\u3002 \u4e0b\u9762\u8003\u8651\u5982\u4f55\u6c42\u89e3 \\(Norm(x)\\) \uff0c\u5176\u5b9e\u53ea\u9700\u8981\u7b5b\u6389\u6240\u6709\u7acb\u65b9\u56e0\u5b50\u5c31\u53ef\u4ee5\u4e86\uff0c\u4e5f\u5c31\u662f \\(\\le 10^\\frac{10}{3}\\approx 2160\\) \u7684\u8d28\u6570\u7684\u7acb\u65b9\u3002\u7b5b\u5b8c\u4e4b\u540e\u628a\u8fd9\u4e9b\u8d28\u6570\u5269\u4e0b\u7684\u6b21\u5e42\u4e5f\u4ece \\(x\\) \u4e2d\u7b5b\u6389\uff0c\u5e76\u8d21\u732e\u7ed9 \\(Pair(x)\\) \u3002\u7531\u4e8e\u5269\u4e0b\u7684\u56e0\u5b50\u5927\u4e8e\u539f\u6765 \\(x^\\frac{1}{3}\\) \uff0c\u63a8\u51fa\u6700\u540e\u5269\u4e0b\u7684 \\(x\\) \u53ea\u6709\u51e0\u7c7b\uff1a \\(x\\) \u4e3a\u8d28\u6570 \\(x\\) \u4e3a\u8d28\u6570\u7684\u5e73\u65b9 \\(x\\) \u4e3a\u4e0d\u540c\u8d28\u6570\u7684\u79ef \u5bf9\u4e8e\u7b2c\u4e00\u7c7b\u548c\u7b2c\u4e09\u7c7b\uff0c\u5bb9\u6613\u5f97\u51fa \\(Pair(x)=x^2\\) \u3002\u800c\u5bf9\u4e8e\u7b2c\u4e8c\u7c7b\uff0c \\(Pair(x)=\\sqrt x\\) \u3002\u6700\u540e\u628a\u8fd9\u4e2a\u6570\u52a0\u5165 \\(Norm(x)\\) \u7684\u6876\u91cc\u5373\u53ef\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N\\frac{(MAX s_i)^\\frac13}{\\log MAX s_i})+O(N\\log N)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 10 ; ll n , pri [ N ], tot ; ll a [ N ], b [ N ], ans ; bool vis [ N ]; map < ll , ll > mp ; int main (){ n = read (); rep ( i , 2 , 2160 ){ if ( ! vis [ i ]) pri [ ++ tot ] = i ; for ( int j = 1 ; j <= tot && pri [ j ] * i <= 2160 ; j ++ ){ vis [ i * pri [ j ]] = 1 ; if ( i % pri [ j ] == 0 ) break ; } } rep ( i , 1 , n ){ scanf ( \"%lld\" , & a [ i ]); ll norm = 1 , pair = 1 ; rep ( j , 1 , tot ){ ll cube = pri [ j ] * pri [ j ] * pri [ j ]; while ( a [ i ] % cube == 0 ) a [ i ] /= cube ; } ++ mp [ a [ i ]]; norm = a [ i ]; rep ( j , 1 , tot ){ if ( a [ i ] % pri [ j ] != 0 ) continue ; if ( a [ i ] % ( pri [ j ] * pri [ j ])) pair *= pri [ j ] * pri [ j ]; else pair *= pri [ j ]; while ( a [ i ] % pri [ j ] == 0 ) a [ i ] /= pri [ j ]; } ll sqr = ( ll ) sqrt ( a [ i ]); if ( sqr * sqr != a [ i ]) pair *= a [ i ] * a [ i ]; else pair *= sqr ; a [ i ] = norm ; b [ i ] = pair ; } rep ( i , 1 , n ){ if ( a [ i ] == 1 ) continue ; ans += max ( mp [ a [ i ]], mp [ b [ i ]]); mp [ a [ i ]] = mp [ b [ i ]] = 0 ; } printf ( \"%lld \\n \" , ans +!! mp [ 1 ]); return 0 ; } E \u00b6 \u795e\u4ed9\u9898\u3002 \u9996\u5148\u5982\u679c\u9047\u5230\u4e86 \\(A_{i+1}<A_i\\) \u7684\u60c5\u51b5\uff0c\u90a3\u4e48\u4e0d\u7528\u8003\u8651 \\(A_i\\) \uff08\u56e0\u4e3a\u540e\u8005\u53d6\u4e86\u66f4\u5c0f\u7684\u533a\u95f4\uff09\u3002\u4e8e\u662f\u53ef\u4ee5\u5148\u7528\u5355\u8c03\u6808\u641e\u51fa\u4e00\u4e2a\u5355\u8c03\u9012\u589e\u7684\u5e8f\u5217\uff0c\u8fd9\u4e0e\u539f\u5e8f\u5217\u7684\u64cd\u4f5c\u662f\u7b49\u4ef7\u7684\u3002 \u4e0d\u96be\u53d1\u73b0\u7b2c \\(i\\) \u6b21\u64cd\u4f5c\u7b49\u4ef7\u4e8e\u91cd\u590d\u76ee\u524d\u7684\u5e8f\u5217 \\(\\lfloor\\dfrac{A_i}{A_{i-1}}\\rfloor\\) \u6b21\uff0c\u7136\u540e\u518d\u53d6\u539f\u5e8f\u5217\u957f\u5ea6 \\(d\\equiv A_i\\pmod{A_{i-1}}\\) \u7684\u524d\u7f00\u3002 \u95ee\u9898\u5728\u4e8e\u8fd9\u4e00\u5c0f\u6bb5\u4e0d\u91cd\u590d\u7684\u524d\u7f00\uff0c\u800c\u5b83\u5728\u524d\u9762\u4e5f\u4e00\u5b9a\u662f\u67d0\u4e00\u6bb5 \\(A_j\\) \u7684\u91cd\u590d\u51fa\u73b0\u3002\u6211\u4eec\u53ef\u4ee5\u7528\u7c7b\u4f3c\u7684\u65b9\u6cd5\u5206\u89e3\u8fd9\u6bb5\u524d\u7f00\uff0c\u7531\u4e8e\u5e8f\u5217\u5355\u8c03\u9012\u589e\uff0c\u6211\u4eec\u53ef\u4ee5\u627e\u5230\u6ee1\u8db3 \\(A_j<d,A_{j+1}>d\\) \u7684 \\(j\\) \u5e76\u4e14\u7528\u5b83\u6765\u53d6\u6a21\uff0c\u9012\u5f52\u6c42\u89e3\u5373\u53ef\u3002 \u6ce8\u610f\u5230\u6bcf\u6b21\u53d6\u6a21 \\(d\\) \u81f3\u5c11\u51cf\u5c0f\u4e00\u534a\uff0c\u9012\u5f52\u5230\u5e95\u65f6\u5c31\u662f \\(1\\) \u5230 \\(d\\) \u7684\u524d\u7f00\u5bf9\u7b54\u6848\u7684\u8d21\u732e\uff0c\u53ef\u4ee5\u7528\u5dee\u5206\u5b9e\u73b0\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(n\\log n)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 #include <bits/stdc++.h> #define ll long long using namespace std ; const int N = 1e5 + 5 ; int n , q , len ; ll A [ N ], F [ N ], tim [ N ]; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } void Solve ( ll d , ll w ){ int j = upper_bound ( A + 1 , A + len + 1 , d ) - A -1 ; if ( ! j ) tim [ 1 ] += w , tim [ d + 1 ] -= w ; else F [ j ] += d / A [ j ] * w , Solve ( d % A [ j ], w ); } int main (){ n = read (), q = read (); A [ ++ len ] = n ; while ( q -- ){ ll x = read (); while ( len && A [ len ] >= x ) len -- ; A [ ++ len ] = x ; } F [ len ] = 1 ; for ( int i = len ; i >= 2 ; i -- ) F [ i -1 ] += A [ i ] / A [ i -1 ] * F [ i ], Solve ( A [ i ] % A [ i -1 ], F [ i ]); tim [ 1 ] += F [ 1 ]; tim [ A [ 1 ] + 1 ] -= F [ 1 ]; for ( int i = 1 ; i <= n ; i ++ ) printf ( \"%lld \\n \" , tim [ i ] += tim [ i -1 ]); } F \u00b6 \u9996\u5148\u770b\u7b80\u5355\u60c5\u5f62\uff1a \u5f53\u8fd9\u4e2a\u56fe\u5f62\u4e0a\u4e0b\uff0c\u5de6\u53f3\u62fc\u63a5\u90fd\u662f\u8fde\u901a\u5757\uff0c\u90a3\u4e48\u603b\u8fde\u901a\u5757\u6570\u4e3a \\(1\\) \u3002 \u5f53\u8fd9\u4e2a\u56fe\u5f62\u4e0a\u4e0b\uff0c\u5de6\u53f3\u62fc\u63a5\u90fd\u4e0d\u662f\u8fde\u901a\u5757\uff0c\u90a3\u4e48\u603b\u8fde\u901a\u5757\u6570\u4e3a \\(cnt^{K-1}\\) \uff0c\u5176\u4e2d \\(cnt\\) \u4e3a\u9ed1\u683c\u6570\u91cf\u3002 \u552f\u4e00\u7684\u95ee\u9898\u5c31\u662f\u8fd9\u4e2a\u56fe\u5f62\u4e0a\u4e0b\u548c\u5de6\u53f3\u62fc\u63a5\u53ea\u6709\u4e00\u4e2a\u662f\u8fde\u901a\u5757\u7684\u60c5\u51b5\u3002\u4e0d\u59a8\u8bbe\u5de6\u53f3\u8fde\u901a\u3002 \\(1\\) \u7ea7\u5206\u5f62\u7684\u6570\u91cf\u5f88\u597d\u7b97\u800c\u4e14\u662f\u8fde\u901a\u5757\uff0c\u800c\u6211\u4eec\u53c8\u77e5\u9053\u8fde\u901a\u5757\u6570=\u9ed1\u70b9\u4e2a\u6570 - \u8fb9\u6570\uff0c\u53ea\u7528\u8003\u8651\u5982\u4f55\u7edf\u8ba1\u8fb9\u6570\u3002\u800c\u4e0a\u4e0b\u4e0d\u8fde\u901a\uff0c\u6240\u4ee5\u7b54\u6848\u5c31\u662f \\(K-1\\) \u7ea7\u5206\u5f62\u4e2d \u9ed1\u70b9\u4e2a\u6570 - \u5de6\u53f3\u76f8\u90bb\u9ed1\u683c\u7684\u5bf9\u6570\u3002 \u8bbe\u539f\u56fe\u5de6\u53f3\u76f8\u90bb\u5bf9\u6570\u6709 \\(a\\) \u4e2a\uff0c\u5de6\u53f3\u8fde\u901a\u7684\u884c\u6570\u4e3a \\(b\\) \u3002\u90a3\u4e48 \\(K\\) \u7ea7\u5206\u5f62\u7684\u5de6\u53f3\u8fde\u901a\u884c\u6570\u4e3a \\(K-1\\) \u5206\u5f62\u7684\u5de6\u53f3\u8fde\u901a\u884c\u6570 \\(\\times b\\) \u3002 \\(K\\) \u7ea7\u5206\u5f62\u7684\u76f8\u90bb\u5bf9\u6570\u5c31\u662f\u4e0a\u7ea7\u5206\u5f62\u7684\u76f8\u90bb\u5bf9\u6570 \\(\\times b\\) \u52a0\u4e0a\u9ed1\u683c\u6570\u91cf \\(\\times a\\) \uff08\u9ed1\u683c\u66ff\u6362\u4e3a\u539f\u7f51\u683c\u56fe\uff09\u3002 \u8fd9\u4e2a\u9012\u63a8\u7b49\u4ef7\u4e8e\u7528\u77e9\u9635\u5feb\u901f\u5e42\u6c42 \\(A=\\begin{bmatrix} cnt &a \\\\ 0&b \\end{bmatrix}^{K-1}\\) \uff0c\u7b54\u6848\u4e3a \\(A_{11}-A_{12}\\) \u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int P = 1e9 + 7 ; int n , m , cnt , s1 , s2 , flag1 , flag2 ; ll k ; char s [ 1005 ][ 1005 ]; ll fpow ( ll x , ll y ){ ll res = 1 ; while ( y ){ if ( y & 1 ) res = res * x % P ; y >>= 1 ; x = x * x % P ; } return res ; } struct Matrix { ll a [ 3 ][ 3 ]; Matrix (){ memset ( a , 0 , sizeof ( a ));} Matrix operator * ( const Matrix & M ){ Matrix ans ; rep ( i , 1 , 2 ) rep ( j , 1 , 2 ) rep ( k , 1 , 2 ) ans . a [ i ][ j ] = ( ans . a [ i ][ j ] + a [ i ][ k ] * M . a [ k ][ j ] % P ) % P ; return ans ; } } A , ans ; int main (){ n = read (), m = read (), k = read () -1 ; rep ( i , 1 , n ) scanf ( \"%s\" , s [ i ] + 1 ); rep ( i , 1 , n ){ rep ( j , 1 , m ){ if ( s [ i ][ j ] == '#' ){ ++ cnt ; s1 += s [ i ][ j -1 ] == '#' ; s2 += s [ i -1 ][ j ] == '#' ; } } if ( s [ i ][ 1 ] == '#' && s [ i ][ m ] == '#' ) ++ flag1 ; } rep ( i , 1 , m ) if ( s [ 1 ][ i ] == '#' && s [ n ][ i ] == '#' ) ++ flag2 ; if ( flag1 && flag2 ) return puts ( \"1\" ), 0 ; if ( ! flag1 &&! flag2 ){ printf ( \"%lld \\n \" , fpow ( cnt , k )); return 0 ; } if ( ! flag1 ) swap ( flag1 , flag2 ), swap ( s1 , s2 ); A . a [ 1 ][ 1 ] = cnt , A . a [ 1 ][ 2 ] = s1 , A . a [ 2 ][ 2 ] = flag1 ; ans . a [ 1 ][ 1 ] = 1 , ans . a [ 2 ][ 2 ] = 1 ; while ( k ){ if ( k & 1 ) ans = ans * A ; k >>= 1 ; A = A * A ; } printf ( \"%lld \\n \" ,( ans . a [ 1 ][ 1 ] - ans . a [ 1 ][ 2 ] + P ) % P ); return 0 ; }","title":"AGC003 \u505a\u9898\u8bb0\u5f55"},{"location":"%E7%AC%94%E8%AE%B0/AGC003%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#agc003","text":"","title":"AGC003 \u505a\u9898\u8bb0\u5f55"},{"location":"%E7%AC%94%E8%AE%B0/AGC003%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#a","text":"\u6bcf\u6b21\u8d70\u8def\u8ddd\u79bb\u81f3\u5c11\u4e3a1\uff0c\u6240\u4ee5\u5357\u5317\u3001\u4e1c\u897f\u5fc5\u987b\u540c\u65f6\u51fa\u73b0\u624d\u80fd\u56de\u5230\u539f\u70b9\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } char s [ 1005 ]; bool a , b , c , d ; int main (){ scanf ( \"%s\" , s + 1 ); for ( int i = 1 ; s [ i ]; ++ i ){ a |= ( s [ i ] == 'S' ); b |= ( s [ i ] == 'N' ); c |= ( s [ i ] == 'E' ); d |= ( s [ i ] == 'W' ); } puts (( a == b && c == d ) ? \"Yes\" : \"No\" ); return 0 ; }","title":"A"},{"location":"%E7%AC%94%E8%AE%B0/AGC003%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#b","text":"\u8003\u8651\u8d2a\u5fc3\u3002\u6bcf\u79cd\u724c\u53ef\u4ee5\u5148\u81ea\u5df1\u6d88\u8017\uff0c\u5982\u679c\u8fd8\u5269\u4e0b\u4e00\u5f20\u724c\uff0c\u90a3\u4e48\u4e0e\u540e\u9762\u4e00\u79cd\u724c\u914d\u5bf9\u6700\u591a\u4f1a\u8ba9\u540e\u9762\u90a3\u79cd\u724c\u6d6a\u8d39\u4e00\u5f20\uff0c\u8fd9\u6837\u64cd\u4f5c\u6bd4\u7559\u4e0b\u8fd9\u5f20\u724c\u8981\u66f4\u4f18\uff08\u56e0\u4e3a\u8fd9\u5f20\u724c\u5df2\u7ecf\u6ca1\u7528\u4e86\uff09\uff0c\u6309\u8be5\u7b56\u7565\u8d2a\u5fc3\u5373\u53ef\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 ; int n , a [ N ]; ll ans ; int main (){ n = read (); rep ( i , 1 , n ) a [ i ] = read (); rep ( i , 1 , n ){ ans += a [ i ] / 2 ; a [ i ] %= 2 ; if ( a [ i ] && a [ i + 1 ]){ -- a [ i ]; -- a [ i + 1 ]; ++ ans ; } } printf ( \"%lld \\n \" , ans ); return 0 ; }","title":"B"},{"location":"%E7%AC%94%E8%AE%B0/AGC003%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#c","text":"\u6700\u5c0f\u5316\u64cd\u4f5c\u4e00\u8bf4\u660e\u6211\u4eec\u53ef\u4ee5\u65e0\u9650\u6b21\u4f7f\u7528\u64cd\u4f5c\u4e8c\uff0c\u4e0d\u96be\u53d1\u73b0\u8fd9\u7b49\u4ef7\u4e8e\u4ea4\u6362 \\(a_i,a_{i+2}\\) \u4e24\u4e2a\u5143\u7d20\uff0c\u4e5f\u5c31\u662f\u4ea4\u6362\u76f8\u90bb\u7684\u5947\u6570\u6216\u5076\u6570\u4e0b\u6807\u7684\u5143\u7d20\u3002\u8fd9\u4e9b\u5bf9\u6362\u53ef\u4ee5\u751f\u6210\u6240\u6709\u5947\u6570\u4f4d\u548c\u5076\u6570\u4f4d\u7684\u7f6e\u6362\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5bf9\u4e8e\u6392\u5e8f\u524d\u540e\u7684\u4e0b\u6807\u5947\u5076\u6027\u4e0d\u540c\u7684\u5143\u7d20\u4f7f\u7528\u64cd\u4f5c\u4e00\u5373\u53ef\u3002\u6bcf\u6b21\u64cd\u4f5c\u4e00\u53ef\u4ee5\u51cf\u5c11\u4e24\u4e2a\u8fd9\u6837\u7684\u5143\u7d20\uff0c\u6240\u4ee5\u7b54\u6848\u8981\u9664\u4ee52\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline int read (){ int x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 ; struct node { int v , id ;} a [ N ]; bool cmp ( node a , node b ){ return a . v < b . v ;} int n , ans ; int main (){ n = read (); rep ( i , 1 , n ) a [ i ] = { read (), i }; sort ( a + 1 , a + n + 1 , cmp ); rep ( i , 1 , n ){ if ( i % 2 != a [ i ]. id % 2 ) ans ++ ; } printf ( \"%d \\n \" , ans / 2 ); return 0 ; }","title":"C"},{"location":"%E7%AC%94%E8%AE%B0/AGC003%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#d","text":"\u6709\u4e00\u8bf4\u4e00\u8fd9\u9898\u6ca1\u5230\u9ed1\u9898\u96be\u5ea6\u5427\uff0c\u7b97\u662f\u6bd4\u8f83\u5e38\u89c4\u7684\u6570\u8bba\u9898\uff08 \u5bf9\u4e8e\u6bcf\u4e2a\u6b63\u6574\u6570 \\(x\\) \u6211\u4eec\u8003\u8651\u4e24\u79cd\u6570\uff0c \\(Pair(x)\\) \u8868\u793a\u4e0e \\(x\\) \u76f8\u4e58\u4e3a\u7acb\u65b9\u6570\u7684\u6700\u5c0f\u6b63\u6574\u6570\uff0c\u800c \\(Norm(x)\\) \u8868\u793a \\(x\\) \u53bb\u6389\u6240\u6709\u7acb\u65b9\u56e0\u5b50\u540e\u7684\u6b63\u6574\u6570\u3002\u53ef\u4ee5\u53d1\u73b0\u4e24\u4e2a\u6570\u5982\u679c\u62e5\u6709\u540c\u6837\u7684 \\(Norm\\) \uff0c\u90a3\u4e48\u4e5f\u4f1a\u6709\u540c\u6837\u7684 \\(Pair\\) \uff0c\u4e5f\u5c31\u662f\u8fd9\u4e24\u4e2a\u6570\u672c\u8d28\u4e0a\u662f\u76f8\u540c\u7684\u3002\u800c\u5982\u679c\u4e00\u4e2a\u6570\u7684 \\(Norm\\) \u662f\u53e6\u4e00\u4e2a\u6570\u7684 \\(Pair\\) \uff0c\u90a3\u4e48\u8fd9\u4e24\u6570\u663e\u7136\u4e0d\u80fd\u540c\u65f6\u9009\u5165\u7b54\u6848\u3002\u4e8e\u662f\u7b54\u6848\u5c31\u662f\u5bf9\u4e8e \\(s[i]\\) \u4e2d\u6240\u6709\u672c\u8d28\u4e0d\u540c\u7684 \\(x\\) \uff0c\u6c42 \\(s[i]\\) \u4e2d\u672c\u8d28\u4e3a \\(Norm(x)\\) \u6216 \\(Pair(x)\\) \u7684\u4e2a\u6570\u7684\u6700\u5927\u503c\u3002 \u4e0b\u9762\u8003\u8651\u5982\u4f55\u6c42\u89e3 \\(Norm(x)\\) \uff0c\u5176\u5b9e\u53ea\u9700\u8981\u7b5b\u6389\u6240\u6709\u7acb\u65b9\u56e0\u5b50\u5c31\u53ef\u4ee5\u4e86\uff0c\u4e5f\u5c31\u662f \\(\\le 10^\\frac{10}{3}\\approx 2160\\) \u7684\u8d28\u6570\u7684\u7acb\u65b9\u3002\u7b5b\u5b8c\u4e4b\u540e\u628a\u8fd9\u4e9b\u8d28\u6570\u5269\u4e0b\u7684\u6b21\u5e42\u4e5f\u4ece \\(x\\) \u4e2d\u7b5b\u6389\uff0c\u5e76\u8d21\u732e\u7ed9 \\(Pair(x)\\) \u3002\u7531\u4e8e\u5269\u4e0b\u7684\u56e0\u5b50\u5927\u4e8e\u539f\u6765 \\(x^\\frac{1}{3}\\) \uff0c\u63a8\u51fa\u6700\u540e\u5269\u4e0b\u7684 \\(x\\) \u53ea\u6709\u51e0\u7c7b\uff1a \\(x\\) \u4e3a\u8d28\u6570 \\(x\\) \u4e3a\u8d28\u6570\u7684\u5e73\u65b9 \\(x\\) \u4e3a\u4e0d\u540c\u8d28\u6570\u7684\u79ef \u5bf9\u4e8e\u7b2c\u4e00\u7c7b\u548c\u7b2c\u4e09\u7c7b\uff0c\u5bb9\u6613\u5f97\u51fa \\(Pair(x)=x^2\\) \u3002\u800c\u5bf9\u4e8e\u7b2c\u4e8c\u7c7b\uff0c \\(Pair(x)=\\sqrt x\\) \u3002\u6700\u540e\u628a\u8fd9\u4e2a\u6570\u52a0\u5165 \\(Norm(x)\\) \u7684\u6876\u91cc\u5373\u53ef\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N\\frac{(MAX s_i)^\\frac13}{\\log MAX s_i})+O(N\\log N)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 10 ; ll n , pri [ N ], tot ; ll a [ N ], b [ N ], ans ; bool vis [ N ]; map < ll , ll > mp ; int main (){ n = read (); rep ( i , 2 , 2160 ){ if ( ! vis [ i ]) pri [ ++ tot ] = i ; for ( int j = 1 ; j <= tot && pri [ j ] * i <= 2160 ; j ++ ){ vis [ i * pri [ j ]] = 1 ; if ( i % pri [ j ] == 0 ) break ; } } rep ( i , 1 , n ){ scanf ( \"%lld\" , & a [ i ]); ll norm = 1 , pair = 1 ; rep ( j , 1 , tot ){ ll cube = pri [ j ] * pri [ j ] * pri [ j ]; while ( a [ i ] % cube == 0 ) a [ i ] /= cube ; } ++ mp [ a [ i ]]; norm = a [ i ]; rep ( j , 1 , tot ){ if ( a [ i ] % pri [ j ] != 0 ) continue ; if ( a [ i ] % ( pri [ j ] * pri [ j ])) pair *= pri [ j ] * pri [ j ]; else pair *= pri [ j ]; while ( a [ i ] % pri [ j ] == 0 ) a [ i ] /= pri [ j ]; } ll sqr = ( ll ) sqrt ( a [ i ]); if ( sqr * sqr != a [ i ]) pair *= a [ i ] * a [ i ]; else pair *= sqr ; a [ i ] = norm ; b [ i ] = pair ; } rep ( i , 1 , n ){ if ( a [ i ] == 1 ) continue ; ans += max ( mp [ a [ i ]], mp [ b [ i ]]); mp [ a [ i ]] = mp [ b [ i ]] = 0 ; } printf ( \"%lld \\n \" , ans +!! mp [ 1 ]); return 0 ; }","title":"D"},{"location":"%E7%AC%94%E8%AE%B0/AGC003%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#e","text":"\u795e\u4ed9\u9898\u3002 \u9996\u5148\u5982\u679c\u9047\u5230\u4e86 \\(A_{i+1}<A_i\\) \u7684\u60c5\u51b5\uff0c\u90a3\u4e48\u4e0d\u7528\u8003\u8651 \\(A_i\\) \uff08\u56e0\u4e3a\u540e\u8005\u53d6\u4e86\u66f4\u5c0f\u7684\u533a\u95f4\uff09\u3002\u4e8e\u662f\u53ef\u4ee5\u5148\u7528\u5355\u8c03\u6808\u641e\u51fa\u4e00\u4e2a\u5355\u8c03\u9012\u589e\u7684\u5e8f\u5217\uff0c\u8fd9\u4e0e\u539f\u5e8f\u5217\u7684\u64cd\u4f5c\u662f\u7b49\u4ef7\u7684\u3002 \u4e0d\u96be\u53d1\u73b0\u7b2c \\(i\\) \u6b21\u64cd\u4f5c\u7b49\u4ef7\u4e8e\u91cd\u590d\u76ee\u524d\u7684\u5e8f\u5217 \\(\\lfloor\\dfrac{A_i}{A_{i-1}}\\rfloor\\) \u6b21\uff0c\u7136\u540e\u518d\u53d6\u539f\u5e8f\u5217\u957f\u5ea6 \\(d\\equiv A_i\\pmod{A_{i-1}}\\) \u7684\u524d\u7f00\u3002 \u95ee\u9898\u5728\u4e8e\u8fd9\u4e00\u5c0f\u6bb5\u4e0d\u91cd\u590d\u7684\u524d\u7f00\uff0c\u800c\u5b83\u5728\u524d\u9762\u4e5f\u4e00\u5b9a\u662f\u67d0\u4e00\u6bb5 \\(A_j\\) \u7684\u91cd\u590d\u51fa\u73b0\u3002\u6211\u4eec\u53ef\u4ee5\u7528\u7c7b\u4f3c\u7684\u65b9\u6cd5\u5206\u89e3\u8fd9\u6bb5\u524d\u7f00\uff0c\u7531\u4e8e\u5e8f\u5217\u5355\u8c03\u9012\u589e\uff0c\u6211\u4eec\u53ef\u4ee5\u627e\u5230\u6ee1\u8db3 \\(A_j<d,A_{j+1}>d\\) \u7684 \\(j\\) \u5e76\u4e14\u7528\u5b83\u6765\u53d6\u6a21\uff0c\u9012\u5f52\u6c42\u89e3\u5373\u53ef\u3002 \u6ce8\u610f\u5230\u6bcf\u6b21\u53d6\u6a21 \\(d\\) \u81f3\u5c11\u51cf\u5c0f\u4e00\u534a\uff0c\u9012\u5f52\u5230\u5e95\u65f6\u5c31\u662f \\(1\\) \u5230 \\(d\\) \u7684\u524d\u7f00\u5bf9\u7b54\u6848\u7684\u8d21\u732e\uff0c\u53ef\u4ee5\u7528\u5dee\u5206\u5b9e\u73b0\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(n\\log n)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 #include <bits/stdc++.h> #define ll long long using namespace std ; const int N = 1e5 + 5 ; int n , q , len ; ll A [ N ], F [ N ], tim [ N ]; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } void Solve ( ll d , ll w ){ int j = upper_bound ( A + 1 , A + len + 1 , d ) - A -1 ; if ( ! j ) tim [ 1 ] += w , tim [ d + 1 ] -= w ; else F [ j ] += d / A [ j ] * w , Solve ( d % A [ j ], w ); } int main (){ n = read (), q = read (); A [ ++ len ] = n ; while ( q -- ){ ll x = read (); while ( len && A [ len ] >= x ) len -- ; A [ ++ len ] = x ; } F [ len ] = 1 ; for ( int i = len ; i >= 2 ; i -- ) F [ i -1 ] += A [ i ] / A [ i -1 ] * F [ i ], Solve ( A [ i ] % A [ i -1 ], F [ i ]); tim [ 1 ] += F [ 1 ]; tim [ A [ 1 ] + 1 ] -= F [ 1 ]; for ( int i = 1 ; i <= n ; i ++ ) printf ( \"%lld \\n \" , tim [ i ] += tim [ i -1 ]); }","title":"E"},{"location":"%E7%AC%94%E8%AE%B0/AGC003%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#f","text":"\u9996\u5148\u770b\u7b80\u5355\u60c5\u5f62\uff1a \u5f53\u8fd9\u4e2a\u56fe\u5f62\u4e0a\u4e0b\uff0c\u5de6\u53f3\u62fc\u63a5\u90fd\u662f\u8fde\u901a\u5757\uff0c\u90a3\u4e48\u603b\u8fde\u901a\u5757\u6570\u4e3a \\(1\\) \u3002 \u5f53\u8fd9\u4e2a\u56fe\u5f62\u4e0a\u4e0b\uff0c\u5de6\u53f3\u62fc\u63a5\u90fd\u4e0d\u662f\u8fde\u901a\u5757\uff0c\u90a3\u4e48\u603b\u8fde\u901a\u5757\u6570\u4e3a \\(cnt^{K-1}\\) \uff0c\u5176\u4e2d \\(cnt\\) \u4e3a\u9ed1\u683c\u6570\u91cf\u3002 \u552f\u4e00\u7684\u95ee\u9898\u5c31\u662f\u8fd9\u4e2a\u56fe\u5f62\u4e0a\u4e0b\u548c\u5de6\u53f3\u62fc\u63a5\u53ea\u6709\u4e00\u4e2a\u662f\u8fde\u901a\u5757\u7684\u60c5\u51b5\u3002\u4e0d\u59a8\u8bbe\u5de6\u53f3\u8fde\u901a\u3002 \\(1\\) \u7ea7\u5206\u5f62\u7684\u6570\u91cf\u5f88\u597d\u7b97\u800c\u4e14\u662f\u8fde\u901a\u5757\uff0c\u800c\u6211\u4eec\u53c8\u77e5\u9053\u8fde\u901a\u5757\u6570=\u9ed1\u70b9\u4e2a\u6570 - \u8fb9\u6570\uff0c\u53ea\u7528\u8003\u8651\u5982\u4f55\u7edf\u8ba1\u8fb9\u6570\u3002\u800c\u4e0a\u4e0b\u4e0d\u8fde\u901a\uff0c\u6240\u4ee5\u7b54\u6848\u5c31\u662f \\(K-1\\) \u7ea7\u5206\u5f62\u4e2d \u9ed1\u70b9\u4e2a\u6570 - \u5de6\u53f3\u76f8\u90bb\u9ed1\u683c\u7684\u5bf9\u6570\u3002 \u8bbe\u539f\u56fe\u5de6\u53f3\u76f8\u90bb\u5bf9\u6570\u6709 \\(a\\) \u4e2a\uff0c\u5de6\u53f3\u8fde\u901a\u7684\u884c\u6570\u4e3a \\(b\\) \u3002\u90a3\u4e48 \\(K\\) \u7ea7\u5206\u5f62\u7684\u5de6\u53f3\u8fde\u901a\u884c\u6570\u4e3a \\(K-1\\) \u5206\u5f62\u7684\u5de6\u53f3\u8fde\u901a\u884c\u6570 \\(\\times b\\) \u3002 \\(K\\) \u7ea7\u5206\u5f62\u7684\u76f8\u90bb\u5bf9\u6570\u5c31\u662f\u4e0a\u7ea7\u5206\u5f62\u7684\u76f8\u90bb\u5bf9\u6570 \\(\\times b\\) \u52a0\u4e0a\u9ed1\u683c\u6570\u91cf \\(\\times a\\) \uff08\u9ed1\u683c\u66ff\u6362\u4e3a\u539f\u7f51\u683c\u56fe\uff09\u3002 \u8fd9\u4e2a\u9012\u63a8\u7b49\u4ef7\u4e8e\u7528\u77e9\u9635\u5feb\u901f\u5e42\u6c42 \\(A=\\begin{bmatrix} cnt &a \\\\ 0&b \\end{bmatrix}^{K-1}\\) \uff0c\u7b54\u6848\u4e3a \\(A_{11}-A_{12}\\) \u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int P = 1e9 + 7 ; int n , m , cnt , s1 , s2 , flag1 , flag2 ; ll k ; char s [ 1005 ][ 1005 ]; ll fpow ( ll x , ll y ){ ll res = 1 ; while ( y ){ if ( y & 1 ) res = res * x % P ; y >>= 1 ; x = x * x % P ; } return res ; } struct Matrix { ll a [ 3 ][ 3 ]; Matrix (){ memset ( a , 0 , sizeof ( a ));} Matrix operator * ( const Matrix & M ){ Matrix ans ; rep ( i , 1 , 2 ) rep ( j , 1 , 2 ) rep ( k , 1 , 2 ) ans . a [ i ][ j ] = ( ans . a [ i ][ j ] + a [ i ][ k ] * M . a [ k ][ j ] % P ) % P ; return ans ; } } A , ans ; int main (){ n = read (), m = read (), k = read () -1 ; rep ( i , 1 , n ) scanf ( \"%s\" , s [ i ] + 1 ); rep ( i , 1 , n ){ rep ( j , 1 , m ){ if ( s [ i ][ j ] == '#' ){ ++ cnt ; s1 += s [ i ][ j -1 ] == '#' ; s2 += s [ i -1 ][ j ] == '#' ; } } if ( s [ i ][ 1 ] == '#' && s [ i ][ m ] == '#' ) ++ flag1 ; } rep ( i , 1 , m ) if ( s [ 1 ][ i ] == '#' && s [ n ][ i ] == '#' ) ++ flag2 ; if ( flag1 && flag2 ) return puts ( \"1\" ), 0 ; if ( ! flag1 &&! flag2 ){ printf ( \"%lld \\n \" , fpow ( cnt , k )); return 0 ; } if ( ! flag1 ) swap ( flag1 , flag2 ), swap ( s1 , s2 ); A . a [ 1 ][ 1 ] = cnt , A . a [ 1 ][ 2 ] = s1 , A . a [ 2 ][ 2 ] = flag1 ; ans . a [ 1 ][ 1 ] = 1 , ans . a [ 2 ][ 2 ] = 1 ; while ( k ){ if ( k & 1 ) ans = ans * A ; k >>= 1 ; A = A * A ; } printf ( \"%lld \\n \" ,( ans . a [ 1 ][ 1 ] - ans . a [ 1 ][ 2 ] + P ) % P ); return 0 ; }","title":"F"},{"location":"%E7%AC%94%E8%AE%B0/AGC004%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/","text":"A \u00b6 \u8fb9\u957f\u4e2d\u6709\u5076\u6570\u5c31\u53ef\u4ee5\u5e73\u5206\u8f93\u51fa \\(0\\) \uff0c\u5426\u5219\u8f93\u51fa\u6700\u5c0f\u7684\u4e00\u9762\u7684\u65b9\u5757\u6570\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } int main (){ ll a = read (), b = read (), c = read (); if ( a & 1 && b & 1 && c & 1 ){ printf ( \"%lld \\n \" , min ( a * min ( b , c ), b * c )); } else puts ( \"0\" ); return 0 ; } B \u00b6 \u5999\u8d2a\u5fc3\uff08. \u5047\u8bbe\u6211\u4eec\u541f\u5531\u4e86 \\(k\\) \u6b21\u9b54\u6cd5\u540e\u5b8c\u6210\u6536\u96c6\uff0c\u90a3\u4e48 \\(i\\) \u8272\u53f2\u83b1\u59c6\u6709\u53ef\u80fd\u4e3a \\([i-k,i]\\) \uff08\u4e0b\u6807\u5bf9 \\(N\\) \u53d6\u6a21\uff09\u7684\u4efb\u610f\u4e00\u4e2a\u53f2\u83b1\u59c6\u53d8\u5316\u800c\u6765\uff0c\u6700\u5c0f\u4ee3\u4ef7\u5373\u4e3a\u533a\u95f4\u4e2d \\(a_j\\) \u7684\u6700\u5c0f\u503c\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N^2)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e3 + 5 ; ll n , x , a [ N ], M [ N ][ N ]; ll ans ; int main (){ n = read (), x = read (); rep ( i , 1 , n ) M [ i ][ i ] = a [ i ] = read (); rep ( i , 1 , n ) rep ( j , i + 1 , n ){ M [ i ][ j ] = min ( M [ i ][ j -1 ], a [ j ]); } ans = 9e18 ; rep ( i , 0 , n ){ ll cost = i * x ; rep ( j , 1 , n ){ int last = j - i ; if ( last <= 0 ) cost += min ( M [ last + n ][ n ], M [ 1 ][ j ]); else cost += M [ last ][ j ]; } ans = min ( ans , cost ); } printf ( \"%lld \\n \" , ans ); return 0 ; } C \u00b6 \u6784\u9020\u9898\u901a\u5e38\u9700\u8981\u7528\u4e0a\u7ed9\u5b9a\u7684\u7384\u5b66\u6761\u4ef6\u3002\u6bd4\u5982\u8fd9\u9053\u9898\u4e2d\u7684\u300c\u4fdd\u8bc1\u8fb9\u754c\u4e0a\u4e0d\u4f1a\u88ab\u6d82\u8272\u300d\u3002\u56e0\u4e3a\u6211\u4eec\u60f3\u627e\u901a\u89e3\uff0c\u5e76\u4e0d\u80fd\u4f9d\u8d56\u4e8e\u7d2b\u8272\u683c\u5b50\u7684\u4f4d\u7f6e\u3002\u6240\u4ee5\u60f3\u5230\u5148\u6784\u9020\u6ca1\u6709\u4ea4\u96c6\u7684\u7ea2\u8272\u548c\u84dd\u8272\u683c\u5b50\uff0c\u5e76\u4e14\u8981\u4fdd\u8bc1\u56db\u8fde\u901a\u4e14\u4e0e\u7d2b\u8272\u683c\u5b50\u8fde\u901a\u3002\u6700\u4e0a\u9762\u4e00\u884c\u548c\u6240\u6709\u5947\u6570\u5217\u586b\u7ea2\u8272\uff0c\u6700\u4e0b\u9762\u4e00\u884c\u548c\u6240\u6709\u5076\u6570\u5217\u586b\u84dd\u8272\uff08\u50cf\u4e24\u628a\u68b3\u5b50\u4e0a\u4e0b\u5361\u5728\u4e00\u8d77\uff09\u3002\u8fd9\u79cd\u6784\u9020\u663e\u7136\u6ee1\u8db3\u56db\u8fde\u901a\uff0c\u6700\u540e\u53d6\u989c\u8272\u96c6\u5408\u4e0e\u7d2b\u8272\u683c\u5b50\u7684\u5e76\u96c6\u5373\u53ef\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } int n , m ; char s [ 505 ][ 505 ]; int main (){ n = read (), m = read (); rep ( i , 1 , n ) scanf ( \"%s\" , s [ i ] + 1 ); rep ( i , 1 , n ){ rep ( j , 1 , m ){ if ( i == n ) printf ( \".\" ); else if ( i == 1 || j & 1 || s [ i ][ j ] == '#' ) printf ( \"#\" ); else printf ( \".\" ); } puts ( \"\" ); } puts ( \"\" ); rep ( i , 1 , n ){ rep ( j , 1 , m ){ if ( i == 1 ) printf ( \".\" ); else if ( i == n || j % 2 == 0 || s [ i ][ j ] == '#' ) printf ( \"#\" ); else printf ( \".\" ); } puts ( \"\" ); } return 0 ; } D \u00b6 \u7ed9\u4e86\u4e00\u4e2a\u57fa\u73af\u5185\u5411\u6811\uff0c\u5e76\u4e14\u4fdd\u8bc1 \\(1\\) \u53f7\u8282\u70b9\u5728\u73af\u4e0a\u3002\u5982\u679c\u73af\u957f\u4e0d\u4e3a \\(1\\) \uff08\u5373\u4e0d\u662f \\(1\\) \u53f7\u8282\u70b9\u7684\u81ea\u73af\uff09\uff0c\u90a3\u4e48\u4e0d\u96be\u53d1\u73b0\u73af\u4e0a\u7684\u70b9\u5230\u8fbe \\(1\\) \u53f7\u70b9\u7684\u6b21\u6570\u65e0\u6cd5\u90fd\u6070\u597d\u4e3a \\(K\\) \u3002\u4e8e\u662f\u5fc5\u987b\u65ad\u6389\u539f\u8fb9\u6539\u6210\u81ea\u73af\u3002 \u5269\u4e0b \\(N-1\\) \u6761\u8fb9\u6784\u6210\u4e00\u68f5\u6811\uff0c\u6211\u4eec\u60f3\u9009\u4e00\u4e9b\u8fb9\u628a\u5b83\u8fde\u5411 \\(1\\) \uff0c\u8fd9\u4e2a\u64cd\u4f5c\u4f1a\u628a\u539f\u6811\u5206\u6210\u51e0\u9897\u6811\uff0c\u4e14\u8981\u6ee1\u8db3\u6df1\u5ea6\u4e0d\u8d85\u8fc7 \\(K-1\\) \u3002\u6ce8\u610f\u5230\u8ddd\u79bb\u4e0d\u5230 \\(K\\) \u7684\u8282\u70b9\u53ef\u4ee5\u63d0\u524d\u5230\u8fbe \\(1\\) \u4e4b\u540e\u7ed5\u81ea\u73af\u8dd1\uff0c\u6ee1\u8db3\u8981\u6c42\u3002\u8d2a\u5fc3\u7edf\u8ba1\u7b54\u6848\u5373\u53ef\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 ; int n , k , ans , a [ N ]; vector < int > G [ N ]; int dfs ( int u , int dep ){ int ret = dep ; //\u5f53\u524d\u6df1\u5ea6 for ( int v : G [ u ]){ ret = max ( ret , dfs ( v , dep + 1 )); //\u5b50\u6811\u4e2d\u8282\u70b9\u6700\u6df1\u7684\u6df1\u5ea6 } if ( a [ u ] != 1 && ret - dep == k -1 ) return ++ ans , 0 ; //\u5982\u679c\u4e3ak-1\u5219\u65ad\u8fb9\u5e76\u4e14\u65b0\u6df1\u5ea6\u4e3a0 return ret ; } int main (){ n = read (), k = read (); rep ( i , 1 , n ) a [ i ] = read (); if ( a [ 1 ] != 1 ) ans = a [ 1 ] = 1 ; rep ( i , 2 , n ) G [ a [ i ]]. push_back ( i ); dfs ( 1 , 0 ); printf ( \"%d \\n \" , ans ); return 0 ; } E \u00b6 dp\u795e\u9898\u3002 \u9996\u5148\u89c2\u5bdf\u5230\u51fa\u53e3\u5728\u68cb\u76d8\u4e0a\u7684\u76f8\u5bf9\u4f4d\u7f6e\u4e0d\u53d8\uff0c\u4e0d\u59a8\u628a\u673a\u5668\u4eba\u7684\u8fd0\u52a8\u8f6c\u5316\u6210\u51fa\u53e3\u5e26\u7740\u68cb\u76d8\u7684\u8fd0\u52a8\uff0c\u6389\u4e0b\u68cb\u76d8\u7684\u68cb\u5b50\u5c31\u6ca1\u4e86\u3002\u4e0d\u59a8\u89c2\u5bdf\u4e00\u4e0b\u51fa\u53e3\u7b2c\u4e00\u6b21\u79fb\u52a8\u5e26\u6765\u7684\u5f71\u54cd\uff0c\u5411\u4e0a\u8d70\u4e00\u6b65\u4f1a\u628a\u6700\u4e0b\u9762\u4e00\u884c\u7684\u673a\u5668\u4eba\u6d88\u9664\uff0c\u540c\u65f6\u6709\u53ef\u80fd\u6551\u5230\u5f53\u524d\u4f4d\u7f6e\u7684\u673a\u5668\u4eba\u3002\u5176\u4ed6\u65b9\u5411\u79fb\u52a8\u7684\u7ed3\u679c\u4e5f\u662f\u7c7b\u4f3c\u7684\u3002 \u7b2c\u4e8c\u4e2a\u91cd\u8981\u7684\u89c2\u5bdf\u662f\u6211\u4eec\u5e76\u4e0d\u9700\u8981\u77e5\u9053\u51fa\u53e3\u8fd0\u52a8\u7684\u5168\u8fc7\u7a0b\uff0c\u53ea\u9700\u8981\u77e5\u9053\u56db\u4e2a\u65b9\u5411\u5206\u522b\u8d70\u5230\u8fc7\u591a\u8fdc\u3002\u5177\u4f53\u5730\uff0c\u6211\u4eec\u8bbe\u56db\u4e2a\u65b9\u5411\u5206\u522b\u8d70\u4e86 \\(l,r,u,d\\) \u8ddd\u79bb\u3002\u5728\u51fa\u53e3\u4ecd\u5728\u8fd9\u4e2a\u8303\u56f4\u6d3b\u52a8\uff0c\u4e0d\u6539\u53d8\u8fd9\u4e2a\u72b6\u6001\u7684\u60c5\u51b5\u4e0b\uff0c\u5e76\u4e0d\u4f1a\u6709\u65b0\u7684\u673a\u5668\u4eba\u6389\u4e0b\u68cb\u76d8\u3002\u800c\u51fa\u53e3\u6bcf\u8d70\u4e00\u6b65\uff0c\u6700\u591a\u5c06 \\(l,r,u,d\\) \u4e2d\u7684\u4efb\u610f\u4e00\u4e2a \\(+1\\) \u6765\u6539\u53d8\u72b6\u6001\uff0c\u800c\u8fd9\u53ef\u4ee5 \\(dp\\) \uff01 \u5b9a\u4e49 \\(f_{l,r,u,d}\\) \u4e3a\u56db\u4e2a\u65b9\u5411\u5206\u522b\u8d70\u4e86 \\(l,r,u,d\\) \u8ddd\u79bb\u540e\u6551\u5230\u673a\u5668\u4eba\u7684\u6700\u5927\u503c\u3002\u5982\u679c\u67d0\u4e2a\u65b9\u5411\u8fd8\u6709\u673a\u5668\u4eba\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u671d\u8fd9\u4e2a\u65b9\u5411\u6269\u5c55\u3002\u7531\u4e8e \\(l,r,u,d\\) \u672c\u8d28\u4e0a\u662f\u6846\u67f1\u4e86\u4e00\u4e2a\u77e9\u5f62\uff0c\u6bcf\u6b21\u6269\u5c55\u4e5f\u4e00\u5b9a\u662f\u884c\u6216\u5217\u4e0a\u8fde\u7eed\u7684\u4e00\u6bb5\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u524d\u7f00\u548c\u4f18\u5316\u3002\u6700\u540e\u6ce8\u610f\u5230\u672c\u9898\u5361\u7a7a\u95f4\uff0c\u800c\u7b54\u6848\u503c\u5f88\u5c0f\uff0c\u6211\u4eec\u53ef\u4ee5\u7528 \\(short\\) \u5b58\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 #include <bits/stdc++.h> #define rep(i,a,b) for(i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } int n , m , x , y , i , j , l , r , u , d ; short f [ 105 ][ 105 ][ 105 ][ 105 ], s [ 105 ][ 105 ][ 2 ], ans ; char a [ 105 ]; inline void Max ( short & x , const short & y ){ if ( y > x ) x = y ;} inline short Sum ( int i , int j , int x , bool op ){ if ( ! op ) return s [ i ][ x ][ op ] - s [ j ][ x ][ op ]; return s [ x ][ i ][ op ] - s [ x ][ j ][ op ]; } int main (){ n = read (), m = read (); rep ( i , 1 , n ){ scanf ( \"%s\" , a + 1 ); rep ( j , 1 , m ){ if ( a [ j ] == 'E' ) x = i , y = j ; s [ i ][ j ][ 0 ] = s [ i -1 ][ j ][ 0 ] + ( a [ j ] == 'o' ); s [ i ][ j ][ 1 ] = s [ i ][ j -1 ][ 1 ] + ( a [ j ] == 'o' ); } } rep ( l , 0 , y -1 ) rep ( r , 0 , m - y ) rep ( u , 0 , x -1 ) rep ( d , 0 , n - x ){ ans = max ( ans , f [ l ][ r ][ u ][ d ]); if ( l + r < y -1 ) Max ( f [ l + 1 ][ r ][ u ][ d ], f [ l ][ r ][ u ][ d ] + Sum ( min ( x + d , n - u ), max ( x - u -1 , d ), y - l -1 , 0 )); if ( l + r < m - y ) Max ( f [ l ][ r + 1 ][ u ][ d ], f [ l ][ r ][ u ][ d ] + Sum ( min ( x + d , n - u ), max ( x - u -1 , d ), y + r + 1 , 0 )); if ( u + d < x -1 ) Max ( f [ l ][ r ][ u + 1 ][ d ], f [ l ][ r ][ u ][ d ] + Sum ( min ( y + r , m - l ), max ( y - l -1 , r ), x - u -1 , 1 )); if ( u + d < n - x ) Max ( f [ l ][ r ][ u ][ d + 1 ], f [ l ][ r ][ u ][ d ] + Sum ( min ( y + r , m - l ), max ( y - l -1 , r ), x + d + 1 , 1 )); } printf ( \"%d \\n \" ,( int ) ans ); return 0 ; }","title":"AGC004 \u505a\u9898\u8bb0\u5f55"},{"location":"%E7%AC%94%E8%AE%B0/AGC004%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#a","text":"\u8fb9\u957f\u4e2d\u6709\u5076\u6570\u5c31\u53ef\u4ee5\u5e73\u5206\u8f93\u51fa \\(0\\) \uff0c\u5426\u5219\u8f93\u51fa\u6700\u5c0f\u7684\u4e00\u9762\u7684\u65b9\u5757\u6570\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } int main (){ ll a = read (), b = read (), c = read (); if ( a & 1 && b & 1 && c & 1 ){ printf ( \"%lld \\n \" , min ( a * min ( b , c ), b * c )); } else puts ( \"0\" ); return 0 ; }","title":"A"},{"location":"%E7%AC%94%E8%AE%B0/AGC004%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#b","text":"\u5999\u8d2a\u5fc3\uff08. \u5047\u8bbe\u6211\u4eec\u541f\u5531\u4e86 \\(k\\) \u6b21\u9b54\u6cd5\u540e\u5b8c\u6210\u6536\u96c6\uff0c\u90a3\u4e48 \\(i\\) \u8272\u53f2\u83b1\u59c6\u6709\u53ef\u80fd\u4e3a \\([i-k,i]\\) \uff08\u4e0b\u6807\u5bf9 \\(N\\) \u53d6\u6a21\uff09\u7684\u4efb\u610f\u4e00\u4e2a\u53f2\u83b1\u59c6\u53d8\u5316\u800c\u6765\uff0c\u6700\u5c0f\u4ee3\u4ef7\u5373\u4e3a\u533a\u95f4\u4e2d \\(a_j\\) \u7684\u6700\u5c0f\u503c\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N^2)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e3 + 5 ; ll n , x , a [ N ], M [ N ][ N ]; ll ans ; int main (){ n = read (), x = read (); rep ( i , 1 , n ) M [ i ][ i ] = a [ i ] = read (); rep ( i , 1 , n ) rep ( j , i + 1 , n ){ M [ i ][ j ] = min ( M [ i ][ j -1 ], a [ j ]); } ans = 9e18 ; rep ( i , 0 , n ){ ll cost = i * x ; rep ( j , 1 , n ){ int last = j - i ; if ( last <= 0 ) cost += min ( M [ last + n ][ n ], M [ 1 ][ j ]); else cost += M [ last ][ j ]; } ans = min ( ans , cost ); } printf ( \"%lld \\n \" , ans ); return 0 ; }","title":"B"},{"location":"%E7%AC%94%E8%AE%B0/AGC004%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#c","text":"\u6784\u9020\u9898\u901a\u5e38\u9700\u8981\u7528\u4e0a\u7ed9\u5b9a\u7684\u7384\u5b66\u6761\u4ef6\u3002\u6bd4\u5982\u8fd9\u9053\u9898\u4e2d\u7684\u300c\u4fdd\u8bc1\u8fb9\u754c\u4e0a\u4e0d\u4f1a\u88ab\u6d82\u8272\u300d\u3002\u56e0\u4e3a\u6211\u4eec\u60f3\u627e\u901a\u89e3\uff0c\u5e76\u4e0d\u80fd\u4f9d\u8d56\u4e8e\u7d2b\u8272\u683c\u5b50\u7684\u4f4d\u7f6e\u3002\u6240\u4ee5\u60f3\u5230\u5148\u6784\u9020\u6ca1\u6709\u4ea4\u96c6\u7684\u7ea2\u8272\u548c\u84dd\u8272\u683c\u5b50\uff0c\u5e76\u4e14\u8981\u4fdd\u8bc1\u56db\u8fde\u901a\u4e14\u4e0e\u7d2b\u8272\u683c\u5b50\u8fde\u901a\u3002\u6700\u4e0a\u9762\u4e00\u884c\u548c\u6240\u6709\u5947\u6570\u5217\u586b\u7ea2\u8272\uff0c\u6700\u4e0b\u9762\u4e00\u884c\u548c\u6240\u6709\u5076\u6570\u5217\u586b\u84dd\u8272\uff08\u50cf\u4e24\u628a\u68b3\u5b50\u4e0a\u4e0b\u5361\u5728\u4e00\u8d77\uff09\u3002\u8fd9\u79cd\u6784\u9020\u663e\u7136\u6ee1\u8db3\u56db\u8fde\u901a\uff0c\u6700\u540e\u53d6\u989c\u8272\u96c6\u5408\u4e0e\u7d2b\u8272\u683c\u5b50\u7684\u5e76\u96c6\u5373\u53ef\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } int n , m ; char s [ 505 ][ 505 ]; int main (){ n = read (), m = read (); rep ( i , 1 , n ) scanf ( \"%s\" , s [ i ] + 1 ); rep ( i , 1 , n ){ rep ( j , 1 , m ){ if ( i == n ) printf ( \".\" ); else if ( i == 1 || j & 1 || s [ i ][ j ] == '#' ) printf ( \"#\" ); else printf ( \".\" ); } puts ( \"\" ); } puts ( \"\" ); rep ( i , 1 , n ){ rep ( j , 1 , m ){ if ( i == 1 ) printf ( \".\" ); else if ( i == n || j % 2 == 0 || s [ i ][ j ] == '#' ) printf ( \"#\" ); else printf ( \".\" ); } puts ( \"\" ); } return 0 ; }","title":"C"},{"location":"%E7%AC%94%E8%AE%B0/AGC004%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#d","text":"\u7ed9\u4e86\u4e00\u4e2a\u57fa\u73af\u5185\u5411\u6811\uff0c\u5e76\u4e14\u4fdd\u8bc1 \\(1\\) \u53f7\u8282\u70b9\u5728\u73af\u4e0a\u3002\u5982\u679c\u73af\u957f\u4e0d\u4e3a \\(1\\) \uff08\u5373\u4e0d\u662f \\(1\\) \u53f7\u8282\u70b9\u7684\u81ea\u73af\uff09\uff0c\u90a3\u4e48\u4e0d\u96be\u53d1\u73b0\u73af\u4e0a\u7684\u70b9\u5230\u8fbe \\(1\\) \u53f7\u70b9\u7684\u6b21\u6570\u65e0\u6cd5\u90fd\u6070\u597d\u4e3a \\(K\\) \u3002\u4e8e\u662f\u5fc5\u987b\u65ad\u6389\u539f\u8fb9\u6539\u6210\u81ea\u73af\u3002 \u5269\u4e0b \\(N-1\\) \u6761\u8fb9\u6784\u6210\u4e00\u68f5\u6811\uff0c\u6211\u4eec\u60f3\u9009\u4e00\u4e9b\u8fb9\u628a\u5b83\u8fde\u5411 \\(1\\) \uff0c\u8fd9\u4e2a\u64cd\u4f5c\u4f1a\u628a\u539f\u6811\u5206\u6210\u51e0\u9897\u6811\uff0c\u4e14\u8981\u6ee1\u8db3\u6df1\u5ea6\u4e0d\u8d85\u8fc7 \\(K-1\\) \u3002\u6ce8\u610f\u5230\u8ddd\u79bb\u4e0d\u5230 \\(K\\) \u7684\u8282\u70b9\u53ef\u4ee5\u63d0\u524d\u5230\u8fbe \\(1\\) \u4e4b\u540e\u7ed5\u81ea\u73af\u8dd1\uff0c\u6ee1\u8db3\u8981\u6c42\u3002\u8d2a\u5fc3\u7edf\u8ba1\u7b54\u6848\u5373\u53ef\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 ; int n , k , ans , a [ N ]; vector < int > G [ N ]; int dfs ( int u , int dep ){ int ret = dep ; //\u5f53\u524d\u6df1\u5ea6 for ( int v : G [ u ]){ ret = max ( ret , dfs ( v , dep + 1 )); //\u5b50\u6811\u4e2d\u8282\u70b9\u6700\u6df1\u7684\u6df1\u5ea6 } if ( a [ u ] != 1 && ret - dep == k -1 ) return ++ ans , 0 ; //\u5982\u679c\u4e3ak-1\u5219\u65ad\u8fb9\u5e76\u4e14\u65b0\u6df1\u5ea6\u4e3a0 return ret ; } int main (){ n = read (), k = read (); rep ( i , 1 , n ) a [ i ] = read (); if ( a [ 1 ] != 1 ) ans = a [ 1 ] = 1 ; rep ( i , 2 , n ) G [ a [ i ]]. push_back ( i ); dfs ( 1 , 0 ); printf ( \"%d \\n \" , ans ); return 0 ; }","title":"D"},{"location":"%E7%AC%94%E8%AE%B0/AGC004%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#e","text":"dp\u795e\u9898\u3002 \u9996\u5148\u89c2\u5bdf\u5230\u51fa\u53e3\u5728\u68cb\u76d8\u4e0a\u7684\u76f8\u5bf9\u4f4d\u7f6e\u4e0d\u53d8\uff0c\u4e0d\u59a8\u628a\u673a\u5668\u4eba\u7684\u8fd0\u52a8\u8f6c\u5316\u6210\u51fa\u53e3\u5e26\u7740\u68cb\u76d8\u7684\u8fd0\u52a8\uff0c\u6389\u4e0b\u68cb\u76d8\u7684\u68cb\u5b50\u5c31\u6ca1\u4e86\u3002\u4e0d\u59a8\u89c2\u5bdf\u4e00\u4e0b\u51fa\u53e3\u7b2c\u4e00\u6b21\u79fb\u52a8\u5e26\u6765\u7684\u5f71\u54cd\uff0c\u5411\u4e0a\u8d70\u4e00\u6b65\u4f1a\u628a\u6700\u4e0b\u9762\u4e00\u884c\u7684\u673a\u5668\u4eba\u6d88\u9664\uff0c\u540c\u65f6\u6709\u53ef\u80fd\u6551\u5230\u5f53\u524d\u4f4d\u7f6e\u7684\u673a\u5668\u4eba\u3002\u5176\u4ed6\u65b9\u5411\u79fb\u52a8\u7684\u7ed3\u679c\u4e5f\u662f\u7c7b\u4f3c\u7684\u3002 \u7b2c\u4e8c\u4e2a\u91cd\u8981\u7684\u89c2\u5bdf\u662f\u6211\u4eec\u5e76\u4e0d\u9700\u8981\u77e5\u9053\u51fa\u53e3\u8fd0\u52a8\u7684\u5168\u8fc7\u7a0b\uff0c\u53ea\u9700\u8981\u77e5\u9053\u56db\u4e2a\u65b9\u5411\u5206\u522b\u8d70\u5230\u8fc7\u591a\u8fdc\u3002\u5177\u4f53\u5730\uff0c\u6211\u4eec\u8bbe\u56db\u4e2a\u65b9\u5411\u5206\u522b\u8d70\u4e86 \\(l,r,u,d\\) \u8ddd\u79bb\u3002\u5728\u51fa\u53e3\u4ecd\u5728\u8fd9\u4e2a\u8303\u56f4\u6d3b\u52a8\uff0c\u4e0d\u6539\u53d8\u8fd9\u4e2a\u72b6\u6001\u7684\u60c5\u51b5\u4e0b\uff0c\u5e76\u4e0d\u4f1a\u6709\u65b0\u7684\u673a\u5668\u4eba\u6389\u4e0b\u68cb\u76d8\u3002\u800c\u51fa\u53e3\u6bcf\u8d70\u4e00\u6b65\uff0c\u6700\u591a\u5c06 \\(l,r,u,d\\) \u4e2d\u7684\u4efb\u610f\u4e00\u4e2a \\(+1\\) \u6765\u6539\u53d8\u72b6\u6001\uff0c\u800c\u8fd9\u53ef\u4ee5 \\(dp\\) \uff01 \u5b9a\u4e49 \\(f_{l,r,u,d}\\) \u4e3a\u56db\u4e2a\u65b9\u5411\u5206\u522b\u8d70\u4e86 \\(l,r,u,d\\) \u8ddd\u79bb\u540e\u6551\u5230\u673a\u5668\u4eba\u7684\u6700\u5927\u503c\u3002\u5982\u679c\u67d0\u4e2a\u65b9\u5411\u8fd8\u6709\u673a\u5668\u4eba\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u671d\u8fd9\u4e2a\u65b9\u5411\u6269\u5c55\u3002\u7531\u4e8e \\(l,r,u,d\\) \u672c\u8d28\u4e0a\u662f\u6846\u67f1\u4e86\u4e00\u4e2a\u77e9\u5f62\uff0c\u6bcf\u6b21\u6269\u5c55\u4e5f\u4e00\u5b9a\u662f\u884c\u6216\u5217\u4e0a\u8fde\u7eed\u7684\u4e00\u6bb5\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u524d\u7f00\u548c\u4f18\u5316\u3002\u6700\u540e\u6ce8\u610f\u5230\u672c\u9898\u5361\u7a7a\u95f4\uff0c\u800c\u7b54\u6848\u503c\u5f88\u5c0f\uff0c\u6211\u4eec\u53ef\u4ee5\u7528 \\(short\\) \u5b58\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 #include <bits/stdc++.h> #define rep(i,a,b) for(i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } int n , m , x , y , i , j , l , r , u , d ; short f [ 105 ][ 105 ][ 105 ][ 105 ], s [ 105 ][ 105 ][ 2 ], ans ; char a [ 105 ]; inline void Max ( short & x , const short & y ){ if ( y > x ) x = y ;} inline short Sum ( int i , int j , int x , bool op ){ if ( ! op ) return s [ i ][ x ][ op ] - s [ j ][ x ][ op ]; return s [ x ][ i ][ op ] - s [ x ][ j ][ op ]; } int main (){ n = read (), m = read (); rep ( i , 1 , n ){ scanf ( \"%s\" , a + 1 ); rep ( j , 1 , m ){ if ( a [ j ] == 'E' ) x = i , y = j ; s [ i ][ j ][ 0 ] = s [ i -1 ][ j ][ 0 ] + ( a [ j ] == 'o' ); s [ i ][ j ][ 1 ] = s [ i ][ j -1 ][ 1 ] + ( a [ j ] == 'o' ); } } rep ( l , 0 , y -1 ) rep ( r , 0 , m - y ) rep ( u , 0 , x -1 ) rep ( d , 0 , n - x ){ ans = max ( ans , f [ l ][ r ][ u ][ d ]); if ( l + r < y -1 ) Max ( f [ l + 1 ][ r ][ u ][ d ], f [ l ][ r ][ u ][ d ] + Sum ( min ( x + d , n - u ), max ( x - u -1 , d ), y - l -1 , 0 )); if ( l + r < m - y ) Max ( f [ l ][ r + 1 ][ u ][ d ], f [ l ][ r ][ u ][ d ] + Sum ( min ( x + d , n - u ), max ( x - u -1 , d ), y + r + 1 , 0 )); if ( u + d < x -1 ) Max ( f [ l ][ r ][ u + 1 ][ d ], f [ l ][ r ][ u ][ d ] + Sum ( min ( y + r , m - l ), max ( y - l -1 , r ), x - u -1 , 1 )); if ( u + d < n - x ) Max ( f [ l ][ r ][ u ][ d + 1 ], f [ l ][ r ][ u ][ d ] + Sum ( min ( y + r , m - l ), max ( y - l -1 , r ), x + d + 1 , 1 )); } printf ( \"%d \\n \" ,( int ) ans ); return 0 ; }","title":"E"},{"location":"%E7%AC%94%E8%AE%B0/AGC005%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/","text":"AGC005 \u505a\u9898\u8bb0\u5f55 \u00b6 A \u00b6 \u7528\u6808\u52a0\u5165\u5143\u7d20\uff0c\u5982\u679c\u5f53\u524d\u662f'T'\u4e14\u524d\u9762\u662f'S'\u6d88\u6389\u5373\u53ef\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 ; char s [ N ]; int st [ N ], top ; int main (){ scanf ( \"%s\" , s + 1 ); for ( int i = 1 ; s [ i ]; i ++ ){ if ( s [ i ] == 'S' ) st [ ++ top ] = 1 ; if ( s [ i ] == 'T' ){ if ( st [ top ]) top -- ; else st [ ++ top ] = 0 ; } } cout << top << endl ; return 0 ; } B \u00b6 \u76f4\u63a5\u66b4\u529b\u662f \\(O(N^2)\\) \u7684\u80af\u5b9a\u4e0d\u884c\uff0c\u4e0d\u59a8\u8003\u8651\u6bcf\u4e2a\u5143\u7d20\u7ed9\u7b54\u6848\u7684\u8d21\u732e\u3002\u53ea\u9700\u8981\u5bf9\u6bcf\u4e2a\u5143\u7d20 \\(a_i\\) \uff0c\u627e\u51fa\u6700\u5c0f \\(l_i\\) \u548c\u6700\u5927 \\(r_i\\) \u4f7f\u5f97 \\([l_i,r_i]\\) \u533a\u95f4\u4e2d\u7684\u6700\u5c0f\u503c\u662f \\(a_i\\) \uff0c\u53ef\u4ee5\u7528\u5355\u8c03\u6808\u6c42\u51fa \\(l_i,r_i\\) \u3002\u663e\u7136\u5bf9\u4e8e \\(l\\in[l_i,i],r\\in[i,r_i],[l,r]\\) \u533a\u95f4\u4e2d\u6700\u5c0f\u503c\u4e5f\u662f \\(a_i\\) \u3002\u4e8e\u662f \\(a_i\\) \u5bf9\u7b54\u6848\u7684\u8d21\u732e\u5c31\u662f \\((i-l_i+1)(r_i-i+1)a_i\\) \u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 ; int n , a [ N ], l [ N ], r [ N ], st [ N ], top ; ll ans ; int main (){ n = read (); rep ( i , 1 , n ) a [ i ] = read (); rep ( i , 1 , n ){ while ( top && a [ st [ top ]] > a [ i ]){ r [ st [ top -- ]] = i -1 ; } st [ ++ top ] = i ; } while ( top ) r [ st [ top -- ]] = n ; per ( i , n , 1 ){ while ( top && a [ st [ top ]] > a [ i ]){ l [ st [ top ]] = i + 1 ; top -- ; } st [ ++ top ] = i ; } while ( top ) l [ st [ top -- ]] = 1 ; rep ( i , 1 , n ){ ans += 1l l * ( r [ i ] - i + 1 ) * ( i - l [ i ] + 1 ) * a [ i ]; } printf ( \"%lld \\n \" , ans ); return 0 ; } C \u00b6 \u6784\u9020\u9898\u3002\u9996\u5148 \\(M=\\max a_i\\) \u4e3a\u8be5\u6811\u7684\u76f4\u5f84\u3002\u6211\u4eec\u8003\u8651\u76f4\u5f84\u4e0a\u7684\u70b9\uff0c\u5b83\u4eec\u5728\u6811\u4e0a\u7684\u6700\u8fdc\u8ddd\u79bb\u663e\u7136\u662f\u5230\u76f4\u5f84\u7684\u4e24\u4e2a\u7aef\u70b9\u4e4b\u4e00\u7684\u8ddd\u79bb\uff0c\u4e8e\u662f\u8fd9\u4e9b\u70b9\u7684 \\(a_i\\) \u53d6\u503c\u5e94\u8be5\u4e3a \\(M,M-1,M-2,\\cdots,\\lfloor M/2\\rfloor+1,?,\\lfloor M/2\\rfloor +1,\\dots,M\\) \u3002\u5f53 \\(M\\) \u4e3a\u5076\u6570\u65f6\uff0c \\(?\\) \u5904\u4e3a\u4e24\u4e2a \\(M/2\\) \uff0c\u4e3a\u5947\u6570\u65f6\u5219\u4e0d\u5b58\u5728\u3002\u56e0\u6b64\uff0c\u80fd\u6784\u6210\u6811\u7684\u5fc5\u8981\u6761\u4ef6\u662f\u4e0a\u8ff0\u8ddd\u79bb\u7684\u8fb9\u90fd\u8981\u6709\u8db3\u591f\u6570\u91cf\u3002 \u63a5\u4e0b\u6765\u53ea\u7528\u8003\u8651\u8fd9\u4e2a\u6761\u4ef6\u662f\u5426\u5145\u5206\uff0c\u5373\u8003\u8651\u5269\u4e0b\u591a\u4f59\u7684\u6700\u8fdc\u8ddd\u79bb\u600e\u4e48\u4e0e\u8fd9\u6761\u94fe\u5173\u8054\u3002\u6211\u4eec\u5728\u94fe\u4e0a\u9664\u4e86\u5934\u548c\u5c3e\u7684\u5176\u4ed6\u8282\u70b9\u4e0a\u7ee7\u7eed\u6302\u8282\u70b9\u5c31\u53ef\u4ee5\u4e86\uff0c\u4e0d\u96be\u53d1\u73b0\u9664\u4e86 \\(\\lceil M/2\\rceil\\) \u8fd9\u4e2a\u8ddd\u79bb\uff08\u611f\u6027\u7406\u89e3\u4e3a\u6811\u7684\u534a\u5f84\uff09\u65e0\u6cd5\u6784\u9020\u51fa\u6765\uff0c\u5176\u4ed6\u8ddd\u79bb\u90fd\u53ef\u4ee5\u8fd9\u4e48\u6784\u9020\uff0c\u4e8e\u662f\u8fd9\u9053\u9898\u5c31\u89e3\u51b3\u4e86\u3002\u56e0\u4e3a \\(N\\) \u5f88\u5c0f\uff0c\u5b9e\u73b0\u8fc7\u7a0b\u4e2d\u53ef\u4ee5\u5f00\u6876\u8bb0\u5f55\u8ddd\u79bb \\(x\\) \u7684\u6570\u91cf\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } int n , c [ 110 ], mx ; int main (){ n = read (); rep ( i , 1 , n ){ int x = read (); ++ c [ x ]; mx = max ( mx , x ); } int mid = ( mx + 1 ) >> 1 ; for ( int i = mx ; i > mid ; -- i ){ if ( c [ i ] < 2 ) return puts ( \"Impossible\" ), 0 ; n -= c [ i ]; } if ( c [ mid ] != 1 + ( mx & 1 ) || n != c [ mid ]) return puts ( \"Impossible\" ), 0 ; puts ( \"Possible\" ); return 0 ; } D \u00b6 \u597ddp\u8ba1\u6570\u9898\u3002 \u8003\u8651 \\(P_i=j\\) \u4e3a \\((i,a_j)\\) \u4e4b\u95f4\u8fde\u4e00\u6761\u8fb9\uff0c\u90a3\u4e48\u4e00\u4e2a\u6392\u5217\u53ef\u4ee5\u88ab\u8f6c\u5316\u6210 \\(n\\) \u4e2a\u70b9\u4e0e\u53e6 \\(n\\) \u4e2a\u70b9\u7684\u4e00\u4e2a\u5339\u914d\u3002\u518d\u770b \\(|P_i-i|\\neq K\\) \u8fd9\u4e2a\u9650\u5236\uff0c\u6b63\u9762\u4e0d\u597d\u505a\uff0c\u6211\u4eec\u8003\u8651\u7528\u5bb9\u65a5\u539f\u7406\u3002\u5373 \\(f_i\\) \u4e3a\u6709 \\(i\\) \u4e2a\u5730\u65b9\u4e0e\u9650\u5236\u77db\u76fe\uff0c\u7b54\u6848\u5c31\u662f \\(\\sum_{i=1}^n (-1)^i\\times f_i\\) \u3002 \u5177\u4f53\u5730\uff0c\u6211\u4eec\u628a \\((i+K,a_i),(i-K,a_i)\\) \u8fde\u8fb9\uff0c\u90a3\u4e48\u56fe\u4e0a\u4f1a\u5f62\u6210\u82e5\u5e72\u6761\u4e0d\u76f8\u4ea4\u7684\u94fe\uff0c\u8fd9\u4e9b\u94fe\u4e0a\u9009\u4e86\u51e0\u6761\u8fb9\u4f5c\u4e3a\u5339\u914d\u7684\u8fb9\u5c31\u4f1a\u7edf\u8ba1\u8fdb \\(f_i\\) \u3002\u4e0d\u59a8\u5bf9\u8fd9\u4e9b\u4e0d\u76f8\u4ea4\u7684\u94fe\u5206\u522b\u8003\u8651\uff0c\u7531\u4e8e\u5339\u914d\u4e2d\u53ea\u7528\u6ee1\u8db3\u6bcf\u4e2a\u70b9\u53ea\u4e0e\u53e6\u5916\u4e00\u4e2a\u70b9\u914d\u5bf9\uff0c\u6211\u4eec\u53ef\u4ee5\u8bb0 \\(dp[i][j][0/1]\\) \u4e3a\u5f53\u524d\u8003\u8651\u5230\u7b2c \\(i\\) \u4e2a\u70b9\uff0c\u8fde\u63a5\u4e86 \\(j\\) \u6761\u8fb9\uff0c\u7b2c \\(i-1\\) \u4e2a\u70b9\u662f\u5426\u88ab\u5339\u914d\u3002\u4e8e\u662f\u6709\uff1a dp[i][j][0]=dp[i-1][j][0]+dp[i-1][j][1]\\\\ dp[i][j][1]=dp[i-1][j-1][0] \u6700\u7ec8\u6709 \\(f_i=(n-i)!\\times dp[2n][i]\\) \uff08\u5269\u4e0b \\(n-i\\) \u4e2a\u6570\u53ef\u4ee5\u968f\u4fbf\u6392\u5217 \uff09\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N^2)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2010 , P = 924844033 ; int n , k , tot ; ll fac [ N ], dp [ N << 1 ][ N ][ 2 ], ans ; bool vis [ N << 1 ]; inline ll Add ( const ll x , const ll y ){ return ( x + y >= P ) ? x + y - P : x + y ;} inline ll Del ( const ll x , const ll y ){ return ( x - y < 0 ) ? x - y + P : x - y ;} int main (){ n = read (), k = read (); fac [ 0 ] = 1 ; rep ( i , 1 , n ) fac [ i ] = fac [ i -1 ] * i % P ; rep ( i , 1 , k ){ rep ( t , 0 , 1 ){ for ( int j = i ; j <= n ; j += k ){ tot ++ ; if ( i != j ) vis [ tot ] = 1 ; } } } dp [ 0 ][ 0 ][ 0 ] = 1 ; rep ( i , 1 , n << 1 ) rep ( j , 0 , n ){ dp [ i ][ j ][ 0 ] = Add ( dp [ i -1 ][ j ][ 0 ], dp [ i -1 ][ j ][ 1 ]); if ( vis [ i ] && j ) dp [ i ][ j ][ 1 ] = dp [ i -1 ][ j -1 ][ 0 ]; } rep ( i , 0 , n ){ if ( i & 1 ) ans = Del ( ans ,( dp [ n << 1 ][ i ][ 0 ] + dp [ n << 1 ][ i ][ 1 ]) * fac [ n - i ] % P ); else ans = Add ( ans ,( dp [ n << 1 ][ i ][ 0 ] + dp [ n << 1 ][ i ][ 1 ]) * fac [ n - i ] % P ); } printf ( \"%lld \\n \" , ans ); return 0 ; } E \u00b6 \u795e\u4ed9\u9898\u3002 \u9996\u5148\u8003\u8651\u5148\u624b\u5982\u4f55\u4e00\u76f4\u82df\u4e0b\u53bb\u3002\u5982\u679c\u5b58\u5728\u4e00\u6761\u7ea2\u8fb9 \\((u,v)\\) \uff0c\u800c \\(u\\) \u548c \\(v\\) \u5728\u84dd\u6811\u4e0a\u7684\u8ddd\u79bb\u5927\u4e8e\u7b49\u4e8e \\(3\\) \uff0c\u90a3\u4e48\u540e\u624b\u6c38\u8fdc\u6293\u4e0d\u5230\u5148\u624b\u3002\u56e0\u4e3a\u5148\u624b\u53ef\u4ee5\u7b49\u540e\u624b\u9760\u8fd1\u5176\u4e2d\u4e00\u4e2a\u8282\u70b9\u540e\u671d\u53e6\u4e00\u4e2a\u8282\u70b9\u8dd1\uff0c\u540e\u624b\u6c38\u8fdc\u8ffd\u4e0d\u4e0a\u5148\u624b\u3002 \u4e0b\u9762\u6211\u4eec\u5f00\u59cb\u8003\u8651\u5148\u624b\u8d70\u5230\u8fd9\u6837\u7684\u8fb9\u4e4b\u524d\uff0c\u6e38\u620f\u51b3\u7b56\u662f\u600e\u6837\u7684\u3002\u6ce8\u610f\u5230\u8fd9\u610f\u5473\u7740\u5148\u624b\u7ecf\u8fc7\u7684\u6240\u6709\u8fb9\u5728\u84dd\u6811\u4e0a\u8ddd\u79bb\u4e0d\u8d85\u8fc7 \\(2\\) \u3002\u8fd9\u53ef\u4ee5\u8fdb\u4e00\u6b65\u63a8\u51fa\u5148\u624b\u6240\u5728\u7684\u70b9 \\(v\\) \u5728\u84dd\u6811\u4e0a\u4e00\u5b9a\u5728\u540e\u624b\u6240\u5728\u70b9 \\(u\\) \u7684\u5b50\u6811\u4e0a\uff0c\u53ef\u4ee5\u901a\u8fc7\u5f52\u7eb3\u8bc1\u660e\u3002\u6ca1\u6709\u64cd\u4f5c\u65f6\u84dd\u6811\u4ee5\u540e\u624b\u8282\u70b9\u4e3a\u6839\uff0c\u5047\u8bbe\u6210\u7acb\u3002\u800c\u6bcf\u4e00\u6b65\u64cd\u4f5c\u5148\u624b\u7684\u4ece \\(v\\) \u79fb\u52a8\u5230 \\(v'\\) \uff0c \\((v,v')\\) \u5728\u84dd\u6811\u8ddd\u79bb\u4e0d\u8d85\u8fc7 \\(2\\) \uff0c\u8fd9\u8bf4\u660e\u5148\u624b\u65e0\u6cd5\u5728\u84dd\u6811\u4e2d\u8de8\u8d8a\u540e\u624b\u6240\u5728\u7684\u8282\u70b9\u3002\u5982\u679c\u8de8\u8d8a\u4e86\u5219\u540e\u624b\u53ef\u4ee5\u76f4\u63a5\u6293\u5230\u5b83\uff0c\u4e0d\u5982\u4e0d\u8d70\u3002 \u4ece\u8fd9\u4e2a\u7ed3\u8bba\u51fa\u53d1\uff0c\u5bf9\u4e8e\u70b9 \\(u\\) \u5728\u7ea2\u6811\u548c\u84dd\u6811\u4e0a\u5230\u5404\u81ea\u6839\u8282\u70b9\u7684\u8ddd\u79bb \\(d_1,d_2\\) \uff0c\u5982\u679c\u6709 \\(d_1\\ge d_2\\) \uff0c\u90a3\u4e48\u5148\u624b\u4e0d\u4f1a\u628a\u68cb\u5b50\u79fb\u52a8\u5230\u8fd9\u91cc\u3002\u56e0\u4e3a\u5148\u624b\u4e0d\u8de8\u8fc7\u540e\u624b\u68cb\u5b50\uff0c\u5fc5\u7136\u4f1a\u6bd4\u540e\u624b\u665a\u5230\u8fd9\u4e2a\u8282\u70b9\u3002\u6240\u4ee5\u5148\u624b\u6bcf\u6b21\u64cd\u4f5c\u90fd\u8981\u4fdd\u8bc1 \\(d_1<d_2\\) \u3002 \u6700\u540e\u53ef\u4ee5\u641c\u7d22\u51fa\u662f\u5426\u80fd\u8fbe\u5230\u80fd\u65e0\u9650\u64cd\u4f5c\u7684\u8fb9\uff0c\u5982\u679c\u8fbe\u5230\u4e86\u7b54\u6848\u5c31\u662f \\(-1\\) \uff1b\u53cd\u4e4b\u7b54\u6848\u4e3a\u6700\u5927\u7684 \\(d_2\\) \u7684\u4e24\u500d\uff0c\u51b3\u7b56\u4e3a\u5148\u624b\u8d70\u5230\u8fd9\u91cc\u539f\u5730\u7b49\u6b7b\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) using namespace std ; inline int read (){ int x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 ; int n , x , y , dr [ N ], d [ N ], fa [ N ], mx ; bool flag ; vector < int > R [ N ], B [ N ]; void dfs1 ( int u , int f ){ for ( int v : B [ u ]) if ( v != f ){ fa [ v ] = u ; d [ v ] = d [ u ] + 1 ; dfs1 ( v , u ); } } bool check ( int u , int v ){ return u != fa [ v ] && v != fa [ u ] && u != fa [ fa [ v ]] && v != fa [ fa [ u ]] && fa [ u ] != fa [ v ]; } void dfs2 ( int u , int f , int dep ){ if ( dep >= d [ u ]) return ; mx = max ( mx , d [ u ]); for ( int v : R [ u ]) if ( v != f ){ if ( check ( u , v )){ puts ( \"-1\" ); exit ( 0 );} dfs2 ( v , u , dep + 1 ); } } int main (){ n = read (), x = read (), y = read (); rep ( i , 1 , n -1 ){ int u = read (), v = read (); R [ u ]. push_back ( v ); R [ v ]. push_back ( u ); } rep ( i , 1 , n -1 ){ int u = read (), v = read (); B [ u ]. push_back ( v ); B [ v ]. push_back ( u ); } dfs1 ( y , 0 ); dfs2 ( x , 0 , 0 ); printf ( \"%d \\n \" , mx * 2 ); return 0 ; } F \u00b6 \u5999\u8ba1\u6570*2\u3002 \u663e\u7136\u4e0d\u80fd\u679a\u4e3e\u5b50\u96c6\uff0c\u6211\u4eec\u5c1d\u8bd5\u7b97\u6bcf\u4e2a\u70b9\u5bf9\u7b54\u6848\u7684\u8d21\u732e\u8fd9\u79cd\u5e38\u89c1\u5957\u8def\u3002\u4e0d\u59a8\u5148\u8003\u8651 \\(u\\) \u5bf9 \\(f_k\\) \u7684\u8d21\u732e\uff0c\u5373\u6709\u591a\u5c11\u65b9\u6848\u4e2d\u7684\u70b9\u96c6\u8de8\u8d8a \\(u\\) ...\u8fd8\u662f\u6709\u70b9\u4e0d\u597d\u6c42\u3002 \u6b63\u96be\u5373\u53cd\uff0c\u89c2\u5bdf\u53d1\u73b0\u5bb9\u6613\u6c42\u51fa\u5bf9\u4e8e \\(u\\) \u6709\u591a\u5c11\u65b9\u6848\u4e0d\u8de8\u8d8a\u5b83\u3002\u5982\u679c\u4e00\u4e2a\u70b9\u96c6\u7684\u6700\u5c0f\u8fde\u901a\u5757\u4e0d\u5305\u542b\u5b83\uff0c\u90a3\u4e48\u5b83\u4e00\u5b9a\u5728 \\(u\\) \u7684\u513f\u5b50\u7684\u5b50\u6811\u4e2d \uff08\u6811\u4ee5 \\(u\\) \u4e3a\u6839\uff09\u3002\u628a\u5927\u5c0f\u4e3a \\(s\\) \u7684\u5b50\u6811\u4e2a\u6570\u8fdb\u884c\u7edf\u8ba1\uff0c\u62c6\u5f00\u7528\u7ec4\u5408\u6570\u5377\u4e00\u5377\u5c31\u53ef\u4ee5\u505a\u5230\u4e86\uff0c\u6ce8\u610f\u6a21\u6570 \\(924844033\\) \u7684\u539f\u6839\u662f \\(5\\) \u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(n\\log n)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define ll long long using namespace std ; const ll N = 3e5 + 5 , P = 924844033 , G = 5 , IG = 554906420 ; int n , lim , inv , head [ N ], tot ; ll A [ N * 10 ], B [ N * 10 ], fac [ N ], ifac [ N ]; struct Edge { int to , nxt ;} e [ N << 1 ]; inline void add ( int u , int v ){ e [ ++ tot ] = { v , head [ u ]}; head [ u ] = tot ;} inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } inline ll fpow ( ll a , ll b ){ ll ret = 1 ; while ( b ){ if ( b & 1 ) ret = ( ret * a ) % P ; b >>= 1 ; a = ( a * a ) % P ; } return ret ; } int rev [ N ], cnt [ N ], sz [ N ]; ll C ( int n , int m ){ return 1l l * fac [ n ] * ifac [ m ] % P * ifac [ n - m ] % P ;} inline void NTT ( ll * A , int n , int op ) { rep ( i , 0 , n -1 ) if ( i < rev [ i ]) swap ( A [ i ], A [ rev [ i ]]); for ( int i = 1 ; i < n ; i <<= 1 ) { ll rot = fpow ( op == 1 ? G : IG ,( P -1 ) / ( i << 1 )); for ( int j = 0 ; j < n ; j += i << 1 ) for ( int k = 0 , w = 1 ; k < i ; ++ k , w = 1l l * w * rot % P ) { int x = A [ j + k ], y = 1l l * w * A [ j + k + i ] % P ; A [ j + k ] = ( x + y ) % P , A [ j + k + i ] = ( x - y + P ) % P ; } } if ( op == -1 ) rep ( i , 0 , n -1 ) A [ i ] = 1l l * A [ i ] * inv % P ; } vector < int > E [ N ]; void dfs ( int u , int fa ) { sz [ u ] = 1 ; for ( int i = head [ u ]; i ; i = e [ i ]. nxt ){ int v = e [ i ]. to ; if ( v == fa ) continue ; dfs ( v , u ); sz [ u ] += sz [ v ]; ++ cnt [ sz [ v ]]; } ++ cnt [ n - sz [ u ]]; } int main (){ n = read (); rep ( i , 1 , n -1 ){ int u = read (), v = read (); add ( u , v ); add ( v , u ); } dfs ( 1 , 0 ); int lim = 1 , l = 0 ; for (; lim <= n << 1 ; lim <<= 1 , ++ l ); for ( int i = 0 ; i < lim ; ++ i ) rev [ i ] = ( rev [ i >> 1 ] >> 1 ) | (( i & 1 ) << ( l -1 )); inv = fpow ( lim , P -2 ); fac [ 0 ] = 1 ; rep ( i , 1 , n ) fac [ i ] = i * fac [ i -1 ] % P ; ifac [ n ] = fpow ( fac [ n ], P -2 ); per ( i , n , 1 ) ifac [ i -1 ] = ifac [ i ] * i % P ; rep ( i , 1 , n ) A [ i ] = 1l l * cnt [ i ] * fac [ i ] % P ; reverse ( A , A + n + 1 ); rep ( i , 0 , n ) B [ i ] = ifac [ i ]; NTT ( A , lim , 1 ); NTT ( B , lim , 1 ); rep ( i , 0 , lim -1 ) A [ i ] = A [ i ] * B [ i ] % P ; NTT ( A , lim , -1 ); reverse ( A , A + n + 1 ); rep ( i , 1 , n ){ printf ( \"%lld \\n \" ,( n * C ( n , i ) % P - A [ i ] * ifac [ i ] % P + P ) % P ); } return 0 ; }","title":"AGC005 \u505a\u9898\u8bb0\u5f55"},{"location":"%E7%AC%94%E8%AE%B0/AGC005%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#agc005","text":"","title":"AGC005 \u505a\u9898\u8bb0\u5f55"},{"location":"%E7%AC%94%E8%AE%B0/AGC005%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#a","text":"\u7528\u6808\u52a0\u5165\u5143\u7d20\uff0c\u5982\u679c\u5f53\u524d\u662f'T'\u4e14\u524d\u9762\u662f'S'\u6d88\u6389\u5373\u53ef\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 ; char s [ N ]; int st [ N ], top ; int main (){ scanf ( \"%s\" , s + 1 ); for ( int i = 1 ; s [ i ]; i ++ ){ if ( s [ i ] == 'S' ) st [ ++ top ] = 1 ; if ( s [ i ] == 'T' ){ if ( st [ top ]) top -- ; else st [ ++ top ] = 0 ; } } cout << top << endl ; return 0 ; }","title":"A"},{"location":"%E7%AC%94%E8%AE%B0/AGC005%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#b","text":"\u76f4\u63a5\u66b4\u529b\u662f \\(O(N^2)\\) \u7684\u80af\u5b9a\u4e0d\u884c\uff0c\u4e0d\u59a8\u8003\u8651\u6bcf\u4e2a\u5143\u7d20\u7ed9\u7b54\u6848\u7684\u8d21\u732e\u3002\u53ea\u9700\u8981\u5bf9\u6bcf\u4e2a\u5143\u7d20 \\(a_i\\) \uff0c\u627e\u51fa\u6700\u5c0f \\(l_i\\) \u548c\u6700\u5927 \\(r_i\\) \u4f7f\u5f97 \\([l_i,r_i]\\) \u533a\u95f4\u4e2d\u7684\u6700\u5c0f\u503c\u662f \\(a_i\\) \uff0c\u53ef\u4ee5\u7528\u5355\u8c03\u6808\u6c42\u51fa \\(l_i,r_i\\) \u3002\u663e\u7136\u5bf9\u4e8e \\(l\\in[l_i,i],r\\in[i,r_i],[l,r]\\) \u533a\u95f4\u4e2d\u6700\u5c0f\u503c\u4e5f\u662f \\(a_i\\) \u3002\u4e8e\u662f \\(a_i\\) \u5bf9\u7b54\u6848\u7684\u8d21\u732e\u5c31\u662f \\((i-l_i+1)(r_i-i+1)a_i\\) \u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 ; int n , a [ N ], l [ N ], r [ N ], st [ N ], top ; ll ans ; int main (){ n = read (); rep ( i , 1 , n ) a [ i ] = read (); rep ( i , 1 , n ){ while ( top && a [ st [ top ]] > a [ i ]){ r [ st [ top -- ]] = i -1 ; } st [ ++ top ] = i ; } while ( top ) r [ st [ top -- ]] = n ; per ( i , n , 1 ){ while ( top && a [ st [ top ]] > a [ i ]){ l [ st [ top ]] = i + 1 ; top -- ; } st [ ++ top ] = i ; } while ( top ) l [ st [ top -- ]] = 1 ; rep ( i , 1 , n ){ ans += 1l l * ( r [ i ] - i + 1 ) * ( i - l [ i ] + 1 ) * a [ i ]; } printf ( \"%lld \\n \" , ans ); return 0 ; }","title":"B"},{"location":"%E7%AC%94%E8%AE%B0/AGC005%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#c","text":"\u6784\u9020\u9898\u3002\u9996\u5148 \\(M=\\max a_i\\) \u4e3a\u8be5\u6811\u7684\u76f4\u5f84\u3002\u6211\u4eec\u8003\u8651\u76f4\u5f84\u4e0a\u7684\u70b9\uff0c\u5b83\u4eec\u5728\u6811\u4e0a\u7684\u6700\u8fdc\u8ddd\u79bb\u663e\u7136\u662f\u5230\u76f4\u5f84\u7684\u4e24\u4e2a\u7aef\u70b9\u4e4b\u4e00\u7684\u8ddd\u79bb\uff0c\u4e8e\u662f\u8fd9\u4e9b\u70b9\u7684 \\(a_i\\) \u53d6\u503c\u5e94\u8be5\u4e3a \\(M,M-1,M-2,\\cdots,\\lfloor M/2\\rfloor+1,?,\\lfloor M/2\\rfloor +1,\\dots,M\\) \u3002\u5f53 \\(M\\) \u4e3a\u5076\u6570\u65f6\uff0c \\(?\\) \u5904\u4e3a\u4e24\u4e2a \\(M/2\\) \uff0c\u4e3a\u5947\u6570\u65f6\u5219\u4e0d\u5b58\u5728\u3002\u56e0\u6b64\uff0c\u80fd\u6784\u6210\u6811\u7684\u5fc5\u8981\u6761\u4ef6\u662f\u4e0a\u8ff0\u8ddd\u79bb\u7684\u8fb9\u90fd\u8981\u6709\u8db3\u591f\u6570\u91cf\u3002 \u63a5\u4e0b\u6765\u53ea\u7528\u8003\u8651\u8fd9\u4e2a\u6761\u4ef6\u662f\u5426\u5145\u5206\uff0c\u5373\u8003\u8651\u5269\u4e0b\u591a\u4f59\u7684\u6700\u8fdc\u8ddd\u79bb\u600e\u4e48\u4e0e\u8fd9\u6761\u94fe\u5173\u8054\u3002\u6211\u4eec\u5728\u94fe\u4e0a\u9664\u4e86\u5934\u548c\u5c3e\u7684\u5176\u4ed6\u8282\u70b9\u4e0a\u7ee7\u7eed\u6302\u8282\u70b9\u5c31\u53ef\u4ee5\u4e86\uff0c\u4e0d\u96be\u53d1\u73b0\u9664\u4e86 \\(\\lceil M/2\\rceil\\) \u8fd9\u4e2a\u8ddd\u79bb\uff08\u611f\u6027\u7406\u89e3\u4e3a\u6811\u7684\u534a\u5f84\uff09\u65e0\u6cd5\u6784\u9020\u51fa\u6765\uff0c\u5176\u4ed6\u8ddd\u79bb\u90fd\u53ef\u4ee5\u8fd9\u4e48\u6784\u9020\uff0c\u4e8e\u662f\u8fd9\u9053\u9898\u5c31\u89e3\u51b3\u4e86\u3002\u56e0\u4e3a \\(N\\) \u5f88\u5c0f\uff0c\u5b9e\u73b0\u8fc7\u7a0b\u4e2d\u53ef\u4ee5\u5f00\u6876\u8bb0\u5f55\u8ddd\u79bb \\(x\\) \u7684\u6570\u91cf\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } int n , c [ 110 ], mx ; int main (){ n = read (); rep ( i , 1 , n ){ int x = read (); ++ c [ x ]; mx = max ( mx , x ); } int mid = ( mx + 1 ) >> 1 ; for ( int i = mx ; i > mid ; -- i ){ if ( c [ i ] < 2 ) return puts ( \"Impossible\" ), 0 ; n -= c [ i ]; } if ( c [ mid ] != 1 + ( mx & 1 ) || n != c [ mid ]) return puts ( \"Impossible\" ), 0 ; puts ( \"Possible\" ); return 0 ; }","title":"C"},{"location":"%E7%AC%94%E8%AE%B0/AGC005%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#d","text":"\u597ddp\u8ba1\u6570\u9898\u3002 \u8003\u8651 \\(P_i=j\\) \u4e3a \\((i,a_j)\\) \u4e4b\u95f4\u8fde\u4e00\u6761\u8fb9\uff0c\u90a3\u4e48\u4e00\u4e2a\u6392\u5217\u53ef\u4ee5\u88ab\u8f6c\u5316\u6210 \\(n\\) \u4e2a\u70b9\u4e0e\u53e6 \\(n\\) \u4e2a\u70b9\u7684\u4e00\u4e2a\u5339\u914d\u3002\u518d\u770b \\(|P_i-i|\\neq K\\) \u8fd9\u4e2a\u9650\u5236\uff0c\u6b63\u9762\u4e0d\u597d\u505a\uff0c\u6211\u4eec\u8003\u8651\u7528\u5bb9\u65a5\u539f\u7406\u3002\u5373 \\(f_i\\) \u4e3a\u6709 \\(i\\) \u4e2a\u5730\u65b9\u4e0e\u9650\u5236\u77db\u76fe\uff0c\u7b54\u6848\u5c31\u662f \\(\\sum_{i=1}^n (-1)^i\\times f_i\\) \u3002 \u5177\u4f53\u5730\uff0c\u6211\u4eec\u628a \\((i+K,a_i),(i-K,a_i)\\) \u8fde\u8fb9\uff0c\u90a3\u4e48\u56fe\u4e0a\u4f1a\u5f62\u6210\u82e5\u5e72\u6761\u4e0d\u76f8\u4ea4\u7684\u94fe\uff0c\u8fd9\u4e9b\u94fe\u4e0a\u9009\u4e86\u51e0\u6761\u8fb9\u4f5c\u4e3a\u5339\u914d\u7684\u8fb9\u5c31\u4f1a\u7edf\u8ba1\u8fdb \\(f_i\\) \u3002\u4e0d\u59a8\u5bf9\u8fd9\u4e9b\u4e0d\u76f8\u4ea4\u7684\u94fe\u5206\u522b\u8003\u8651\uff0c\u7531\u4e8e\u5339\u914d\u4e2d\u53ea\u7528\u6ee1\u8db3\u6bcf\u4e2a\u70b9\u53ea\u4e0e\u53e6\u5916\u4e00\u4e2a\u70b9\u914d\u5bf9\uff0c\u6211\u4eec\u53ef\u4ee5\u8bb0 \\(dp[i][j][0/1]\\) \u4e3a\u5f53\u524d\u8003\u8651\u5230\u7b2c \\(i\\) \u4e2a\u70b9\uff0c\u8fde\u63a5\u4e86 \\(j\\) \u6761\u8fb9\uff0c\u7b2c \\(i-1\\) \u4e2a\u70b9\u662f\u5426\u88ab\u5339\u914d\u3002\u4e8e\u662f\u6709\uff1a dp[i][j][0]=dp[i-1][j][0]+dp[i-1][j][1]\\\\ dp[i][j][1]=dp[i-1][j-1][0] \u6700\u7ec8\u6709 \\(f_i=(n-i)!\\times dp[2n][i]\\) \uff08\u5269\u4e0b \\(n-i\\) \u4e2a\u6570\u53ef\u4ee5\u968f\u4fbf\u6392\u5217 \uff09\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N^2)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2010 , P = 924844033 ; int n , k , tot ; ll fac [ N ], dp [ N << 1 ][ N ][ 2 ], ans ; bool vis [ N << 1 ]; inline ll Add ( const ll x , const ll y ){ return ( x + y >= P ) ? x + y - P : x + y ;} inline ll Del ( const ll x , const ll y ){ return ( x - y < 0 ) ? x - y + P : x - y ;} int main (){ n = read (), k = read (); fac [ 0 ] = 1 ; rep ( i , 1 , n ) fac [ i ] = fac [ i -1 ] * i % P ; rep ( i , 1 , k ){ rep ( t , 0 , 1 ){ for ( int j = i ; j <= n ; j += k ){ tot ++ ; if ( i != j ) vis [ tot ] = 1 ; } } } dp [ 0 ][ 0 ][ 0 ] = 1 ; rep ( i , 1 , n << 1 ) rep ( j , 0 , n ){ dp [ i ][ j ][ 0 ] = Add ( dp [ i -1 ][ j ][ 0 ], dp [ i -1 ][ j ][ 1 ]); if ( vis [ i ] && j ) dp [ i ][ j ][ 1 ] = dp [ i -1 ][ j -1 ][ 0 ]; } rep ( i , 0 , n ){ if ( i & 1 ) ans = Del ( ans ,( dp [ n << 1 ][ i ][ 0 ] + dp [ n << 1 ][ i ][ 1 ]) * fac [ n - i ] % P ); else ans = Add ( ans ,( dp [ n << 1 ][ i ][ 0 ] + dp [ n << 1 ][ i ][ 1 ]) * fac [ n - i ] % P ); } printf ( \"%lld \\n \" , ans ); return 0 ; }","title":"D"},{"location":"%E7%AC%94%E8%AE%B0/AGC005%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#e","text":"\u795e\u4ed9\u9898\u3002 \u9996\u5148\u8003\u8651\u5148\u624b\u5982\u4f55\u4e00\u76f4\u82df\u4e0b\u53bb\u3002\u5982\u679c\u5b58\u5728\u4e00\u6761\u7ea2\u8fb9 \\((u,v)\\) \uff0c\u800c \\(u\\) \u548c \\(v\\) \u5728\u84dd\u6811\u4e0a\u7684\u8ddd\u79bb\u5927\u4e8e\u7b49\u4e8e \\(3\\) \uff0c\u90a3\u4e48\u540e\u624b\u6c38\u8fdc\u6293\u4e0d\u5230\u5148\u624b\u3002\u56e0\u4e3a\u5148\u624b\u53ef\u4ee5\u7b49\u540e\u624b\u9760\u8fd1\u5176\u4e2d\u4e00\u4e2a\u8282\u70b9\u540e\u671d\u53e6\u4e00\u4e2a\u8282\u70b9\u8dd1\uff0c\u540e\u624b\u6c38\u8fdc\u8ffd\u4e0d\u4e0a\u5148\u624b\u3002 \u4e0b\u9762\u6211\u4eec\u5f00\u59cb\u8003\u8651\u5148\u624b\u8d70\u5230\u8fd9\u6837\u7684\u8fb9\u4e4b\u524d\uff0c\u6e38\u620f\u51b3\u7b56\u662f\u600e\u6837\u7684\u3002\u6ce8\u610f\u5230\u8fd9\u610f\u5473\u7740\u5148\u624b\u7ecf\u8fc7\u7684\u6240\u6709\u8fb9\u5728\u84dd\u6811\u4e0a\u8ddd\u79bb\u4e0d\u8d85\u8fc7 \\(2\\) \u3002\u8fd9\u53ef\u4ee5\u8fdb\u4e00\u6b65\u63a8\u51fa\u5148\u624b\u6240\u5728\u7684\u70b9 \\(v\\) \u5728\u84dd\u6811\u4e0a\u4e00\u5b9a\u5728\u540e\u624b\u6240\u5728\u70b9 \\(u\\) \u7684\u5b50\u6811\u4e0a\uff0c\u53ef\u4ee5\u901a\u8fc7\u5f52\u7eb3\u8bc1\u660e\u3002\u6ca1\u6709\u64cd\u4f5c\u65f6\u84dd\u6811\u4ee5\u540e\u624b\u8282\u70b9\u4e3a\u6839\uff0c\u5047\u8bbe\u6210\u7acb\u3002\u800c\u6bcf\u4e00\u6b65\u64cd\u4f5c\u5148\u624b\u7684\u4ece \\(v\\) \u79fb\u52a8\u5230 \\(v'\\) \uff0c \\((v,v')\\) \u5728\u84dd\u6811\u8ddd\u79bb\u4e0d\u8d85\u8fc7 \\(2\\) \uff0c\u8fd9\u8bf4\u660e\u5148\u624b\u65e0\u6cd5\u5728\u84dd\u6811\u4e2d\u8de8\u8d8a\u540e\u624b\u6240\u5728\u7684\u8282\u70b9\u3002\u5982\u679c\u8de8\u8d8a\u4e86\u5219\u540e\u624b\u53ef\u4ee5\u76f4\u63a5\u6293\u5230\u5b83\uff0c\u4e0d\u5982\u4e0d\u8d70\u3002 \u4ece\u8fd9\u4e2a\u7ed3\u8bba\u51fa\u53d1\uff0c\u5bf9\u4e8e\u70b9 \\(u\\) \u5728\u7ea2\u6811\u548c\u84dd\u6811\u4e0a\u5230\u5404\u81ea\u6839\u8282\u70b9\u7684\u8ddd\u79bb \\(d_1,d_2\\) \uff0c\u5982\u679c\u6709 \\(d_1\\ge d_2\\) \uff0c\u90a3\u4e48\u5148\u624b\u4e0d\u4f1a\u628a\u68cb\u5b50\u79fb\u52a8\u5230\u8fd9\u91cc\u3002\u56e0\u4e3a\u5148\u624b\u4e0d\u8de8\u8fc7\u540e\u624b\u68cb\u5b50\uff0c\u5fc5\u7136\u4f1a\u6bd4\u540e\u624b\u665a\u5230\u8fd9\u4e2a\u8282\u70b9\u3002\u6240\u4ee5\u5148\u624b\u6bcf\u6b21\u64cd\u4f5c\u90fd\u8981\u4fdd\u8bc1 \\(d_1<d_2\\) \u3002 \u6700\u540e\u53ef\u4ee5\u641c\u7d22\u51fa\u662f\u5426\u80fd\u8fbe\u5230\u80fd\u65e0\u9650\u64cd\u4f5c\u7684\u8fb9\uff0c\u5982\u679c\u8fbe\u5230\u4e86\u7b54\u6848\u5c31\u662f \\(-1\\) \uff1b\u53cd\u4e4b\u7b54\u6848\u4e3a\u6700\u5927\u7684 \\(d_2\\) \u7684\u4e24\u500d\uff0c\u51b3\u7b56\u4e3a\u5148\u624b\u8d70\u5230\u8fd9\u91cc\u539f\u5730\u7b49\u6b7b\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) using namespace std ; inline int read (){ int x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 ; int n , x , y , dr [ N ], d [ N ], fa [ N ], mx ; bool flag ; vector < int > R [ N ], B [ N ]; void dfs1 ( int u , int f ){ for ( int v : B [ u ]) if ( v != f ){ fa [ v ] = u ; d [ v ] = d [ u ] + 1 ; dfs1 ( v , u ); } } bool check ( int u , int v ){ return u != fa [ v ] && v != fa [ u ] && u != fa [ fa [ v ]] && v != fa [ fa [ u ]] && fa [ u ] != fa [ v ]; } void dfs2 ( int u , int f , int dep ){ if ( dep >= d [ u ]) return ; mx = max ( mx , d [ u ]); for ( int v : R [ u ]) if ( v != f ){ if ( check ( u , v )){ puts ( \"-1\" ); exit ( 0 );} dfs2 ( v , u , dep + 1 ); } } int main (){ n = read (), x = read (), y = read (); rep ( i , 1 , n -1 ){ int u = read (), v = read (); R [ u ]. push_back ( v ); R [ v ]. push_back ( u ); } rep ( i , 1 , n -1 ){ int u = read (), v = read (); B [ u ]. push_back ( v ); B [ v ]. push_back ( u ); } dfs1 ( y , 0 ); dfs2 ( x , 0 , 0 ); printf ( \"%d \\n \" , mx * 2 ); return 0 ; }","title":"E"},{"location":"%E7%AC%94%E8%AE%B0/AGC005%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#f","text":"\u5999\u8ba1\u6570*2\u3002 \u663e\u7136\u4e0d\u80fd\u679a\u4e3e\u5b50\u96c6\uff0c\u6211\u4eec\u5c1d\u8bd5\u7b97\u6bcf\u4e2a\u70b9\u5bf9\u7b54\u6848\u7684\u8d21\u732e\u8fd9\u79cd\u5e38\u89c1\u5957\u8def\u3002\u4e0d\u59a8\u5148\u8003\u8651 \\(u\\) \u5bf9 \\(f_k\\) \u7684\u8d21\u732e\uff0c\u5373\u6709\u591a\u5c11\u65b9\u6848\u4e2d\u7684\u70b9\u96c6\u8de8\u8d8a \\(u\\) ...\u8fd8\u662f\u6709\u70b9\u4e0d\u597d\u6c42\u3002 \u6b63\u96be\u5373\u53cd\uff0c\u89c2\u5bdf\u53d1\u73b0\u5bb9\u6613\u6c42\u51fa\u5bf9\u4e8e \\(u\\) \u6709\u591a\u5c11\u65b9\u6848\u4e0d\u8de8\u8d8a\u5b83\u3002\u5982\u679c\u4e00\u4e2a\u70b9\u96c6\u7684\u6700\u5c0f\u8fde\u901a\u5757\u4e0d\u5305\u542b\u5b83\uff0c\u90a3\u4e48\u5b83\u4e00\u5b9a\u5728 \\(u\\) \u7684\u513f\u5b50\u7684\u5b50\u6811\u4e2d \uff08\u6811\u4ee5 \\(u\\) \u4e3a\u6839\uff09\u3002\u628a\u5927\u5c0f\u4e3a \\(s\\) \u7684\u5b50\u6811\u4e2a\u6570\u8fdb\u884c\u7edf\u8ba1\uff0c\u62c6\u5f00\u7528\u7ec4\u5408\u6570\u5377\u4e00\u5377\u5c31\u53ef\u4ee5\u505a\u5230\u4e86\uff0c\u6ce8\u610f\u6a21\u6570 \\(924844033\\) \u7684\u539f\u6839\u662f \\(5\\) \u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(n\\log n)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define ll long long using namespace std ; const ll N = 3e5 + 5 , P = 924844033 , G = 5 , IG = 554906420 ; int n , lim , inv , head [ N ], tot ; ll A [ N * 10 ], B [ N * 10 ], fac [ N ], ifac [ N ]; struct Edge { int to , nxt ;} e [ N << 1 ]; inline void add ( int u , int v ){ e [ ++ tot ] = { v , head [ u ]}; head [ u ] = tot ;} inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } inline ll fpow ( ll a , ll b ){ ll ret = 1 ; while ( b ){ if ( b & 1 ) ret = ( ret * a ) % P ; b >>= 1 ; a = ( a * a ) % P ; } return ret ; } int rev [ N ], cnt [ N ], sz [ N ]; ll C ( int n , int m ){ return 1l l * fac [ n ] * ifac [ m ] % P * ifac [ n - m ] % P ;} inline void NTT ( ll * A , int n , int op ) { rep ( i , 0 , n -1 ) if ( i < rev [ i ]) swap ( A [ i ], A [ rev [ i ]]); for ( int i = 1 ; i < n ; i <<= 1 ) { ll rot = fpow ( op == 1 ? G : IG ,( P -1 ) / ( i << 1 )); for ( int j = 0 ; j < n ; j += i << 1 ) for ( int k = 0 , w = 1 ; k < i ; ++ k , w = 1l l * w * rot % P ) { int x = A [ j + k ], y = 1l l * w * A [ j + k + i ] % P ; A [ j + k ] = ( x + y ) % P , A [ j + k + i ] = ( x - y + P ) % P ; } } if ( op == -1 ) rep ( i , 0 , n -1 ) A [ i ] = 1l l * A [ i ] * inv % P ; } vector < int > E [ N ]; void dfs ( int u , int fa ) { sz [ u ] = 1 ; for ( int i = head [ u ]; i ; i = e [ i ]. nxt ){ int v = e [ i ]. to ; if ( v == fa ) continue ; dfs ( v , u ); sz [ u ] += sz [ v ]; ++ cnt [ sz [ v ]]; } ++ cnt [ n - sz [ u ]]; } int main (){ n = read (); rep ( i , 1 , n -1 ){ int u = read (), v = read (); add ( u , v ); add ( v , u ); } dfs ( 1 , 0 ); int lim = 1 , l = 0 ; for (; lim <= n << 1 ; lim <<= 1 , ++ l ); for ( int i = 0 ; i < lim ; ++ i ) rev [ i ] = ( rev [ i >> 1 ] >> 1 ) | (( i & 1 ) << ( l -1 )); inv = fpow ( lim , P -2 ); fac [ 0 ] = 1 ; rep ( i , 1 , n ) fac [ i ] = i * fac [ i -1 ] % P ; ifac [ n ] = fpow ( fac [ n ], P -2 ); per ( i , n , 1 ) ifac [ i -1 ] = ifac [ i ] * i % P ; rep ( i , 1 , n ) A [ i ] = 1l l * cnt [ i ] * fac [ i ] % P ; reverse ( A , A + n + 1 ); rep ( i , 0 , n ) B [ i ] = ifac [ i ]; NTT ( A , lim , 1 ); NTT ( B , lim , 1 ); rep ( i , 0 , lim -1 ) A [ i ] = A [ i ] * B [ i ] % P ; NTT ( A , lim , -1 ); reverse ( A , A + n + 1 ); rep ( i , 1 , n ){ printf ( \"%lld \\n \" ,( n * C ( n , i ) % P - A [ i ] * ifac [ i ] % P + P ) % P ); } return 0 ; }","title":"F"},{"location":"%E7%AC%94%E8%AE%B0/AGC006%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/","text":"AGC006 \u505a\u9898\u8bb0\u5f55 \u00b6 A \u00b6 \u663e\u7136\u7b49\u4ef7\u4e8e\u6c42 \\(s\\) \u7684\u540e\u7f00\u4e0e \\(t\\) \u7684\u524d\u7f00\u76f8\u540c\u7684\u6700\u5927\u957f\u5ea6\u3002\u6ce8\u610f\u5230 \\(N\\le100\\) \uff0c\u53ef\u4ee5\u76f4\u63a5\u66b4\u529b\u3002 \u6211\u4e0d\u60f3\u66b4\u529b\u600e\u4e48\u529e\u554a\uff1f \u90a3\u53ef\u4ee5\u7528\u5b57\u7b26\u4e32\u54c8\u5e0c\u505a\u5230 \\(O(N)\\) \u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int P = 998244353 ; ll n , p [ 105 ], pre [ 105 ], suf [ 105 ]; char s [ 105 ], t [ 105 ]; int main (){ n = read (); scanf ( \"%s%s\" , s + 1 , t + 1 ); p [ 0 ] = 1 ; rep ( i , 1 , n ){ p [ i ] = p [ i -1 ] * 26 % P ; pre [ i ] = ( t [ i ] - 'a' + pre [ i -1 ] * 26 % P ) % P ; } rep ( i , 0 , n -1 ){ suf [ i + 1 ] = ( suf [ i ] + p [ i ] * ( s [ n - i ] - 'a' ) % P ) % P ; } for ( int len = n ; len ; -- len ){ if ( pre [ len ] == suf [ len ]){ printf ( \"%d \\n \" , 2 * n - len ); return 0 ; } } printf ( \"%d \\n \" , 2 * n ); return 0 ; } B \u00b6 \u6784\u9020\u9898\u3002\u4e0d\u59a8\u5148\u627e\u627e\u89c4\u5f8b\u548c\u6027\u8d28\uff0c\u6709 \u5982\u679c\u67d0\u4e00\u884c\u4e2d\u76f8\u90bb\u5143\u7d20 \\(a_i=a_{i+1}=x\\) \uff0c\u90a3\u4e48\u8fd9\u884c\u5f80\u4e0a\u7684\u7b2c \\(i,i+1\\) \u5217\u7684\u5143\u7d20\u5747\u4e3a \\(x\\) \u3002 \u56e0\u4e3a\u7b2c\u4e00\u5c42\u6570\u5b57\u9700\u8981\u4e3a\u7b2c\u4e8c\u5c42\u7684\u4e2d\u4f4d\u6570\uff0c\u6545 \\(1,2n-1\\) \u4e24\u6570\u4e0d\u53ef\u80fd\u5728\u9876\u5c42\u3002 \u6709\u4e86\u8fd9\u4e24\u4e2a\u6027\u8d28\uff0c\u6211\u4eec\u4e0d\u59a8\u601d\u8003\u4e00\u4e0b\u5bf9\u4e8e\u6ee1\u8db3 \\(1<x<2n-1\\) \u7684 \\(x\\) \u5728\u9876\u5c42\u65f6\u8be5\u5982\u4f55\u6784\u9020\u3002\u6700\u597d\u7684\u6784\u9020\u5c31\u662f\u6700\u5e95\u5c42\u6ee1\u8db3 \\((a_{n-1},a_n,a_{n+1})\\) \u548c \\((a_n,a_{n+1},a_{n+2})\\) \u4e2d\u5747\u6709 \\(a_n=x\\) \u4e3a\u4e2d\u4f4d\u6570\uff0c\u7531\u6027\u8d281\u5f97\u9876\u5c42\u5143\u7d20\u4e00\u5b9a\u4e3a \\(x\\) \u3002 \u6709\u4e00\u8bf4\u4e00\u8fd9\u9053\u9898rating\u624d1600\u600e\u4e48\u5c31\u7d2b\u4e86 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 ; int n , x , ans [ N ]; bool vis [ N ]; int main (){ n = read (), x = read (); if ( x == 1 || x == 2 * n -1 ) return puts ( \"No\" ), 0 ; if ( x == 2 ){ puts ( \"Yes\" ); ans [ n -1 ] = 2 * n -1 , ans [ n ] = 2 , ans [ n + 1 ] = 1 , ans [ n + 2 ] = 2 * n -2 ; rep ( i , 1 , n -2 ) ans [ i ] = i + 2 ; rep ( i , n + 3 , 2 * n -1 ) ans [ i ] = i -2 ; } else { puts ( \"Yes\" ); ans [ n -1 ] = 1 , ans [ n ] = x , ans [ n + 1 ] = 2 * n -1 , ans [ n + 2 ] = 2 ; vis [ 1 ] = vis [ x ] = vis [ 2 * n -1 ] = vis [ 2 ] = 1 ; int j = 1 ; rep ( i , 1 , 2 * n -1 ){ while ( ans [ i ]) i ++ ; while ( vis [ j ]) j ++ ; ans [ i ] = j ++ ; } } rep ( i , 1 , 2 * n -1 ) printf ( \"%d \\n \" , ans [ i ]); return 0 ; } C \u00b6 \u6709\u70b9\u5999\u7684\u671f\u671b\u9898\u3002 \u901a\u8fc7\u8ba1\u7b97\u53ef\u4ee5\u53d1\u73b0\uff0c\u7b2c \\(i\\) \u4e2a\u5154\u5b50\u8df3\u8dc3\u540e\u65b0\u7684\u671f\u671b\u4f4d\u7f6e\u4e3a \\frac12(2a_{i-1}-a_i+2a_{i+1}-a_i)=a_{i-1}+a_{i+1}-a_i \u770b\u8d77\u6765\u4e0d\u592a\u6709\u89c4\u5f8b\uff0c\u7136\u800c\u5982\u679c\u6211\u4eec\u753b\u4e86\u56fe\u7684\u8bdd\uff0c\u4f1a\u53d1\u73b0\u8fd9\u4e00\u6b21\u8df3\u8dc3\u672c\u8d28\u4e0a\u4ea4\u6362\u4e86 \\(d_i=a_i-a_{i-1},d_{i+1}=a_{i+1}-a_i\\) \u8fd9\u4e24\u6bb5\u8ddd\u79bb\u3002\uff08\u4e5f\u53ef\u4ee5\u901a\u8fc7\u79fb\u9879\u53d1\u73b0 \\(a'_i-a_{i-1}=d_{i+1},a_{i+1}-a'_i=d_i\\) \uff09\u7ed9\u5b9a\u7684 \\(m\\) \u4e2a\u4ea4\u6362\u6784\u6210\u4e00\u4e2a\u7f6e\u6362\uff0c\u6211\u4eec\u8981\u6c42\u7684\u5c31\u662f\u7f6e\u6362 \\(k\\) \u6b21\u540e\u6700\u7ec8\u7684\u5e8f\u5217\uff0c\u628a\u5dee\u5206\u8fd8\u539f\u5c31\u80fd\u5f97\u5230\u7b54\u6848\u3002\u505a\u6cd5\u5f88\u591a\uff0c\u53ef\u4ee5\u4f7f\u7528\u5feb\u901f\u5e42\u6216\u8005\u5229\u7528\u4e00\u4e2a\u7f6e\u6362\u4e3a\u82e5\u5e72\u4e2a\u8f6e\u6362\u6784\u6210\u7684\u6027\u8d28\u3002\u4e24\u8005\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u5206\u522b\u4e3a \\(O(n\\log k)\\) \u548c \\(O(n)\\) \uff0c\u8fd9\u91cc\u7528\u7684\u662f\u5feb\u901f\u5e42\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 ; int n , d [ N ], ans [ N ], T [ N ], a [ N ]; double b [ N ]; ll m , k ; int main (){ n = read (); rep ( i , 1 , n ) a [ i ] = read (), d [ i ] = ans [ i ] = i ; m = read (), k = read (); rep ( i , 1 , m ){ int x = read (); swap ( d [ x ], d [ x + 1 ]); } while ( k ){ if ( k & 1 ){ rep ( i , 1 , n ) T [ i ] = ans [ d [ i ]]; rep ( i , 1 , n ) ans [ i ] = T [ i ]; } rep ( i , 1 , n ) T [ i ] = d [ d [ i ]]; rep ( i , 1 , n ) d [ i ] = T [ i ]; k >>= 1 ; } rep ( i , 1 , n ) b [ i ] = a [ ans [ i ]] - a [ ans [ i ] -1 ]; rep ( i , 1 , n ) printf ( \"%.1lf \\n \" , b [ i ] += b [ i -1 ]); return 0 ; } ### D \u4e8c\u5206\u601d\u60f3\u5f88\u5999\u7684\u5e94\u7528\u3002 \u66b4\u529b\u663e\u7136\u4e0d\u884c\uff0c\u6211\u4eec\u56de\u5fc6\u4e00\u4e0b B \u4e2d\u5f97\u5230\u7684\u6027\u8d281\uff1a \u5982\u679c\u67d0\u4e00\u884c\u4e2d\u76f8\u90bb\u5143\u7d20 \\(a_i=a_{i+1}=x\\) \uff0c\u90a3\u4e48\u8fd9\u884c\u5f80\u4e0a\u7684\u7b2c \\(i,i+1\\) \u5217\u7684\u5143\u7d20\u5747\u4e3a \\(x\\) \u3002 \u53ef\u4ee5\u901a\u8fc7\u4e8c\u5206\u7b54\u6848\u6765\u68c0\u9a8c\u9876\u5c42\u5143\u7d20\u662f\u5426 \\(\\ge x\\) \u3002\u628a\u6240\u6709 \\(a_i<x\\) \u8bbe\u4e3a \\(0\\) \uff0c \\(a_i\\ge x\\) \u8bbe\u4e3a \\(1\\) \uff0c\u90a3\u4e48\u6700\u63a5\u8fd1\u4e2d\u5fc3\u7684\u8fde\u7eed\u4e24\u4e2a\u76f8\u540c\u5143\u7d20\u51b3\u5b9a\u4e86\u9876\u7aef\u7684\u53d6\u503c\u3002\u5982\u679c\u8fde\u7eed\u4e24\u4e2a \\(1\\) \uff0c\u90a3\u4e48\u9876\u7aef\u4e5f\u4e3a \\(1\\) \uff0c\u5373 \\(\\ge x\\) \uff0c\u53cd\u4e4b\u9876\u7aef\u4e3a \\(0\\) \u3002\u53ea\u6709\u5f53 \\(01\\) \u4ea4\u9519\u65f6\u6ca1\u6709\u8fd9\u6837\u7684\u8fde\u7eed\u6bb5\uff0c\u6b64\u65f6\u9876\u7aef\u5143\u7d20 \\(=a_1\\) \u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(n\\log n)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 ; int n , a [ N ], b [ N ]; bool check ( int x ){ rep ( i , 1 , 2 * n -1 ) b [ i ] = ( a [ i ] >= x ); rep ( i , 0 , n -2 ){ if ( b [ n + i ] == b [ n + i + 1 ]) return b [ n + i ]; if ( b [ n - i ] == b [ n - i -1 ]) return b [ n - i ]; } return b [ 1 ]; } int main (){ n = read (); rep ( i , 1 , 2 * n -1 ) a [ i ] = read (); int l = 1 , r = 2 * n -1 , ans ; while ( l <= r ){ int mid = ( l + r ) >> 1 ; if ( check ( mid )){ l = mid + 1 ; ans = mid ; } else r = mid -1 ; } printf ( \"%d \\n \" , ans ); return 0 ; } E \u00b6 \u4e00\u80a1 [AGC003C] BBuBBBlesort! \u7684\u65e2\u89c6\u611f\uff08\u3002 \u89c2\u5bdf\u53d1\u73b0\u6bcf\u4e2a\u64cd\u4f5c\u7b49\u4ef7\u4e8e\u4ea4\u6362\u5e76\u7ffb\u8f6c \\(i,i+2\\) \u4e24\u5217\uff0c\u540c\u65f6\u7ffb\u8f6c \\(i+1\\) \u5217\u3002\u6ce8\u610f\u5230\u64cd\u4f5c\u4e0d\u4f1a\u6539\u53d8\u6bcf\u4e00\u5217\u4e0b\u6807\u7684\u5947\u5076\u6027\uff0c\u4e8e\u662f\u53ef\u4ee5\u5206\u5947\u6570\u5217\u548c\u5076\u6570\u5217\u8fdb\u884c\u8003\u8651\u3002\u8bbe \\(tot_0,tot_1\\) \u5206\u522b\u4e3a\u5947\u6570\u5217\u548c\u5076\u6570\u5217\u7684\u603b\u64cd\u4f5c\u6b21\u6570\uff0c \\(inv_0, inv_1\\) \u4e3a\u5947\u5076\u5217\u98a0\u5012\u7684\u5217\u6570\u3002\u6ce8\u610f\u5230\u5947\u6570\u5217\u7684\u6bcf\u4e2a\u64cd\u4f5c\u4f1a\u5e26\u6765\u67d0\u4e2a\u5076\u6570\u5217\u7684\u4e00\u6b21\u7ffb\u8f6c\uff0c\u4e8e\u662f tot_0=inv_1,tot_1=inv_0 \u662f\u80fd\u64cd\u4f5c\u56de\u539f\u77e9\u9635\u7684\u5fc5\u8981\u6761\u4ef6\u3002 \u6b64\u65f6\u53ef\u4ee5\u5927\u80c6\u731c\u60f3\u8be5\u6761\u4ef6\u5145\u5206\uff0c\u56e0\u4e3a\u5e76\u4e0d\u9700\u8981\u8bc1\u660e\uff08\u96fe\uff09 \u4e0b\u9762\u8bc1\u660e\u5176\u5145\u5206\u6027\u3002\u8bb0\u64cd\u4f5c \\(i\\) \u4e3a\u7ffb\u8f6c \\(i,i+1,i+2\\) \u8fd9\u4e09\u5217\u3002\u90a3\u4e48\u7ecf\u8fc7\u64cd\u4f5c \\(1,3,1,3,1,3,2,1,2,1\\) \u540e\uff0c\u7b2c \\(1\\) \u548c \\(3\\) \u5217\u88ab\u7ffb\u8f6c\uff0c\u4e14\u5176\u4ed6\u5217\u4e0d\u53d8\u3002\u8fdb\u800c\u53ef\u4ee5\u4e0d\u6539\u53d8\u5176\u4ed6\u5217\u7684\u60c5\u51b5\u4e0b\u751f\u6210\u5947\u6570\u5217\u548c\u5076\u6570\u5217\u5404\u81ea\u4e0a\u7684\u4efb\u610f\u5076\u6570\u6b21\u7ffb\u8f6c\u3002\u89e3\u51b3\u4e86\u7ffb\u8f6c\u6b21\u6570\u7684\u5947\u5076\u6027\u95ee\u9898\uff0c\u800c\u5bf9\u6362\u76f8\u90bb\u884c\u751f\u6210\u7f6e\u6362\u53c8\u662f\u663e\u7136\u7684\uff0c\u8fd9\u5c31\u8bc1\u660e\u4e86\u4e0a\u8ff0\u7ed3\u8bba\u7684\u5145\u5206\u6027\u3002 \u6700\u540e\u601d\u8003\u5982\u4f55\u6c42\u89e3\uff0c\u8fd9\u5e76\u4e0d\u96be\uff08\u6bd4\u4e0a\u9762\u7684\u5bb9\u6613\u591a\u4e86\uff09\uff0c\u53ef\u4ee5\u7528 \\(O(n\\log n)\\) \u6c42\u9006\u5e8f\u5bf9\u6570\u6765\u5224\u65ad\u7f6e\u6362\u6240\u9700\u8981\u7684\u5bf9\u6362\u6570\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u53e6\u4e00\u4e2a\u795e\u4ed9\u505a\u6cd5\u4f18\u5316\u5230 \\(O(n)\\) \u3002\u5bf9\u4e8e\u7b2c\u4e8c\u79cd\u505a\u6cd5\uff0c\u6211\u4eec\u628a\u7f6e\u6362\u7528\u82e5\u5e72\u4e2a\u8f6e\u6362\u6765\u8868\u793a\uff0c\u73af\u7684\u5927\u5c0f\u4e0e\u9006\u5e8f\u5bf9\u7684\u4e2a\u6570\u7684\u5947\u5076\u6027\u76f8\u53cd\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(n)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 ; int a [ N ][ 3 ], to [ N ], n , tot [ 2 ]; int main (){ n = read (); rep ( i , 0 , 2 ) rep ( j , 1 , n ) a [ j ][ i ] = read (); rep ( i , 1 , n ){ if (( a [ i ][ 0 ] == a [ i ][ 1 ] -1 && a [ i ][ 2 ] == a [ i ][ 1 ] + 1 ) || ( a [ i ][ 0 ] == a [ i ][ 1 ] + 1 && a [ i ][ 2 ] == a [ i ][ 1 ] -1 )){ to [ i ] = a [ i ][ 1 ] / 3 + 1 ; if ( i % 2 != to [ i ] % 2 || a [ i ][ 1 ] % 3 != 2 ) return puts ( \"No\" ), 0 ; if ( a [ i ][ 0 ] > a [ i ][ 2 ]) tot [ i & 1 ] ^= 1 ; } else return puts ( \"No\" ), 0 ; } rep ( i , 1 , n ){ while ( i != to [ i ]){ swap ( to [ i ], to [ to [ i ]]); tot [ i & 1 ^ 1 ] ^= 1 ; } } if ( tot [ 0 ] || tot [ 1 ]) puts ( \"No\" ); else puts ( \"Yes\" ); return 0 ; } F \u00b6 \u9898\u76ee\u63cf\u8ff0\u770b\u4e0a\u53bb\u5f88\u602a\uff0c\u5148\u627e\u4e00\u4e0b\u7b49\u4ef7\u547d\u9898\uff0c\u53d1\u73b0\u53ef\u4ee5\u770b\u505a \\(n\\) \u4e2a\u70b9 \\(m\\) \u6761\u8fb9\u7684\u56fe\uff0c\u4e14\u5982\u679c \\((u,v),(v,w)\\) \u6709\u8fb9\uff0c \\((w,u)\\) \u4e5f\u8fde\u4e00\u6761\u8fb9\u3002\u518d\u8f6c\u6362\u4e00\u4e0b\uff0c\u5bf9\u4e8e \\(v\\) \u7684\u6240\u6709\u51fa\u8fb9\u548c\u5165\u8fb9\u5bf9\u7684\u8282\u70b9\uff0c\u51fa\u70b9\u5411\u5165\u70b9\u8fde\u4e00\u6761\u8fb9\u3002 \u9996\u5148\u89c2\u5bdf\u5230\u52a0\u8fb9\u53ea\u5728\u5f31\u8fde\u901a\u5206\u91cf\u91cc\u8fdb\u884c\uff0c\u6211\u4eec\u53ef\u4ee5\u5355\u72ec\u8003\u8651\u6bcf\u4e2a\u8fd9\u6837\u7684\u5206\u91cf\u3002 \u5982\u679c\u4e0d\u5b58\u5728\u4e00\u7ec4 \\((u,v),(v,w)\\) \u7684\u8bdd\uff0c\u56fe\u4e0d\u4f1a\u53d8\u5316\u3002 \u5982\u679c\u5b58\u5728\uff0c\u5c06\u4e00\u4e2a\u8282\u70b9\u67d3\u7ea2\uff0c\u5176\u51fa\u70b9\u67d3\u84dd\uff0c\u5165\u70b9\u67d3\u7eff\uff1b\u5165\u8fb9\u5bf9\u7eff\u70b9\u6216\u51fa\u8fb9\u5bf9\u84dd\u70b9\u7684\u6240\u6709\u70b9\u67d3\u7ea2\uff0c\u8fd9\u4e9b\u7ea2\u70b9\u518d\u7ee7\u7eed\u5f15\u51fa\u65b0\u7684\u70b9\u67d3\u8272\u3002\u67d3\u8272\u82e5\u6210\u529f\uff0c \\(R\\to G\\to B\\to R\\) \uff0c\u4e09\u79cd\u989c\u8272\u6784\u6210\u4e86\u4e09\u5143\u73af\u3002\u4e0d\u96be\u53d1\u73b0\uff0c\u989c\u8272\u4e0d\u540c\u7684\u8282\u70b9\u4e24\u4e24\u4e4b\u95f4\u90fd\u4f1a\u6709\u4e00\u6761\u8fb9\u3002\u8ba9\u6211\u4eec\u66f4\u597d\u7684\u63cf\u8ff0\u8fd9\u4e2a\u67d3\u8272\u8fc7\u7a0b\uff0c\u5b9e\u8d28\u4e0a\u4e3a\u8d77\u70b9\u4e3a\u7ea2\u8272\uff0c\u8be5\u70b9\u8fde\u5411\u7684\u6240\u6709\u70b9\u67d3\u84dd\u8272\uff0c\u84dd\u8272\u70b9\u8fde\u5411\u7684\u6240\u6709\u70b9\u67d3\u7eff\u8272\u3002\u8bbe\u4e09\u8272\u70b9\u6570\u91cf\u5206\u522b\u4e3a \\(R,G,B\\) \uff0c\u90a3\u4e48\u8be5\u8fde\u901a\u5206\u91cf\u5bf9\u7b54\u6848\u8d21\u732e\u4e3a \\(RG+RB+GB\\) \u3002 \u7136\u800c\uff0c\u6211\u4eec\u5ffd\u7565\u4e86\u5728\u4e0a\u8ff0\u67d3\u8272\u8fc7\u7a0b\u4e2d\u5931\u8d25\u7684\u53ef\u80fd\u6027\uff0c\u5373\u51fa\u73b0\u67d3\u8272\u7684\u77db\u76fe\u3002\u4e0d\u59a8\u8bbe\u77db\u76fe\u51fa\u73b0\u5728\u70b9 \\(u\\) \u4e14\u5b83\u540c\u65f6\u67d3\u4e86\u7ea2\u8272\u548c\u84dd\u8272\uff0c\u6839\u636e\u4e0a\u4e2a\u67d3\u8272\u7684\u6027\u8d28\uff08\u7ea2\u70b9\u548c\u84dd\u70b9\u8fde\u8fb9\uff09\uff0c \\(u\\) \u4f1a\u6709\u81ea\u73af\u3002\u800c\u81ea\u73af\u53c8\u53ef\u4ee5\u63a8\u51fa \\(u\\) \u4e5f\u80fd\u67d3\u7eff\u8272\uff0c\u8fdb\u800c\u53d1\u73b0\u6240\u6709\u70b9\u90fd\u5411 \\(u\\) \u8fde\u8fb9\uff0c\u800c\u8fd9\u5f15\u51fa\u4e86\u6240\u6709\u70b9\u7684\u67d3\u8272\u77db\u76fe\uff0c\u6574\u4e2a\u56fe\u5c06\u53d8\u6210\u5305\u62ec\u81ea\u73af\u7684\u5b8c\u5168\u56fe\u3002\u5bf9\u7b54\u6848\u8d21\u732e\u4e3a \\(tot^2\\) \uff0c\u5176\u4e2d \\(tot\\) \u4e3a\u8fde\u901a\u5206\u91cf\u5927\u5c0f\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(n)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 ; int n , m , col [ N ], flag , tot , etot ; bool vis [ N ]; ll ans , cnt [ 3 ]; struct Edge { int tp , to ;}; vector < Edge > G [ N ]; void dfs ( int u ){ ++ cnt [ col [ u ]]; vis [ u ] = 1 ; ++ tot ; for ( auto tmp : G [ u ]){ etot += ( tmp . tp == 1 ); int v = tmp . to ; if ( ! vis [ v ]){ col [ v ] = ( col [ u ] + tmp . tp ) % 3 ; dfs ( v ); } else if ( col [ v ] != ( col [ u ] + tmp . tp ) % 3 ) flag = 0 ; } } int main (){ n = read (), m = read (); rep ( i , 1 , m ){ int u = read (), v = read (); G [ u ]. push_back ({ 1 , v }); G [ v ]. push_back ({ 2 , u }); } rep ( i , 1 , n ) if ( ! vis [ i ]){ memset ( cnt , 0 , sizeof ( cnt )); flag = 1 ; etot = tot = 0 ; dfs ( i ); if ( ! flag ) ans += 1l l * tot * tot ; else if ( cnt [ 0 ] && cnt [ 1 ] && cnt [ 2 ]){ ans += cnt [ 0 ] * cnt [ 1 ] + cnt [ 1 ] * cnt [ 2 ] + cnt [ 2 ] * cnt [ 0 ]; } else ans += etot ; } printf ( \"%lld \\n \" , ans ); return 0 ; }","title":"AGC006 \u505a\u9898\u8bb0\u5f55"},{"location":"%E7%AC%94%E8%AE%B0/AGC006%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#agc006","text":"","title":"AGC006 \u505a\u9898\u8bb0\u5f55"},{"location":"%E7%AC%94%E8%AE%B0/AGC006%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#a","text":"\u663e\u7136\u7b49\u4ef7\u4e8e\u6c42 \\(s\\) \u7684\u540e\u7f00\u4e0e \\(t\\) \u7684\u524d\u7f00\u76f8\u540c\u7684\u6700\u5927\u957f\u5ea6\u3002\u6ce8\u610f\u5230 \\(N\\le100\\) \uff0c\u53ef\u4ee5\u76f4\u63a5\u66b4\u529b\u3002 \u6211\u4e0d\u60f3\u66b4\u529b\u600e\u4e48\u529e\u554a\uff1f \u90a3\u53ef\u4ee5\u7528\u5b57\u7b26\u4e32\u54c8\u5e0c\u505a\u5230 \\(O(N)\\) \u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int P = 998244353 ; ll n , p [ 105 ], pre [ 105 ], suf [ 105 ]; char s [ 105 ], t [ 105 ]; int main (){ n = read (); scanf ( \"%s%s\" , s + 1 , t + 1 ); p [ 0 ] = 1 ; rep ( i , 1 , n ){ p [ i ] = p [ i -1 ] * 26 % P ; pre [ i ] = ( t [ i ] - 'a' + pre [ i -1 ] * 26 % P ) % P ; } rep ( i , 0 , n -1 ){ suf [ i + 1 ] = ( suf [ i ] + p [ i ] * ( s [ n - i ] - 'a' ) % P ) % P ; } for ( int len = n ; len ; -- len ){ if ( pre [ len ] == suf [ len ]){ printf ( \"%d \\n \" , 2 * n - len ); return 0 ; } } printf ( \"%d \\n \" , 2 * n ); return 0 ; }","title":"A"},{"location":"%E7%AC%94%E8%AE%B0/AGC006%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#b","text":"\u6784\u9020\u9898\u3002\u4e0d\u59a8\u5148\u627e\u627e\u89c4\u5f8b\u548c\u6027\u8d28\uff0c\u6709 \u5982\u679c\u67d0\u4e00\u884c\u4e2d\u76f8\u90bb\u5143\u7d20 \\(a_i=a_{i+1}=x\\) \uff0c\u90a3\u4e48\u8fd9\u884c\u5f80\u4e0a\u7684\u7b2c \\(i,i+1\\) \u5217\u7684\u5143\u7d20\u5747\u4e3a \\(x\\) \u3002 \u56e0\u4e3a\u7b2c\u4e00\u5c42\u6570\u5b57\u9700\u8981\u4e3a\u7b2c\u4e8c\u5c42\u7684\u4e2d\u4f4d\u6570\uff0c\u6545 \\(1,2n-1\\) \u4e24\u6570\u4e0d\u53ef\u80fd\u5728\u9876\u5c42\u3002 \u6709\u4e86\u8fd9\u4e24\u4e2a\u6027\u8d28\uff0c\u6211\u4eec\u4e0d\u59a8\u601d\u8003\u4e00\u4e0b\u5bf9\u4e8e\u6ee1\u8db3 \\(1<x<2n-1\\) \u7684 \\(x\\) \u5728\u9876\u5c42\u65f6\u8be5\u5982\u4f55\u6784\u9020\u3002\u6700\u597d\u7684\u6784\u9020\u5c31\u662f\u6700\u5e95\u5c42\u6ee1\u8db3 \\((a_{n-1},a_n,a_{n+1})\\) \u548c \\((a_n,a_{n+1},a_{n+2})\\) \u4e2d\u5747\u6709 \\(a_n=x\\) \u4e3a\u4e2d\u4f4d\u6570\uff0c\u7531\u6027\u8d281\u5f97\u9876\u5c42\u5143\u7d20\u4e00\u5b9a\u4e3a \\(x\\) \u3002 \u6709\u4e00\u8bf4\u4e00\u8fd9\u9053\u9898rating\u624d1600\u600e\u4e48\u5c31\u7d2b\u4e86 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 ; int n , x , ans [ N ]; bool vis [ N ]; int main (){ n = read (), x = read (); if ( x == 1 || x == 2 * n -1 ) return puts ( \"No\" ), 0 ; if ( x == 2 ){ puts ( \"Yes\" ); ans [ n -1 ] = 2 * n -1 , ans [ n ] = 2 , ans [ n + 1 ] = 1 , ans [ n + 2 ] = 2 * n -2 ; rep ( i , 1 , n -2 ) ans [ i ] = i + 2 ; rep ( i , n + 3 , 2 * n -1 ) ans [ i ] = i -2 ; } else { puts ( \"Yes\" ); ans [ n -1 ] = 1 , ans [ n ] = x , ans [ n + 1 ] = 2 * n -1 , ans [ n + 2 ] = 2 ; vis [ 1 ] = vis [ x ] = vis [ 2 * n -1 ] = vis [ 2 ] = 1 ; int j = 1 ; rep ( i , 1 , 2 * n -1 ){ while ( ans [ i ]) i ++ ; while ( vis [ j ]) j ++ ; ans [ i ] = j ++ ; } } rep ( i , 1 , 2 * n -1 ) printf ( \"%d \\n \" , ans [ i ]); return 0 ; }","title":"B"},{"location":"%E7%AC%94%E8%AE%B0/AGC006%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#c","text":"\u6709\u70b9\u5999\u7684\u671f\u671b\u9898\u3002 \u901a\u8fc7\u8ba1\u7b97\u53ef\u4ee5\u53d1\u73b0\uff0c\u7b2c \\(i\\) \u4e2a\u5154\u5b50\u8df3\u8dc3\u540e\u65b0\u7684\u671f\u671b\u4f4d\u7f6e\u4e3a \\frac12(2a_{i-1}-a_i+2a_{i+1}-a_i)=a_{i-1}+a_{i+1}-a_i \u770b\u8d77\u6765\u4e0d\u592a\u6709\u89c4\u5f8b\uff0c\u7136\u800c\u5982\u679c\u6211\u4eec\u753b\u4e86\u56fe\u7684\u8bdd\uff0c\u4f1a\u53d1\u73b0\u8fd9\u4e00\u6b21\u8df3\u8dc3\u672c\u8d28\u4e0a\u4ea4\u6362\u4e86 \\(d_i=a_i-a_{i-1},d_{i+1}=a_{i+1}-a_i\\) \u8fd9\u4e24\u6bb5\u8ddd\u79bb\u3002\uff08\u4e5f\u53ef\u4ee5\u901a\u8fc7\u79fb\u9879\u53d1\u73b0 \\(a'_i-a_{i-1}=d_{i+1},a_{i+1}-a'_i=d_i\\) \uff09\u7ed9\u5b9a\u7684 \\(m\\) \u4e2a\u4ea4\u6362\u6784\u6210\u4e00\u4e2a\u7f6e\u6362\uff0c\u6211\u4eec\u8981\u6c42\u7684\u5c31\u662f\u7f6e\u6362 \\(k\\) \u6b21\u540e\u6700\u7ec8\u7684\u5e8f\u5217\uff0c\u628a\u5dee\u5206\u8fd8\u539f\u5c31\u80fd\u5f97\u5230\u7b54\u6848\u3002\u505a\u6cd5\u5f88\u591a\uff0c\u53ef\u4ee5\u4f7f\u7528\u5feb\u901f\u5e42\u6216\u8005\u5229\u7528\u4e00\u4e2a\u7f6e\u6362\u4e3a\u82e5\u5e72\u4e2a\u8f6e\u6362\u6784\u6210\u7684\u6027\u8d28\u3002\u4e24\u8005\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u5206\u522b\u4e3a \\(O(n\\log k)\\) \u548c \\(O(n)\\) \uff0c\u8fd9\u91cc\u7528\u7684\u662f\u5feb\u901f\u5e42\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 ; int n , d [ N ], ans [ N ], T [ N ], a [ N ]; double b [ N ]; ll m , k ; int main (){ n = read (); rep ( i , 1 , n ) a [ i ] = read (), d [ i ] = ans [ i ] = i ; m = read (), k = read (); rep ( i , 1 , m ){ int x = read (); swap ( d [ x ], d [ x + 1 ]); } while ( k ){ if ( k & 1 ){ rep ( i , 1 , n ) T [ i ] = ans [ d [ i ]]; rep ( i , 1 , n ) ans [ i ] = T [ i ]; } rep ( i , 1 , n ) T [ i ] = d [ d [ i ]]; rep ( i , 1 , n ) d [ i ] = T [ i ]; k >>= 1 ; } rep ( i , 1 , n ) b [ i ] = a [ ans [ i ]] - a [ ans [ i ] -1 ]; rep ( i , 1 , n ) printf ( \"%.1lf \\n \" , b [ i ] += b [ i -1 ]); return 0 ; } ### D \u4e8c\u5206\u601d\u60f3\u5f88\u5999\u7684\u5e94\u7528\u3002 \u66b4\u529b\u663e\u7136\u4e0d\u884c\uff0c\u6211\u4eec\u56de\u5fc6\u4e00\u4e0b B \u4e2d\u5f97\u5230\u7684\u6027\u8d281\uff1a \u5982\u679c\u67d0\u4e00\u884c\u4e2d\u76f8\u90bb\u5143\u7d20 \\(a_i=a_{i+1}=x\\) \uff0c\u90a3\u4e48\u8fd9\u884c\u5f80\u4e0a\u7684\u7b2c \\(i,i+1\\) \u5217\u7684\u5143\u7d20\u5747\u4e3a \\(x\\) \u3002 \u53ef\u4ee5\u901a\u8fc7\u4e8c\u5206\u7b54\u6848\u6765\u68c0\u9a8c\u9876\u5c42\u5143\u7d20\u662f\u5426 \\(\\ge x\\) \u3002\u628a\u6240\u6709 \\(a_i<x\\) \u8bbe\u4e3a \\(0\\) \uff0c \\(a_i\\ge x\\) \u8bbe\u4e3a \\(1\\) \uff0c\u90a3\u4e48\u6700\u63a5\u8fd1\u4e2d\u5fc3\u7684\u8fde\u7eed\u4e24\u4e2a\u76f8\u540c\u5143\u7d20\u51b3\u5b9a\u4e86\u9876\u7aef\u7684\u53d6\u503c\u3002\u5982\u679c\u8fde\u7eed\u4e24\u4e2a \\(1\\) \uff0c\u90a3\u4e48\u9876\u7aef\u4e5f\u4e3a \\(1\\) \uff0c\u5373 \\(\\ge x\\) \uff0c\u53cd\u4e4b\u9876\u7aef\u4e3a \\(0\\) \u3002\u53ea\u6709\u5f53 \\(01\\) \u4ea4\u9519\u65f6\u6ca1\u6709\u8fd9\u6837\u7684\u8fde\u7eed\u6bb5\uff0c\u6b64\u65f6\u9876\u7aef\u5143\u7d20 \\(=a_1\\) \u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(n\\log n)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 ; int n , a [ N ], b [ N ]; bool check ( int x ){ rep ( i , 1 , 2 * n -1 ) b [ i ] = ( a [ i ] >= x ); rep ( i , 0 , n -2 ){ if ( b [ n + i ] == b [ n + i + 1 ]) return b [ n + i ]; if ( b [ n - i ] == b [ n - i -1 ]) return b [ n - i ]; } return b [ 1 ]; } int main (){ n = read (); rep ( i , 1 , 2 * n -1 ) a [ i ] = read (); int l = 1 , r = 2 * n -1 , ans ; while ( l <= r ){ int mid = ( l + r ) >> 1 ; if ( check ( mid )){ l = mid + 1 ; ans = mid ; } else r = mid -1 ; } printf ( \"%d \\n \" , ans ); return 0 ; }","title":"C"},{"location":"%E7%AC%94%E8%AE%B0/AGC006%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#e","text":"\u4e00\u80a1 [AGC003C] BBuBBBlesort! \u7684\u65e2\u89c6\u611f\uff08\u3002 \u89c2\u5bdf\u53d1\u73b0\u6bcf\u4e2a\u64cd\u4f5c\u7b49\u4ef7\u4e8e\u4ea4\u6362\u5e76\u7ffb\u8f6c \\(i,i+2\\) \u4e24\u5217\uff0c\u540c\u65f6\u7ffb\u8f6c \\(i+1\\) \u5217\u3002\u6ce8\u610f\u5230\u64cd\u4f5c\u4e0d\u4f1a\u6539\u53d8\u6bcf\u4e00\u5217\u4e0b\u6807\u7684\u5947\u5076\u6027\uff0c\u4e8e\u662f\u53ef\u4ee5\u5206\u5947\u6570\u5217\u548c\u5076\u6570\u5217\u8fdb\u884c\u8003\u8651\u3002\u8bbe \\(tot_0,tot_1\\) \u5206\u522b\u4e3a\u5947\u6570\u5217\u548c\u5076\u6570\u5217\u7684\u603b\u64cd\u4f5c\u6b21\u6570\uff0c \\(inv_0, inv_1\\) \u4e3a\u5947\u5076\u5217\u98a0\u5012\u7684\u5217\u6570\u3002\u6ce8\u610f\u5230\u5947\u6570\u5217\u7684\u6bcf\u4e2a\u64cd\u4f5c\u4f1a\u5e26\u6765\u67d0\u4e2a\u5076\u6570\u5217\u7684\u4e00\u6b21\u7ffb\u8f6c\uff0c\u4e8e\u662f tot_0=inv_1,tot_1=inv_0 \u662f\u80fd\u64cd\u4f5c\u56de\u539f\u77e9\u9635\u7684\u5fc5\u8981\u6761\u4ef6\u3002 \u6b64\u65f6\u53ef\u4ee5\u5927\u80c6\u731c\u60f3\u8be5\u6761\u4ef6\u5145\u5206\uff0c\u56e0\u4e3a\u5e76\u4e0d\u9700\u8981\u8bc1\u660e\uff08\u96fe\uff09 \u4e0b\u9762\u8bc1\u660e\u5176\u5145\u5206\u6027\u3002\u8bb0\u64cd\u4f5c \\(i\\) \u4e3a\u7ffb\u8f6c \\(i,i+1,i+2\\) \u8fd9\u4e09\u5217\u3002\u90a3\u4e48\u7ecf\u8fc7\u64cd\u4f5c \\(1,3,1,3,1,3,2,1,2,1\\) \u540e\uff0c\u7b2c \\(1\\) \u548c \\(3\\) \u5217\u88ab\u7ffb\u8f6c\uff0c\u4e14\u5176\u4ed6\u5217\u4e0d\u53d8\u3002\u8fdb\u800c\u53ef\u4ee5\u4e0d\u6539\u53d8\u5176\u4ed6\u5217\u7684\u60c5\u51b5\u4e0b\u751f\u6210\u5947\u6570\u5217\u548c\u5076\u6570\u5217\u5404\u81ea\u4e0a\u7684\u4efb\u610f\u5076\u6570\u6b21\u7ffb\u8f6c\u3002\u89e3\u51b3\u4e86\u7ffb\u8f6c\u6b21\u6570\u7684\u5947\u5076\u6027\u95ee\u9898\uff0c\u800c\u5bf9\u6362\u76f8\u90bb\u884c\u751f\u6210\u7f6e\u6362\u53c8\u662f\u663e\u7136\u7684\uff0c\u8fd9\u5c31\u8bc1\u660e\u4e86\u4e0a\u8ff0\u7ed3\u8bba\u7684\u5145\u5206\u6027\u3002 \u6700\u540e\u601d\u8003\u5982\u4f55\u6c42\u89e3\uff0c\u8fd9\u5e76\u4e0d\u96be\uff08\u6bd4\u4e0a\u9762\u7684\u5bb9\u6613\u591a\u4e86\uff09\uff0c\u53ef\u4ee5\u7528 \\(O(n\\log n)\\) \u6c42\u9006\u5e8f\u5bf9\u6570\u6765\u5224\u65ad\u7f6e\u6362\u6240\u9700\u8981\u7684\u5bf9\u6362\u6570\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u53e6\u4e00\u4e2a\u795e\u4ed9\u505a\u6cd5\u4f18\u5316\u5230 \\(O(n)\\) \u3002\u5bf9\u4e8e\u7b2c\u4e8c\u79cd\u505a\u6cd5\uff0c\u6211\u4eec\u628a\u7f6e\u6362\u7528\u82e5\u5e72\u4e2a\u8f6e\u6362\u6765\u8868\u793a\uff0c\u73af\u7684\u5927\u5c0f\u4e0e\u9006\u5e8f\u5bf9\u7684\u4e2a\u6570\u7684\u5947\u5076\u6027\u76f8\u53cd\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(n)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 ; int a [ N ][ 3 ], to [ N ], n , tot [ 2 ]; int main (){ n = read (); rep ( i , 0 , 2 ) rep ( j , 1 , n ) a [ j ][ i ] = read (); rep ( i , 1 , n ){ if (( a [ i ][ 0 ] == a [ i ][ 1 ] -1 && a [ i ][ 2 ] == a [ i ][ 1 ] + 1 ) || ( a [ i ][ 0 ] == a [ i ][ 1 ] + 1 && a [ i ][ 2 ] == a [ i ][ 1 ] -1 )){ to [ i ] = a [ i ][ 1 ] / 3 + 1 ; if ( i % 2 != to [ i ] % 2 || a [ i ][ 1 ] % 3 != 2 ) return puts ( \"No\" ), 0 ; if ( a [ i ][ 0 ] > a [ i ][ 2 ]) tot [ i & 1 ] ^= 1 ; } else return puts ( \"No\" ), 0 ; } rep ( i , 1 , n ){ while ( i != to [ i ]){ swap ( to [ i ], to [ to [ i ]]); tot [ i & 1 ^ 1 ] ^= 1 ; } } if ( tot [ 0 ] || tot [ 1 ]) puts ( \"No\" ); else puts ( \"Yes\" ); return 0 ; }","title":"E"},{"location":"%E7%AC%94%E8%AE%B0/AGC006%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#f","text":"\u9898\u76ee\u63cf\u8ff0\u770b\u4e0a\u53bb\u5f88\u602a\uff0c\u5148\u627e\u4e00\u4e0b\u7b49\u4ef7\u547d\u9898\uff0c\u53d1\u73b0\u53ef\u4ee5\u770b\u505a \\(n\\) \u4e2a\u70b9 \\(m\\) \u6761\u8fb9\u7684\u56fe\uff0c\u4e14\u5982\u679c \\((u,v),(v,w)\\) \u6709\u8fb9\uff0c \\((w,u)\\) \u4e5f\u8fde\u4e00\u6761\u8fb9\u3002\u518d\u8f6c\u6362\u4e00\u4e0b\uff0c\u5bf9\u4e8e \\(v\\) \u7684\u6240\u6709\u51fa\u8fb9\u548c\u5165\u8fb9\u5bf9\u7684\u8282\u70b9\uff0c\u51fa\u70b9\u5411\u5165\u70b9\u8fde\u4e00\u6761\u8fb9\u3002 \u9996\u5148\u89c2\u5bdf\u5230\u52a0\u8fb9\u53ea\u5728\u5f31\u8fde\u901a\u5206\u91cf\u91cc\u8fdb\u884c\uff0c\u6211\u4eec\u53ef\u4ee5\u5355\u72ec\u8003\u8651\u6bcf\u4e2a\u8fd9\u6837\u7684\u5206\u91cf\u3002 \u5982\u679c\u4e0d\u5b58\u5728\u4e00\u7ec4 \\((u,v),(v,w)\\) \u7684\u8bdd\uff0c\u56fe\u4e0d\u4f1a\u53d8\u5316\u3002 \u5982\u679c\u5b58\u5728\uff0c\u5c06\u4e00\u4e2a\u8282\u70b9\u67d3\u7ea2\uff0c\u5176\u51fa\u70b9\u67d3\u84dd\uff0c\u5165\u70b9\u67d3\u7eff\uff1b\u5165\u8fb9\u5bf9\u7eff\u70b9\u6216\u51fa\u8fb9\u5bf9\u84dd\u70b9\u7684\u6240\u6709\u70b9\u67d3\u7ea2\uff0c\u8fd9\u4e9b\u7ea2\u70b9\u518d\u7ee7\u7eed\u5f15\u51fa\u65b0\u7684\u70b9\u67d3\u8272\u3002\u67d3\u8272\u82e5\u6210\u529f\uff0c \\(R\\to G\\to B\\to R\\) \uff0c\u4e09\u79cd\u989c\u8272\u6784\u6210\u4e86\u4e09\u5143\u73af\u3002\u4e0d\u96be\u53d1\u73b0\uff0c\u989c\u8272\u4e0d\u540c\u7684\u8282\u70b9\u4e24\u4e24\u4e4b\u95f4\u90fd\u4f1a\u6709\u4e00\u6761\u8fb9\u3002\u8ba9\u6211\u4eec\u66f4\u597d\u7684\u63cf\u8ff0\u8fd9\u4e2a\u67d3\u8272\u8fc7\u7a0b\uff0c\u5b9e\u8d28\u4e0a\u4e3a\u8d77\u70b9\u4e3a\u7ea2\u8272\uff0c\u8be5\u70b9\u8fde\u5411\u7684\u6240\u6709\u70b9\u67d3\u84dd\u8272\uff0c\u84dd\u8272\u70b9\u8fde\u5411\u7684\u6240\u6709\u70b9\u67d3\u7eff\u8272\u3002\u8bbe\u4e09\u8272\u70b9\u6570\u91cf\u5206\u522b\u4e3a \\(R,G,B\\) \uff0c\u90a3\u4e48\u8be5\u8fde\u901a\u5206\u91cf\u5bf9\u7b54\u6848\u8d21\u732e\u4e3a \\(RG+RB+GB\\) \u3002 \u7136\u800c\uff0c\u6211\u4eec\u5ffd\u7565\u4e86\u5728\u4e0a\u8ff0\u67d3\u8272\u8fc7\u7a0b\u4e2d\u5931\u8d25\u7684\u53ef\u80fd\u6027\uff0c\u5373\u51fa\u73b0\u67d3\u8272\u7684\u77db\u76fe\u3002\u4e0d\u59a8\u8bbe\u77db\u76fe\u51fa\u73b0\u5728\u70b9 \\(u\\) \u4e14\u5b83\u540c\u65f6\u67d3\u4e86\u7ea2\u8272\u548c\u84dd\u8272\uff0c\u6839\u636e\u4e0a\u4e2a\u67d3\u8272\u7684\u6027\u8d28\uff08\u7ea2\u70b9\u548c\u84dd\u70b9\u8fde\u8fb9\uff09\uff0c \\(u\\) \u4f1a\u6709\u81ea\u73af\u3002\u800c\u81ea\u73af\u53c8\u53ef\u4ee5\u63a8\u51fa \\(u\\) \u4e5f\u80fd\u67d3\u7eff\u8272\uff0c\u8fdb\u800c\u53d1\u73b0\u6240\u6709\u70b9\u90fd\u5411 \\(u\\) \u8fde\u8fb9\uff0c\u800c\u8fd9\u5f15\u51fa\u4e86\u6240\u6709\u70b9\u7684\u67d3\u8272\u77db\u76fe\uff0c\u6574\u4e2a\u56fe\u5c06\u53d8\u6210\u5305\u62ec\u81ea\u73af\u7684\u5b8c\u5168\u56fe\u3002\u5bf9\u7b54\u6848\u8d21\u732e\u4e3a \\(tot^2\\) \uff0c\u5176\u4e2d \\(tot\\) \u4e3a\u8fde\u901a\u5206\u91cf\u5927\u5c0f\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(n)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 ; int n , m , col [ N ], flag , tot , etot ; bool vis [ N ]; ll ans , cnt [ 3 ]; struct Edge { int tp , to ;}; vector < Edge > G [ N ]; void dfs ( int u ){ ++ cnt [ col [ u ]]; vis [ u ] = 1 ; ++ tot ; for ( auto tmp : G [ u ]){ etot += ( tmp . tp == 1 ); int v = tmp . to ; if ( ! vis [ v ]){ col [ v ] = ( col [ u ] + tmp . tp ) % 3 ; dfs ( v ); } else if ( col [ v ] != ( col [ u ] + tmp . tp ) % 3 ) flag = 0 ; } } int main (){ n = read (), m = read (); rep ( i , 1 , m ){ int u = read (), v = read (); G [ u ]. push_back ({ 1 , v }); G [ v ]. push_back ({ 2 , u }); } rep ( i , 1 , n ) if ( ! vis [ i ]){ memset ( cnt , 0 , sizeof ( cnt )); flag = 1 ; etot = tot = 0 ; dfs ( i ); if ( ! flag ) ans += 1l l * tot * tot ; else if ( cnt [ 0 ] && cnt [ 1 ] && cnt [ 2 ]){ ans += cnt [ 0 ] * cnt [ 1 ] + cnt [ 1 ] * cnt [ 2 ] + cnt [ 2 ] * cnt [ 0 ]; } else ans += etot ; } printf ( \"%lld \\n \" , ans ); return 0 ; }","title":"F"},{"location":"%E7%AC%94%E8%AE%B0/AGC007%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/","text":"AGC007 \u505a\u9898\u8bb0\u5f55 \u00b6 A \u00b6 \u7ed3\u8bba\u9898\uff0c\u68cb\u5b50\u53ea\u5411\u4e0b\u6216\u53f3\u79fb\u52a8\u5e76\u4e14\u5230\u8fbe\u53f3\u4e0b\u89d2\u5f53\u4e14\u4ec5\u5f53 '#' \u5b57\u7684\u6570\u91cf\u662f \\(H+W-1\\) \u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } char a [ 10 ][ 10 ]; int main (){ int h = read (), w = read (), cnt = 0 ; rep ( i , 1 , h ){ scanf ( \"%s\" , a [ i ] + 1 ); rep ( j , 1 , w ) cnt += ( a [ i ][ j ] == '#' ); } puts ( cnt == h + w -1 ? \"Possible\" : \"Impossible\" ); return 0 ; } B \u00b6 \u6784\u9020\u9898\u3002\u5148\u601d\u8003\u5982\u4f55\u8ba9 \\(a_{p_i}+b_{p_i}\\) \u4e3a\u5b9a\u503c\uff0c\u8003\u8651\u5230\u9012\u589e\u548c\u9012\u51cf\u7684\u6027\u8d28\uff0c\u4e0d\u96be\u53d1\u73b0 \\(a_i=i,b_i=n-i\\) \u5373\u6ee1\u8db3\u8981\u6c42\u3002 \u4e0b\u9762\u8ba9 \\(a_{p_i}+b_{p_i}\\) \u9012\u589e\u5373\u53ef\uff0c\u628a \\(b_{p_i}\\) \u52a0\u4e0a \\(i\\) \u5c31\u884c\u4e86\uff0c\u4f46\u8fd9\u4f1a\u7834\u574f\u6211\u4eec \\(b_i\\) \u7684\u9012\u589e\u6027\u8d28\u3002\u6ce8\u610f\u5230\u4e24\u4e2a\u6570\u7ec4\u540c\u65f6\u4e58\u4ee5\u4e00\u4e2a\u5927\u6570 \\(k\\) \u540e\u4ecd\u6ee1\u8db3\u539f\u6027\u8d28\uff0c\u6240\u4ee5\u53ef\u4ee5\u8bbe \\(a_i=ki,b_i=k(n-i)\\) \u518d\u628a \\(b_{p_i}\\) \u52a0\u4e0a \\(i\\) \u5373\u53ef\u3002\u53ea\u8981 \\(k\\ge n\\) \u5373\u6ee1\u8db3\u8981\u6c42\uff0c\u4e14 \\(a_i,b_i\\le 10^9\\) \u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e4 + 5 ; int a [ N ], b [ N ], n , p ; int main (){ n = read (); rep ( i , 1 , n ) a [ i ] = i * N , b [ i ] = ( n - i ) * N ; rep ( i , 1 , n ) p = read (), b [ p ] += i ; rep ( i , 1 , n ) printf ( \"%d \" , a [ i ]); puts ( \"\" ); rep ( i , 1 , n ) printf ( \"%d \" , b [ i ]); return 0 ; } C \u00b6 \u795e\u4ed9\u9898\u3002 \u6bcf\u6b21\u6eda\u5b8c\u5c11\u4e00\u4e2a\u7403\u4e00\u4e2a\u5751\uff0c\u7559\u4e0b\u7684\u4f1a\u662f \\(n-1\\) \u4e2a\u7403 \\(n\\) \u4e2a\u5751\u7684\u60c5\u51b5\uff0c\u4e0d\u59a8\u8003\u8651\u65b0\u5e8f\u5217\u7684\u671f\u671b\u957f\u5ea6\u548c\u539f\u5e8f\u5217\u7684\u5173\u7cfb\u3002\u6211\u4eec\u679a\u4e3e\u7b2c\u4e00\u4e2a\u7403\u7684\u6240\u6709\u53ef\u80fd\u6027\uff0c\u8ba1\u7b97\u65b0\u7684\u8ddd\u79bb\u5e8f\u5217\u7684\u671f\u671b\u503c\u3002\u89c2\u5bdf\u53d1\u73b0\u4ecd\u7136\u662f\u4e00\u4e2a\u7b49\u5dee\u6570\u5217\uff01\u5f88\u591a\u9898\u89e3\u90fd\u63d0\u5230\u4e86\u8fd9\u4e00\u70b9\uff0c\u8fd9\u91cc\u63d0\u4f9b\u4e00\u79cd\u8bc1\u660e\u65b9\u6cd5\uff1a \u4e00\u5171\u6709 \\(2n\\) \u79cd\u6eda\u7403\u7684\u53ef\u80fd\uff0c\u8003\u8651\u5bf9\u7b2c \\(i\\) \u6bb5\u8ddd\u79bb\uff0c\u6709\u54ea\u4e9b\u60c5\u51b5\u80fd\u5bf9\u5176\u671f\u671b\u957f\u5ea6\u7684\u589e\u52a0\u4ea7\u751f\u8d21\u732e\uff1a \u539f\u6765\u7684\u524d \\(i\\) \u6bb5\u8ddd\u79bb\u88ab\u6eda\u8fc7\uff08\u4e5f\u5c31\u662f\u7b2c \\(i\\) \u6bb5\u8ddd\u79bb\u4e4b\u524d\u7684\u7403\u6eda\u5b8c\u4e86\uff09\uff0c\u4f7f\u539f\u7b2c \\(i+2\\) \u6bb5\u8ddd\u79bb\u4ee3\u66ff\u4e86\u7b2c \\(i\\) \u6bb5\u3002 \u539f\u6765\u7684\u7b2c \\(i+1\\) \u6bb5\u8ddd\u79bb\u88ab\u6eda\u8fc7\uff0c\u4f7f\u539f\u7b2c \\(i,i+2,i+3\\) \u6bb5\u4ee3\u66ff\u4e86\u7b2c \\(i\\) \u6bb5\u3002 \u8bbe\u65b0\u7684\u8ddd\u79bb\u5e8f\u5217\u4e3a \\(d'_i\\) \uff0c\u90a3\u4e48\u6709\uff1a d'_i=d_i+\\frac{i\\times(d_{i+2}-d_i)+(d_{i+2}+d_{i+3})}{2n}=d_i+\\frac{i\\times 2x+2d+5x}{2n} \u8fd9\u6784\u6210\u4e00\u4e2a\u65b0\u7684\u7b49\u5dee\u6570\u5217\uff0c\u800c\u5bf9\u6bcf\u4e2a \\(d,x\\) \u6211\u4eec\u63a8\u4e00\u6b21\u7403\u7684\u671f\u671b\u8ddd\u79bb\u4e3a\u6570\u5217\u7684\u4e2d\u4f4d\u6570\uff0c\u9012\u63a8\u5230\u6700\u540e\u5373\u53ef\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(n)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) using namespace std ; int main (){ int n ; double d , x , ans = 0 ; scanf ( \"%d%lf%lf\" , & n , & d , & x ); while ( n ){ ans += d + x * ( 2 * n -1 ) / 2 ; double dd = d + ( 2 * d + 5 * x ) / ( 2 * n ), xx = x + 2 * x / n ; d = dd , x = xx ; n -- ; } printf ( \"%.10lf \\n \" , ans ); return 0 ; } D \u00b6 \u9996\u5148\u89c2\u5bdf\u5230 Shik \u884c\u8d70\u7684\u8def\u7ebf\u53ef\u4ee5\u88ab\u8868\u793a\u6210\u5f80\u6570\u8f74\u6b63\u65b9\u5411\u548c\u53cd\u65b9\u5411\u7684\u8fd0\u52a8\u4ee5\u53ca\u539f\u5730\u7b49\u5019\uff0c\u4e14\u6700\u7ec8\u8fd0\u52a8\u5230\u7ec8\u70b9\u3002\u5230\u5173\u952e\u70b9\u6709\u4e24\u4e2a\u539f\u56e0\uff1a \u7b2c\u4e00\u6b21\u5230\u8fbe\uff0c\u5f00\u59cb\u751f\u6210\u91d1\u5e01\u3002 \u7b2c\u4e8c\u6b21\u5230\u8fbe\uff0c\u6361\u91d1\u5e01\u3002 \u6ce8\u610f\u5230\u6298\u8fd4\u548c\u524d\u8fdb\u663e\u7136\u90fd\u8981\u5230\u4e00\u4e2a\u5173\u952e\u70b9\uff0c\u5426\u5219\u6ca1\u6709\u610f\u4e49\u3002\u4e0d\u59a8\u8bbe\u4ece\u5f53\u524d\u4f4d\u7f6e \\(pos\\) \u70b9\u6298\u8fd4\u6700\u8fdc\u5230 \\(i\\) \u53f7\u70b9\u518d\u524d\u8fdb\uff0c\u5982\u679c\u80fd\u5728 \\(i\\) \u53f7\u70b9\u62ff\u5230\u91d1\u5e01\uff0c\u90a3\u4e48 \\(i+1,i+2,\\dots,pos\\) \u7b49\u8282\u70b9\u6b64\u65f6\u5fc5\u7136\u4e5f\u751f\u6210\u4e86\u91d1\u5e01\u3002\u8fd9\u8bf4\u660e\u6bcf\u6b21\u6298\u8fd4\u90fd\u4f1a\u62ff\u5230\u8fd9\u6bb5\u533a\u95f4\u7684\u91d1\u5e01\u3002\u4e0b\u9762\u8bbe \\(f_i\\) \u4e3a\u6361\u5230\u4e86\u524d \\(i\\) \u4e2a\u70b9\u7684\u91d1\u5e01\u65f6\u82b1\u8d39\u7684\u6700\u5c0f\u65f6\u95f4\uff0c\u663e\u7136\u5f53\u65f6\u5728 \\(i\\) \u53f7\u70b9\u3002\u4ece \\(f_j\\) \u8f6c\u79fb\u65f6\uff0c\u9700\u8981\u5148\u8d70\u4e00\u6bb5 \\(x_i-x_j\\) \u7684\u8ddd\u79bb\uff0c\u518d\u53d6\u5f80\u8fd4\u65f6\u95f4\u548c \\(i\\) \u53f7\u91d1\u5e01\u51fa\u73b0\u7684\u65f6\u95f4\u7684\u6700\u5927\u503c\uff0c\u6211\u4eec\u6709\uff1a f_i=\\min_j\\{f_j+x_i-x_j+\\max{(2(x_i-x_{j+1}),T)}\\} \u63d0\u53d6 \\(x_i-x_j\\) \u9879\u5230\u62ec\u53f7\u5916\u9762\uff0c\u53d1\u73b0\u6c42\u548c\u540e\u4e3a \\(x_n\\) \u3002\u8003\u8651\u5982\u4f55\u4f18\u5316\u62ec\u53f7\u5185\u7684\u6c42\u503c\uff0c \\(2(x_i-x_{j+1})\\le T\\Longrightarrow f_i=\\min_j\\{f_j\\}\\) \\(2(x_i-x_{j+1})>T\\Longrightarrow f_i=2x_i+\\min_j\\{f_j-2x_{j+1}\\}\\) \u7531\u4e8e \\(x_i-x_{j+1}\\) \u968f \\(j\\) \u5355\u8c03\u9012\u51cf\uff0c\u8fd9\u53ef\u4ee5\u7528\u5355\u8c03\u961f\u5217\u4f18\u5316\u5230 \\(O(n)\\) \u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(n)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 ; int q [ N ], h , t ; ll n , E , T , x [ N ], f [ N ], minn = 1e18 ; int main (){ n = read (), E = read (), T = read (); rep ( i , 1 , n ) x [ i ] = read (); f [ 0 ] = 0 ; rep ( i , 1 , n ){ while ( h <= t && 2 * ( x [ i ] - x [ q [ h ] + 1 ]) > T ){ minn = min ( minn , f [ q [ h ]] -2 * x [ q [ h ] + 1 ]); ++ h ; } f [ i ] = min ( f [ q [ h ]] + T , minn + 2 * x [ i ]); q [ ++ t ] = i ; } printf ( \"%lld \\n \" , f [ n ] + E ); return 0 ; } E \u00b6 \u795e\u4ed9\u6811\u5f62dp\u3002 \u8981\u6c42\u6700\u5c0f\u5316\u6240\u6709\u8def\u5f84\u6743\u503c\u7684\u6700\u5927\u503c\uff0c\u8fd9\u663e\u7136\u60f3\u5230\u4e8c\u5206\u3002\u4e0b\u9762\u8003\u8651\u5bf9\u4e8e\u6700\u5927\u6743\u503c \\(V\\) \u5982\u4f55\u8ba1\u7b97\u662f\u5426\u6709\u53ef\u884c\u89e3\uff0c\u7531\u9898\u610f\u5f97\u6bcf\u4e2a\u5b50\u6811\u90fd\u8981\u8d70\u5b8c\u624d\u80fd\u53bb\u53e6\u4e00\u4e2a\u5b50\u6811\uff0c\u4e8e\u662f\u53ef\u4ee5\u60f3\u5230\u8fd9\u6837\u7684 \\(dp\\) \uff1a \u8bbe \\(f_u(a,b)\\) \u4e3a\u5728 \\(u\\) \u5b50\u6811\u5185\u5b58\u5728\u6ee1\u8db3\u6761\u4ef6\u7684\u6784\u9020\uff0c\u4e14\u6839\u5230\u7b2c\u4e00\u4e2a\u53f6\u5b50\u548c\u6700\u540e\u4e00\u4e2a\u53f6\u5b50\u7684\u8ddd\u79bb\u5206\u522b\u4e3a \\(a,b\\) \u3002\u53ef\u4ee5\u7406\u89e3 \\(f_u\\) \u4e3a\u5b50\u6811 \\(u\\) \u4e2d\u6240\u6709\u53ef\u884c\u89e3\u7684\u89e3\u96c6\u3002\u8bb0 \\(u\\) \u7684\u5de6\u53f3\u513f\u5b50\u4e3a \\(l,r\\) \uff0c\u90a3\u4e48\u8f6c\u79fb\u5c31\u662f\uff1a f_u=\\{(a,b)|(a,i)\\in f_{l},(j,b)\\in f_{r},i+j+w_l+w_r\\le V\\} \u66b4\u529b\u5408\u5e76\u5de6\u53f3\u513f\u5b50\u7684\u72b6\u6001\u65f6\u95f4\u590d\u6742\u5ea6\u8d85\u6807\uff0c\u8003\u8651\u4f18\u5316\u3002\u6211\u4eec\u53ef\u4ee5\u8d2a\u5fc3\u5730\u7b5b\u9009\u96c6\u5408\u5185\u7684\u5143\u7d20\uff0c\u4e5f\u5c31\u662f\u5982\u679c\u6709 \\(a_1\\le a_2,b_1\\le b_2\\) \u90a3\u4e48 \\((a_1,b_1)\\) \u663e\u7136\u66f4\u4f18\uff0c\u53ef\u4ee5\u6392\u5e8f\u540e\u7b5b\u6389\u5f62\u5982 \\((a_2,b_2)\\) \u7684\u5143\u7d20\u3002\u4e8e\u662f\u5269\u4e0b\u7684\u5143\u7d20\u6ee1\u8db3 \\(a\\) \u5347\u5e8f\u6392\u5217\uff0c \\(b\\) \u964d\u5e8f\u6392\u5217\uff0c\u4e8e\u662f\u5728\u5408\u5e76\u65f6\u53ef\u4ee5\u4f7f\u7528 \\(two-pointers\\) \u4f18\u5316\u3002\u6ce8\u610f\u5230\u6bcf\u6b21\u5408\u5e76\u589e\u52a0\u7684\u72b6\u6001\u6570\u4e3a \\(2\\times\\min(|f_l|,|f_r|)\\) \uff0c\u4e0d\u96be\u53d1\u73b0\u603b\u72b6\u6001\u6570\u662f \\(O(n\\log n)\\) \u7684\uff0c\u53ef\u4ee5\u901a\u8fc7\u672c\u9898\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(n\\log^2 n)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long #define pii pair<ll,ll> #define fi first #define se second #define pb push_back using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 ; int n , ch [ N ][ 2 ]; ll w [ N ][ 2 ]; vector < pii > Ans [ N ]; void dfs ( int u , ll V ){ Ans [ u ]. clear (); if ( ! ch [ u ][ 0 ]){ Ans [ u ]. pb ({ 0 , 0 }); return ; } rep ( i , 0 , 1 ) if ( ch [ u ][ i ]) dfs ( ch [ u ][ i ], V ); vector < pii > vec ; rep ( t , 0 , 1 ){ int ls = ch [ u ][ t ], rs = ch [ u ][ t ^ 1 ]; ll Max = V - w [ u ][ 0 ] - w [ u ][ 1 ]; for ( int i = 0 , j = 0 ; i < Ans [ ls ]. size (); ++ i ){ while ( j + 1 < Ans [ rs ]. size () && Ans [ rs ][ j + 1 ]. fi + Ans [ ls ][ i ]. se <= Max ) ++ j ; if ( j >= Ans [ rs ]. size () || Ans [ rs ][ j ]. fi + Ans [ ls ][ i ]. se > Max ) continue ; vec . pb ({ Ans [ ls ][ i ]. fi + w [ u ][ t ], Ans [ rs ][ j ]. se + w [ u ][ t ^ 1 ]}); } } sort ( vec . begin (), vec . end ()); rep ( i , 0 ,( int ) vec . size () -1 ){ if ( ! Ans [ u ]. empty () && Ans [ u ]. back (). se <= vec [ i ]. se ) continue ; Ans [ u ]. pb ( vec [ i ]); } } inline bool check ( ll mid ){ dfs ( 1 , mid ); return Ans [ 1 ]. size () >= 1 ; } int main (){ n = read (); ll l = 0 , r = 0 , ans ; rep ( i , 2 , n ){ int fa = read (), val = read (); r += val ; if ( ch [ fa ][ 0 ]) ch [ fa ][ 1 ] = i , w [ fa ][ 1 ] = val ; else ch [ fa ][ 0 ] = i , w [ fa ][ 0 ] = val ; } while ( l <= r ){ ll mid = ( l + r ) / 2 ; if ( check ( mid )){ r = mid -1 ; ans = mid ; } else l = mid + 1 ; } printf ( \"%lld \\n \" , ans ); return 0 ; } F \u00b6 \u8bbe\u6700\u5c11\u53d8\u6362 \\(m-1\\) \u6b21\uff0c\u628a\u8fd9 \\(m-1\\) \u6b21\u7684\u4e32\u4e0e\u521d\u59cb\u4e32\u4ece\u4e0a\u81f3\u4e0b\u653e\u5728\u4e00\u8d77\u6210\u4e00\u4e2a \\(n\\times m\\) \u7684\u65b9\u9635\u3002\u7531\u9898\u610f\u5f97 \\(S_{i,j}=S_{i-1,j}\\) \u6216 \\(S_{i,j}=S_{i,j-1}\\) \uff0c\u5373\u5f53\u524d\u4f4d\u7f6e\u4ece\u4e0a\u9762\u6216\u5de6\u8fb9\u4e00\u683c\u8f6c\u79fb\u800c\u6765\uff0c\u89c2\u5bdf\u539f\u4e32 \\(n\\) \u4e2a\u5b57\u7b26\u8f6c\u79fb\u7684\u8def\u5f84\u4f1a\u5728\u65b9\u9635\u91cc\u6210\u591a\u6761\u6298\u7ebf\uff0c\u5982\u4e0b\u56fe\u3002 \u4e0d\u96be\u53d1\u73b0\u6bcf\u6761\u6298\u7ebf\u5c3d\u91cf\u9760\u53f3\u6700\u4f18\uff0c\u56e0\u4e3a\u8fd9\u6837\u53ef\u4ee5\u8ba9\u8be5\u6298\u7ebf\u4e0d\u5f71\u54cd\u524d\u9762\u7684\u7ebf\uff0c\u4ee5\u53ca\u4f7f\u539f\u4e32\u8fd8\u53ef\u4ee5\u5f15\u51fa\u6298\u7ebf\u7684\u5b57\u6bcd\u5c3d\u91cf\u591a\u3002\u5982\u679c\u5f53\u524d\u884c\u753b\u4e0d\u4e0b\u5c31\u52a0\u4e00\u884c\uff0c\u4e0b\u9762\u8003\u8651\u5982\u4f55\u7ef4\u62a4\u8fd9\u6837\u7684\u8d2a\u5fc3\u3002\u5982\u679c\u6709 \\(S_0=T\\) \u76f4\u63a5\u8f93\u51fa \\(0\\) \u3002 \u9996\u5148\u627e\u51fa \\(T\\) \u6700\u957f\u7684\u7531\u76f8\u540c\u5b57\u7b26 \\(c\\) \u7ec4\u6210\u7684\u540e\u7f00\uff0c\u5728 \\(S\\) \u4e2d\u627e\u5230\u5269\u4f59\u5b57\u7b26\u4e2d\u6700\u53f3\u7684 \\(c\\) \uff0c\u8bb0\u8fd9\u4e24\u4e2a\u4f4d\u7f6e\u4e3a \\(S_i,T_j\\) \u3002\u53ef\u4ee5\u7528\u961f\u5217\u7ef4\u62a4\u6240\u6709\u62d0\u70b9\uff1a\u5148\u628a\u6240\u6709\u6a2a\u5750\u6807\u5728 \\(j\\) \u540e\u9762\u7684\u70b9\u51fa\u961f\uff0c\u7531\u8d2a\u5fc3\u7b56\u7565\u5f97\u5269\u4e0b\u7684\u62d0\u70b9\u5f80\u5de6\u4e0b\u79fb\u52a8\u4e00\u683c\u3002\u7531\u4e8e\u62d0\u70b9\u4e0d\u51fa\u73b0\u5728 \\(T\\) \u4e32\uff0c\u7b54\u6848\u5219\u662f\u6700\u4e0b\u9762\u7684\u62d0\u70b9\u7684\u7eb5\u5750\u6807 \\(+1\\) \u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(n)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e6 + 5 ; int n , ans , m ; char S [ N ], T [ N ]; bool flg ; queue < int > q ; int main (){ n = read (); scanf ( \"%s%s\" , S + 1 , T + 1 ); rep ( i , 1 , n ) if ( S [ i ] != T [ i ]) flg = 1 ; if ( ! flg ) return puts ( \"0\" ), 0 ; int m = n ; while ( m ){ while ( m > 1 && T [ m ] == T [ m -1 ]) m -- ; while ( n && ( n > m || S [ n ] != T [ m ])) -- n ; if ( ! n ) return puts ( \"-1\" ), 0 ; while ( ! q . empty () && q . front () - q . size () >= m ) q . pop (); if ( n != m ) q . push ( n ); ans = max ( ans ,( int ) q . size () + 1 ); -- m ; } printf ( \"%d \\n \" , ans ); return 0 ; }","title":"AGC007 \u505a\u9898\u8bb0\u5f55"},{"location":"%E7%AC%94%E8%AE%B0/AGC007%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#agc007","text":"","title":"AGC007 \u505a\u9898\u8bb0\u5f55"},{"location":"%E7%AC%94%E8%AE%B0/AGC007%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#a","text":"\u7ed3\u8bba\u9898\uff0c\u68cb\u5b50\u53ea\u5411\u4e0b\u6216\u53f3\u79fb\u52a8\u5e76\u4e14\u5230\u8fbe\u53f3\u4e0b\u89d2\u5f53\u4e14\u4ec5\u5f53 '#' \u5b57\u7684\u6570\u91cf\u662f \\(H+W-1\\) \u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } char a [ 10 ][ 10 ]; int main (){ int h = read (), w = read (), cnt = 0 ; rep ( i , 1 , h ){ scanf ( \"%s\" , a [ i ] + 1 ); rep ( j , 1 , w ) cnt += ( a [ i ][ j ] == '#' ); } puts ( cnt == h + w -1 ? \"Possible\" : \"Impossible\" ); return 0 ; }","title":"A"},{"location":"%E7%AC%94%E8%AE%B0/AGC007%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#b","text":"\u6784\u9020\u9898\u3002\u5148\u601d\u8003\u5982\u4f55\u8ba9 \\(a_{p_i}+b_{p_i}\\) \u4e3a\u5b9a\u503c\uff0c\u8003\u8651\u5230\u9012\u589e\u548c\u9012\u51cf\u7684\u6027\u8d28\uff0c\u4e0d\u96be\u53d1\u73b0 \\(a_i=i,b_i=n-i\\) \u5373\u6ee1\u8db3\u8981\u6c42\u3002 \u4e0b\u9762\u8ba9 \\(a_{p_i}+b_{p_i}\\) \u9012\u589e\u5373\u53ef\uff0c\u628a \\(b_{p_i}\\) \u52a0\u4e0a \\(i\\) \u5c31\u884c\u4e86\uff0c\u4f46\u8fd9\u4f1a\u7834\u574f\u6211\u4eec \\(b_i\\) \u7684\u9012\u589e\u6027\u8d28\u3002\u6ce8\u610f\u5230\u4e24\u4e2a\u6570\u7ec4\u540c\u65f6\u4e58\u4ee5\u4e00\u4e2a\u5927\u6570 \\(k\\) \u540e\u4ecd\u6ee1\u8db3\u539f\u6027\u8d28\uff0c\u6240\u4ee5\u53ef\u4ee5\u8bbe \\(a_i=ki,b_i=k(n-i)\\) \u518d\u628a \\(b_{p_i}\\) \u52a0\u4e0a \\(i\\) \u5373\u53ef\u3002\u53ea\u8981 \\(k\\ge n\\) \u5373\u6ee1\u8db3\u8981\u6c42\uff0c\u4e14 \\(a_i,b_i\\le 10^9\\) \u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e4 + 5 ; int a [ N ], b [ N ], n , p ; int main (){ n = read (); rep ( i , 1 , n ) a [ i ] = i * N , b [ i ] = ( n - i ) * N ; rep ( i , 1 , n ) p = read (), b [ p ] += i ; rep ( i , 1 , n ) printf ( \"%d \" , a [ i ]); puts ( \"\" ); rep ( i , 1 , n ) printf ( \"%d \" , b [ i ]); return 0 ; }","title":"B"},{"location":"%E7%AC%94%E8%AE%B0/AGC007%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#c","text":"\u795e\u4ed9\u9898\u3002 \u6bcf\u6b21\u6eda\u5b8c\u5c11\u4e00\u4e2a\u7403\u4e00\u4e2a\u5751\uff0c\u7559\u4e0b\u7684\u4f1a\u662f \\(n-1\\) \u4e2a\u7403 \\(n\\) \u4e2a\u5751\u7684\u60c5\u51b5\uff0c\u4e0d\u59a8\u8003\u8651\u65b0\u5e8f\u5217\u7684\u671f\u671b\u957f\u5ea6\u548c\u539f\u5e8f\u5217\u7684\u5173\u7cfb\u3002\u6211\u4eec\u679a\u4e3e\u7b2c\u4e00\u4e2a\u7403\u7684\u6240\u6709\u53ef\u80fd\u6027\uff0c\u8ba1\u7b97\u65b0\u7684\u8ddd\u79bb\u5e8f\u5217\u7684\u671f\u671b\u503c\u3002\u89c2\u5bdf\u53d1\u73b0\u4ecd\u7136\u662f\u4e00\u4e2a\u7b49\u5dee\u6570\u5217\uff01\u5f88\u591a\u9898\u89e3\u90fd\u63d0\u5230\u4e86\u8fd9\u4e00\u70b9\uff0c\u8fd9\u91cc\u63d0\u4f9b\u4e00\u79cd\u8bc1\u660e\u65b9\u6cd5\uff1a \u4e00\u5171\u6709 \\(2n\\) \u79cd\u6eda\u7403\u7684\u53ef\u80fd\uff0c\u8003\u8651\u5bf9\u7b2c \\(i\\) \u6bb5\u8ddd\u79bb\uff0c\u6709\u54ea\u4e9b\u60c5\u51b5\u80fd\u5bf9\u5176\u671f\u671b\u957f\u5ea6\u7684\u589e\u52a0\u4ea7\u751f\u8d21\u732e\uff1a \u539f\u6765\u7684\u524d \\(i\\) \u6bb5\u8ddd\u79bb\u88ab\u6eda\u8fc7\uff08\u4e5f\u5c31\u662f\u7b2c \\(i\\) \u6bb5\u8ddd\u79bb\u4e4b\u524d\u7684\u7403\u6eda\u5b8c\u4e86\uff09\uff0c\u4f7f\u539f\u7b2c \\(i+2\\) \u6bb5\u8ddd\u79bb\u4ee3\u66ff\u4e86\u7b2c \\(i\\) \u6bb5\u3002 \u539f\u6765\u7684\u7b2c \\(i+1\\) \u6bb5\u8ddd\u79bb\u88ab\u6eda\u8fc7\uff0c\u4f7f\u539f\u7b2c \\(i,i+2,i+3\\) \u6bb5\u4ee3\u66ff\u4e86\u7b2c \\(i\\) \u6bb5\u3002 \u8bbe\u65b0\u7684\u8ddd\u79bb\u5e8f\u5217\u4e3a \\(d'_i\\) \uff0c\u90a3\u4e48\u6709\uff1a d'_i=d_i+\\frac{i\\times(d_{i+2}-d_i)+(d_{i+2}+d_{i+3})}{2n}=d_i+\\frac{i\\times 2x+2d+5x}{2n} \u8fd9\u6784\u6210\u4e00\u4e2a\u65b0\u7684\u7b49\u5dee\u6570\u5217\uff0c\u800c\u5bf9\u6bcf\u4e2a \\(d,x\\) \u6211\u4eec\u63a8\u4e00\u6b21\u7403\u7684\u671f\u671b\u8ddd\u79bb\u4e3a\u6570\u5217\u7684\u4e2d\u4f4d\u6570\uff0c\u9012\u63a8\u5230\u6700\u540e\u5373\u53ef\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(n)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) using namespace std ; int main (){ int n ; double d , x , ans = 0 ; scanf ( \"%d%lf%lf\" , & n , & d , & x ); while ( n ){ ans += d + x * ( 2 * n -1 ) / 2 ; double dd = d + ( 2 * d + 5 * x ) / ( 2 * n ), xx = x + 2 * x / n ; d = dd , x = xx ; n -- ; } printf ( \"%.10lf \\n \" , ans ); return 0 ; }","title":"C"},{"location":"%E7%AC%94%E8%AE%B0/AGC007%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#d","text":"\u9996\u5148\u89c2\u5bdf\u5230 Shik \u884c\u8d70\u7684\u8def\u7ebf\u53ef\u4ee5\u88ab\u8868\u793a\u6210\u5f80\u6570\u8f74\u6b63\u65b9\u5411\u548c\u53cd\u65b9\u5411\u7684\u8fd0\u52a8\u4ee5\u53ca\u539f\u5730\u7b49\u5019\uff0c\u4e14\u6700\u7ec8\u8fd0\u52a8\u5230\u7ec8\u70b9\u3002\u5230\u5173\u952e\u70b9\u6709\u4e24\u4e2a\u539f\u56e0\uff1a \u7b2c\u4e00\u6b21\u5230\u8fbe\uff0c\u5f00\u59cb\u751f\u6210\u91d1\u5e01\u3002 \u7b2c\u4e8c\u6b21\u5230\u8fbe\uff0c\u6361\u91d1\u5e01\u3002 \u6ce8\u610f\u5230\u6298\u8fd4\u548c\u524d\u8fdb\u663e\u7136\u90fd\u8981\u5230\u4e00\u4e2a\u5173\u952e\u70b9\uff0c\u5426\u5219\u6ca1\u6709\u610f\u4e49\u3002\u4e0d\u59a8\u8bbe\u4ece\u5f53\u524d\u4f4d\u7f6e \\(pos\\) \u70b9\u6298\u8fd4\u6700\u8fdc\u5230 \\(i\\) \u53f7\u70b9\u518d\u524d\u8fdb\uff0c\u5982\u679c\u80fd\u5728 \\(i\\) \u53f7\u70b9\u62ff\u5230\u91d1\u5e01\uff0c\u90a3\u4e48 \\(i+1,i+2,\\dots,pos\\) \u7b49\u8282\u70b9\u6b64\u65f6\u5fc5\u7136\u4e5f\u751f\u6210\u4e86\u91d1\u5e01\u3002\u8fd9\u8bf4\u660e\u6bcf\u6b21\u6298\u8fd4\u90fd\u4f1a\u62ff\u5230\u8fd9\u6bb5\u533a\u95f4\u7684\u91d1\u5e01\u3002\u4e0b\u9762\u8bbe \\(f_i\\) \u4e3a\u6361\u5230\u4e86\u524d \\(i\\) \u4e2a\u70b9\u7684\u91d1\u5e01\u65f6\u82b1\u8d39\u7684\u6700\u5c0f\u65f6\u95f4\uff0c\u663e\u7136\u5f53\u65f6\u5728 \\(i\\) \u53f7\u70b9\u3002\u4ece \\(f_j\\) \u8f6c\u79fb\u65f6\uff0c\u9700\u8981\u5148\u8d70\u4e00\u6bb5 \\(x_i-x_j\\) \u7684\u8ddd\u79bb\uff0c\u518d\u53d6\u5f80\u8fd4\u65f6\u95f4\u548c \\(i\\) \u53f7\u91d1\u5e01\u51fa\u73b0\u7684\u65f6\u95f4\u7684\u6700\u5927\u503c\uff0c\u6211\u4eec\u6709\uff1a f_i=\\min_j\\{f_j+x_i-x_j+\\max{(2(x_i-x_{j+1}),T)}\\} \u63d0\u53d6 \\(x_i-x_j\\) \u9879\u5230\u62ec\u53f7\u5916\u9762\uff0c\u53d1\u73b0\u6c42\u548c\u540e\u4e3a \\(x_n\\) \u3002\u8003\u8651\u5982\u4f55\u4f18\u5316\u62ec\u53f7\u5185\u7684\u6c42\u503c\uff0c \\(2(x_i-x_{j+1})\\le T\\Longrightarrow f_i=\\min_j\\{f_j\\}\\) \\(2(x_i-x_{j+1})>T\\Longrightarrow f_i=2x_i+\\min_j\\{f_j-2x_{j+1}\\}\\) \u7531\u4e8e \\(x_i-x_{j+1}\\) \u968f \\(j\\) \u5355\u8c03\u9012\u51cf\uff0c\u8fd9\u53ef\u4ee5\u7528\u5355\u8c03\u961f\u5217\u4f18\u5316\u5230 \\(O(n)\\) \u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(n)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 ; int q [ N ], h , t ; ll n , E , T , x [ N ], f [ N ], minn = 1e18 ; int main (){ n = read (), E = read (), T = read (); rep ( i , 1 , n ) x [ i ] = read (); f [ 0 ] = 0 ; rep ( i , 1 , n ){ while ( h <= t && 2 * ( x [ i ] - x [ q [ h ] + 1 ]) > T ){ minn = min ( minn , f [ q [ h ]] -2 * x [ q [ h ] + 1 ]); ++ h ; } f [ i ] = min ( f [ q [ h ]] + T , minn + 2 * x [ i ]); q [ ++ t ] = i ; } printf ( \"%lld \\n \" , f [ n ] + E ); return 0 ; }","title":"D"},{"location":"%E7%AC%94%E8%AE%B0/AGC007%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#e","text":"\u795e\u4ed9\u6811\u5f62dp\u3002 \u8981\u6c42\u6700\u5c0f\u5316\u6240\u6709\u8def\u5f84\u6743\u503c\u7684\u6700\u5927\u503c\uff0c\u8fd9\u663e\u7136\u60f3\u5230\u4e8c\u5206\u3002\u4e0b\u9762\u8003\u8651\u5bf9\u4e8e\u6700\u5927\u6743\u503c \\(V\\) \u5982\u4f55\u8ba1\u7b97\u662f\u5426\u6709\u53ef\u884c\u89e3\uff0c\u7531\u9898\u610f\u5f97\u6bcf\u4e2a\u5b50\u6811\u90fd\u8981\u8d70\u5b8c\u624d\u80fd\u53bb\u53e6\u4e00\u4e2a\u5b50\u6811\uff0c\u4e8e\u662f\u53ef\u4ee5\u60f3\u5230\u8fd9\u6837\u7684 \\(dp\\) \uff1a \u8bbe \\(f_u(a,b)\\) \u4e3a\u5728 \\(u\\) \u5b50\u6811\u5185\u5b58\u5728\u6ee1\u8db3\u6761\u4ef6\u7684\u6784\u9020\uff0c\u4e14\u6839\u5230\u7b2c\u4e00\u4e2a\u53f6\u5b50\u548c\u6700\u540e\u4e00\u4e2a\u53f6\u5b50\u7684\u8ddd\u79bb\u5206\u522b\u4e3a \\(a,b\\) \u3002\u53ef\u4ee5\u7406\u89e3 \\(f_u\\) \u4e3a\u5b50\u6811 \\(u\\) \u4e2d\u6240\u6709\u53ef\u884c\u89e3\u7684\u89e3\u96c6\u3002\u8bb0 \\(u\\) \u7684\u5de6\u53f3\u513f\u5b50\u4e3a \\(l,r\\) \uff0c\u90a3\u4e48\u8f6c\u79fb\u5c31\u662f\uff1a f_u=\\{(a,b)|(a,i)\\in f_{l},(j,b)\\in f_{r},i+j+w_l+w_r\\le V\\} \u66b4\u529b\u5408\u5e76\u5de6\u53f3\u513f\u5b50\u7684\u72b6\u6001\u65f6\u95f4\u590d\u6742\u5ea6\u8d85\u6807\uff0c\u8003\u8651\u4f18\u5316\u3002\u6211\u4eec\u53ef\u4ee5\u8d2a\u5fc3\u5730\u7b5b\u9009\u96c6\u5408\u5185\u7684\u5143\u7d20\uff0c\u4e5f\u5c31\u662f\u5982\u679c\u6709 \\(a_1\\le a_2,b_1\\le b_2\\) \u90a3\u4e48 \\((a_1,b_1)\\) \u663e\u7136\u66f4\u4f18\uff0c\u53ef\u4ee5\u6392\u5e8f\u540e\u7b5b\u6389\u5f62\u5982 \\((a_2,b_2)\\) \u7684\u5143\u7d20\u3002\u4e8e\u662f\u5269\u4e0b\u7684\u5143\u7d20\u6ee1\u8db3 \\(a\\) \u5347\u5e8f\u6392\u5217\uff0c \\(b\\) \u964d\u5e8f\u6392\u5217\uff0c\u4e8e\u662f\u5728\u5408\u5e76\u65f6\u53ef\u4ee5\u4f7f\u7528 \\(two-pointers\\) \u4f18\u5316\u3002\u6ce8\u610f\u5230\u6bcf\u6b21\u5408\u5e76\u589e\u52a0\u7684\u72b6\u6001\u6570\u4e3a \\(2\\times\\min(|f_l|,|f_r|)\\) \uff0c\u4e0d\u96be\u53d1\u73b0\u603b\u72b6\u6001\u6570\u662f \\(O(n\\log n)\\) \u7684\uff0c\u53ef\u4ee5\u901a\u8fc7\u672c\u9898\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(n\\log^2 n)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long #define pii pair<ll,ll> #define fi first #define se second #define pb push_back using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 ; int n , ch [ N ][ 2 ]; ll w [ N ][ 2 ]; vector < pii > Ans [ N ]; void dfs ( int u , ll V ){ Ans [ u ]. clear (); if ( ! ch [ u ][ 0 ]){ Ans [ u ]. pb ({ 0 , 0 }); return ; } rep ( i , 0 , 1 ) if ( ch [ u ][ i ]) dfs ( ch [ u ][ i ], V ); vector < pii > vec ; rep ( t , 0 , 1 ){ int ls = ch [ u ][ t ], rs = ch [ u ][ t ^ 1 ]; ll Max = V - w [ u ][ 0 ] - w [ u ][ 1 ]; for ( int i = 0 , j = 0 ; i < Ans [ ls ]. size (); ++ i ){ while ( j + 1 < Ans [ rs ]. size () && Ans [ rs ][ j + 1 ]. fi + Ans [ ls ][ i ]. se <= Max ) ++ j ; if ( j >= Ans [ rs ]. size () || Ans [ rs ][ j ]. fi + Ans [ ls ][ i ]. se > Max ) continue ; vec . pb ({ Ans [ ls ][ i ]. fi + w [ u ][ t ], Ans [ rs ][ j ]. se + w [ u ][ t ^ 1 ]}); } } sort ( vec . begin (), vec . end ()); rep ( i , 0 ,( int ) vec . size () -1 ){ if ( ! Ans [ u ]. empty () && Ans [ u ]. back (). se <= vec [ i ]. se ) continue ; Ans [ u ]. pb ( vec [ i ]); } } inline bool check ( ll mid ){ dfs ( 1 , mid ); return Ans [ 1 ]. size () >= 1 ; } int main (){ n = read (); ll l = 0 , r = 0 , ans ; rep ( i , 2 , n ){ int fa = read (), val = read (); r += val ; if ( ch [ fa ][ 0 ]) ch [ fa ][ 1 ] = i , w [ fa ][ 1 ] = val ; else ch [ fa ][ 0 ] = i , w [ fa ][ 0 ] = val ; } while ( l <= r ){ ll mid = ( l + r ) / 2 ; if ( check ( mid )){ r = mid -1 ; ans = mid ; } else l = mid + 1 ; } printf ( \"%lld \\n \" , ans ); return 0 ; }","title":"E"},{"location":"%E7%AC%94%E8%AE%B0/AGC007%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#f","text":"\u8bbe\u6700\u5c11\u53d8\u6362 \\(m-1\\) \u6b21\uff0c\u628a\u8fd9 \\(m-1\\) \u6b21\u7684\u4e32\u4e0e\u521d\u59cb\u4e32\u4ece\u4e0a\u81f3\u4e0b\u653e\u5728\u4e00\u8d77\u6210\u4e00\u4e2a \\(n\\times m\\) \u7684\u65b9\u9635\u3002\u7531\u9898\u610f\u5f97 \\(S_{i,j}=S_{i-1,j}\\) \u6216 \\(S_{i,j}=S_{i,j-1}\\) \uff0c\u5373\u5f53\u524d\u4f4d\u7f6e\u4ece\u4e0a\u9762\u6216\u5de6\u8fb9\u4e00\u683c\u8f6c\u79fb\u800c\u6765\uff0c\u89c2\u5bdf\u539f\u4e32 \\(n\\) \u4e2a\u5b57\u7b26\u8f6c\u79fb\u7684\u8def\u5f84\u4f1a\u5728\u65b9\u9635\u91cc\u6210\u591a\u6761\u6298\u7ebf\uff0c\u5982\u4e0b\u56fe\u3002 \u4e0d\u96be\u53d1\u73b0\u6bcf\u6761\u6298\u7ebf\u5c3d\u91cf\u9760\u53f3\u6700\u4f18\uff0c\u56e0\u4e3a\u8fd9\u6837\u53ef\u4ee5\u8ba9\u8be5\u6298\u7ebf\u4e0d\u5f71\u54cd\u524d\u9762\u7684\u7ebf\uff0c\u4ee5\u53ca\u4f7f\u539f\u4e32\u8fd8\u53ef\u4ee5\u5f15\u51fa\u6298\u7ebf\u7684\u5b57\u6bcd\u5c3d\u91cf\u591a\u3002\u5982\u679c\u5f53\u524d\u884c\u753b\u4e0d\u4e0b\u5c31\u52a0\u4e00\u884c\uff0c\u4e0b\u9762\u8003\u8651\u5982\u4f55\u7ef4\u62a4\u8fd9\u6837\u7684\u8d2a\u5fc3\u3002\u5982\u679c\u6709 \\(S_0=T\\) \u76f4\u63a5\u8f93\u51fa \\(0\\) \u3002 \u9996\u5148\u627e\u51fa \\(T\\) \u6700\u957f\u7684\u7531\u76f8\u540c\u5b57\u7b26 \\(c\\) \u7ec4\u6210\u7684\u540e\u7f00\uff0c\u5728 \\(S\\) \u4e2d\u627e\u5230\u5269\u4f59\u5b57\u7b26\u4e2d\u6700\u53f3\u7684 \\(c\\) \uff0c\u8bb0\u8fd9\u4e24\u4e2a\u4f4d\u7f6e\u4e3a \\(S_i,T_j\\) \u3002\u53ef\u4ee5\u7528\u961f\u5217\u7ef4\u62a4\u6240\u6709\u62d0\u70b9\uff1a\u5148\u628a\u6240\u6709\u6a2a\u5750\u6807\u5728 \\(j\\) \u540e\u9762\u7684\u70b9\u51fa\u961f\uff0c\u7531\u8d2a\u5fc3\u7b56\u7565\u5f97\u5269\u4e0b\u7684\u62d0\u70b9\u5f80\u5de6\u4e0b\u79fb\u52a8\u4e00\u683c\u3002\u7531\u4e8e\u62d0\u70b9\u4e0d\u51fa\u73b0\u5728 \\(T\\) \u4e32\uff0c\u7b54\u6848\u5219\u662f\u6700\u4e0b\u9762\u7684\u62d0\u70b9\u7684\u7eb5\u5750\u6807 \\(+1\\) \u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(n)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e6 + 5 ; int n , ans , m ; char S [ N ], T [ N ]; bool flg ; queue < int > q ; int main (){ n = read (); scanf ( \"%s%s\" , S + 1 , T + 1 ); rep ( i , 1 , n ) if ( S [ i ] != T [ i ]) flg = 1 ; if ( ! flg ) return puts ( \"0\" ), 0 ; int m = n ; while ( m ){ while ( m > 1 && T [ m ] == T [ m -1 ]) m -- ; while ( n && ( n > m || S [ n ] != T [ m ])) -- n ; if ( ! n ) return puts ( \"-1\" ), 0 ; while ( ! q . empty () && q . front () - q . size () >= m ) q . pop (); if ( n != m ) q . push ( n ); ans = max ( ans ,( int ) q . size () + 1 ); -- m ; } printf ( \"%d \\n \" , ans ); return 0 ; }","title":"F"},{"location":"%E7%AC%94%E8%AE%B0/AGC008%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/","text":"AGC008 \u505a\u9898\u8bb0\u5f55 \u00b6 A \u00b6 \u53ef\u4ee5\u901a\u8fc7\u5206\u7c7b\u8ba8\u8bba\u5b9e\u73b0\uff0c\u4e5f\u53ef\u4ee5\u679a\u4e3e\u7ffb\u8f6c\u6b21\u6570\u66b4\u529b\u89e3\u51b3\uff0c\u8fd9\u91cc\u7528\u4e86\u540e\u8005\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } int S ( int x , int y ){ if ( x <= y ) return y - x ; else return x - y + 2 ; } int main (){ int x = read (), y = read (); int ans = min ( min ( S ( x , y ), S ( - x , y ) + 1 ), min ( S ( - x , - y ) + 2 , S ( x , - y ) + 1 )); printf ( \"%d \\n \" , ans ); return 0 ; } B \u00b6 \u719f\u77e5\u7ed3\u8bba\u4e3a\u4efb\u4f55\u5b58\u5728\u8fde\u7eed \\(k\\) \u683c\u989c\u8272\u76f8\u540c\u7684\u65b9\u6848\u90fd\u53ef\u4ee5\u88ab\u6784\u9020\uff0c\u4e8e\u662f\u66b4\u529b\u679a\u4e3e\u8fde\u7eed\u6bb5+\u524d\u7f00\u548c\u5373\u53ef\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 ; ll n , k , a [ N ], sum [ N ], sum2 [ N ], ans ; int main (){ n = read (), k = read (); rep ( i , 1 , n ){ a [ i ] = read (); sum [ i ] = sum [ i -1 ] + a [ i ]; sum2 [ i ] = sum2 [ i -1 ] + ( a [ i ] > 0 ) * a [ i ]; } rep ( i , k , n ){ ll tmp = sum [ i ] - sum [ i - k ]; tmp = ( tmp > 0 ) * tmp + sum2 [ n ] - sum2 [ i ] + sum2 [ i - k ]; ans = max ( ans , tmp ); } printf ( \"%lld \\n \" , ans ); return 0 ; } C \u00b6 \u624b\u73a9\u51e0\u79cd\u4e0d\u540c\u7684\u4fc4\u7f57\u65af\u65b9\u5757\u53d1\u73b0 \\(T,S,Z\\) \u5f62\u65b9\u5757\u591a\u51fa\u7684\u4e00\u683c\u65e0\u6cd5\u5904\u7406\uff0c\u6240\u4ee5\u4e0d\u80fd\u653e\u7f6e\u3002\u800c \\(O\\) \u5f62\u53ef\u4ee5\u81ea\u5df1\u8d21\u732e\u7b54\u6848\uff0c\u5176\u4ed6\u65b9\u5757\u53ef\u4ee5\u548c\u76f8\u540c\u5757\u4e24\u4e24\u7ec4\u5408\u8d21\u732e\uff0c\u4e5f\u53ef\u4ee5 \\(I,J,L\\) \u5404\u4e00\u5757\u8d21\u732e\uff0c\u7b80\u5355\u5224\u65ad\u5373\u53ef\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } ll a [ 8 ], ans ; ll calc ( ll a1 , ll a4 , ll a5 ){ return a1 + a4 + a5 - a1 % 2 - a4 % 2 - a5 % 2 ; } int main (){ rep ( i , 1 , 7 ) a [ i ] = read (); ans = calc ( a [ 1 ], a [ 4 ], a [ 5 ]); if ( a [ 1 ] && a [ 4 ] && a [ 5 ]) ans = max ( ans , calc ( a [ 1 ] -1 , a [ 4 ] -1 , a [ 5 ] -1 ) + 3 ); printf ( \"%lld \\n \" , ans + a [ 2 ]); return 0 ; } D \u00b6 \u8d2a\u5fc3\u6784\u9020\u3002 \u9996\u5148\u60f3\u5230 \\(X_i\\) \u5de6\u8fb9\u4f1a\u6709 \\(i-1\\) \u4e2a \\(i\\) \uff0c\u53f3\u8fb9\u6709 \\(n-i\\) \u4e2a \\(i\\) \uff0c\u53ea\u8981\u80fd\u6ee1\u8db3\u8fd9\u6837\u7684\u9650\u5236\u5c31\u6784\u9020\u6210\u529f\u4e86\u3002\u7136\u540e\u6211\u4eec\u5bf9 \\(X_i\\) \u6392\u5e8f\uff0c\u8d8a\u9760\u5de6\u7684\u8d8a\u9700\u8981\u7528 \\(i\\) \u586b\u7a7a\uff0c\u540c\u7406\u53cd\u7740\u4e5f\u8fd9\u4e48\u505a\u4e00\u904d\u3002\u8fd9\u6837\u7684\u8d2a\u5fc3\u662f\u6700\u4f18\u7684\uff0c\u56e0\u4e3a\u82e5 \\(X_j>X_i\\) \uff0c\u90a3\u4e48 \\(X_i\\) \u524d\u9762\u7684\u4f4d\u7f6e\u5fc5\u987b\u6709 \\(i-1\\) \u4e2a\u88ab \\(i\\) \u5360\u9886\u624d\u80fd\u7ed9 \\(j\\) \u586b\u7a7a\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 505 ; struct node { int v , p ;} x [ 505 ]; bool cmp ( node a , node b ){ return a . p < b . p ;} int n , ans [ N * N ]; int main (){ n = read (); rep ( i , 1 , n ){ int p = read (); x [ i ] = { i , p }, ans [ p ] = i ; } sort ( x + 1 , x + n + 1 , cmp ); int k = 1 ; rep ( i , 1 , n ){ rep ( j , 1 , x [ i ]. v -1 ){ while ( ans [ k ]) ++ k ; if ( k >= x [ i ]. p ) return puts ( \"No\" ), 0 ; ans [ k ++ ] = x [ i ]. v ; } } k = n * n ; per ( i , n , 1 ){ rep ( j , 1 , n - x [ i ]. v ){ while ( ans [ k ]) -- k ; if ( k <= x [ i ]. p ) return puts ( \"No\" ), 0 ; ans [ k -- ] = x [ i ]. v ; } } puts ( \"Yes\" ); rep ( i , 1 , n * n ) printf ( \"%d \" , ans [ i ]); return 0 ; } E \u00b6 \u7f6e\u6362\u4f1a\u5f62\u6210\u82e5\u5e72\u4e2a\u6709\u5411\u73af\u3002\u89c2\u5bdf\u8fd9\u4e9b\u73af\u5982\u4f55\u548c \\(a\\) \u56fe\u5efa\u7acb\u8054\u7cfb\uff1a \u60c5\u51b51\uff1a \\(p_i=a_i\\) \u4f1a\u5f62\u6210\u548c \\(a\\) \u56fe\u5b8c\u5168\u4e00\u6837\u7684\u73af\u3002 \u60c5\u51b52\uff1a \\(p_{p_i}=a_i\\) \u4e14\u539f\u73af\u957f\u4e3a\u5947\u3002 \u4f1a\u5f62\u6210\u548c\u539f\u6765\u7684\u73af\u540c\u6784\u7684\u4e00\u4e2a\u73af\u3002 \u60c5\u51b53\uff1a\u73af\u957f\u4e3a\u5076\u3002 \u4f1a\u628a\u539f\u6765\u7684\u73af\u5206\u6210\u4e24\u4e2a\u5927\u5c0f\u76f8\u540c\u7684\u5c0f\u73af\u3002 \u60c5\u51b54\uff1a\u4e00\u90e8\u5206 \\(p_i=a_i\\) \uff0c\u4e00\u90e8\u5206 \\(p_{p_i}=a_i\\) \u3002 \u4f1a\u5f62\u6210\u4e00\u4e2a\u4e0a\u9762\u6302\u7740\u51e0\u6761\u94fe\u7684\u73af\uff0c\u5373\u4e3a\u4e00\u79cd\u7279\u6b8a\u7684\u57fa\u73af\u6811\u3002 \u9996\u5148\u8003\u8651 \\(a\\) \u56fe\u4e2d\u7684\u6240\u6709\u73af\uff0c\u4e24\u4e2a\u5927\u5c0f\u4e00\u6837\u7684\u73af\u53ef\u80fd\u5728 \\(p\\) \u56fe\u7684\u540c\u4e00\u4e2a\u73af\u4e2d\uff08\u5373\u60c5\u51b53\uff09\u3002\u5982\u679c\u6709 \\(n_k\\) \u4e2a\u5927\u5c0f\u4e3a \\(k\\) \u7684\u73af\uff0c\u4e0d\u96be\u53d1\u73b0\u5b83\u4eec\u5e26\u6765\u7684\u603b\u65b9\u6848\u6570\u53ef\u4ee5 \\(O(n_k)\\) \u5185\u7528 \\(dp\\) \u6c42\u89e3\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\u5728\u60c5\u51b53\u4e2d\u6211\u4eec\u6709 \\(k\\) \u79cd\u5408\u5e76\u4e24\u4e2a\u73af\u7684\u65b9\u6848\u3002 \u4e0b\u9762\u8003\u8651\u5982\u4f55\u5904\u7406 \\(a\\) \u56fe\u4e2d\u7279\u6b8a\u7684\u57fa\u73af\u6811\uff0c\u6211\u4eec\u9700\u8981\u628a\u591a\u51fa\u7684\u94fe\u585e\u8fdb\u8fd9\u4e2a\u73af\u91cc\u3002\u8bbe \\(l_1\\) \u4e3a\u5f53\u524d\u94fe\u957f\uff0c \\(l_2\\) \u4e3a\u5f53\u524d\u94fe\u5728\u73af\u4e0a\u7684\u7aef\u70b9\u8ddd\u79bb\u4e0a\u4e00\u6761\u94fe\u7684\u7aef\u70b9\u7684\u8ddd\u79bb\uff0c\u7ecf\u8fc7\u4e00\u4e9b\u7b80\u5355\u6784\u9020\uff0c\u6211\u4eec\u6709\uff1a \\(l_1<l_2\\) \u65f6\u6709 \\(2\\) \u79cd\u65b9\u6848\u3002 \\(l_1=l_2\\) \u65f6\u6709 \\(1\\) \u79cd\u65b9\u6848\u3002 \\(l_1>l_2\\) \u65f6\u65e0\u89e3\u3002 \u7531\u4e58\u6cd5\u539f\u7406\uff0c\u6240\u6709\u60c5\u51b5\u7684\u65b9\u6848\u6570\u76f8\u4e58\u5373\u4e3a\u7b54\u6848\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(n)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 , P = 1e9 + 7 ; int Mod ( int x ){ return x >= P ? x - P : x ;} int n , a [ N ], deg [ N ], cir [ N ], vis [ N ], flen [ N ], cnt [ N ]; ll ans = 1 , dp [ N ]; int k ( int l1 , int l2 ){ if ( l1 < l2 ) return 2 ; if ( l1 == l2 ) return 1 ; return 0 ; } void work ( int x ){ int now = 0 , len = 0 , last = 0 , fir = 0 ; while ( cir [ x ]){ ++ now , cir [ x ] = 0 ; if ( flen [ x ]){ if ( ! fir ) fir = last = now , len = flen [ x ]; else { ans = ans * k ( flen [ x ], now - last ) % P , last = now ; } } x = a [ x ]; } if ( ! fir ) ++ cnt [ now ]; else { ans = ans * k ( len , now - last + fir ) % P ; } } int main (){ n = read (); rep ( i , 1 , n ) a [ i ] = read (), ++ deg [ a [ i ]]; rep ( i , 1 , n ){ if ( vis [ i ]) continue ; int x = i ; while ( ! vis [ x ]) vis [ x ] = i , x = a [ x ]; if ( vis [ x ] != i ) continue ; //\u4e0d\u5728\u73af\u4e0a while ( ! cir [ x ]) cir [ x ] = 1 , x = a [ x ]; //\u6807\u8bb0\u73af } rep ( i , 1 , n ){ //\u7279\u5224\u65e0\u89e3 if (( cir [ i ] && deg [ i ] > 2 ) || ( ! cir [ i ] && deg [ i ] > 1 )) return puts ( \"0\" ), 0 ; } rep ( i , 1 , n ){ if ( deg [ i ]) continue ; int x = i , len = 0 ; while ( ! cir [ x ]) ++ len , x = a [ x ]; flen [ x ] = len ; //\u8bb0\u5f55\u94fe\u957f } rep ( i , 1 , n ) if ( cir [ i ]) work ( i ); //\u57fa\u73af\u6811 rep ( i , 1 , n ){ //\u73af if ( ! cnt [ i ]) continue ; dp [ 0 ] = 1 ; rep ( j , 1 , cnt [ i ]){ if ( i > 1 && ( i & 1 )) dp [ j ] = Mod ( dp [ j -1 ] * 2 ); //\u5947\u73af else dp [ j ] = dp [ j -1 ]; if ( j > 1 ) dp [ j ] = Mod ( dp [ j ] + dp [ j -2 ] * ( j -1 ) % P * i % P ); //\u5408\u5e76\u4e24\u5c0f\u73af\u6210\u5927\u73af } ans = ans * dp [ cnt [ i ]] % P ; } printf ( \"%lld \\n \" , ans ); return 0 ; } F \u00b6 \u795e\u4ed9\u6811\u5f62dp\u3002 \u9996\u5148\u8003\u8651\u5982\u4f55\u8f6c\u6362\u9898\u610f\u65b9\u4fbf\u6211\u4eec\u8ba1\u6570\uff0c\u4e0d\u59a8\u5148\u8bbe\u6240\u6709\u70b9\u5747\u4e3a\u5173\u952e\u70b9\u3002\u53d1\u73b0\u5bf9\u4e8e\u76f8\u540c\u7684\u67d3\u8272\u65b9\u6848\uff0c\u4ec5\u5b58\u5728\u4e00\u4e2a\u70b9 \\(u\\) \u4f5c\u4e3a\u5706\u5fc3\u65f6\u534a\u5f84\u6700\u5c0f\uff0c\u8bb0\u4e3a \\(d\\) \u3002\u6211\u4eec\u8bbe \\(f(u,d)\\) \u4e3a\u8ddd\u79bb \\(u\\) \u4e0d\u8d85\u8fc7 \\(d\\) \u7684\u70b9\u96c6\uff0c\u8ba1\u6570\u65f6\u53ea\u9700\u8981\u8bb0 \\(d\\) \u6700\u5c0f\u7684\u60c5\u51b5\uff0c\u4e8e\u662f \\(f(u,d)\\) \u4e0d\u8986\u76d6\u6240\u6709\u70b9\u3002\uff08\u6700\u540e\u52a0\u4e0a\u6574\u68f5\u6811\u88ab\u67d3\u8272\u7684\u60c5\u51b5\u5373\u53ef\uff09 \\(\\forall (u,v)\\in E,f(u,d)\\neq f(v,d-1)\\) \u5f53 \\(u\\) \u4e3a\u6839\u8282\u70b9\u65f6\uff0c\u7b2c\u4e00\u4e2a\u6761\u4ef6\u5373\u4e3a \\(d<mx_u\\) \uff0c \\(mx_u\\) \u4e3a\u79bb \\(u\\) \u6700\u8fdc\u7684\u70b9\u7684\u6df1\u5ea6\u3002\u800c\u56e0\u4e3a \\(f(v,d-1)\\) \u80fd\u8986\u76d6\u5176\u5b50\u6811\u5185 \\(f(u,d)\\) \u80fd\u8986\u76d6\u7684\u6240\u6709\u70b9\uff0c\u7b2c\u4e8c\u4e2a\u6761\u4ef6\u7b49\u4ef7\u4e8e \\(f(v,d-1)\\) \u65e0\u6cd5\u8986\u76d6 \\(u\\) \u5176\u4ed6\u5b50\u6811\u4e0a \\(f(u,d)\\) \u80fd\u8986\u76d6\u5230\u7684\u8282\u70b9\uff0c\u8fd9\u63d0\u793a\u4e86\u6211\u4eec \\(d\\) \u7684\u53e6\u4e00\u4e2a\u4e0a\u754c \\(d-1\\le mx2[u]\\) \uff0c\u5373\u79bb \\(u\\) \u8282\u70b9\u6b21\u957f\u7684\u8ddd\u79bb\u3002\u5bf9\u4e8e\u7edf\u8ba1\u6240\u6709\u8282\u70b9\u7684\u7b54\u6848\uff0c\u663e\u7136\u53ef\u4ee5\u901a\u8fc7\u6362\u6839 \\(dp\\) \u5b9e\u73b0\u3002 \u4e0b\u9762\u8003\u8651\u4e0d\u5168\u662f\u5173\u952e\u70b9\u7684\u60c5\u51b5\u3002\u82e5 \\(u\\) \u4e0d\u662f\u5173\u952e\u70b9\uff0c \\(v\\) \u4e3a \\(u\\) \u5b50\u8282\u70b9\u4e14 \\(v\\) \u5b50\u6811\u4e2d\u6709\u5173\u952e\u70b9\uff0c\u5982\u679c \\(f(u,d)\\) \u4e3a\u67d0\u4e2a\u5173\u952e\u70b9\u4e3a\u5706\u5fc3\u8986\u76d6\u7684\u96c6\u5408\uff0c\u8bbe d_u=\\min\\{mx_v\\}+1 \u5373\u6240\u6709 \\(v\\) \u5b50\u6811\u7684\u6df1\u5ea6\u52a0\u4e0a \\((u,v)\\) \u8fb9\u957f\u3002\u56e0\u4e3a \\(d_u\\) \u9700\u8981\u8986\u76d6\u67d0\u4e2a \\(v\\) \u5b50\u6811\u4e2d\u5173\u952e\u70b9 \\(w\\) \u80fd\u8986\u76d6\u7684\u6240\u6709\u70b9\uff0c\u4e0d\u96be\u53d1\u73b0 \\(d_u\\) \u4e3a\u534a\u5f84\u6700\u5c0f\u503c\u3002\u901a\u8fc7\u7c7b\u4f3c\u7684\u6362\u6839 \\(dp\\) \u6280\u5de7\u53bb\u7ef4\u62a4 \\(mx,mx2,d\\) \uff0c\u628a\u6bcf\u4e2a\u70b9\u4e3a\u5706\u5fc3\u7684\u53ef\u80fd\u534a\u5f84\u7edf\u8ba1\u8fdb\u7b54\u6848\u5373\u53ef\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(n)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 , inf = 1e9 ; int n , d [ N ], sz [ N ], mx [ N ], mx2 [ N ]; char col [ N ]; ll ans ; vector < int > G [ N ]; //\u82e5v\u4e3au\u5b50\u8282\u70b9\u4e14v\u5b50\u6811\u4e2d\u6709\u5173\u952e\u70b9\uff0cd[u]\u4e3amin(mx[v]+1) //\u4e0d\u96be\u53d1\u73b0d[u]\u4e3a\u534a\u5f84\u6700\u5c0f\u503c\uff0c\u56e0\u4e3ad[u]\u9700\u8981\u8986\u76d6\u81f3\u5c11\u4e00\u4e2av\u5b50\u6811\u4e2d\u5173\u952e\u70b9\u65e0\u6cd5\u8986\u76d6\u7684\u70b9 void dfs1 ( int u , int fa ){ if ( col [ u ] == '1' ) d [ u ] = 0 , sz [ u ] = 1 ; else d [ u ] = inf ; for ( int v : G [ u ]) if ( v != fa ){ dfs1 ( v , u ); sz [ u ] += sz [ v ]; if ( mx [ v ] + 1 > mx [ u ]) mx2 [ u ] = mx [ u ], mx [ u ] = mx [ v ] + 1 ; //\u6700\u957f\u8ddd\u79bb else if ( mx [ v ] + 1 > mx2 [ u ]) mx2 [ u ] = mx [ v ] + 1 ; //\u6b21\u957f\u8ddd\u79bb if ( sz [ v ]) d [ u ] = min ( d [ u ], mx [ v ] + 1 ); } } void dfs2 ( int u , int fa ){ //\u6362\u6839dp int R = min ( mx2 [ u ] + 1 , mx [ u ] -1 ); //\u6700\u5927\u534a\u5f84 if ( d [ u ] <= R ) ans += ( ll )( R - d [ u ] + 1 ); for ( int v : G [ u ]) if ( v != fa ){ int len ; //v\u5b50\u6811\u5916\u7684\u6700\u957f\u8ddd\u79bb if ( mx [ u ] == mx [ v ] + 1 ){ len = mx2 [ u ] + 1 ; } else len = mx [ u ] + 1 ; if ( len > mx [ v ]) mx2 [ v ] = mx [ v ], mx [ v ] = len ; else if ( len > mx2 [ v ]) mx2 [ v ] = len ; if ( sz [ 1 ] > sz [ v ] && d [ v ] > len ) d [ v ] = len ; dfs2 ( v , u ); } } int main (){ n = read (); rep ( i , 1 , n -1 ){ int u = read (), v = read (); G [ u ]. push_back ( v ); G [ v ]. push_back ( u ); } scanf ( \"%s\" , col + 1 ); dfs1 ( 1 , 0 ); dfs2 ( 1 , 0 ); printf ( \"%lld \\n \" , ans + 1 ); return 0 ; }","title":"AGC008 \u505a\u9898\u8bb0\u5f55"},{"location":"%E7%AC%94%E8%AE%B0/AGC008%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#agc008","text":"","title":"AGC008 \u505a\u9898\u8bb0\u5f55"},{"location":"%E7%AC%94%E8%AE%B0/AGC008%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#a","text":"\u53ef\u4ee5\u901a\u8fc7\u5206\u7c7b\u8ba8\u8bba\u5b9e\u73b0\uff0c\u4e5f\u53ef\u4ee5\u679a\u4e3e\u7ffb\u8f6c\u6b21\u6570\u66b4\u529b\u89e3\u51b3\uff0c\u8fd9\u91cc\u7528\u4e86\u540e\u8005\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } int S ( int x , int y ){ if ( x <= y ) return y - x ; else return x - y + 2 ; } int main (){ int x = read (), y = read (); int ans = min ( min ( S ( x , y ), S ( - x , y ) + 1 ), min ( S ( - x , - y ) + 2 , S ( x , - y ) + 1 )); printf ( \"%d \\n \" , ans ); return 0 ; }","title":"A"},{"location":"%E7%AC%94%E8%AE%B0/AGC008%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#b","text":"\u719f\u77e5\u7ed3\u8bba\u4e3a\u4efb\u4f55\u5b58\u5728\u8fde\u7eed \\(k\\) \u683c\u989c\u8272\u76f8\u540c\u7684\u65b9\u6848\u90fd\u53ef\u4ee5\u88ab\u6784\u9020\uff0c\u4e8e\u662f\u66b4\u529b\u679a\u4e3e\u8fde\u7eed\u6bb5+\u524d\u7f00\u548c\u5373\u53ef\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 ; ll n , k , a [ N ], sum [ N ], sum2 [ N ], ans ; int main (){ n = read (), k = read (); rep ( i , 1 , n ){ a [ i ] = read (); sum [ i ] = sum [ i -1 ] + a [ i ]; sum2 [ i ] = sum2 [ i -1 ] + ( a [ i ] > 0 ) * a [ i ]; } rep ( i , k , n ){ ll tmp = sum [ i ] - sum [ i - k ]; tmp = ( tmp > 0 ) * tmp + sum2 [ n ] - sum2 [ i ] + sum2 [ i - k ]; ans = max ( ans , tmp ); } printf ( \"%lld \\n \" , ans ); return 0 ; }","title":"B"},{"location":"%E7%AC%94%E8%AE%B0/AGC008%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#c","text":"\u624b\u73a9\u51e0\u79cd\u4e0d\u540c\u7684\u4fc4\u7f57\u65af\u65b9\u5757\u53d1\u73b0 \\(T,S,Z\\) \u5f62\u65b9\u5757\u591a\u51fa\u7684\u4e00\u683c\u65e0\u6cd5\u5904\u7406\uff0c\u6240\u4ee5\u4e0d\u80fd\u653e\u7f6e\u3002\u800c \\(O\\) \u5f62\u53ef\u4ee5\u81ea\u5df1\u8d21\u732e\u7b54\u6848\uff0c\u5176\u4ed6\u65b9\u5757\u53ef\u4ee5\u548c\u76f8\u540c\u5757\u4e24\u4e24\u7ec4\u5408\u8d21\u732e\uff0c\u4e5f\u53ef\u4ee5 \\(I,J,L\\) \u5404\u4e00\u5757\u8d21\u732e\uff0c\u7b80\u5355\u5224\u65ad\u5373\u53ef\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } ll a [ 8 ], ans ; ll calc ( ll a1 , ll a4 , ll a5 ){ return a1 + a4 + a5 - a1 % 2 - a4 % 2 - a5 % 2 ; } int main (){ rep ( i , 1 , 7 ) a [ i ] = read (); ans = calc ( a [ 1 ], a [ 4 ], a [ 5 ]); if ( a [ 1 ] && a [ 4 ] && a [ 5 ]) ans = max ( ans , calc ( a [ 1 ] -1 , a [ 4 ] -1 , a [ 5 ] -1 ) + 3 ); printf ( \"%lld \\n \" , ans + a [ 2 ]); return 0 ; }","title":"C"},{"location":"%E7%AC%94%E8%AE%B0/AGC008%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#d","text":"\u8d2a\u5fc3\u6784\u9020\u3002 \u9996\u5148\u60f3\u5230 \\(X_i\\) \u5de6\u8fb9\u4f1a\u6709 \\(i-1\\) \u4e2a \\(i\\) \uff0c\u53f3\u8fb9\u6709 \\(n-i\\) \u4e2a \\(i\\) \uff0c\u53ea\u8981\u80fd\u6ee1\u8db3\u8fd9\u6837\u7684\u9650\u5236\u5c31\u6784\u9020\u6210\u529f\u4e86\u3002\u7136\u540e\u6211\u4eec\u5bf9 \\(X_i\\) \u6392\u5e8f\uff0c\u8d8a\u9760\u5de6\u7684\u8d8a\u9700\u8981\u7528 \\(i\\) \u586b\u7a7a\uff0c\u540c\u7406\u53cd\u7740\u4e5f\u8fd9\u4e48\u505a\u4e00\u904d\u3002\u8fd9\u6837\u7684\u8d2a\u5fc3\u662f\u6700\u4f18\u7684\uff0c\u56e0\u4e3a\u82e5 \\(X_j>X_i\\) \uff0c\u90a3\u4e48 \\(X_i\\) \u524d\u9762\u7684\u4f4d\u7f6e\u5fc5\u987b\u6709 \\(i-1\\) \u4e2a\u88ab \\(i\\) \u5360\u9886\u624d\u80fd\u7ed9 \\(j\\) \u586b\u7a7a\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 505 ; struct node { int v , p ;} x [ 505 ]; bool cmp ( node a , node b ){ return a . p < b . p ;} int n , ans [ N * N ]; int main (){ n = read (); rep ( i , 1 , n ){ int p = read (); x [ i ] = { i , p }, ans [ p ] = i ; } sort ( x + 1 , x + n + 1 , cmp ); int k = 1 ; rep ( i , 1 , n ){ rep ( j , 1 , x [ i ]. v -1 ){ while ( ans [ k ]) ++ k ; if ( k >= x [ i ]. p ) return puts ( \"No\" ), 0 ; ans [ k ++ ] = x [ i ]. v ; } } k = n * n ; per ( i , n , 1 ){ rep ( j , 1 , n - x [ i ]. v ){ while ( ans [ k ]) -- k ; if ( k <= x [ i ]. p ) return puts ( \"No\" ), 0 ; ans [ k -- ] = x [ i ]. v ; } } puts ( \"Yes\" ); rep ( i , 1 , n * n ) printf ( \"%d \" , ans [ i ]); return 0 ; }","title":"D"},{"location":"%E7%AC%94%E8%AE%B0/AGC008%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#e","text":"\u7f6e\u6362\u4f1a\u5f62\u6210\u82e5\u5e72\u4e2a\u6709\u5411\u73af\u3002\u89c2\u5bdf\u8fd9\u4e9b\u73af\u5982\u4f55\u548c \\(a\\) \u56fe\u5efa\u7acb\u8054\u7cfb\uff1a \u60c5\u51b51\uff1a \\(p_i=a_i\\) \u4f1a\u5f62\u6210\u548c \\(a\\) \u56fe\u5b8c\u5168\u4e00\u6837\u7684\u73af\u3002 \u60c5\u51b52\uff1a \\(p_{p_i}=a_i\\) \u4e14\u539f\u73af\u957f\u4e3a\u5947\u3002 \u4f1a\u5f62\u6210\u548c\u539f\u6765\u7684\u73af\u540c\u6784\u7684\u4e00\u4e2a\u73af\u3002 \u60c5\u51b53\uff1a\u73af\u957f\u4e3a\u5076\u3002 \u4f1a\u628a\u539f\u6765\u7684\u73af\u5206\u6210\u4e24\u4e2a\u5927\u5c0f\u76f8\u540c\u7684\u5c0f\u73af\u3002 \u60c5\u51b54\uff1a\u4e00\u90e8\u5206 \\(p_i=a_i\\) \uff0c\u4e00\u90e8\u5206 \\(p_{p_i}=a_i\\) \u3002 \u4f1a\u5f62\u6210\u4e00\u4e2a\u4e0a\u9762\u6302\u7740\u51e0\u6761\u94fe\u7684\u73af\uff0c\u5373\u4e3a\u4e00\u79cd\u7279\u6b8a\u7684\u57fa\u73af\u6811\u3002 \u9996\u5148\u8003\u8651 \\(a\\) \u56fe\u4e2d\u7684\u6240\u6709\u73af\uff0c\u4e24\u4e2a\u5927\u5c0f\u4e00\u6837\u7684\u73af\u53ef\u80fd\u5728 \\(p\\) \u56fe\u7684\u540c\u4e00\u4e2a\u73af\u4e2d\uff08\u5373\u60c5\u51b53\uff09\u3002\u5982\u679c\u6709 \\(n_k\\) \u4e2a\u5927\u5c0f\u4e3a \\(k\\) \u7684\u73af\uff0c\u4e0d\u96be\u53d1\u73b0\u5b83\u4eec\u5e26\u6765\u7684\u603b\u65b9\u6848\u6570\u53ef\u4ee5 \\(O(n_k)\\) \u5185\u7528 \\(dp\\) \u6c42\u89e3\u3002\u503c\u5f97\u6ce8\u610f\u7684\u662f\u5728\u60c5\u51b53\u4e2d\u6211\u4eec\u6709 \\(k\\) \u79cd\u5408\u5e76\u4e24\u4e2a\u73af\u7684\u65b9\u6848\u3002 \u4e0b\u9762\u8003\u8651\u5982\u4f55\u5904\u7406 \\(a\\) \u56fe\u4e2d\u7279\u6b8a\u7684\u57fa\u73af\u6811\uff0c\u6211\u4eec\u9700\u8981\u628a\u591a\u51fa\u7684\u94fe\u585e\u8fdb\u8fd9\u4e2a\u73af\u91cc\u3002\u8bbe \\(l_1\\) \u4e3a\u5f53\u524d\u94fe\u957f\uff0c \\(l_2\\) \u4e3a\u5f53\u524d\u94fe\u5728\u73af\u4e0a\u7684\u7aef\u70b9\u8ddd\u79bb\u4e0a\u4e00\u6761\u94fe\u7684\u7aef\u70b9\u7684\u8ddd\u79bb\uff0c\u7ecf\u8fc7\u4e00\u4e9b\u7b80\u5355\u6784\u9020\uff0c\u6211\u4eec\u6709\uff1a \\(l_1<l_2\\) \u65f6\u6709 \\(2\\) \u79cd\u65b9\u6848\u3002 \\(l_1=l_2\\) \u65f6\u6709 \\(1\\) \u79cd\u65b9\u6848\u3002 \\(l_1>l_2\\) \u65f6\u65e0\u89e3\u3002 \u7531\u4e58\u6cd5\u539f\u7406\uff0c\u6240\u6709\u60c5\u51b5\u7684\u65b9\u6848\u6570\u76f8\u4e58\u5373\u4e3a\u7b54\u6848\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(n)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 , P = 1e9 + 7 ; int Mod ( int x ){ return x >= P ? x - P : x ;} int n , a [ N ], deg [ N ], cir [ N ], vis [ N ], flen [ N ], cnt [ N ]; ll ans = 1 , dp [ N ]; int k ( int l1 , int l2 ){ if ( l1 < l2 ) return 2 ; if ( l1 == l2 ) return 1 ; return 0 ; } void work ( int x ){ int now = 0 , len = 0 , last = 0 , fir = 0 ; while ( cir [ x ]){ ++ now , cir [ x ] = 0 ; if ( flen [ x ]){ if ( ! fir ) fir = last = now , len = flen [ x ]; else { ans = ans * k ( flen [ x ], now - last ) % P , last = now ; } } x = a [ x ]; } if ( ! fir ) ++ cnt [ now ]; else { ans = ans * k ( len , now - last + fir ) % P ; } } int main (){ n = read (); rep ( i , 1 , n ) a [ i ] = read (), ++ deg [ a [ i ]]; rep ( i , 1 , n ){ if ( vis [ i ]) continue ; int x = i ; while ( ! vis [ x ]) vis [ x ] = i , x = a [ x ]; if ( vis [ x ] != i ) continue ; //\u4e0d\u5728\u73af\u4e0a while ( ! cir [ x ]) cir [ x ] = 1 , x = a [ x ]; //\u6807\u8bb0\u73af } rep ( i , 1 , n ){ //\u7279\u5224\u65e0\u89e3 if (( cir [ i ] && deg [ i ] > 2 ) || ( ! cir [ i ] && deg [ i ] > 1 )) return puts ( \"0\" ), 0 ; } rep ( i , 1 , n ){ if ( deg [ i ]) continue ; int x = i , len = 0 ; while ( ! cir [ x ]) ++ len , x = a [ x ]; flen [ x ] = len ; //\u8bb0\u5f55\u94fe\u957f } rep ( i , 1 , n ) if ( cir [ i ]) work ( i ); //\u57fa\u73af\u6811 rep ( i , 1 , n ){ //\u73af if ( ! cnt [ i ]) continue ; dp [ 0 ] = 1 ; rep ( j , 1 , cnt [ i ]){ if ( i > 1 && ( i & 1 )) dp [ j ] = Mod ( dp [ j -1 ] * 2 ); //\u5947\u73af else dp [ j ] = dp [ j -1 ]; if ( j > 1 ) dp [ j ] = Mod ( dp [ j ] + dp [ j -2 ] * ( j -1 ) % P * i % P ); //\u5408\u5e76\u4e24\u5c0f\u73af\u6210\u5927\u73af } ans = ans * dp [ cnt [ i ]] % P ; } printf ( \"%lld \\n \" , ans ); return 0 ; }","title":"E"},{"location":"%E7%AC%94%E8%AE%B0/AGC008%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#f","text":"\u795e\u4ed9\u6811\u5f62dp\u3002 \u9996\u5148\u8003\u8651\u5982\u4f55\u8f6c\u6362\u9898\u610f\u65b9\u4fbf\u6211\u4eec\u8ba1\u6570\uff0c\u4e0d\u59a8\u5148\u8bbe\u6240\u6709\u70b9\u5747\u4e3a\u5173\u952e\u70b9\u3002\u53d1\u73b0\u5bf9\u4e8e\u76f8\u540c\u7684\u67d3\u8272\u65b9\u6848\uff0c\u4ec5\u5b58\u5728\u4e00\u4e2a\u70b9 \\(u\\) \u4f5c\u4e3a\u5706\u5fc3\u65f6\u534a\u5f84\u6700\u5c0f\uff0c\u8bb0\u4e3a \\(d\\) \u3002\u6211\u4eec\u8bbe \\(f(u,d)\\) \u4e3a\u8ddd\u79bb \\(u\\) \u4e0d\u8d85\u8fc7 \\(d\\) \u7684\u70b9\u96c6\uff0c\u8ba1\u6570\u65f6\u53ea\u9700\u8981\u8bb0 \\(d\\) \u6700\u5c0f\u7684\u60c5\u51b5\uff0c\u4e8e\u662f \\(f(u,d)\\) \u4e0d\u8986\u76d6\u6240\u6709\u70b9\u3002\uff08\u6700\u540e\u52a0\u4e0a\u6574\u68f5\u6811\u88ab\u67d3\u8272\u7684\u60c5\u51b5\u5373\u53ef\uff09 \\(\\forall (u,v)\\in E,f(u,d)\\neq f(v,d-1)\\) \u5f53 \\(u\\) \u4e3a\u6839\u8282\u70b9\u65f6\uff0c\u7b2c\u4e00\u4e2a\u6761\u4ef6\u5373\u4e3a \\(d<mx_u\\) \uff0c \\(mx_u\\) \u4e3a\u79bb \\(u\\) \u6700\u8fdc\u7684\u70b9\u7684\u6df1\u5ea6\u3002\u800c\u56e0\u4e3a \\(f(v,d-1)\\) \u80fd\u8986\u76d6\u5176\u5b50\u6811\u5185 \\(f(u,d)\\) \u80fd\u8986\u76d6\u7684\u6240\u6709\u70b9\uff0c\u7b2c\u4e8c\u4e2a\u6761\u4ef6\u7b49\u4ef7\u4e8e \\(f(v,d-1)\\) \u65e0\u6cd5\u8986\u76d6 \\(u\\) \u5176\u4ed6\u5b50\u6811\u4e0a \\(f(u,d)\\) \u80fd\u8986\u76d6\u5230\u7684\u8282\u70b9\uff0c\u8fd9\u63d0\u793a\u4e86\u6211\u4eec \\(d\\) \u7684\u53e6\u4e00\u4e2a\u4e0a\u754c \\(d-1\\le mx2[u]\\) \uff0c\u5373\u79bb \\(u\\) \u8282\u70b9\u6b21\u957f\u7684\u8ddd\u79bb\u3002\u5bf9\u4e8e\u7edf\u8ba1\u6240\u6709\u8282\u70b9\u7684\u7b54\u6848\uff0c\u663e\u7136\u53ef\u4ee5\u901a\u8fc7\u6362\u6839 \\(dp\\) \u5b9e\u73b0\u3002 \u4e0b\u9762\u8003\u8651\u4e0d\u5168\u662f\u5173\u952e\u70b9\u7684\u60c5\u51b5\u3002\u82e5 \\(u\\) \u4e0d\u662f\u5173\u952e\u70b9\uff0c \\(v\\) \u4e3a \\(u\\) \u5b50\u8282\u70b9\u4e14 \\(v\\) \u5b50\u6811\u4e2d\u6709\u5173\u952e\u70b9\uff0c\u5982\u679c \\(f(u,d)\\) \u4e3a\u67d0\u4e2a\u5173\u952e\u70b9\u4e3a\u5706\u5fc3\u8986\u76d6\u7684\u96c6\u5408\uff0c\u8bbe d_u=\\min\\{mx_v\\}+1 \u5373\u6240\u6709 \\(v\\) \u5b50\u6811\u7684\u6df1\u5ea6\u52a0\u4e0a \\((u,v)\\) \u8fb9\u957f\u3002\u56e0\u4e3a \\(d_u\\) \u9700\u8981\u8986\u76d6\u67d0\u4e2a \\(v\\) \u5b50\u6811\u4e2d\u5173\u952e\u70b9 \\(w\\) \u80fd\u8986\u76d6\u7684\u6240\u6709\u70b9\uff0c\u4e0d\u96be\u53d1\u73b0 \\(d_u\\) \u4e3a\u534a\u5f84\u6700\u5c0f\u503c\u3002\u901a\u8fc7\u7c7b\u4f3c\u7684\u6362\u6839 \\(dp\\) \u6280\u5de7\u53bb\u7ef4\u62a4 \\(mx,mx2,d\\) \uff0c\u628a\u6bcf\u4e2a\u70b9\u4e3a\u5706\u5fc3\u7684\u53ef\u80fd\u534a\u5f84\u7edf\u8ba1\u8fdb\u7b54\u6848\u5373\u53ef\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(n)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 , inf = 1e9 ; int n , d [ N ], sz [ N ], mx [ N ], mx2 [ N ]; char col [ N ]; ll ans ; vector < int > G [ N ]; //\u82e5v\u4e3au\u5b50\u8282\u70b9\u4e14v\u5b50\u6811\u4e2d\u6709\u5173\u952e\u70b9\uff0cd[u]\u4e3amin(mx[v]+1) //\u4e0d\u96be\u53d1\u73b0d[u]\u4e3a\u534a\u5f84\u6700\u5c0f\u503c\uff0c\u56e0\u4e3ad[u]\u9700\u8981\u8986\u76d6\u81f3\u5c11\u4e00\u4e2av\u5b50\u6811\u4e2d\u5173\u952e\u70b9\u65e0\u6cd5\u8986\u76d6\u7684\u70b9 void dfs1 ( int u , int fa ){ if ( col [ u ] == '1' ) d [ u ] = 0 , sz [ u ] = 1 ; else d [ u ] = inf ; for ( int v : G [ u ]) if ( v != fa ){ dfs1 ( v , u ); sz [ u ] += sz [ v ]; if ( mx [ v ] + 1 > mx [ u ]) mx2 [ u ] = mx [ u ], mx [ u ] = mx [ v ] + 1 ; //\u6700\u957f\u8ddd\u79bb else if ( mx [ v ] + 1 > mx2 [ u ]) mx2 [ u ] = mx [ v ] + 1 ; //\u6b21\u957f\u8ddd\u79bb if ( sz [ v ]) d [ u ] = min ( d [ u ], mx [ v ] + 1 ); } } void dfs2 ( int u , int fa ){ //\u6362\u6839dp int R = min ( mx2 [ u ] + 1 , mx [ u ] -1 ); //\u6700\u5927\u534a\u5f84 if ( d [ u ] <= R ) ans += ( ll )( R - d [ u ] + 1 ); for ( int v : G [ u ]) if ( v != fa ){ int len ; //v\u5b50\u6811\u5916\u7684\u6700\u957f\u8ddd\u79bb if ( mx [ u ] == mx [ v ] + 1 ){ len = mx2 [ u ] + 1 ; } else len = mx [ u ] + 1 ; if ( len > mx [ v ]) mx2 [ v ] = mx [ v ], mx [ v ] = len ; else if ( len > mx2 [ v ]) mx2 [ v ] = len ; if ( sz [ 1 ] > sz [ v ] && d [ v ] > len ) d [ v ] = len ; dfs2 ( v , u ); } } int main (){ n = read (); rep ( i , 1 , n -1 ){ int u = read (), v = read (); G [ u ]. push_back ( v ); G [ v ]. push_back ( u ); } scanf ( \"%s\" , col + 1 ); dfs1 ( 1 , 0 ); dfs2 ( 1 , 0 ); printf ( \"%lld \\n \" , ans + 1 ); return 0 ; }","title":"F"},{"location":"%E7%AC%94%E8%AE%B0/AGC009%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/","text":"AGC009 \u505a\u9898\u8bb0\u5f55 \u00b6 A \u00b6 \u53d1\u73b0 \\(A_N\\) \u53ea\u80fd\u88ab\u6700\u540e\u4e00\u4e2a\u64cd\u4f5c\u5f71\u54cd\uff0c\u5012\u7740\u8d2a\u5fc3\uff0c\u6bcf\u6b21\u53d6\u6700\u5c0f\u64cd\u4f5c\u6b21\u6570\u5373\u53ef\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define fi first #define se second #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } int n ; ll a [ 100005 ], b [ 100005 ], ans , num ; int main (){ n = read (); rep ( i , 1 , n ) a [ i ] = read (), b [ i ] = read (); per ( i , n , 1 ){ a [ i ] += num ; if ( a [ i ] % b [ i ]){ ll tmp = b [ i ] - ( a [ i ] % b [ i ]); num += tmp , ans += tmp ; } } printf ( \"%lld \\n \" , ans ); return 0 ; } B \u00b6 \u6811\u5f62dp\u3002\u9996\u5148\u5c06\u6240\u6709\u70b9\u7684\u7236\u8282\u70b9\u8bbe\u4e3a \\(a_i\\) \uff0c\u8bbe \\(f_u\\) \u4e3a\u8282\u70b9 \\(u\\) \u7684\u5b50\u6811\u4e2d\u6bd4\u8d5b\u7684\u6700\u5c0f\u6df1\u5ea6\u3002\u8bbe \\(v_1,v_2,\\dots,v_k\\) \u4e3a \\(u\\) \u7684\u5b50\u8282\u70b9\uff0c\u90a3\u4e48\u4e0d\u96be\u53d1\u73b0\u4e00\u4e2a\u8d2a\u5fc3\u601d\u8def\uff1a\u628a \\(f_v\\) \u6309\u6df1\u5ea6\u6392\u5e8f\uff0c\u7136\u540e\u6df1\u5ea6\u66f4\u6df1\u7684\u8fd9\u4e00\u8f6e\u5c31\u5c3d\u91cf\u8f6e\u7a7a\uff0c\u6df1\u5ea6\u7b2c\u4e8c\u7684\u5c11\u8f6e\u7a7a\u4e00\u8f6e\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\u8fd9\u6837 \\(f_u=\\max\\{f_{v_i}+i\\}\\) \uff0c \\(f_{v_i}\\) \u662f\u6240\u6709\u5b50\u6811\u4e2d\u7b2c \\(i\\) \u5927\u7684\u7b54\u6848\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N\\log N)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define fi first #define se second #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 ; int n , f [ N ], tmp [ N ]; vector < int > G [ N ]; void dfs ( int u ){ int tot = 0 ; for ( int v : G [ u ]) dfs ( v ); for ( int v : G [ u ]) tmp [ ++ tot ] = f [ v ]; sort ( tmp + 1 , tmp + tot + 1 ); rep ( i , 1 , tot ) f [ u ] = max ( f [ u ], tmp [ i ] + tot - i + 1 ); } int main (){ n = read (); rep ( i , 2 , n ){ int u = read (); G [ u ]. push_back ( i ); } dfs ( 1 ); printf ( \"%d \\n \" , f [ 1 ]); return 0 ; } C \u00b6 \u9996\u5148\u4e0d\u59a8\u8bbe \\(A>B\\) \uff0c\u8bbe \\(f_n\\) \u4e3a\u7b2c \\(n\\) \u4e2a\u5143\u7d20\u653e\u8fdb \\(X\\) \u96c6\u5408\u4e2d\u7684\u65b9\u6848\u6570\uff0c\u53ef\u4ee5\u901a\u8fc7\u52a0\u4e00\u4e2a\u5143\u7d20 \\(S_{N+1}=\\infty\\) \uff0c\u6700\u540e\u8f93\u51fa \\(f_{N+1}\\) \u5373\u53ef\u3002\u90a3\u4e48\u6211\u4eec\u77e5\u9053 \\(f_i\\) \u53ef\u4ee5\u4ece \\(f_j\\) \u8f6c\u79fb\uff0c\u5f53\u4e14\u4ec5\u5f53 \\([j+1,i-1]\\) \u4e2d\u7684\u6240\u6709\u6570\u90fd\u53ef\u4ee5\u653e\u5165 \\(Y\\) \u3002\u7ef4\u62a4\u8fd9\u4e9b \\(f_j\\) \u7684\u548c\uff0c\u540c\u65f6\u7ef4\u62a4\u5f53\u524d \\(j\\) \u7684\u4f4d\u7f6e\u5373\u53ef\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define fi first #define se second #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 , P = 1e9 + 7 ; const ll inf = 2e18 + 5 ; ll n , A , B , s [ N ], j ; ll f [ N ], sum ; int main (){ n = read (), A = read (), B = read (); if ( A < B ) swap ( A , B ); rep ( i , 1 , n ) s [ i ] = read (); s [ 0 ] =- inf , s [ ++ n ] = inf ; f [ 0 ] = 1 ; rep ( i , 1 , n -2 ){ if ( s [ i + 2 ] - s [ i ] < B ) return puts ( \"0\" ), 0 ; } rep ( i , 1 , n ){ while ( s [ i ] - s [ j ] >= A ) sum = ( sum + f [ j ++ ]) % P ; f [ i ] = sum ; if ( s [ i ] - s [ i -1 ] < B ) sum = 0 , j = i -1 ; } printf ( \"%lld \\n \" , f [ n ]); return 0 ; } D \u00b6 \u7406\u89e3\u4e3a\u4e00\u4e2a\u6811\u6700\u5c11\u7684\u5206\u6cbb\u5c42\u6570\uff0c\u4e0a\u754c\u663e\u7136\u662f \\(O(\\log N)\\) \u7684\u3002\u8003\u8651\u4e00\u4e2a\u5173\u952e\u6027\u8d28\uff1a\u5982\u679c\u4e24\u70b9 \\(u,v\\) \u7684\u5206\u6cbb\u6df1\u5ea6\u76f8\u540c\uff0c\u90a3\u4e48 \\(u,v\\) \u7684\u6811\u4e0a\u8def\u5f84\u4e0a\u5fc5\u7136\u5305\u542b\u4e00\u4e2a\u6df1\u5ea6\u66f4\u5c0f\u7684\u3002\u6211\u4eec\u53ef\u4ee5\u8d2a\u5fc3\uff0c\u628a\u6bcf\u4e2a\u70b9\u4ece\u6df1\u5230\u6d45\u7f16\u53f7\uff0c\u90a3\u4e48\u6811\u4e0a\u8def\u5f84\u4e0a\u5219\u4f1a\u6709\u4e00\u4e2a\u66f4\u5927\u7684\u7f16\u53f7\uff0c\u6211\u4eec\u8981\u6700\u5c0f\u5316\u6700\u5927\u7684\u7f16\u53f7\u3002 \u8fd9\u53ef\u4ee5\u8d2a\u5fc3\uff0c\u6211\u4eec\u8bb0\u5f55 \\(u\\) \u7684\u5b50\u6811\u4e2d\u662f\u5426\u6709\u7f16\u53f7\u4e3a \\(i\\) \u7684\u8282\u70b9 \\(v\\) \uff0c\u4e14\u5176\u5230 \\(u\\) \u7684\u8def\u5f84\u4e2d\u4e0d\u542b \\(>i\\) \u7f16\u53f7\u7684\u70b9\uff0c\u53ea\u6709\u8fd9\u6837\u65f6\u6211\u4eec\u624d\u4e0d\u80fd\u4ee4 \\(u\\) \u7684\u7f16\u53f7\u4e3a \\(i\\) \u3002\u53d6\u7b26\u5408\u6761\u4ef6\u6700\u5c0f\u7684\u7f16\u53f7\u5373\u53ef\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N\\log N)\\) \u6216 \\(O(N)\\) \uff08\u82e5\u4f7f\u7528\u4f4d\u8fd0\u7b97\u51fd\u6570\uff09 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define fi first #define se second #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 ; int n , ans , f [ N ], c [ 21 ]; vector < int > G [ N ]; void dfs ( int u , int fa ){ for ( int v : G [ u ]) if ( v != fa ) dfs ( v , u ); rep ( i , 0 , 20 ) c [ i ] = 0 ; for ( int v : G [ u ]){ rep ( i , 0 , 20 ){ if (( f [ v ] >> i ) & 1 ) ++ c [ i ]; } } int k = 0 ; per ( i , 20 , 0 ){ if ( c [ i ] >= 2 ) break ; if ( ! c [ i ]) k = i ; } ans = max ( ans , k ); f [ u ] |= ( 1 << k ); rep ( i , k + 1 , 20 ){ if ( c [ i ]) f [ u ] |= ( 1 << i ); } } int main (){ n = read (); rep ( i , 1 , n -1 ){ int u = read (), v = read (); G [ u ]. push_back ( v ), G [ v ]. push_back ( u ); } dfs ( 1 , 0 ); printf ( \"%d \\n \" , ans ); return 0 ; } E \u00b6 \u597d\u6570\u4f4ddp\u3002 \u5bf9\u8fd9\u4e9b\u64cd\u4f5c\u5efa \\(K\\) \u53c9\u6811\uff0c\u7236\u8282\u70b9\u7684\u6743\u503c\u4e3a\u5b50\u8282\u70b9\u7684\u6743\u503c\u53d6\u5e73\u5747\u6570\uff0c\u5373\u6743\u503c\u548c\u9664\u4ee5 \\(K\\) \uff0c\u6839\u8282\u70b9\u7684\u6743\u503c\u5219\u662f\u5269\u4e0b\u7684\u6570\u3002\u5982\u679c\u6211\u4eec\u8bbe \\(M\\) \u4e2a \\(1\\) \u7684\u6df1\u5ea6\u5206\u522b\u4e3a \\(x_1,x_2,\\dots,x_M\\) \uff0c\u4e0d\u96be\u5f97\u51fa\u7ed3\u679c\u4e3a \\(\\sum K^{-x_i}\\) \u3002\u540c\u65f6\u6ce8\u610f\u5230\u5982\u679c\u53f6\u5b50\u8282\u70b9\u5168\u90e8\u4e3a \\(1\\) \uff0c\u90a3\u4e48\u6839\u8282\u70b9\u4e5f\u4e3a \\(1\\) \u3002\u5728\u8fd9\u91cc\u6211\u4eec\u628a \\(N\\) \u4e2a \\(0\\) \u6539\u4e3a\u4e86 \\(1\\) \uff0c\u82e5\u5b83\u4eec\u7684\u6df1\u5ea6\u4e3a \\(y_1,y_2,\\dots,y_N\\) \uff0c\u5219\u6709 \\(\\sum K^{-x_i}=1-\\sum K^{-y_i}\\) \u3002 \u5c06\u7b49\u5f0f\u4e24\u8fb9\u7528 \\(K\\) \u8fdb\u5236\u5c0f\u6570\u8868\u793a\u4e3a \\(z=0.c_1c_2c_3\\dots\\) \uff0c\u90a3\u4e48\u6211\u4eec\u6709\uff1a \\(0<c_1<K\\) \uff0c\u5bf9\u4e8e \\(i>1\\) \uff0c \\(0\\le c_i < K\\) \u8003\u8651\u8f6c\u6362\u540e\u7684\u8fdb\u4f4d\uff0c \\(\\sum c_i\\equiv N\\pmod{K-1}\\) \u5047\u8bbe\u4e3a \\(L\\) \u4f4d\u5c0f\u6570\uff0c\u8003\u8651 \\(1-z\\) \uff0c\u6709 \\(L(K-1)-\\sum c_i +1\\equiv M \\pmod{K-1}\\) \u5229\u7528\u8fd9\u4e9b\u6761\u4ef6\uff0c\u8bbe \\(f_{i,j,0/1}\\) \u4e3a \\(i\\) \u4f4d\u5c0f\u6570\uff0c\u6570\u4f4d\u548c\u4e3a \\(j\\) \uff0c\u9996\u4f4d\u662f\u5426\u4e3a \\(0\\) \u7684\u7b54\u6848\uff0c\u7b80\u5355\u8f6c\u79fb\u5373\u53ef\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O((N+M)^2)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define fi first #define se second #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2005 , P = 1e9 + 7 ; int n , m , K , ans , f [ N << 1 ][ N ][ 2 ], sum [ N ]; inline int qm ( int x ){ return x >= P ? x - P : x ;} int main (){ n = read (), m = read (), K = read (); f [ 0 ][ 0 ][ 0 ] = 1 ; rep ( i , 1 , 2 * max ( n , m )){ sum [ 0 ] = qm ( f [ i -1 ][ 0 ][ 0 ] + f [ i -1 ][ 0 ][ 1 ]); rep ( j , 1 , n ){ sum [ j ] = qm ( sum [ j -1 ] + qm ( f [ i -1 ][ j ][ 0 ] + f [ i -1 ][ j ][ 1 ])); } rep ( j , 0 , n ){ f [ i ][ j ][ 0 ] = qm ( f [ i -1 ][ j ][ 0 ] + f [ i -1 ][ j ][ 1 ]); if ( j ){ f [ i ][ j ][ 1 ] = qm ( sum [ j -1 ]); if ( j - K >= 0 ) f [ i ][ j ][ 1 ] = qm ( f [ i ][ j ][ 1 ] - sum [ j - K ] + P ); } } rep ( j , 0 , n ){ if ( j % ( K -1 ) == n % ( K -1 ) && ( i * ( K -1 ) - j + 1 ) % ( K -1 ) == m % ( K -1 ) && i * ( K -1 ) - j + 1 <= m ){ ans = qm ( ans + f [ i ][ j ][ 1 ]); } } } printf ( \"%d \\n \" , ans ); return 0 ; }","title":"AGC009 \u505a\u9898\u8bb0\u5f55"},{"location":"%E7%AC%94%E8%AE%B0/AGC009%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#agc009","text":"","title":"AGC009 \u505a\u9898\u8bb0\u5f55"},{"location":"%E7%AC%94%E8%AE%B0/AGC009%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#a","text":"\u53d1\u73b0 \\(A_N\\) \u53ea\u80fd\u88ab\u6700\u540e\u4e00\u4e2a\u64cd\u4f5c\u5f71\u54cd\uff0c\u5012\u7740\u8d2a\u5fc3\uff0c\u6bcf\u6b21\u53d6\u6700\u5c0f\u64cd\u4f5c\u6b21\u6570\u5373\u53ef\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define fi first #define se second #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } int n ; ll a [ 100005 ], b [ 100005 ], ans , num ; int main (){ n = read (); rep ( i , 1 , n ) a [ i ] = read (), b [ i ] = read (); per ( i , n , 1 ){ a [ i ] += num ; if ( a [ i ] % b [ i ]){ ll tmp = b [ i ] - ( a [ i ] % b [ i ]); num += tmp , ans += tmp ; } } printf ( \"%lld \\n \" , ans ); return 0 ; }","title":"A"},{"location":"%E7%AC%94%E8%AE%B0/AGC009%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#b","text":"\u6811\u5f62dp\u3002\u9996\u5148\u5c06\u6240\u6709\u70b9\u7684\u7236\u8282\u70b9\u8bbe\u4e3a \\(a_i\\) \uff0c\u8bbe \\(f_u\\) \u4e3a\u8282\u70b9 \\(u\\) \u7684\u5b50\u6811\u4e2d\u6bd4\u8d5b\u7684\u6700\u5c0f\u6df1\u5ea6\u3002\u8bbe \\(v_1,v_2,\\dots,v_k\\) \u4e3a \\(u\\) \u7684\u5b50\u8282\u70b9\uff0c\u90a3\u4e48\u4e0d\u96be\u53d1\u73b0\u4e00\u4e2a\u8d2a\u5fc3\u601d\u8def\uff1a\u628a \\(f_v\\) \u6309\u6df1\u5ea6\u6392\u5e8f\uff0c\u7136\u540e\u6df1\u5ea6\u66f4\u6df1\u7684\u8fd9\u4e00\u8f6e\u5c31\u5c3d\u91cf\u8f6e\u7a7a\uff0c\u6df1\u5ea6\u7b2c\u4e8c\u7684\u5c11\u8f6e\u7a7a\u4e00\u8f6e\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\u8fd9\u6837 \\(f_u=\\max\\{f_{v_i}+i\\}\\) \uff0c \\(f_{v_i}\\) \u662f\u6240\u6709\u5b50\u6811\u4e2d\u7b2c \\(i\\) \u5927\u7684\u7b54\u6848\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N\\log N)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define fi first #define se second #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 ; int n , f [ N ], tmp [ N ]; vector < int > G [ N ]; void dfs ( int u ){ int tot = 0 ; for ( int v : G [ u ]) dfs ( v ); for ( int v : G [ u ]) tmp [ ++ tot ] = f [ v ]; sort ( tmp + 1 , tmp + tot + 1 ); rep ( i , 1 , tot ) f [ u ] = max ( f [ u ], tmp [ i ] + tot - i + 1 ); } int main (){ n = read (); rep ( i , 2 , n ){ int u = read (); G [ u ]. push_back ( i ); } dfs ( 1 ); printf ( \"%d \\n \" , f [ 1 ]); return 0 ; }","title":"B"},{"location":"%E7%AC%94%E8%AE%B0/AGC009%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#c","text":"\u9996\u5148\u4e0d\u59a8\u8bbe \\(A>B\\) \uff0c\u8bbe \\(f_n\\) \u4e3a\u7b2c \\(n\\) \u4e2a\u5143\u7d20\u653e\u8fdb \\(X\\) \u96c6\u5408\u4e2d\u7684\u65b9\u6848\u6570\uff0c\u53ef\u4ee5\u901a\u8fc7\u52a0\u4e00\u4e2a\u5143\u7d20 \\(S_{N+1}=\\infty\\) \uff0c\u6700\u540e\u8f93\u51fa \\(f_{N+1}\\) \u5373\u53ef\u3002\u90a3\u4e48\u6211\u4eec\u77e5\u9053 \\(f_i\\) \u53ef\u4ee5\u4ece \\(f_j\\) \u8f6c\u79fb\uff0c\u5f53\u4e14\u4ec5\u5f53 \\([j+1,i-1]\\) \u4e2d\u7684\u6240\u6709\u6570\u90fd\u53ef\u4ee5\u653e\u5165 \\(Y\\) \u3002\u7ef4\u62a4\u8fd9\u4e9b \\(f_j\\) \u7684\u548c\uff0c\u540c\u65f6\u7ef4\u62a4\u5f53\u524d \\(j\\) \u7684\u4f4d\u7f6e\u5373\u53ef\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define fi first #define se second #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 , P = 1e9 + 7 ; const ll inf = 2e18 + 5 ; ll n , A , B , s [ N ], j ; ll f [ N ], sum ; int main (){ n = read (), A = read (), B = read (); if ( A < B ) swap ( A , B ); rep ( i , 1 , n ) s [ i ] = read (); s [ 0 ] =- inf , s [ ++ n ] = inf ; f [ 0 ] = 1 ; rep ( i , 1 , n -2 ){ if ( s [ i + 2 ] - s [ i ] < B ) return puts ( \"0\" ), 0 ; } rep ( i , 1 , n ){ while ( s [ i ] - s [ j ] >= A ) sum = ( sum + f [ j ++ ]) % P ; f [ i ] = sum ; if ( s [ i ] - s [ i -1 ] < B ) sum = 0 , j = i -1 ; } printf ( \"%lld \\n \" , f [ n ]); return 0 ; }","title":"C"},{"location":"%E7%AC%94%E8%AE%B0/AGC009%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#d","text":"\u7406\u89e3\u4e3a\u4e00\u4e2a\u6811\u6700\u5c11\u7684\u5206\u6cbb\u5c42\u6570\uff0c\u4e0a\u754c\u663e\u7136\u662f \\(O(\\log N)\\) \u7684\u3002\u8003\u8651\u4e00\u4e2a\u5173\u952e\u6027\u8d28\uff1a\u5982\u679c\u4e24\u70b9 \\(u,v\\) \u7684\u5206\u6cbb\u6df1\u5ea6\u76f8\u540c\uff0c\u90a3\u4e48 \\(u,v\\) \u7684\u6811\u4e0a\u8def\u5f84\u4e0a\u5fc5\u7136\u5305\u542b\u4e00\u4e2a\u6df1\u5ea6\u66f4\u5c0f\u7684\u3002\u6211\u4eec\u53ef\u4ee5\u8d2a\u5fc3\uff0c\u628a\u6bcf\u4e2a\u70b9\u4ece\u6df1\u5230\u6d45\u7f16\u53f7\uff0c\u90a3\u4e48\u6811\u4e0a\u8def\u5f84\u4e0a\u5219\u4f1a\u6709\u4e00\u4e2a\u66f4\u5927\u7684\u7f16\u53f7\uff0c\u6211\u4eec\u8981\u6700\u5c0f\u5316\u6700\u5927\u7684\u7f16\u53f7\u3002 \u8fd9\u53ef\u4ee5\u8d2a\u5fc3\uff0c\u6211\u4eec\u8bb0\u5f55 \\(u\\) \u7684\u5b50\u6811\u4e2d\u662f\u5426\u6709\u7f16\u53f7\u4e3a \\(i\\) \u7684\u8282\u70b9 \\(v\\) \uff0c\u4e14\u5176\u5230 \\(u\\) \u7684\u8def\u5f84\u4e2d\u4e0d\u542b \\(>i\\) \u7f16\u53f7\u7684\u70b9\uff0c\u53ea\u6709\u8fd9\u6837\u65f6\u6211\u4eec\u624d\u4e0d\u80fd\u4ee4 \\(u\\) \u7684\u7f16\u53f7\u4e3a \\(i\\) \u3002\u53d6\u7b26\u5408\u6761\u4ef6\u6700\u5c0f\u7684\u7f16\u53f7\u5373\u53ef\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N\\log N)\\) \u6216 \\(O(N)\\) \uff08\u82e5\u4f7f\u7528\u4f4d\u8fd0\u7b97\u51fd\u6570\uff09 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define fi first #define se second #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 ; int n , ans , f [ N ], c [ 21 ]; vector < int > G [ N ]; void dfs ( int u , int fa ){ for ( int v : G [ u ]) if ( v != fa ) dfs ( v , u ); rep ( i , 0 , 20 ) c [ i ] = 0 ; for ( int v : G [ u ]){ rep ( i , 0 , 20 ){ if (( f [ v ] >> i ) & 1 ) ++ c [ i ]; } } int k = 0 ; per ( i , 20 , 0 ){ if ( c [ i ] >= 2 ) break ; if ( ! c [ i ]) k = i ; } ans = max ( ans , k ); f [ u ] |= ( 1 << k ); rep ( i , k + 1 , 20 ){ if ( c [ i ]) f [ u ] |= ( 1 << i ); } } int main (){ n = read (); rep ( i , 1 , n -1 ){ int u = read (), v = read (); G [ u ]. push_back ( v ), G [ v ]. push_back ( u ); } dfs ( 1 , 0 ); printf ( \"%d \\n \" , ans ); return 0 ; }","title":"D"},{"location":"%E7%AC%94%E8%AE%B0/AGC009%20%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#e","text":"\u597d\u6570\u4f4ddp\u3002 \u5bf9\u8fd9\u4e9b\u64cd\u4f5c\u5efa \\(K\\) \u53c9\u6811\uff0c\u7236\u8282\u70b9\u7684\u6743\u503c\u4e3a\u5b50\u8282\u70b9\u7684\u6743\u503c\u53d6\u5e73\u5747\u6570\uff0c\u5373\u6743\u503c\u548c\u9664\u4ee5 \\(K\\) \uff0c\u6839\u8282\u70b9\u7684\u6743\u503c\u5219\u662f\u5269\u4e0b\u7684\u6570\u3002\u5982\u679c\u6211\u4eec\u8bbe \\(M\\) \u4e2a \\(1\\) \u7684\u6df1\u5ea6\u5206\u522b\u4e3a \\(x_1,x_2,\\dots,x_M\\) \uff0c\u4e0d\u96be\u5f97\u51fa\u7ed3\u679c\u4e3a \\(\\sum K^{-x_i}\\) \u3002\u540c\u65f6\u6ce8\u610f\u5230\u5982\u679c\u53f6\u5b50\u8282\u70b9\u5168\u90e8\u4e3a \\(1\\) \uff0c\u90a3\u4e48\u6839\u8282\u70b9\u4e5f\u4e3a \\(1\\) \u3002\u5728\u8fd9\u91cc\u6211\u4eec\u628a \\(N\\) \u4e2a \\(0\\) \u6539\u4e3a\u4e86 \\(1\\) \uff0c\u82e5\u5b83\u4eec\u7684\u6df1\u5ea6\u4e3a \\(y_1,y_2,\\dots,y_N\\) \uff0c\u5219\u6709 \\(\\sum K^{-x_i}=1-\\sum K^{-y_i}\\) \u3002 \u5c06\u7b49\u5f0f\u4e24\u8fb9\u7528 \\(K\\) \u8fdb\u5236\u5c0f\u6570\u8868\u793a\u4e3a \\(z=0.c_1c_2c_3\\dots\\) \uff0c\u90a3\u4e48\u6211\u4eec\u6709\uff1a \\(0<c_1<K\\) \uff0c\u5bf9\u4e8e \\(i>1\\) \uff0c \\(0\\le c_i < K\\) \u8003\u8651\u8f6c\u6362\u540e\u7684\u8fdb\u4f4d\uff0c \\(\\sum c_i\\equiv N\\pmod{K-1}\\) \u5047\u8bbe\u4e3a \\(L\\) \u4f4d\u5c0f\u6570\uff0c\u8003\u8651 \\(1-z\\) \uff0c\u6709 \\(L(K-1)-\\sum c_i +1\\equiv M \\pmod{K-1}\\) \u5229\u7528\u8fd9\u4e9b\u6761\u4ef6\uff0c\u8bbe \\(f_{i,j,0/1}\\) \u4e3a \\(i\\) \u4f4d\u5c0f\u6570\uff0c\u6570\u4f4d\u548c\u4e3a \\(j\\) \uff0c\u9996\u4f4d\u662f\u5426\u4e3a \\(0\\) \u7684\u7b54\u6848\uff0c\u7b80\u5355\u8f6c\u79fb\u5373\u53ef\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O((N+M)^2)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define fi first #define se second #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2005 , P = 1e9 + 7 ; int n , m , K , ans , f [ N << 1 ][ N ][ 2 ], sum [ N ]; inline int qm ( int x ){ return x >= P ? x - P : x ;} int main (){ n = read (), m = read (), K = read (); f [ 0 ][ 0 ][ 0 ] = 1 ; rep ( i , 1 , 2 * max ( n , m )){ sum [ 0 ] = qm ( f [ i -1 ][ 0 ][ 0 ] + f [ i -1 ][ 0 ][ 1 ]); rep ( j , 1 , n ){ sum [ j ] = qm ( sum [ j -1 ] + qm ( f [ i -1 ][ j ][ 0 ] + f [ i -1 ][ j ][ 1 ])); } rep ( j , 0 , n ){ f [ i ][ j ][ 0 ] = qm ( f [ i -1 ][ j ][ 0 ] + f [ i -1 ][ j ][ 1 ]); if ( j ){ f [ i ][ j ][ 1 ] = qm ( sum [ j -1 ]); if ( j - K >= 0 ) f [ i ][ j ][ 1 ] = qm ( f [ i ][ j ][ 1 ] - sum [ j - K ] + P ); } } rep ( j , 0 , n ){ if ( j % ( K -1 ) == n % ( K -1 ) && ( i * ( K -1 ) - j + 1 ) % ( K -1 ) == m % ( K -1 ) && i * ( K -1 ) - j + 1 <= m ){ ans = qm ( ans + f [ i ][ j ][ 1 ]); } } } printf ( \"%d \\n \" , ans ); return 0 ; }","title":"E"},{"location":"%E7%AC%94%E8%AE%B0/ARC115%E7%AE%80%E8%A6%81%E9%A2%98%E8%A7%A3/","text":"ARC115\u7b80\u8981\u9898\u89e3 \u00b6 A \u00b6 \u5bb9\u6613\u53d1\u73b0\uff0c\u4e24\u4eba\u65e0\u6cd5\u6709\u76f8\u540c\u6b63\u786e\u9898\u6570\u5f53\u4e14\u4ec5\u5f53\u4e24\u4eba\u4e0d\u540c\u7b54\u6848\u7684\u9898\u6570\u4e3a\u5947\u6570\u3002\u8fdb\u4e00\u6b65\uff0c\u6709\u4e24\u4eba\u7684\u6570\u5b57\u548c\u4e3a\u5947\u6570\uff08\u76f8\u540c\u7b54\u6848\u6570\u5b57\u548c\u4e3a\u5076\u6570\uff0c\u4e0d\u540c\u7b54\u6848\u7684\u4f4d\u7f6e\u4e00\u5b9a\u6700\u7ec8\u6709\u5947\u6570\u4e2a \\(1+0=1\\) \u3002\uff09\u4e8e\u662f\u7b54\u6848\u4e3a\u6570\u5b57\u548c\u4e3a\u5947\u6570\u7684\u5b66\u751f\u4e2a\u6570\u4e58\u4ee5\u6570\u5b57\u548c\u4e3a\u5076\u6570\u7684\u5b66\u751f\u4e2a\u6570\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } ll n , m , tot [ 2 ]; char s [ 100005 ][ 25 ]; int main (){ n = read (), m = read (); rep ( i , 1 , n ){ scanf ( \"%s\" , s [ i ] + 1 ); int cnt = 0 ; rep ( j , 1 , m ) cnt += s [ i ][ j ] - '0' ; tot [ cnt & 1 ] ++ ; } printf ( \"%lld \\n \" , tot [ 0 ] * tot [ 1 ]); return 0 ; } ### B \u663e\u7136 \uff0c \u5bf9\u4e8e\u5b58\u5728\u6784\u9020\u7684\u77e9\u9635 \uff0c \u6bcf\u4e00\u884c\u7684\u5dee\u5206\u6570\u7ec4\u4e00\u5b9a\u76f8\u7b49 \u3002 \u53d6\u5143\u7d20\u6700\u5c0f\u7684\u4e00\u884c\u4e3a $B_i$ \uff0c \u5176\u4ed6\u884c\u4e0e\u8be5\u884c\u7684\u5dee\u4e3a $A_i$ \u5373\u53ef \u3002 ``` cpp #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } int c [ 505 ][ 505 ], k = 1 , a [ 505 ], b [ 505 ]; inline void solve (){ int n = read (); rep ( i , 1 , n ){ rep ( j , 1 , n ) c [ i ][ j ] = read (); if ( c [ i ][ 1 ] < c [ k ][ 1 ]) k = i ; } rep ( i , 1 , n ){ if ( i == k ) continue ; rep ( j , 2 , n ){ if ( c [ i ][ j ] - c [ k ][ j ] != c [ i ][ 1 ] - c [ k ][ 1 ]){ puts ( \"No\" ); return ; } } a [ i ] = c [ i ][ 1 ] - c [ k ][ 1 ]; } puts ( \"Yes\" ); rep ( i , 1 , n ) printf ( \"%d \" , a [ i ]); printf ( \" \\n \" ); rep ( i , 1 , n ) printf ( \"%d \" , c [ k ][ i ]); } int main (){ solve (); return 0 ; } C \u00b6 \u9996\u5148 \\(p^n\\) \u5bf9\u5e94\u7684 \\(A\\) \u503c\u4e0e \\(p,p^2,\\dots,p^{n-1}\\) \u90fd\u4e0d\u540c\uff0c\u5f52\u7eb3\u5f97\u81f3\u5c11\u4e3a \\(n\\) \u3002\u540c\u7406\u53ef\u5f97\u5bf9\u4e8e\u4efb\u610f \\(n\\) \uff0c \\(A_n\\) \u6700\u5c11\u4e3a \\(n\\) \u5206\u89e3\u8d28\u56e0\u6570\u540e\u7684\u6b21\u6570\u548c\uff0c\u4e0d\u96be\u9a8c\u8bc1\u8fd9\u6837\u6ee1\u8db3\u6761\u4ef6\u3002\u7ebf\u6027\u7b5b\u5373\u53ef\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 ; int pri [ N ], d [ N ], t [ N ], tot ; bool vis [ N ]; inline void solve (){ int n = read (); d [ 1 ] = 1 ; rep ( i , 2 , n ){ if ( ! vis [ i ]){ pri [ ++ tot ] = i ; d [ i ] = 2 ; } for ( int j = 1 ; j <= tot && pri [ j ] * i <= n ; j ++ ){ vis [ i * pri [ j ]] = 1 ; d [ i * pri [ j ]] = d [ i ] + 1 ; if ( i % pri [ j ] == 0 ) break ; } } rep ( i , 1 , n ) printf ( \"%d \" , d [ i ]); } int main (){ solve (); return 0 ; } D \u00b6 \u56e0\u4e3a\u4e00\u5f20\u56fe\u7684\u5ea6\u6570\u548c\u4e00\u5b9a\u662f\u5076\u6570\uff0c\u6240\u4ee5 \\(k\\) \u4e3a\u5076\u6570\u3002\u8003\u8651\u539f\u56fe\u662f\u4e00\u68f5\u6811\u65f6\uff0c\u6211\u4eec\u9009\u53d6\u5076\u6570\u4e2a\u70b9\u7684\u96c6\u5408\uff0c\u9009\u53d6\u4e24\u4e24\u4e4b\u95f4\u7684\u6811\u4e0a\u8def\u5f84\u4e3a\u8fb9\uff08\u9009\u6bcf\u6761\u8fb9\u7684\u6b21\u6570\u6a21 \\(2\\) \uff09\u3002\u8fd9\u6837\u5c31\u8bc1\u660e\u4e86\u5bf9\u4e8e\u6bcf\u4e2a\u5076\u6570\u4e2a\u70b9\u7684\u96c6\u5408\uff0c\u90fd\u5b58\u5728\u6ee1\u8db3\u6761\u4ef6\u7684\u5b50\u56fe \\(H\\) \u3002 \u8fd9\u6837\u7684\u6784\u9020\u552f\u4e00\u5417\uff1f\u7b54\u6848\u662f\u80af\u5b9a\u7684\u3002\u56e0\u4e3a \\(n\\) \u4e2a\u70b9\u7684\u6811\u4e0a\u6709 \\(2^{n-1}\\) \u79cd\u9009\u53d6\u8fb9\u7684\u65b9\u5f0f\uff0c\u800c \\begin{aligned} 2^{n-1}&=\\sum_{i=0}^{n-1}\\binom{n-1}{i}\\\\ &=\\binom{n}{0}+\\binom{n}{2}+\\cdots+\\binom{n}{2\\lfloor\\frac{n}{2}\\rfloor}\\\\ \\end{aligned} \uff08\u753b\u6768\u8f89\u4e09\u89d2\u6216\u901a\u8fc7\u7ec4\u5408\u6570\u9012\u63a8\u5f0f\u65e2\u5f97\uff09 \u8fd9\u8bf4\u660e\u6211\u4eec\u6784\u9020\u7684\u662f\u53cc\u5c04\uff0c\u4e8e\u662f\u9009 \\(k\\) \u4e2a\u70b9\u7684\u65b9\u6848\u6570\u5c31\u662f \\(C_n^k\\) . \u4e0b\u9762\u770b\u8fde\u901a\u56fe\u7684\u60c5\u5f62\uff0c\u6211\u4eec\u5c06\u8fb9\u5206\u4e3a\u751f\u6210\u6811\u4e0a\u7684\u8fb9\u548c\u975e\u6811\u8fb9\u4e24\u79cd\u3002\u5bf9\u4e8e\u9009\u53d6\u7684\u975e\u6811\u8fb9\u96c6\u5408\uff0c\u6bcf\u6761\u8fb9 \\((u,v)\\) \u90fd\u5b58\u5728\u5bf9\u5e94\u7684\u6811\u4e0a\u8def\u5f84\uff0c\u5c06\u6240\u6709\u8def\u5f84\u9009\u62e9\u540e\u53d1\u73b0\u548c\u6811\u7684\u60c5\u5f62\u662f\u4e00\u6837\u7684\u3002\u4e8e\u662f\u9009 \\(k\\) \u4e2a\u70b9\u7684\u65b9\u6848\u6570\u5c31\u662f \\(2^{m-n+1}C_n^k\\) . \u4e00\u822c\u56fe\u5219\u662f\u628a\u6240\u6709\u8fde\u901a\u5206\u91cf\u7684\u7b54\u6848\u505a\u5377\u79ef\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a \\(O(N^2)\\) \u6216 \\(O(N\\log N)\\) . 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 5e3 + 5 , P = 998244353 ; int n , m , fac [ N ], ifac [ N ], tot , cur = 1 ; int sz [ N ], e [ N ], fa [ N ]; ll f [ N ][ N ], g [ N ]; int find ( int x ){ return fa [ x ] == x ? x : fa [ x ] = find ( fa [ x ]); } void merge ( int u , int v ){ int fu = find ( u ), fv = find ( v ); e [ fu ] ++ ; if ( fu != fv ) fa [ fv ] = fu , sz [ fu ] += sz [ fv ], e [ fu ] += e [ fv ]; } inline ll fpow ( ll x , ll y ){ ll res = 1 ; while ( y ){ if ( y & 1 ) res = res * x % P ; y >>= 1 ; x = x * x % P ; } return res ; } inline ll C ( int n , int m ){ return 1l l * fac [ n ] * ifac [ m ] % P * ifac [ n - m ] % P ;} int main (){ n = read (), m = read (); fac [ 0 ] = 1 ; rep ( i , 1 , n ){ fac [ i ] = 1l l * i * fac [ i -1 ] % P ; fa [ i ] = i , sz [ i ] = 1 ; } ifac [ n ] = fpow ( fac [ n ], P -2 ); rep ( i , 1 , n ) ifac [ n - i ] = 1l l * ( n - i + 1 ) * ifac [ n - i + 1 ] % P ; rep ( i , 1 , m ){ int u = read (), v = read (); merge ( u , v ); } f [ 0 ][ 0 ] = 1 ; rep ( i , 1 , n ){ if ( fa [ i ] == i ){ int ni = sz [ i ], mi = e [ i ]; ll pow2 = fpow ( 2 , mi - ni + 1 ); for ( int k = 0 ; k <= ni ; k += 2 ){ g [ k ] = pow2 * C ( ni , k ) % P ; } rep ( j , 0 , ni ) rep ( k , 0 , tot ){ f [ cur ][ j + k ] = ( f [ cur ][ j + k ] + f [ cur -1 ][ k ] * g [ j ] % P ) % P ; } tot += ni , cur ++ ; } } rep ( i , 0 , n ) printf ( \"%lld \\n \" , f [ cur -1 ][ i ]); return 0 ; }","title":"ARC115\u7b80\u8981\u9898\u89e3"},{"location":"%E7%AC%94%E8%AE%B0/ARC115%E7%AE%80%E8%A6%81%E9%A2%98%E8%A7%A3/#arc115","text":"","title":"ARC115\u7b80\u8981\u9898\u89e3"},{"location":"%E7%AC%94%E8%AE%B0/ARC115%E7%AE%80%E8%A6%81%E9%A2%98%E8%A7%A3/#a","text":"\u5bb9\u6613\u53d1\u73b0\uff0c\u4e24\u4eba\u65e0\u6cd5\u6709\u76f8\u540c\u6b63\u786e\u9898\u6570\u5f53\u4e14\u4ec5\u5f53\u4e24\u4eba\u4e0d\u540c\u7b54\u6848\u7684\u9898\u6570\u4e3a\u5947\u6570\u3002\u8fdb\u4e00\u6b65\uff0c\u6709\u4e24\u4eba\u7684\u6570\u5b57\u548c\u4e3a\u5947\u6570\uff08\u76f8\u540c\u7b54\u6848\u6570\u5b57\u548c\u4e3a\u5076\u6570\uff0c\u4e0d\u540c\u7b54\u6848\u7684\u4f4d\u7f6e\u4e00\u5b9a\u6700\u7ec8\u6709\u5947\u6570\u4e2a \\(1+0=1\\) \u3002\uff09\u4e8e\u662f\u7b54\u6848\u4e3a\u6570\u5b57\u548c\u4e3a\u5947\u6570\u7684\u5b66\u751f\u4e2a\u6570\u4e58\u4ee5\u6570\u5b57\u548c\u4e3a\u5076\u6570\u7684\u5b66\u751f\u4e2a\u6570\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } ll n , m , tot [ 2 ]; char s [ 100005 ][ 25 ]; int main (){ n = read (), m = read (); rep ( i , 1 , n ){ scanf ( \"%s\" , s [ i ] + 1 ); int cnt = 0 ; rep ( j , 1 , m ) cnt += s [ i ][ j ] - '0' ; tot [ cnt & 1 ] ++ ; } printf ( \"%lld \\n \" , tot [ 0 ] * tot [ 1 ]); return 0 ; } ### B \u663e\u7136 \uff0c \u5bf9\u4e8e\u5b58\u5728\u6784\u9020\u7684\u77e9\u9635 \uff0c \u6bcf\u4e00\u884c\u7684\u5dee\u5206\u6570\u7ec4\u4e00\u5b9a\u76f8\u7b49 \u3002 \u53d6\u5143\u7d20\u6700\u5c0f\u7684\u4e00\u884c\u4e3a $B_i$ \uff0c \u5176\u4ed6\u884c\u4e0e\u8be5\u884c\u7684\u5dee\u4e3a $A_i$ \u5373\u53ef \u3002 ``` cpp #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } int c [ 505 ][ 505 ], k = 1 , a [ 505 ], b [ 505 ]; inline void solve (){ int n = read (); rep ( i , 1 , n ){ rep ( j , 1 , n ) c [ i ][ j ] = read (); if ( c [ i ][ 1 ] < c [ k ][ 1 ]) k = i ; } rep ( i , 1 , n ){ if ( i == k ) continue ; rep ( j , 2 , n ){ if ( c [ i ][ j ] - c [ k ][ j ] != c [ i ][ 1 ] - c [ k ][ 1 ]){ puts ( \"No\" ); return ; } } a [ i ] = c [ i ][ 1 ] - c [ k ][ 1 ]; } puts ( \"Yes\" ); rep ( i , 1 , n ) printf ( \"%d \" , a [ i ]); printf ( \" \\n \" ); rep ( i , 1 , n ) printf ( \"%d \" , c [ k ][ i ]); } int main (){ solve (); return 0 ; }","title":"A"},{"location":"%E7%AC%94%E8%AE%B0/ARC115%E7%AE%80%E8%A6%81%E9%A2%98%E8%A7%A3/#c","text":"\u9996\u5148 \\(p^n\\) \u5bf9\u5e94\u7684 \\(A\\) \u503c\u4e0e \\(p,p^2,\\dots,p^{n-1}\\) \u90fd\u4e0d\u540c\uff0c\u5f52\u7eb3\u5f97\u81f3\u5c11\u4e3a \\(n\\) \u3002\u540c\u7406\u53ef\u5f97\u5bf9\u4e8e\u4efb\u610f \\(n\\) \uff0c \\(A_n\\) \u6700\u5c11\u4e3a \\(n\\) \u5206\u89e3\u8d28\u56e0\u6570\u540e\u7684\u6b21\u6570\u548c\uff0c\u4e0d\u96be\u9a8c\u8bc1\u8fd9\u6837\u6ee1\u8db3\u6761\u4ef6\u3002\u7ebf\u6027\u7b5b\u5373\u53ef\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 ; int pri [ N ], d [ N ], t [ N ], tot ; bool vis [ N ]; inline void solve (){ int n = read (); d [ 1 ] = 1 ; rep ( i , 2 , n ){ if ( ! vis [ i ]){ pri [ ++ tot ] = i ; d [ i ] = 2 ; } for ( int j = 1 ; j <= tot && pri [ j ] * i <= n ; j ++ ){ vis [ i * pri [ j ]] = 1 ; d [ i * pri [ j ]] = d [ i ] + 1 ; if ( i % pri [ j ] == 0 ) break ; } } rep ( i , 1 , n ) printf ( \"%d \" , d [ i ]); } int main (){ solve (); return 0 ; }","title":"C"},{"location":"%E7%AC%94%E8%AE%B0/ARC115%E7%AE%80%E8%A6%81%E9%A2%98%E8%A7%A3/#d","text":"\u56e0\u4e3a\u4e00\u5f20\u56fe\u7684\u5ea6\u6570\u548c\u4e00\u5b9a\u662f\u5076\u6570\uff0c\u6240\u4ee5 \\(k\\) \u4e3a\u5076\u6570\u3002\u8003\u8651\u539f\u56fe\u662f\u4e00\u68f5\u6811\u65f6\uff0c\u6211\u4eec\u9009\u53d6\u5076\u6570\u4e2a\u70b9\u7684\u96c6\u5408\uff0c\u9009\u53d6\u4e24\u4e24\u4e4b\u95f4\u7684\u6811\u4e0a\u8def\u5f84\u4e3a\u8fb9\uff08\u9009\u6bcf\u6761\u8fb9\u7684\u6b21\u6570\u6a21 \\(2\\) \uff09\u3002\u8fd9\u6837\u5c31\u8bc1\u660e\u4e86\u5bf9\u4e8e\u6bcf\u4e2a\u5076\u6570\u4e2a\u70b9\u7684\u96c6\u5408\uff0c\u90fd\u5b58\u5728\u6ee1\u8db3\u6761\u4ef6\u7684\u5b50\u56fe \\(H\\) \u3002 \u8fd9\u6837\u7684\u6784\u9020\u552f\u4e00\u5417\uff1f\u7b54\u6848\u662f\u80af\u5b9a\u7684\u3002\u56e0\u4e3a \\(n\\) \u4e2a\u70b9\u7684\u6811\u4e0a\u6709 \\(2^{n-1}\\) \u79cd\u9009\u53d6\u8fb9\u7684\u65b9\u5f0f\uff0c\u800c \\begin{aligned} 2^{n-1}&=\\sum_{i=0}^{n-1}\\binom{n-1}{i}\\\\ &=\\binom{n}{0}+\\binom{n}{2}+\\cdots+\\binom{n}{2\\lfloor\\frac{n}{2}\\rfloor}\\\\ \\end{aligned} \uff08\u753b\u6768\u8f89\u4e09\u89d2\u6216\u901a\u8fc7\u7ec4\u5408\u6570\u9012\u63a8\u5f0f\u65e2\u5f97\uff09 \u8fd9\u8bf4\u660e\u6211\u4eec\u6784\u9020\u7684\u662f\u53cc\u5c04\uff0c\u4e8e\u662f\u9009 \\(k\\) \u4e2a\u70b9\u7684\u65b9\u6848\u6570\u5c31\u662f \\(C_n^k\\) . \u4e0b\u9762\u770b\u8fde\u901a\u56fe\u7684\u60c5\u5f62\uff0c\u6211\u4eec\u5c06\u8fb9\u5206\u4e3a\u751f\u6210\u6811\u4e0a\u7684\u8fb9\u548c\u975e\u6811\u8fb9\u4e24\u79cd\u3002\u5bf9\u4e8e\u9009\u53d6\u7684\u975e\u6811\u8fb9\u96c6\u5408\uff0c\u6bcf\u6761\u8fb9 \\((u,v)\\) \u90fd\u5b58\u5728\u5bf9\u5e94\u7684\u6811\u4e0a\u8def\u5f84\uff0c\u5c06\u6240\u6709\u8def\u5f84\u9009\u62e9\u540e\u53d1\u73b0\u548c\u6811\u7684\u60c5\u5f62\u662f\u4e00\u6837\u7684\u3002\u4e8e\u662f\u9009 \\(k\\) \u4e2a\u70b9\u7684\u65b9\u6848\u6570\u5c31\u662f \\(2^{m-n+1}C_n^k\\) . \u4e00\u822c\u56fe\u5219\u662f\u628a\u6240\u6709\u8fde\u901a\u5206\u91cf\u7684\u7b54\u6848\u505a\u5377\u79ef\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a \\(O(N^2)\\) \u6216 \\(O(N\\log N)\\) . 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 5e3 + 5 , P = 998244353 ; int n , m , fac [ N ], ifac [ N ], tot , cur = 1 ; int sz [ N ], e [ N ], fa [ N ]; ll f [ N ][ N ], g [ N ]; int find ( int x ){ return fa [ x ] == x ? x : fa [ x ] = find ( fa [ x ]); } void merge ( int u , int v ){ int fu = find ( u ), fv = find ( v ); e [ fu ] ++ ; if ( fu != fv ) fa [ fv ] = fu , sz [ fu ] += sz [ fv ], e [ fu ] += e [ fv ]; } inline ll fpow ( ll x , ll y ){ ll res = 1 ; while ( y ){ if ( y & 1 ) res = res * x % P ; y >>= 1 ; x = x * x % P ; } return res ; } inline ll C ( int n , int m ){ return 1l l * fac [ n ] * ifac [ m ] % P * ifac [ n - m ] % P ;} int main (){ n = read (), m = read (); fac [ 0 ] = 1 ; rep ( i , 1 , n ){ fac [ i ] = 1l l * i * fac [ i -1 ] % P ; fa [ i ] = i , sz [ i ] = 1 ; } ifac [ n ] = fpow ( fac [ n ], P -2 ); rep ( i , 1 , n ) ifac [ n - i ] = 1l l * ( n - i + 1 ) * ifac [ n - i + 1 ] % P ; rep ( i , 1 , m ){ int u = read (), v = read (); merge ( u , v ); } f [ 0 ][ 0 ] = 1 ; rep ( i , 1 , n ){ if ( fa [ i ] == i ){ int ni = sz [ i ], mi = e [ i ]; ll pow2 = fpow ( 2 , mi - ni + 1 ); for ( int k = 0 ; k <= ni ; k += 2 ){ g [ k ] = pow2 * C ( ni , k ) % P ; } rep ( j , 0 , ni ) rep ( k , 0 , tot ){ f [ cur ][ j + k ] = ( f [ cur ][ j + k ] + f [ cur -1 ][ k ] * g [ j ] % P ) % P ; } tot += ni , cur ++ ; } } rep ( i , 0 , n ) printf ( \"%lld \\n \" , f [ cur -1 ][ i ]); return 0 ; }","title":"D"},{"location":"%E7%AC%94%E8%AE%B0/Boruvka/","text":"\uff08\u4e0a\u573a Codeforces div.2 F\u9898 \u6ca1\u60f3\u51fa\u6765\uff0c\u95ee\u4e86\u5927\u4f6c KarL05 \u624d\u77e5\u9053\u6709\u9664\u4e86 Kruskal \u548c Prim \u4ee5\u5916\u7684\u4e00\u79cd\u751f\u6210\u6811\u7b97\u6cd5\uff0c\u6545\u5c06\u5176\u8bb0\u5f55\u4e0b\u6765\u3002\uff09 \u7b97\u6cd5\u5185\u5bb9\u5927\u6982\u662f\u7ef4\u62a4\u6bcf\u4e2a\u8fde\u901a\u5757\u8fde\u51fa\u7684\u6700\u5c0f\u8fb9\uff0c\u6bcf\u6b21\u8fed\u4ee3\u4e2d\u5bf9\u4e8e\u6bcf\u4e2a\u8fde\u901a\u5757\u627e\u5230\u8fde\u51fa\u7684\u6700\u5c0f\u8fb9\uff0c\u627e\u5b8c\u540e\u5408\u5e76\u3002\u7531\u4e8e\u539f\u56fe\u8fde\u901a\uff0c\u6bcf\u6b21\u8fed\u4ee3\u4e2d\u8fde\u901a\u5757\u4e2a\u6570\u81f3\u5c11\u51cf\u534a\uff0c\u6545\u7b97\u6cd5\u8fed\u4ee3\u6b21\u6570\u4e0d\u8d85\u8fc7 \\(O(\\log V)\\) \u6b21\u3002 \u7b97\u6cd5\u8be6\u89e3\uff1a Boruvka \u7b97\u6cd5 CF888G Xor-MST \u00b6 \u9898\u76ee\u5927\u610f\uff1a \u7ed9\u51fa \\(n\\) \u4e2a\u70b9\uff0c\u70b9\u6743\u4e3a \\(a_i\\) \uff0c\u8fde\u63a5 \\(i\\) \u548c \\(j\\) \u7684\u8fb9\u6743\u4e3a \\(a_i\\oplus a_j\\) \uff0c\u6c42\u6700\u5c0f\u751f\u6210\u6811\u7684\u8fb9\u6743\u548c\u3002 \u6570\u636e\u8303\u56f4\uff1a \\(1\\le n\\le 2\\times 10^5,0\\le a_i<2^{30}\\) . \u9898\u76ee\u96be\u5ea6\uff1aCF 2300* \u77e5\u8bc6\u50a8\u5907\uff1a01-Trie / Boruvka \u89e3\u6790\uff1a \u603b\u4e4b\u4e0d\u80fd\u505a\u51fa\u6240\u6709\u8fb9\u540e\u7528 Kruskal \u89e3\u51b3\uff0c\u8003\u8651\u4f7f\u7528 Boruvka \u3002\u53ef\u4ee5\u5c06\u6240\u6709 \\(a_i\\) \u63d2\u5165 01-Trie \u6765\u7ef4\u62a4\u5f02\u6216\u6700\u5c0f\u503c\u3002\u628a 01-Trie \u770b\u4f5c\u4e00\u4e2a\u4e8c\u53c9\u6811\uff0c\u4e0d\u96be\u53d1\u73b0\u6070\u6709 \\(n-1\\) \u4e2a\u8282\u70b9\u6709\u5de6\u53f3\u513f\u5b50\u3002 \\(a_i\\oplus a_j\\) \u65f6\u53ea\u7528\u8003\u8651\u4e24\u70b9\u5728\u5176 LCA \u4e4b\u540e\u7684\u5f02\u6216\u6700\u503c\uff0c\u4e8e\u662f\u5bf9\u4e8e\u6709\u5de6\u53f3\u513f\u5b50\u7684\u70b9\uff08\u5373\u4e3a\u67d0\u4e24\u70b9 LCA \u7684\u70b9\uff09\uff0c \u627e\u51fa\u5f53\u524d\u80fd\u8fde\u7684\u6700\u5c0f\u8fb9\u5e76\u5408\u5e76\u5176\u5b50\u6811\u5373\u53ef\u3002 \u5c0f\u6280\u5de7\u662f\u628a \\(a_i\\) \u6392\u5e8f\u540e\u4ece\u5c0f\u5230\u5927\u63d2\u5165\uff0c\u8fd9\u6837\u6bcf\u4e2a\u8282\u70b9\u4f1a\u5bf9\u5e94\u6570\u7ec4\u4e2d\u4e00\u6bb5\u8fde\u7eed\u533a\u95f4\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(n\\log a_i)\\) . 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define fi first #define se second #define pb push_back #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 , inf = ( 1 << 30 ); int n , m , a [ N ], L [ N * 32 ], R [ N * 32 ], ch [ 2 ][ N * 32 ], rt , cnt ; //\u63d2\u5165trie void insert ( int & p , int id , int dep ){ if ( ! p ) p =++ cnt ; if ( ! L [ p ]) L [ p ] = id ; R [ p ] = id ; if ( dep == -1 ) return ; insert ( ch [( a [ id ] >> dep ) & 1 ][ p ], id , dep -1 ); } //\u67e5\u8be2\u5f02\u6216\u6700\u5c0f\u503c ll Q ( int p , int x , int dep ){ if ( dep == -1 ) return 0 ; int v = ( x >> dep ) & 1 ; if ( ch [ v ][ p ]) return Q ( ch [ v ][ p ], x , dep -1 ); else return Q ( ch [ v ^ 1 ][ p ], x , dep -1 ) + ( 1 << dep ); } #define ls ch[0][p] #define rs ch[1][p] ll dfs ( int p , int dep ){ if ( dep == -1 ) return 0 ; if ( ls && rs ){ ll val = inf ; rep ( i , L [ ls ], R [ ls ]){ val = min ( val , Q ( rs , a [ i ], dep -1 ) + ( 1 << dep )); } return dfs ( ls , dep -1 ) + dfs ( rs , dep -1 ) + val ; } if ( ls ) return dfs ( ls , dep -1 ); if ( rs ) return dfs ( rs , dep -1 ); return 0 ; } int main (){ n = read (); rep ( i , 1 , n ) a [ i ] = read (); sort ( a + 1 , a + n + 1 ); rep ( i , 1 , n ) insert ( rt , i , 30 ); printf ( \"%lld \\n \" , dfs ( rt , 30 )); return 0 ; } CF1550E Jumping Around \u00b6 \u9898\u76ee\u5927\u610f\uff1a \u6570\u8f74\u4e0a\u6709 \\(n\\) \u4e2a\u77f3\u5934\uff0c\u5750\u6807\u4e3a \\(a_1<a_2<\\cdots<a_n\\) \u3002\u521d\u59cb\u6709\u9752\u86d9\u5728\u77f3\u5934 \\(s\\) \u4e0a\uff0c\u6bcf\u6b21\u80fd\u5411\u5de6\u6216\u53f3\u8df3 \\([d,d+k]\\) \u533a\u95f4\u5185\u7684\u4efb\u610f\u8ddd\u79bb\uff0c\u4f46\u662f\u5fc5\u987b\u8981\u843d\u5728\u77f3\u5934\u4e0a\u3002\u7ed9 \\(q\\) \u4e2a\u8be2\u95ee\uff0c\u95ee\u5bf9\u4e8e\u7ed9\u5b9a\u7684 \\(k\\) \uff0c\u9752\u86d9\u662f\u5426\u80fd\u8df3\u5230\u77f3\u5934 \\(i\\) \uff1f \u6570\u636e\u8303\u56f4\uff1a \\(1\\le n,q\\le 2\\times 10^5,1\\le s,i\\le n,1\\le d,k,a_i\\le 10^6\\) . \u9898\u76ee\u96be\u5ea6\uff1aCF 2700* \u77e5\u8bc6\u50a8\u5907\uff1aBoruvka \u89e3\u6790\uff1a \u4e0d\u96be\u60f3\u5230\u5efa\u6700\u5c0f\u751f\u6210\u6811\u540e\u5224\u65ad \\(s\\) \u5230\u6bcf\u4e2a\u70b9\u7684\u8def\u5f84\u4e0a\u7684\u6700\u5927\u6743\u503c\uff0c\u6700\u540e\u79bb\u7ebf\u5904\u7406\u8be2\u95ee\u3002\u552f\u4e00\u7684\u95ee\u9898\u5728\u5982\u4f55\u5728\u6709 \\(O(n^2)\\) \u6761\u8fb9\u7684\u56fe\u4e2d\u505a MST \u3002 \u5177\u4f53\u5730\uff0c\u8003\u8651\u4f7f\u7528 Boruvka \uff0c\u7531\u4e8e\u8be5\u9898\u7684\u8fb9\u6743\u6709\u7279\u70b9\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u6240\u6709\u4f4d\u7f6e\u653e\u5165 set \u4e2d\uff0c\u6bcf\u6b21\u7528 lower_bound \u67e5\u8be2\u79bb \\(a_i+d\\) \u548c \\(a_i-d\\) \u6700\u8fd1\u7684\u70b9\uff0c\u5e76\u52a0\u8fb9\u3002Boruvka \u4f1a\u8fed\u4ee3 \\(O(\\log n)\\) \u6b21\uff0c\u800c\u6bcf\u6b21\u52a0\u8fb9\u548c\u5408\u5e76\u7684\u603b\u590d\u6742\u5ea6\u662f \\(O(n\\log n)\\) \u7684\uff0c\u6545\u603b\u4f53\u53ef\u4ee5\u505a\u5230 \\(O(n\\log^2 n)\\) \u3002\u52a0\u8fb9\u53ef\u4ee5\u7528\u53cc\u6307\u9488\u4f18\u5316\u5230 \\(O(n)\\) \u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(n\\log^2 n+q)\\) \u6216 \\(O(n\\log n+q)\\) . 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define fi first #define se second #define pb push_back #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 , inf = 1e9 ; struct Edge { int u , v , w ; friend bool operator < ( const Edge & a , const Edge & b ){ if ( a . w != b . w ) return a . w < b . w ; if ( min ( a . u , a . v ) != min ( b . u , b . v )) return min ( a . u , a . v ) < min ( b . u , b . v ); return max ( a . u , a . v ) < max ( b . u , b . v ); } }; int n , q , s , D , fa [ N ], mn [ N ]; vector < int > comps [ N ]; bool merge ( int u , int v ){ u = fa [ u ], v = fa [ v ]; if ( u == v ) return 0 ; if ( comps [ u ]. size () < comps [ v ]. size ()) swap ( u , v ); for ( int x : comps [ v ]){ fa [ x ] = u ; comps [ u ]. pb ( x ); } comps [ v ]. clear (); return 1 ; } vector < pii > G [ N ]; void dfs ( int u , int p , int d ){ mn [ u ] = d ; for ( auto e : G [ u ]) if ( e . fi != p ){ dfs ( e . fi , u , max ( d , e . se )); } } int main (){ n = read (), q = read (), s = read () -1 , D = read (); vector < int > a ( n ); rep ( i , 0 , n -1 ){ comps [ i ] = vector < int > ( 1 , i ); a [ i ] = read (); fa [ i ] = i ; } vector < int > idx ( a [ n -1 ] + 1 ); rep ( i , 0 , n -1 ) idx [ a [ i ]] = i ; int cnt = n ; set < int > pos ( a . begin (), a . end ()); while ( cnt > 1 ){ vector < Edge > tmp ; for ( const vector < int > & comp : comps ) if ( ! comp . empty ()){ for ( int i : comp ) pos . erase ( a [ i ]); Edge mn = { -1 , -1 , inf }; for ( int i : comp ){ //\u627e\u6700\u77ed\u8fb9 for ( int d : { - D , D }){ auto it = pos . lower_bound ( a [ i ] + d ); if ( it != pos . end ()){ int dis = abs ( abs ( a [ i ] -* it ) - D ); mn = min ( mn ,{ i , idx [ * it ], dis }); } if ( it != pos . begin ()){ it -- ; int dis = abs ( abs ( a [ i ] -* it ) - D ); mn = min ( mn ,{ i , idx [ * it ], dis }); } } } for ( int i : comp ) pos . insert ( a [ i ]); tmp . pb ( mn ); } for ( auto e : tmp ){ //\u52a0\u8fb9 if ( merge ( e . u , e . v )){ -- cnt ; G [ e . u ]. pb ({ e . v , e . w }); G [ e . v ]. pb ({ e . u , e . w }); } } } dfs ( s , -1 , 0 ); while ( q -- ){ int i = read () -1 , k = read (); puts ( mn [ i ] <= k ? \"Yes\" : \"No\" ); } return 0 ; }","title":"Boruvka"},{"location":"%E7%AC%94%E8%AE%B0/Boruvka/#cf888g-xor-mst","text":"\u9898\u76ee\u5927\u610f\uff1a \u7ed9\u51fa \\(n\\) \u4e2a\u70b9\uff0c\u70b9\u6743\u4e3a \\(a_i\\) \uff0c\u8fde\u63a5 \\(i\\) \u548c \\(j\\) \u7684\u8fb9\u6743\u4e3a \\(a_i\\oplus a_j\\) \uff0c\u6c42\u6700\u5c0f\u751f\u6210\u6811\u7684\u8fb9\u6743\u548c\u3002 \u6570\u636e\u8303\u56f4\uff1a \\(1\\le n\\le 2\\times 10^5,0\\le a_i<2^{30}\\) . \u9898\u76ee\u96be\u5ea6\uff1aCF 2300* \u77e5\u8bc6\u50a8\u5907\uff1a01-Trie / Boruvka \u89e3\u6790\uff1a \u603b\u4e4b\u4e0d\u80fd\u505a\u51fa\u6240\u6709\u8fb9\u540e\u7528 Kruskal \u89e3\u51b3\uff0c\u8003\u8651\u4f7f\u7528 Boruvka \u3002\u53ef\u4ee5\u5c06\u6240\u6709 \\(a_i\\) \u63d2\u5165 01-Trie \u6765\u7ef4\u62a4\u5f02\u6216\u6700\u5c0f\u503c\u3002\u628a 01-Trie \u770b\u4f5c\u4e00\u4e2a\u4e8c\u53c9\u6811\uff0c\u4e0d\u96be\u53d1\u73b0\u6070\u6709 \\(n-1\\) \u4e2a\u8282\u70b9\u6709\u5de6\u53f3\u513f\u5b50\u3002 \\(a_i\\oplus a_j\\) \u65f6\u53ea\u7528\u8003\u8651\u4e24\u70b9\u5728\u5176 LCA \u4e4b\u540e\u7684\u5f02\u6216\u6700\u503c\uff0c\u4e8e\u662f\u5bf9\u4e8e\u6709\u5de6\u53f3\u513f\u5b50\u7684\u70b9\uff08\u5373\u4e3a\u67d0\u4e24\u70b9 LCA \u7684\u70b9\uff09\uff0c \u627e\u51fa\u5f53\u524d\u80fd\u8fde\u7684\u6700\u5c0f\u8fb9\u5e76\u5408\u5e76\u5176\u5b50\u6811\u5373\u53ef\u3002 \u5c0f\u6280\u5de7\u662f\u628a \\(a_i\\) \u6392\u5e8f\u540e\u4ece\u5c0f\u5230\u5927\u63d2\u5165\uff0c\u8fd9\u6837\u6bcf\u4e2a\u8282\u70b9\u4f1a\u5bf9\u5e94\u6570\u7ec4\u4e2d\u4e00\u6bb5\u8fde\u7eed\u533a\u95f4\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(n\\log a_i)\\) . 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define fi first #define se second #define pb push_back #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 , inf = ( 1 << 30 ); int n , m , a [ N ], L [ N * 32 ], R [ N * 32 ], ch [ 2 ][ N * 32 ], rt , cnt ; //\u63d2\u5165trie void insert ( int & p , int id , int dep ){ if ( ! p ) p =++ cnt ; if ( ! L [ p ]) L [ p ] = id ; R [ p ] = id ; if ( dep == -1 ) return ; insert ( ch [( a [ id ] >> dep ) & 1 ][ p ], id , dep -1 ); } //\u67e5\u8be2\u5f02\u6216\u6700\u5c0f\u503c ll Q ( int p , int x , int dep ){ if ( dep == -1 ) return 0 ; int v = ( x >> dep ) & 1 ; if ( ch [ v ][ p ]) return Q ( ch [ v ][ p ], x , dep -1 ); else return Q ( ch [ v ^ 1 ][ p ], x , dep -1 ) + ( 1 << dep ); } #define ls ch[0][p] #define rs ch[1][p] ll dfs ( int p , int dep ){ if ( dep == -1 ) return 0 ; if ( ls && rs ){ ll val = inf ; rep ( i , L [ ls ], R [ ls ]){ val = min ( val , Q ( rs , a [ i ], dep -1 ) + ( 1 << dep )); } return dfs ( ls , dep -1 ) + dfs ( rs , dep -1 ) + val ; } if ( ls ) return dfs ( ls , dep -1 ); if ( rs ) return dfs ( rs , dep -1 ); return 0 ; } int main (){ n = read (); rep ( i , 1 , n ) a [ i ] = read (); sort ( a + 1 , a + n + 1 ); rep ( i , 1 , n ) insert ( rt , i , 30 ); printf ( \"%lld \\n \" , dfs ( rt , 30 )); return 0 ; }","title":"CF888G Xor-MST"},{"location":"%E7%AC%94%E8%AE%B0/Boruvka/#cf1550e-jumping-around","text":"\u9898\u76ee\u5927\u610f\uff1a \u6570\u8f74\u4e0a\u6709 \\(n\\) \u4e2a\u77f3\u5934\uff0c\u5750\u6807\u4e3a \\(a_1<a_2<\\cdots<a_n\\) \u3002\u521d\u59cb\u6709\u9752\u86d9\u5728\u77f3\u5934 \\(s\\) \u4e0a\uff0c\u6bcf\u6b21\u80fd\u5411\u5de6\u6216\u53f3\u8df3 \\([d,d+k]\\) \u533a\u95f4\u5185\u7684\u4efb\u610f\u8ddd\u79bb\uff0c\u4f46\u662f\u5fc5\u987b\u8981\u843d\u5728\u77f3\u5934\u4e0a\u3002\u7ed9 \\(q\\) \u4e2a\u8be2\u95ee\uff0c\u95ee\u5bf9\u4e8e\u7ed9\u5b9a\u7684 \\(k\\) \uff0c\u9752\u86d9\u662f\u5426\u80fd\u8df3\u5230\u77f3\u5934 \\(i\\) \uff1f \u6570\u636e\u8303\u56f4\uff1a \\(1\\le n,q\\le 2\\times 10^5,1\\le s,i\\le n,1\\le d,k,a_i\\le 10^6\\) . \u9898\u76ee\u96be\u5ea6\uff1aCF 2700* \u77e5\u8bc6\u50a8\u5907\uff1aBoruvka \u89e3\u6790\uff1a \u4e0d\u96be\u60f3\u5230\u5efa\u6700\u5c0f\u751f\u6210\u6811\u540e\u5224\u65ad \\(s\\) \u5230\u6bcf\u4e2a\u70b9\u7684\u8def\u5f84\u4e0a\u7684\u6700\u5927\u6743\u503c\uff0c\u6700\u540e\u79bb\u7ebf\u5904\u7406\u8be2\u95ee\u3002\u552f\u4e00\u7684\u95ee\u9898\u5728\u5982\u4f55\u5728\u6709 \\(O(n^2)\\) \u6761\u8fb9\u7684\u56fe\u4e2d\u505a MST \u3002 \u5177\u4f53\u5730\uff0c\u8003\u8651\u4f7f\u7528 Boruvka \uff0c\u7531\u4e8e\u8be5\u9898\u7684\u8fb9\u6743\u6709\u7279\u70b9\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u6240\u6709\u4f4d\u7f6e\u653e\u5165 set \u4e2d\uff0c\u6bcf\u6b21\u7528 lower_bound \u67e5\u8be2\u79bb \\(a_i+d\\) \u548c \\(a_i-d\\) \u6700\u8fd1\u7684\u70b9\uff0c\u5e76\u52a0\u8fb9\u3002Boruvka \u4f1a\u8fed\u4ee3 \\(O(\\log n)\\) \u6b21\uff0c\u800c\u6bcf\u6b21\u52a0\u8fb9\u548c\u5408\u5e76\u7684\u603b\u590d\u6742\u5ea6\u662f \\(O(n\\log n)\\) \u7684\uff0c\u6545\u603b\u4f53\u53ef\u4ee5\u505a\u5230 \\(O(n\\log^2 n)\\) \u3002\u52a0\u8fb9\u53ef\u4ee5\u7528\u53cc\u6307\u9488\u4f18\u5316\u5230 \\(O(n)\\) \u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(n\\log^2 n+q)\\) \u6216 \\(O(n\\log n+q)\\) . 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define fi first #define se second #define pb push_back #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 , inf = 1e9 ; struct Edge { int u , v , w ; friend bool operator < ( const Edge & a , const Edge & b ){ if ( a . w != b . w ) return a . w < b . w ; if ( min ( a . u , a . v ) != min ( b . u , b . v )) return min ( a . u , a . v ) < min ( b . u , b . v ); return max ( a . u , a . v ) < max ( b . u , b . v ); } }; int n , q , s , D , fa [ N ], mn [ N ]; vector < int > comps [ N ]; bool merge ( int u , int v ){ u = fa [ u ], v = fa [ v ]; if ( u == v ) return 0 ; if ( comps [ u ]. size () < comps [ v ]. size ()) swap ( u , v ); for ( int x : comps [ v ]){ fa [ x ] = u ; comps [ u ]. pb ( x ); } comps [ v ]. clear (); return 1 ; } vector < pii > G [ N ]; void dfs ( int u , int p , int d ){ mn [ u ] = d ; for ( auto e : G [ u ]) if ( e . fi != p ){ dfs ( e . fi , u , max ( d , e . se )); } } int main (){ n = read (), q = read (), s = read () -1 , D = read (); vector < int > a ( n ); rep ( i , 0 , n -1 ){ comps [ i ] = vector < int > ( 1 , i ); a [ i ] = read (); fa [ i ] = i ; } vector < int > idx ( a [ n -1 ] + 1 ); rep ( i , 0 , n -1 ) idx [ a [ i ]] = i ; int cnt = n ; set < int > pos ( a . begin (), a . end ()); while ( cnt > 1 ){ vector < Edge > tmp ; for ( const vector < int > & comp : comps ) if ( ! comp . empty ()){ for ( int i : comp ) pos . erase ( a [ i ]); Edge mn = { -1 , -1 , inf }; for ( int i : comp ){ //\u627e\u6700\u77ed\u8fb9 for ( int d : { - D , D }){ auto it = pos . lower_bound ( a [ i ] + d ); if ( it != pos . end ()){ int dis = abs ( abs ( a [ i ] -* it ) - D ); mn = min ( mn ,{ i , idx [ * it ], dis }); } if ( it != pos . begin ()){ it -- ; int dis = abs ( abs ( a [ i ] -* it ) - D ); mn = min ( mn ,{ i , idx [ * it ], dis }); } } } for ( int i : comp ) pos . insert ( a [ i ]); tmp . pb ( mn ); } for ( auto e : tmp ){ //\u52a0\u8fb9 if ( merge ( e . u , e . v )){ -- cnt ; G [ e . u ]. pb ({ e . v , e . w }); G [ e . v ]. pb ({ e . u , e . w }); } } } dfs ( s , -1 , 0 ); while ( q -- ){ int i = read () -1 , k = read (); puts ( mn [ i ] <= k ? \"Yes\" : \"No\" ); } return 0 ; }","title":"CF1550E Jumping Around"},{"location":"%E7%AC%94%E8%AE%B0/CF1517C/","text":"\u9898\u76ee\u94fe\u63a5 \u601d\u8def \u00b6 \u5982\u679c\u5de6\u8fb9\u6709\u4f4d\u7f6e\u5c31\u5f80\u5de6\u8fb9\u586b\u5145\uff0c\u5426\u5219\u5f80\u4e0b\u586b\u5145\uff0c\u4e0d\u96be\u8bf4\u660e\u6b63\u786e\u6027\u3002\u586b\u5145\u65b9\u5f0f\u53ef\u4ee5\u4f7f\u7528dfs\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(n^2)\\) \u4ee3\u7801\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } int p [ 505 ], a [ 505 ][ 505 ], cnt [ 505 ]; void dfs ( int i , int j , int col ){ //cout<<i<<\" \"<<j<<\" \"<<col<<endl; if ( ! a [ i ][ j ]){ cnt [ col ] ++ ; a [ i ][ j ] = col ; } if ( ! a [ i ][ j -1 ] && j > 1 && cnt [ col ] < col ) dfs ( i , j -1 , col ); else if ( cnt [ col ] < col ) dfs ( i + 1 , j , col ); } int main (){ int n = read (); rep ( i , 1 , n ){ a [ i ][ i ] = p [ i ] = read (); cnt [ p [ i ]] = 1 ; } rep ( i , 1 , p [ 1 ]) a [ i ][ 1 ] = p [ 1 ]; rep ( i , 2 , n ){ dfs ( i , i , p [ i ]); } rep ( i , 1 , n ){ rep ( j , 1 , i ) cout << a [ i ][ j ] << \" \" ; cout << endl ; } return 0 ; }","title":"CF1517C"},{"location":"%E7%AC%94%E8%AE%B0/CF1517C/#_1","text":"\u5982\u679c\u5de6\u8fb9\u6709\u4f4d\u7f6e\u5c31\u5f80\u5de6\u8fb9\u586b\u5145\uff0c\u5426\u5219\u5f80\u4e0b\u586b\u5145\uff0c\u4e0d\u96be\u8bf4\u660e\u6b63\u786e\u6027\u3002\u586b\u5145\u65b9\u5f0f\u53ef\u4ee5\u4f7f\u7528dfs\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(n^2)\\) \u4ee3\u7801\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } int p [ 505 ], a [ 505 ][ 505 ], cnt [ 505 ]; void dfs ( int i , int j , int col ){ //cout<<i<<\" \"<<j<<\" \"<<col<<endl; if ( ! a [ i ][ j ]){ cnt [ col ] ++ ; a [ i ][ j ] = col ; } if ( ! a [ i ][ j -1 ] && j > 1 && cnt [ col ] < col ) dfs ( i , j -1 , col ); else if ( cnt [ col ] < col ) dfs ( i + 1 , j , col ); } int main (){ int n = read (); rep ( i , 1 , n ){ a [ i ][ i ] = p [ i ] = read (); cnt [ p [ i ]] = 1 ; } rep ( i , 1 , p [ 1 ]) a [ i ][ 1 ] = p [ 1 ]; rep ( i , 2 , n ){ dfs ( i , i , p [ i ]); } rep ( i , 1 , n ){ rep ( j , 1 , i ) cout << a [ i ][ j ] << \" \" ; cout << endl ; } return 0 ; }","title":"\u601d\u8def"},{"location":"%E7%AC%94%E8%AE%B0/Google%20Kick%20Start%20Round%20H/","text":"Google Kick Start Round H \u00b6 A \u00b6 \u53ef\u4ee5\u4f18\u5316\u5230 \\(O(n+m)\\) \uff0c\u8fd9\u91cc\u968f\u4fbf\u6253\u4e86\u4e2a\u66b4\u529b\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 const int N = 2e5 + 5 ; char s [ N ], f [ N ]; int main (){ int T = read (); rep ( t , 1 , T ){ scanf ( \"%s%s\" , s + 1 , f + 1 ); int n = strlen ( s + 1 ), m = strlen ( f + 1 ), ans = 0 ; rep ( i , 1 , n ){ int mx = 26 ; rep ( j , 1 , m ){ int k = abs ( f [ j ] - s [ i ]); mx = min ( mx , min ( k , 26 - k )); } ans += mx ; } printf ( \"Case #%d: %d \\n \" , t , ans ); } return 0 ; } B \u00b6 \u66b4\u529b\u9898\uff0c\u4e0d\u96be\u53d1\u73b0\u6bcf\u79cd\u989c\u8272\u662f\u72ec\u7acb\u7684\uff0c\u5206\u522b\u7b97\u6bb5\u6570\u6c42\u548c\u5c31\u884c\uff0c \\(O(n)\\) \u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 const int N = 2e5 + 5 ; char s [ N ]; bool R ( char c ){ return c == 'R' || c == 'O' || c == 'P' || c == 'A' ;} bool Y ( char c ){ return c == 'Y' || c == 'O' || c == 'G' || c == 'A' ;} bool B ( char c ){ return c == 'B' || c == 'G' || c == 'P' || c == 'A' ;} int main (){ int T = read (); rep ( t , 1 , T ){ int ans = 0 , n = read (); scanf ( \"%s\" , s + 1 ); rep ( i , 1 , n ){ if ( R ( s [ i ]) &&! R ( s [ i -1 ])) ans ++ ; } rep ( i , 1 , n ){ if ( Y ( s [ i ]) &&! Y ( s [ i -1 ])) ans ++ ; } rep ( i , 1 , n ){ if ( B ( s [ i ]) &&! B ( s [ i -1 ])) ans ++ ; } printf ( \"Case #%d: %d \\n \" , t , ans ); } return 0 ; } C \u00b6 \u601d\u7ef4\u9898\uff0c\u66b4\u529b\u505a\u6cd5 \\(O(n^2)\\) \uff0c\u8003\u8651\u4f18\u5316\u3002\u6211\u4eec\u8003\u8651\u52a0\u5feb\u626b\u63cf\u533a\u95f4\u7684\u901f\u5ea6\uff0c\u5177\u4f53\u5730\uff0c\u53ef\u4ee5\u7528 vector \u5b58\u4e0b\u6bcf\u4e2a\u53ef\u80fd\u64cd\u4f5c\u7684\u4f4d\u7f6e\uff0c\u6ce8\u610f\u5230\u65b0\u751f\u6210\u7684\u6570\u6700\u591a\u548c\u5de6\u53f3\u5404\u4ea7\u751f\u4e00\u4e2a\u65b0\u7684\u4f4d\u7f6e\uff0c\u603b\u5171\u6700\u591a\u64cd\u4f5c \\(n-1\\) \u6b21\uff0c\u4e8e\u662f\u4f4d\u7f6e\u6570\u91cf\u662f \\(O(n)\\) \u7684\u3002\u7528\u94fe\u8868\u4f18\u5316\u5220\u9664\uff0c\u6a21\u62df\u5373\u53ef\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 const int N = 5e5 + 5 ; char s [ N ], res [ N ]; int l [ N ], r [ N ]; bool tag [ N ]; char nc ( char c ){ if ( c >= '0' && c < '9' ) return c + 1 ; return '0' ;} vi v [ 10 ]; int main (){ int T = read (); rep ( t , 1 , T ){ int n = read (); scanf ( \"%s\" , s + 1 ); rep ( i , 1 , n ) l [ i ] = i -1 , r [ i ] = i + 1 , tag [ i ] = 0 ; int cnt = 0 ; rep ( k , '0' , '9' ) rep ( i , 1 , n ){ if ( s [ i ] == k && s [ i + 1 ] == nc ( k )) v [ k - '0' ]. pb ( i ), ++ cnt ; } int k = 0 ; while ( cnt ){ while ( v [ k ]. size ()){ int x = v [ k ]. back (), y = r [ x ]; v [ k ]. pop_back (); -- cnt ; if ( s [ x ] != k + '0' || s [ y ] != nc ( k + '0' )) continue ; if ( l [ x ]) r [ l [ x ]] = y ; l [ y ] = l [ x ], tag [ x ] = 1 ; s [ y ] = nc ( s [ y ]); if ( l [ y ] && nc ( s [ l [ y ]]) == s [ y ]){ v [( k + 1 ) % 10 ]. pb ( l [ y ]); cnt ++ ; } if ( r [ y ] <= n && nc ( s [ y ]) == s [ r [ y ]]){ v [( k + 2 ) % 10 ]. pb ( y ); cnt ++ ; } } k = ( k + 1 ) % 10 ; } printf ( \"Case #%d: \" , t ); rep ( i , 1 , n ) if ( ! tag [ i ]) cout << s [ i ]; cout << endl ; } return 0 ; } D \u00b6 \u4e00\u773c\u52a8\u6001 dp \u9898\u3002\u8f6c\u79fb\u662f\u663e\u7136\u7684\u3002\u4f46\u662f\u7531\u4e8e\u9898\u76ee\u4e0d\u5e26\u4fee\u6539\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u6811\u4e0a\u500d\u589e\u7ef4\u62a4\uff0c\u8bb0 \\(A_{u,k},B_{u,k}\\) \u4e3a \\(u\\) \u5f80\u4e0a\u8d70 \\(2^k\\) \u6b65\u7684\u7956\u5148\u662f\u5426\u88ab\u67d3\u8272\u65f6\uff0c \\(u\\) \u88ab\u67d3\u8272\u7684\u6982\u7387\u3002\u9b54\u6539\u4e00\u4e0b LCA \u51fd\u6570\u5c31\u597d\u4e86\u3002\u65f6\u95f4\u590d\u6742\u5ea6 \\(O((n+q)\\log n)\\) \u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 const int N = 2e5 + 5 , P = 1e9 + 7 , M = 1e6 ; ll n , q , K [ N ], A [ N ][ 18 ], B [ N ][ 18 ], fa [ N ][ 18 ], dep [ N ], inv [ M + 5 ]; void jump ( int & u , int k , pii & a ){ a = {( a . fi * A [ u ][ k ] + a . se * ( P + 1 - A [ u ][ k ])) % P , ( a . fi * B [ u ][ k ] + a . se * ( P + 1 - B [ u ][ k ])) % P }; u = fa [ u ][ k ]; } int calc ( int x , int y ){ pii ax = { 1 , 0 }, ay = { 1 , 0 }; if ( dep [ x ] < dep [ y ]) swap ( x , y ); per ( k , 17 , 0 ){ if ( dep [ x ] - ( 1 << k ) >= dep [ y ]) jump ( x , k , ax ); } if ( x ^ y ){ per ( i , 17 , 0 ){ if ( fa [ x ][ i ] != fa [ y ][ i ]){ jump ( x , i , ax ); jump ( y , i , ay ); } } jump ( x , 0 , ax ), jump ( y , 0 , ay ); } return ( ax . fi * ay . fi % P * K [ x ] + ax . se * ay . se % P * ( P + 1 - K [ x ])) % P ; } void solve (){ n = read (), q = read (), K [ 1 ] = read () * inv [ M ] % P ; rep ( i , 2 , n ){ fa [ i ][ 0 ] = read (), A [ i ][ 0 ] = read () * inv [ M ] % P , B [ i ][ 0 ] = read () * inv [ M ] % P ; dep [ i ] = dep [ fa [ i ][ 0 ]] + 1 ; K [ i ] = ( K [ fa [ i ][ 0 ]] * A [ i ][ 0 ] + ( P + 1 - K [ fa [ i ][ 0 ]]) * B [ i ][ 0 ]) % P ; rep ( j , 1 , 18 ){ fa [ i ][ j ] = fa [ fa [ i ][ j -1 ]][ j -1 ]; if ( fa [ i ][ j ]){ A [ i ][ j ] = ( A [ i ][ j -1 ] * A [ fa [ i ][ j -1 ]][ j -1 ] + B [ i ][ j -1 ] * ( P + 1 - A [ fa [ i ][ j -1 ]][ j -1 ])) % P ; B [ i ][ j ] = ( A [ i ][ j -1 ] * B [ fa [ i ][ j -1 ]][ j -1 ] + B [ i ][ j -1 ] * ( P + 1 - B [ fa [ i ][ j -1 ]][ j -1 ])) % P ; } } } while ( q -- ){ int u = read (), v = read (); printf ( \"%d \" , calc ( u , v )); } puts ( \"\" ); } int main (){ inv [ 1 ] = 1 ; rep ( i , 2 , M ){ inv [ i ] = ( P - P / i ) * inv [ P % i ] % P ; } int T = read (); rep ( t , 1 , T ){ printf ( \"Case #%d: \" , t ); solve (); } return 0 ; }","title":"Google Kick Start Round H"},{"location":"%E7%AC%94%E8%AE%B0/Google%20Kick%20Start%20Round%20H/#google-kick-start-round-h","text":"","title":"Google Kick Start Round H"},{"location":"%E7%AC%94%E8%AE%B0/Google%20Kick%20Start%20Round%20H/#a","text":"\u53ef\u4ee5\u4f18\u5316\u5230 \\(O(n+m)\\) \uff0c\u8fd9\u91cc\u968f\u4fbf\u6253\u4e86\u4e2a\u66b4\u529b\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 const int N = 2e5 + 5 ; char s [ N ], f [ N ]; int main (){ int T = read (); rep ( t , 1 , T ){ scanf ( \"%s%s\" , s + 1 , f + 1 ); int n = strlen ( s + 1 ), m = strlen ( f + 1 ), ans = 0 ; rep ( i , 1 , n ){ int mx = 26 ; rep ( j , 1 , m ){ int k = abs ( f [ j ] - s [ i ]); mx = min ( mx , min ( k , 26 - k )); } ans += mx ; } printf ( \"Case #%d: %d \\n \" , t , ans ); } return 0 ; }","title":"A"},{"location":"%E7%AC%94%E8%AE%B0/Google%20Kick%20Start%20Round%20H/#b","text":"\u66b4\u529b\u9898\uff0c\u4e0d\u96be\u53d1\u73b0\u6bcf\u79cd\u989c\u8272\u662f\u72ec\u7acb\u7684\uff0c\u5206\u522b\u7b97\u6bb5\u6570\u6c42\u548c\u5c31\u884c\uff0c \\(O(n)\\) \u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 const int N = 2e5 + 5 ; char s [ N ]; bool R ( char c ){ return c == 'R' || c == 'O' || c == 'P' || c == 'A' ;} bool Y ( char c ){ return c == 'Y' || c == 'O' || c == 'G' || c == 'A' ;} bool B ( char c ){ return c == 'B' || c == 'G' || c == 'P' || c == 'A' ;} int main (){ int T = read (); rep ( t , 1 , T ){ int ans = 0 , n = read (); scanf ( \"%s\" , s + 1 ); rep ( i , 1 , n ){ if ( R ( s [ i ]) &&! R ( s [ i -1 ])) ans ++ ; } rep ( i , 1 , n ){ if ( Y ( s [ i ]) &&! Y ( s [ i -1 ])) ans ++ ; } rep ( i , 1 , n ){ if ( B ( s [ i ]) &&! B ( s [ i -1 ])) ans ++ ; } printf ( \"Case #%d: %d \\n \" , t , ans ); } return 0 ; }","title":"B"},{"location":"%E7%AC%94%E8%AE%B0/Google%20Kick%20Start%20Round%20H/#c","text":"\u601d\u7ef4\u9898\uff0c\u66b4\u529b\u505a\u6cd5 \\(O(n^2)\\) \uff0c\u8003\u8651\u4f18\u5316\u3002\u6211\u4eec\u8003\u8651\u52a0\u5feb\u626b\u63cf\u533a\u95f4\u7684\u901f\u5ea6\uff0c\u5177\u4f53\u5730\uff0c\u53ef\u4ee5\u7528 vector \u5b58\u4e0b\u6bcf\u4e2a\u53ef\u80fd\u64cd\u4f5c\u7684\u4f4d\u7f6e\uff0c\u6ce8\u610f\u5230\u65b0\u751f\u6210\u7684\u6570\u6700\u591a\u548c\u5de6\u53f3\u5404\u4ea7\u751f\u4e00\u4e2a\u65b0\u7684\u4f4d\u7f6e\uff0c\u603b\u5171\u6700\u591a\u64cd\u4f5c \\(n-1\\) \u6b21\uff0c\u4e8e\u662f\u4f4d\u7f6e\u6570\u91cf\u662f \\(O(n)\\) \u7684\u3002\u7528\u94fe\u8868\u4f18\u5316\u5220\u9664\uff0c\u6a21\u62df\u5373\u53ef\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 const int N = 5e5 + 5 ; char s [ N ], res [ N ]; int l [ N ], r [ N ]; bool tag [ N ]; char nc ( char c ){ if ( c >= '0' && c < '9' ) return c + 1 ; return '0' ;} vi v [ 10 ]; int main (){ int T = read (); rep ( t , 1 , T ){ int n = read (); scanf ( \"%s\" , s + 1 ); rep ( i , 1 , n ) l [ i ] = i -1 , r [ i ] = i + 1 , tag [ i ] = 0 ; int cnt = 0 ; rep ( k , '0' , '9' ) rep ( i , 1 , n ){ if ( s [ i ] == k && s [ i + 1 ] == nc ( k )) v [ k - '0' ]. pb ( i ), ++ cnt ; } int k = 0 ; while ( cnt ){ while ( v [ k ]. size ()){ int x = v [ k ]. back (), y = r [ x ]; v [ k ]. pop_back (); -- cnt ; if ( s [ x ] != k + '0' || s [ y ] != nc ( k + '0' )) continue ; if ( l [ x ]) r [ l [ x ]] = y ; l [ y ] = l [ x ], tag [ x ] = 1 ; s [ y ] = nc ( s [ y ]); if ( l [ y ] && nc ( s [ l [ y ]]) == s [ y ]){ v [( k + 1 ) % 10 ]. pb ( l [ y ]); cnt ++ ; } if ( r [ y ] <= n && nc ( s [ y ]) == s [ r [ y ]]){ v [( k + 2 ) % 10 ]. pb ( y ); cnt ++ ; } } k = ( k + 1 ) % 10 ; } printf ( \"Case #%d: \" , t ); rep ( i , 1 , n ) if ( ! tag [ i ]) cout << s [ i ]; cout << endl ; } return 0 ; }","title":"C"},{"location":"%E7%AC%94%E8%AE%B0/Google%20Kick%20Start%20Round%20H/#d","text":"\u4e00\u773c\u52a8\u6001 dp \u9898\u3002\u8f6c\u79fb\u662f\u663e\u7136\u7684\u3002\u4f46\u662f\u7531\u4e8e\u9898\u76ee\u4e0d\u5e26\u4fee\u6539\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u6811\u4e0a\u500d\u589e\u7ef4\u62a4\uff0c\u8bb0 \\(A_{u,k},B_{u,k}\\) \u4e3a \\(u\\) \u5f80\u4e0a\u8d70 \\(2^k\\) \u6b65\u7684\u7956\u5148\u662f\u5426\u88ab\u67d3\u8272\u65f6\uff0c \\(u\\) \u88ab\u67d3\u8272\u7684\u6982\u7387\u3002\u9b54\u6539\u4e00\u4e0b LCA \u51fd\u6570\u5c31\u597d\u4e86\u3002\u65f6\u95f4\u590d\u6742\u5ea6 \\(O((n+q)\\log n)\\) \u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 const int N = 2e5 + 5 , P = 1e9 + 7 , M = 1e6 ; ll n , q , K [ N ], A [ N ][ 18 ], B [ N ][ 18 ], fa [ N ][ 18 ], dep [ N ], inv [ M + 5 ]; void jump ( int & u , int k , pii & a ){ a = {( a . fi * A [ u ][ k ] + a . se * ( P + 1 - A [ u ][ k ])) % P , ( a . fi * B [ u ][ k ] + a . se * ( P + 1 - B [ u ][ k ])) % P }; u = fa [ u ][ k ]; } int calc ( int x , int y ){ pii ax = { 1 , 0 }, ay = { 1 , 0 }; if ( dep [ x ] < dep [ y ]) swap ( x , y ); per ( k , 17 , 0 ){ if ( dep [ x ] - ( 1 << k ) >= dep [ y ]) jump ( x , k , ax ); } if ( x ^ y ){ per ( i , 17 , 0 ){ if ( fa [ x ][ i ] != fa [ y ][ i ]){ jump ( x , i , ax ); jump ( y , i , ay ); } } jump ( x , 0 , ax ), jump ( y , 0 , ay ); } return ( ax . fi * ay . fi % P * K [ x ] + ax . se * ay . se % P * ( P + 1 - K [ x ])) % P ; } void solve (){ n = read (), q = read (), K [ 1 ] = read () * inv [ M ] % P ; rep ( i , 2 , n ){ fa [ i ][ 0 ] = read (), A [ i ][ 0 ] = read () * inv [ M ] % P , B [ i ][ 0 ] = read () * inv [ M ] % P ; dep [ i ] = dep [ fa [ i ][ 0 ]] + 1 ; K [ i ] = ( K [ fa [ i ][ 0 ]] * A [ i ][ 0 ] + ( P + 1 - K [ fa [ i ][ 0 ]]) * B [ i ][ 0 ]) % P ; rep ( j , 1 , 18 ){ fa [ i ][ j ] = fa [ fa [ i ][ j -1 ]][ j -1 ]; if ( fa [ i ][ j ]){ A [ i ][ j ] = ( A [ i ][ j -1 ] * A [ fa [ i ][ j -1 ]][ j -1 ] + B [ i ][ j -1 ] * ( P + 1 - A [ fa [ i ][ j -1 ]][ j -1 ])) % P ; B [ i ][ j ] = ( A [ i ][ j -1 ] * B [ fa [ i ][ j -1 ]][ j -1 ] + B [ i ][ j -1 ] * ( P + 1 - B [ fa [ i ][ j -1 ]][ j -1 ])) % P ; } } } while ( q -- ){ int u = read (), v = read (); printf ( \"%d \" , calc ( u , v )); } puts ( \"\" ); } int main (){ inv [ 1 ] = 1 ; rep ( i , 2 , M ){ inv [ i ] = ( P - P / i ) * inv [ P % i ] % P ; } int T = read (); rep ( t , 1 , T ){ printf ( \"Case #%d: \" , t ); solve (); } return 0 ; }","title":"D"},{"location":"%E7%AC%94%E8%AE%B0/JOI%202021%20Final/","text":"JOI 2021 Final \u00b6 T1. \u3068\u3066\u3082\u305f\u306e\u3057\u3044\u5bb6\u5ead\u83dc\u5712 4 \u00b6 \u9898\u610f\uff1a \u7ed9\u4e00\u4e2a\u957f\u5ea6\u4e3a \\(N\\) \u7684\u6570\u7ec4 \\(A_i\\) \uff0c\u6bcf\u6b21\u64cd\u4f5c\u53ef\u4ee5\u5c06\u4efb\u610f\u4e00\u6bb5\u533a\u95f4 \\([l,r]\\) \u4e2d\u7684\u6570 \\(+1\\) \u3002\u8981\u6c42\u82e5\u5e72\u6b21\u64cd\u4f5c\u540e\u5f97\u5230\u7684\u5e8f\u5217 \\(B_i\\) \u6ee1\u8db3\u5b58\u5728\u4e00\u4e2a \\(k\\in[1,N]\\) \uff0c\u4f7f\u5f97 \\([1,k]\\) \u7684\u6570\u4e25\u683c\u9012\u589e\uff0c \\([k+1,N]\\) \u7684\u6570\u4e25\u683c\u9012\u51cf\u3002\u6700\u5c0f\u5316\u64cd\u4f5c\u6b21\u6570\u3002 \u89e3\u6790\uff1a \u53ea\u6709\u533a\u95f4\u64cd\u4f5c\uff0c\u5e76\u4e14\u6700\u540e\u5f97\u5230\u7684\u6570\u7ec4\u6ee1\u8db3\u4e00\u4e9b\u5355\u8c03\u6027\uff0c\u6211\u4eec\u53ef\u4ee5\u60f3\u5230\u7528\u5dee\u5206\u4f18\u5316\u3002\u8fd9\u6837\u6bcf\u4e00\u4e2a\u64cd\u4f5c\u5c31\u53d8\u6210\u5c06\u5dee\u5206\u6570\u7ec4 \\(d\\) \u4e2d\u7684 \\(d_l\\) \u52a0\u4e00\uff0c \\(d_{r+1}\\) \u51cf\u4e00\u3002\u6700\u540e\u7684\u5e8f\u5217\u6ee1\u8db3\u4e00\u6bb5 \\(d_i>0\\) \u63a5\u4e00\u6bb5 \\(d_i<0\\) \uff0c\u53ef\u4ee5\u7528\u524d\u7f00\u548c\u7b97\u51fa\u4ee4\u4e00\u6bb5\u533a\u95f4\u7684 \\(d_i\\) \u6ee1\u8db3\u6761\u4ef6\u7684\u64cd\u4f5c\u6b21\u6570\uff0c\u540e\u9762\u679a\u4e3e\u65ad\u70b9 \\(k\\) \u5373\u53ef\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define fi first #define se second #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 ; int n , a [ N ], b [ N ]; ll f [ N ], g [ N ]; int main (){ n = read (); rep ( i , 1 , n ) a [ i ] = read (); rep ( i , 1 , n ) b [ i ] = a [ i ] - a [ i -1 ]; rep ( i , 2 , n ){ if ( b [ i ] <= 0 ){ f [ i ] = f [ i -1 ] - b [ i ] + 1 ; } else f [ i ] = f [ i -1 ]; } per ( i , n , 2 ){ if ( b [ i ] >= 0 ){ g [ i ] = g [ i + 1 ] + b [ i ] + 1 ; } else g [ i ] = g [ i + 1 ]; } ll ans = 1e18 ; rep ( i , 1 , n ) ans = min ( ans , max ( f [ i ], g [ i + 1 ])); printf ( \"%lld \\n \" , ans ); return 0 ; } T2. \u96ea\u7389 \u00b6 \u9898\u610f\uff1a \u4e00\u4e2a\u6570\u8f74\u4e0a\u6709 \\(N\\) \u4e2a\u8d28\u91cf\u4e3a \\(0\\) \u7684\u96ea\u7403\uff0c\u6700\u521d\u7b2c \\(i\\) \u4e2a\u96ea\u7403\u7684\u5750\u6807\u4e3a \\(X_i\\) \uff0c\u6570\u8f74\u4e0a\u8986\u76d6\u4e86\u96ea\u3002\u6709 \\(Q\\) \u5929\u7684\u5f3a\u98ce\uff0c\u7b2c \\(j\\) \u5929\u7684\u98ce\u4f1a\u4f7f\u6240\u6709\u96ea\u7403\u540c\u65f6\u79fb\u52a8 \\(W_j\\) \u8ddd\u79bb\u3002 \u5982\u679c\u6709\u96ea\u7403\u6eda\u8fc7\u4e00\u4e2a\u88ab\u96ea\u8986\u76d6\u7684\u533a\u95f4 \\([a,a+1]\\) \uff0c\u533a\u95f4\u4e0a\u7684\u96ea\u4f1a\u6d88\u5931\uff0c\u540c\u65f6\u96ea\u7403\u7684\u8d28\u91cf\u589e\u52a0 \\(1\\) \u3002\u8ba1\u7b97\u5728 \\(Q\\) \u5929\u540e\u6bcf\u4e2a\u96ea\u7403\u7684\u8d28\u91cf\u3002 \u89e3\u6790\uff1a \u6240\u6709\u96ea\u7403\u4e00\u8d77\u5e73\u79fb\uff0c\u6240\u4ee5\u4efb\u610f\u4e00\u4e2a\u96ea\u7403\u90fd\u65e0\u6cd5\u8de8\u8d8a\u76f8\u90bb\u7684\u96ea\u7403\u53bb\u79ef\u96ea\uff0c\u800c\u5bf9\u4e00\u4e2a\u96ea\u7403\u8d21\u732e\u96ea\u7684\u533a\u95f4\u5fc5\u7136\u8fde\u7eed\u3002\u4e8e\u662f\u6211\u4eec\u8003\u8651\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u96ea\u7403\uff0c\u8ba1\u7b97\u5b83\u6eda\u5230\u96ea\u7684\u6700\u5de6\u548c\u6700\u53f3\u7aef\u70b9 \\(l_i,r_i\\) \u3002 \u5177\u4f53\u5730\uff0c\u6211\u4eec\u53d1\u73b0\u4e24\u4e2a\u96ea\u7403\u95f4\u7684\u8ddd\u79bb\u8d8a\u77ed\uff0c\u91cc\u9762\u7684\u96ea\u4f1a\u5148\u88ab\u6eda\u5b8c\uff0c\u53ef\u4ee5\u628a\u8fd9\u4e9b\u533a\u95f4\u957f\u5ea6\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\u3002\u8bb0\u5f55\u5411\u5de6\u548c\u5411\u53f3\u7684\u6700\u5927\u4f4d\u79fb \\(L,R\\) \uff0c\u82e5\u5f53\u524d\u7684\u98ce\u529b\u66f4\u65b0\u4e86\u8fd9\u4e2a\u4f4d\u79fb\uff0c\u4f7f\u5f97 \\(L+R\\) \u8d85\u8fc7\u4e86\u67d0\u4e2a\u533a\u95f4\u7684\u5927\u5c0f\uff0c\u5c31\u53ef\u4ee5\u7ef4\u62a4 \\(r_i,l_{i+1}\\) \uff0c\u5373\u4e24\u70b9\u5728\u533a\u95f4\u5185\u5206\u96ea\u7684\u4f4d\u7f6e\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N\\log N+Q)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<ll,int> #define fi first #define se second #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 ; ll n , q , a [ N ]; ll l [ N ], r [ N ], w , x , L , R ; pii d [ N ]; int main (){ n = read (), q = read (); rep ( i , 1 , n ){ a [ i ] = read (); l [ i ] = r [ i ] = -1 ; } rep ( i , 1 , n -1 ) d [ i ] = { a [ i + 1 ] - a [ i ], i }; sort ( d + 1 , d + n ); int now = 1 ; while ( q -- ){ x = read (); w += x ; if ( w > 0 ) R = max ( R , w ); else L = max ( L , - w ); while ( L + R >= d [ now ]. fi && now < n ){ int i = d [ now ]. se ; if ( w > 0 ) r [ i ] = a [ i + 1 ] - L ; else r [ i ] = a [ i ] + R ; l [ i + 1 ] = r [ i ]; ++ now ; } } rep ( i , 1 , n ){ if ( l [ i ] == -1 ) l [ i ] = a [ i ] - L ; if ( r [ i ] == -1 ) r [ i ] = a [ i ] + R ; } rep ( i , 1 , n ) printf ( \"%lld \\n \" , r [ i ] - l [ i ]); return 0 ; } T3. \u96c6\u5408\u5199\u771f \u00b6 \u9898\u610f\uff1a \u7ed9\u4e00\u4e2a \\(1\\sim N\\) \u7684\u6392\u5217 \\(a\\) \uff0c\u8981\u6c42\u7ecf\u8fc7\u82e5\u5e72\u6b21\u4ea4\u6362 \\(a_i,a_{i+1}\\) \u540e\uff0c\u5bf9\u6240\u6709 \\(i\\) \u5747\u6ee1\u8db3 \\(a_i<a_{i+1}+2\\) \u3002\u6c42\u6700\u5c11\u7684\u4ea4\u6362\u6b21\u6570\u3002 \u89e3\u6790\uff1a \u521a\u5f00\u59cb\u5f88\u6ca1\u6709\u5934\u7eea\uff0c\u4e0d\u59a8\u770b\u770b\u64cd\u4f5c\u5b8c\u540e\u7684\u5e8f\u5217\u957f\u4ec0\u4e48\u6837\u5b50\u3002\u7531 \\(a_i<a_{i+1}+2\\) \u5f97 \\(a_i\\le a_{i+1}+1\\) \uff0c\u4e5f\u5c31\u662f\u4e00\u4e2a\u6570\u6700\u591a\u6bd4\u540e\u9762\u7684\u6570\u5927 \\(1\\) \u3002\u90a3\u4e48\u53ef\u4ee5\u628a\u6700\u7ec8\u7684\u5e8f\u5217\u5206\u6210\u82e5\u5e72\u4e2a\u4e0b\u964d\u5e8f\u5217\uff0c\u5373\u5206\u4e3a \\(k\\) \u4e2a\u533a\u95f4 \\([l_1,r_1],[l_2,r_2],\\dots,[l_k,r_k]\\) \u3002\u4e0d\u96be\u53d1\u73b0 \\([l_i,r_i]\\) \u4e2d\u7684\u6570\u53ea\u80fd\u662f \\(r_i \\sim l_i\\) \u3002 \u8003\u8651\u5bf9\u4e8e\u8fd9\u6837\u7684\u5408\u6cd5\u5e8f\u5217\u6700\u5c0f\u64cd\u4f5c\u6b21\u6570\u662f\u4ec0\u4e48\uff0c\u8bbe\u539f\u6392\u5217\u4e2d \\(i\\) \u5728 \\(p_i\\) \u4f4d\u7f6e\uff0c\u5219\u65b0\u5e8f\u5217\u5230\u539f\u5e8f\u5217\u7684\u64cd\u4f5c\u6b21\u6570\u548c\u9006\u5e8f\u5bf9\u6709\u5173\uff0c\u5373\uff1a \\sum_{i=1}^n\\sum_{j=i+1}^n[p_{a_i}>p_{a_j}] \u8bbe \\(f_i\\) \u4e3a\u5c06\u524d \\(i\\) \u4e2a\u6570\u64cd\u4f5c\u6210\u5408\u6cd5\u5e8f\u5217\u7684\u6700\u5c0f\u4ee3\u4ef7\uff0c\u679a\u4e3e\u6700\u540e\u4e00\u4e2a\u533a\u95f4\u7684\u8d77\u70b9\u53ef\u5f97 \\( \\(f_i=\\min_{1\\le j\\le i}\\{f_{j-1}+\\operatorname{calc}(j,i)\\}\\) \\) \uff0c\u63a5\u4e0b\u6765\u53ea\u7528\u8003\u8651\u5982\u4f55\u5feb\u901f\u8ba1\u7b97 \\(\\operatorname{calc}\\) \u51fd\u6570\u3002 \u5bf9\u4e8e \\(k\\in[j,i]\\) \uff0c\u6211\u4eec\u8ba1\u7b97\u5b83\u4e0e \\([1,j-1]\\) \u4e2d\u7684\u9006\u5e8f\u5bf9\u6570\u548c\u5b83\u4e0e\u81ea\u5df1\u533a\u95f4\u5185\u7684\u9006\u5e8f\u5bf9\u6570\u3002\u77e5\u9053\u5728\u65b0\u5e8f\u5217\u4e2d \\(x<j,k<x\\le i\\) \u5728\u5b83\u524d\u9762\uff0c \\(j\\le x<k\\) \u5728\u5b83\u540e\u9762\u3002\u5012\u5e8f\u679a\u4e3e \\(j\\) \uff0c\u9006\u5e8f\u5bf9\u6570\u53ef\u4ee5\u5f00\u4e24\u4e2a\u6811\u72b6\u6570\u7ec4\u4f18\u5316\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N^2\\log N)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define fi first #define se second #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 , inf = 1e9 ; int n , p [ N ], f [ N ], A [ N ], B [ N ]; void I ( int * t , int x , int val ){ for (; x <= n ; x += x &- x ) t [ x ] += val ; } int Q ( int * t , int x ){ int res = 0 ; for (; x ; x -= x &- x ) res += t [ x ]; return res ; } int main (){ n = read (); rep ( i , 1 , n ){ int x = read (); p [ x ] = i ; } rep ( i , 1 , n ){ //printf(\"i=%d:\\n\",i); f [ i ] = inf ; int sum = 0 ; memset ( B , 0 , sizeof ( B )); I ( A , p [ i ], 1 ); per ( j , i , 1 ){ sum += i - Q ( A , p [ j ]) - Q ( B , p [ j ]); //printf(\"j=%d: sum=%d,f=%d\\n\",j,sum,f[j-1]); f [ i ] = min ( f [ i ], f [ j -1 ] + sum ); I ( B , p [ j ], 1 ); } } printf ( \"%d \\n \" , f [ n ]); return 0 ; } T4. \u30ed\u30dc\u30c3\u30c8 \u00b6 \u9898\u610f\uff1a \u7ed9\u5b9a\u4e00\u4e2a \\(N\\) \u4e2a\u70b9\uff0c \\(M\\) \u6761\u8fb9\u7684\u65e0\u5411\u56fe\uff0c\u7b2c \\(i\\) \u6761\u8fb9\u7684\u989c\u8272\u4e3a \\(C_i\\in[1,M]\\) \uff0c\u4f46\u4e0d\u4fdd\u8bc1 \\(C_i\\) \u4e92\u4e0d\u76f8\u7b49\u3002 \u6709\u4e00\u4e2a\u667a\u80fd\u673a\u5668\u4eba\uff0c\u4f60\u544a\u8bc9\u8fd9\u4e2a\u673a\u5668\u4eba\u4e00\u4e2a\u989c\u8272\uff0c\u5982\u679c\u5b83\u5f53\u524d\u6240\u5728\u8282\u70b9\u6709\u4e14\u4ec5\u6709\u4e00\u6761\u8fd9\u79cd\u989c\u8272\u7684\u8fb9\uff0c\u5b83\u5c31\u4f1a\u8d70\u8fd9\u6761\u8def\uff0c\u5426\u5219\u5b83\u4f1a\u505c\u7559\u5728\u539f\u5730\u3002 \u73b0\u5728\u8fd9\u4e2a\u673a\u5668\u4eba\u4ece\u70b9 \\(1\\) \u51fa\u53d1\u60f3\u79fb\u52a8\u5230\u70b9 \\(N\\) \uff0c\u4f46\u662f\u4f60\u4e0d\u4e00\u5b9a\u80fd\u901a\u8fc7\u4ec5\u4ec5\u544a\u8bc9\u5b83\u989c\u8272\u6765\u4f7f\u5b83\u8d70\u5230 \\(N\\) \u3002\u56e0\u6b64\u4f60\u53ef\u4ee5 \u9884\u5148 \u6539\u53d8\u4e00\u4e9b\u8fb9\u7684\u989c\u8272\uff0c\u6539\u53d8\u7b2c \\(i\\) \u6761\u8fb9\u7684\u4ee3\u4ef7\u662f \\(P_i\\) \u3002\u6c42\u6700\u5c0f\u4ee3\u4ef7\uff0c\u5982\u65e0\u89e3\u5219\u8f93\u51fa \\(-1\\) \u3002 \u89e3\u6790\uff1a \u5982\u679c\u5f53\u524d\u8fb9\u552f\u4e00\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u8d70\u3002\u5426\u5219\u5982\u679c\u6211\u4eec\u60f3\u8d70\u4e00\u6761\u8fb9\uff0c\u53ef\u9009\u7684\u64cd\u4f5c\u53ea\u6709\u4e24\u79cd\uff1a \u628a\u5b83\u7684\u989c\u8272\u6362\u6210\u65b0\u989c\u8272\u3002 \u6539\u53d8\u6240\u6709\u548c\u5b83\u989c\u8272\u76f8\u540c\u7684\u8fb9\u7684\u989c\u8272\u3002 \u53d1\u73b0\u597d\u50cf\u5e76\u4e0d\u80fd\u8fd9\u6837\u5efa\u56fe\u8dd1 dijkstra\uff0c\u56e0\u4e3a\u6709\u7279\u6b8a\u60c5\u51b5: \u82e5\u6709 \\((u,v),(v,w)\\) \u4e24\u8fb9\u989c\u8272\u76f8\u540c\uff0c\u800c\u6211\u4eec\u5bf9 \\((u,v)\\) \u4f7f\u7528\u4e86\u64cd\u4f5c 1\uff0c\u5bf9 \\((v,w)\\) \u4f7f\u7528\u4e86\u64cd\u4f5c 2\uff0c\u5219\u4f1a\u91cd\u590d\u8ba1\u7b97\u5bf9 \\((u,v)\\) \u64cd\u4f5c\u7684\u4ee3\u4ef7\u3002\u8003\u8651\u5efa\u865a\u70b9\u6765\u53bb\u6389\u8fd9\u4e2a\u4ee3\u4ef7\uff0c\u5bf9\u6bcf\u6761\u8fb9 \\((u,v,c)\\) \u5efa \\(u\\) \u5411 \\(v_c\\) \u7684\u8fb9\u6743\u4e3a \\(0\\) \u7684\u6709\u5411\u8fb9\uff0c\u5373\u7701\u53bb\u4e86\u64cd\u4f5c 1 \u7684\u4ee3\u4ef7\u3002 \\(v_c\\) \u5411 \\(w\\) \u8fde\u8fb9\u6743\u4e3a\u64cd\u4f5c 2 \u4ee3\u4ef7\u7684\u6709\u5411\u8fb9\uff0c\u8fd9\u6837 \\(u\\to v_c\\to w\\) \u76f8\u5f53\u4e8e\u8fdb\u884c\u4e86\u4e00\u6b21\u64cd\u4f5c 1 \u548c\u4e00\u6b21\u64cd\u4f5c 2\u3002 \u6ce8\u610f\u5230\u6211\u4eec\u5bf9\u6bcf\u6761\u8fb9\u90fd\u5efa\u4e00\u4e2a\u865a\u70b9\uff0c\u8fd9\u6837\u7684\u70b9\u6570\u662f \\(O(N+M)\\) \u7684\uff0c\u8fb9\u6570\u662f \\(O(M)\\) \u7684\uff0c\u53ef\u4ee5\u7528 dijkstra \u901a\u8fc7\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O((N+M)\\log(N+M))\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define pii pair<int,int> #define fi first #define se second #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } struct node { ll d ; int u , c ; friend bool operator < ( node a , node b ){ return a . d > b . d ; } }; priority_queue < node > Q ; const int N = 1e5 + 5 , M = 4e5 + 5 ; int n , m , tot , head [ N ]; struct E { int to , nxt , c , w ; } e [ M ]; map < int , ll > sum [ N ], dis [ N ]; map < int , vector < pii >> mp [ N ]; inline void addedge ( int u , int v , int c , int w ){ e [ ++ tot ] = { v , head [ u ], c , w }; head [ u ] = tot ; mp [ u ][ c ]. push_back ({ v , w }); sum [ u ][ c ] += w ; } inline void upd ( int u , int c , ll d ){ if ( ! dis [ u ]. count ( c ) || dis [ u ][ c ] > d ){ dis [ u ][ c ] = d , Q . push ({ d , u , c }); } } inline void dijkstra (){ upd ( 1 , 0 , 0 ); while ( ! Q . empty ()){ node tmp = Q . top (); Q . pop (); ll d = tmp . d ; int u = tmp . u , c = tmp . c ; if ( dis [ u ][ c ] != d ) continue ; if ( ! c ){ for ( int i = head [ u ]; i ; i = e [ i ]. nxt ){ int v = e [ i ]. to ; upd ( v , e [ i ]. c , d ); upd ( v , 0 , d + min (( ll ) e [ i ]. w , sum [ u ][ e [ i ]. c ] - e [ i ]. w )); } } else { if ( dis [ u ]. count ( c )){ for ( pii tmp : mp [ u ][ c ]){ int v = tmp . fi , w = tmp . se ; upd ( v , 0 , d + sum [ u ][ c ] - w ); } } } } } int main (){ n = read (), m = read (); rep ( i , 1 , m ){ int u = read (), v = read (), c = read (), w = read (); addedge ( u , v , c , w ), addedge ( v , u , c , w ); } dijkstra (); if ( dis [ n ]. count ( 0 )) printf ( \"%lld \\n \" , dis [ n ][ 0 ]); else puts ( \"-1\" ); return 0 ; } T5. \u30c0\u30f3\u30b8\u30e7\u30f3 3 \u00b6 \u9898\u610f\uff1a \u6709\u4e00\u4e2a \\(N+1\\) \u5c42\u7684\u5730\u7262\u548c \\(M\\) \u4e2a\u4eba\u3002\u73a9\u5bb6\u53ea\u80fd\u4ece\u4e00\u5c42\u79fb\u52a8\u5230\u4e0b\u4e00\u5c42\uff0c\u5bf9\u4e8e \\(1\\le i\\le N\\) \uff0c\u4ece\u7b2c \\(i\\) \u5c42\u79fb\u52a8\u5230\u7b2c \\(i+1\\) \u5c42\u9700\u8981\u80fd\u91cf \\(A_i\\) \u3002\u6bcf\u5c42\u8fd8\u6709\u6cbb\u7597\u6cc9\uff0c\u5728\u7b2c \\(i\\) \u5c42\u7684\u6cbb\u7597\u6cc9\u4e2d\uff0c\u73a9\u5bb6\u53ef\u4ee5\u82b1 \\(B_i\\) \u91d1\u5e01\u6765\u8d2d\u4e70\u4e00\u683c\u80fd\u91cf\u3002\u4f46\u662f\uff0c\u6bcf\u4e2a\u73a9\u5bb6\u90fd\u6709\u4e00\u4e2a\u80fd\u91cf\u4e0a\u9650\uff0c\u4f7f\u7528\u6cbb\u7597\u6cc9\u65e0\u6cd5\u4f7f\u80fd\u91cf\u8d85\u8fc7\u8be5\u4e0a\u9650\u3002 \u73b0\u5728\u544a\u8bc9\u4f60\u7b2c \\(j\\) \u4e2a\u73a9\u5bb6\u5728\u7b2c \\(S_j\\) \u5c42\uff0c\u8981\u53bb \\(T_j\\) \u5c42\u4e14\u4ed6\u521d\u59cb\u80fd\u91cf\u4e3a \\(0\\) \uff0c\u80fd\u91cf\u4e0a\u9650\u4e3a \\(U_j\\) \u3002\u5728\u8def\u4e0a\u4ed6\u7684\u80fd\u91cf\u4e0d\u80fd\u5c0f\u4e8e \\(0\\) \uff0c\u90a3\u4e48\u4ed6\u9700\u8981\u591a\u5c11\u91d1\u5e01\u5462\uff1f \u89e3\u6790\uff1a \u5148\u628a\u6bcf\u4e00\u5c42\u770b\u4f5c\u6570\u8f74\u4e0a\u7684\u70b9\uff0c\u5373\u7b2c\u4e00\u5c42\u770b\u4f5c\u6570\u8f74\u539f\u70b9\uff0c\u4e24\u5c42\u4e4b\u95f4\u8ddd\u79bb\u4e3a \\(A_i\\) \u3002\u4e0d\u96be\u60f3\u5230\u4e00\u4e2a\u8d2a\u5fc3\uff1a\u6bcf\u6b21\u53bb\u6700\u8fd1\u7684 \\(B\\) \u6bd4\u5f53\u524d\u70b9\u5c0f\uff08\u56de\u590d\u6cc9\u4fbf\u5b9c\uff09\u7684\u70b9\uff0c\u5e76\u5c06\u80fd\u91cf\u56de\u590d\u5230\u6070\u597d\u5230\u8fbe\u8fd9\u4e2a\u70b9\uff0c\u5426\u5219\u5c31\u56de\u6ee1\u80fd\u91cf\u3002 \u63a5\u4e0b\u6765\u5148\u770b\u5b50\u4efb\u52a1 \\(2\\) \uff0c\u5373\u5bf9\u6240\u6709\u4eba \\(U\\) \u4e3a\u5b9a\u503c\u7684\u60c5\u51b5\u3002\u6211\u4eec\u53ef\u4ee5\u7528\u5355\u8c03\u6808\u4ece\u540e\u5f80\u524d\u626b\u4e00\u904d\u505a\u51fa\u5bf9\u4e8e\u7b2c \\(i\\) \u4e2a\u70b9\u6700\u4f18\u7684\u8f6c\u79fb\u70b9\u3002\u8fd9\u6837\u53ef\u4ee5\u505a\u5230 \\(O(N\\log N)\\) \u3002 \u518d\u770b\u5b50\u4efb\u52a1 \\(3\\) \uff0c \\(T_i=N+1\\) \u5373\u6240\u6709\u4eba\u7684\u7ec8\u70b9\u76f8\u540c\uff0c\u663e\u7136\u53ef\u4ee5\u5bf9\u8d77\u70b9\u6392\u5e8f\u540e\u5012\u7740\u626b\u4e00\u904d\u5904\u7406\u7b54\u6848\u3002\u6ce8\u610f\u5230\u4ecd\u7136\u53ef\u4ee5\u7528\u5355\u8c03\u6808\u7ef4\u62a4\u4ef7\u683c\uff0c\u5982\u679c\u5f53\u524d\u7684\u4ef7\u683c\u66f4\u4fbf\u5b9c\uff0c\u5c31\u5f39\u51fa\u6808\u9876\u5e76\u4e14\u8003\u8651\u662f\u5426\u80fd\u5728\u5f53\u524d\u70b9\u4e70\u80fd\u91cf\u3002 \u7b54\u6848\u663e\u7136\u968f\u7740 \\(U\\) \u589e\u5927\u800c\u51cf\u5c0f\uff0c\u4e14\u53ef\u4ee5\u628a\u5728 \\(i\\) \u70b9\u56de\u590d\u770b\u4f5c\u659c\u7387\u4e3a \\(B_i\\) \u7684\u4e00\u6b21\u51fd\u6570\uff0c\u5219\u672c\u8d28\u4e0a\u4e3a\u82e5\u5e72\u4e2a\u5206\u6bb5\u51fd\u6570\u7684\u548c\u3002\u79bb\u6563\u5316 \\(U\\) \u5373\u53ef\u7528\u6811\u72b6\u6570\u7ec4\u7ef4\u62a4\u659c\u7387\u548c\u622a\u8ddd\u3002 \u6700\u540e\uff0c\u5982\u679c\u627e\u51fa \\([S,T]\\) \u4e2d\u79bb \\(T\\) \u8ddd\u79bb \\(\\le U\\) \u7684\u6700\u5c0f\u4f4d\u7f6e \\(mid\\) \uff0c\u8bbe \\(f(S,T)\\) \u4e3a \\(S\\) \u5230 \\(T\\) \u7684\u6700\u5c0f\u4ee3\u4ef7\uff0c\u6709\uff1a f(S,T)=f(S,N+1)-f(T,N+1)-(T-mid)\\times B_{mid} \u8fd9\u6837\u5c31\u89e3\u51b3\u4e86\u539f\u9898\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N\\log N)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define fi first #define se second #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 ; int n , m , a [ N ], b [ N ]; int lg [ N ], lsh [ N ], top , stk [ N ], tp ; ll x [ N ], ans [ N ]; pii mx [ N ][ 20 ], mn [ N ][ 20 ]; struct BIT { ll c1 [ N ], c2 [ N ]; void add ( ll x , ll y , ll z ){ int i = lower_bound ( lsh + 1 , lsh + top + 1 , x ) - lsh ; for (; i <= n ; i += i &- i ) c1 [ i ] += y , c2 [ i ] += z ; } ll sum ( ll x ){ ll res1 = 0 , res2 = 0 ; int i = lower_bound ( lsh + 1 , lsh + top + 1 , x ) - lsh ; for (; i ; i -= i &- i ) res1 += c1 [ i ], res2 += c2 [ i ]; return res1 * x + res2 ; } } T ; struct query { int u , id , t ;}; vector < query > Q [ N ]; inline pii Mx ( int l , int r ){ int L = lg [ r - l + 1 ]; return max ( mx [ l ][ L ], mx [ r - ( 1 << L ) + 1 ][ L ]); } inline pii Mn ( int l , int r ){ int L = lg [ r - l + 1 ]; return min ( mn [ l ][ L ], mn [ r - ( 1 << L ) + 1 ][ L ]); } int main (){ //freopen(\"02-01.in\",\"r\",stdin); //freopen(\"tes.out\",\"w\",stdout); n = read (), m = read (); lg [ 0 ] = -1 ; rep ( i , 1 , n ){ a [ i ] = read (), mx [ i ][ 0 ] = { a [ i ], i }; x [ i ] = x [ i -1 ] + a [ i ]; lg [ i ] = lg [ i >> 1 ] + 1 ; } per ( i , n + 1 , 1 ) x [ i ] = x [ i -1 ]; rep ( i , 1 , n ){ b [ i ] = read (), mn [ i ][ 0 ] = { b [ i ], i }; } rep ( j , 1 , 20 ) rep ( i , 1 , n - ( 1 << j ) + 1 ){ mx [ i ][ j ] = max ( mx [ i ][ j -1 ], mx [ i + ( 1 << ( j -1 ))][ j -1 ]); mn [ i ][ j ] = min ( mn [ i ][ j -1 ], mn [ i + ( 1 << ( j -1 ))][ j -1 ]); } rep ( i , 1 , m ){ int s = read (), t = read (), u = read (); if ( Mx ( s , t -1 ). fi > u ){ ans [ i ] = -1 ; continue ; } ll l = max (( ll )( lower_bound ( x + 1 , x + n + 1 , x [ t ] - u ) - x ),( ll ) s ); int mid = Mn ( l , t -1 ). se ; assert ( mid < t ); ans [ i ] = ( x [ t ] - x [ mid ]) * b [ mid ]; Q [ s ]. push_back ({ u , i , 1 }), Q [ mid ]. push_back ({ u , i , -1 }); lsh [ ++ top ] = u ; } sort ( lsh + 1 , lsh + top + 1 ); top = unique ( lsh + 1 , lsh + top + 1 ) - lsh -1 ; stk [ 0 ] = n + 1 ; per ( i , n , 1 ){ while ( b [ stk [ tp ]] > b [ i ]){ int u = stk [ tp ], v = stk [ tp -1 ]; tp -- ; ll L0 = x [ u ] - x [ i ], L1 = x [ v ] - x [ i ]; T . add ( L0 , - b [ u ], L0 * b [ u ]); T . add ( L1 , b [ u ], - L1 * b [ u ]); } ll L0 = x [ stk [ tp ]] - x [ i ]; T . add ( 0 , b [ i ], 0 ); T . add ( L0 , - b [ i ], L0 * b [ i ]); stk [ ++ tp ] = i ; for ( auto q : Q [ i ]) ans [ q . id ] += 1l l * q . t * T . sum ( q . u ); } rep ( i , 1 , m ) printf ( \"%lld \\n \" , ans [ i ]); return 0 ; }","title":"JOI 2021 Final"},{"location":"%E7%AC%94%E8%AE%B0/JOI%202021%20Final/#joi-2021-final","text":"","title":"JOI 2021 Final"},{"location":"%E7%AC%94%E8%AE%B0/JOI%202021%20Final/#t1-4","text":"\u9898\u610f\uff1a \u7ed9\u4e00\u4e2a\u957f\u5ea6\u4e3a \\(N\\) \u7684\u6570\u7ec4 \\(A_i\\) \uff0c\u6bcf\u6b21\u64cd\u4f5c\u53ef\u4ee5\u5c06\u4efb\u610f\u4e00\u6bb5\u533a\u95f4 \\([l,r]\\) \u4e2d\u7684\u6570 \\(+1\\) \u3002\u8981\u6c42\u82e5\u5e72\u6b21\u64cd\u4f5c\u540e\u5f97\u5230\u7684\u5e8f\u5217 \\(B_i\\) \u6ee1\u8db3\u5b58\u5728\u4e00\u4e2a \\(k\\in[1,N]\\) \uff0c\u4f7f\u5f97 \\([1,k]\\) \u7684\u6570\u4e25\u683c\u9012\u589e\uff0c \\([k+1,N]\\) \u7684\u6570\u4e25\u683c\u9012\u51cf\u3002\u6700\u5c0f\u5316\u64cd\u4f5c\u6b21\u6570\u3002 \u89e3\u6790\uff1a \u53ea\u6709\u533a\u95f4\u64cd\u4f5c\uff0c\u5e76\u4e14\u6700\u540e\u5f97\u5230\u7684\u6570\u7ec4\u6ee1\u8db3\u4e00\u4e9b\u5355\u8c03\u6027\uff0c\u6211\u4eec\u53ef\u4ee5\u60f3\u5230\u7528\u5dee\u5206\u4f18\u5316\u3002\u8fd9\u6837\u6bcf\u4e00\u4e2a\u64cd\u4f5c\u5c31\u53d8\u6210\u5c06\u5dee\u5206\u6570\u7ec4 \\(d\\) \u4e2d\u7684 \\(d_l\\) \u52a0\u4e00\uff0c \\(d_{r+1}\\) \u51cf\u4e00\u3002\u6700\u540e\u7684\u5e8f\u5217\u6ee1\u8db3\u4e00\u6bb5 \\(d_i>0\\) \u63a5\u4e00\u6bb5 \\(d_i<0\\) \uff0c\u53ef\u4ee5\u7528\u524d\u7f00\u548c\u7b97\u51fa\u4ee4\u4e00\u6bb5\u533a\u95f4\u7684 \\(d_i\\) \u6ee1\u8db3\u6761\u4ef6\u7684\u64cd\u4f5c\u6b21\u6570\uff0c\u540e\u9762\u679a\u4e3e\u65ad\u70b9 \\(k\\) \u5373\u53ef\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define fi first #define se second #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 ; int n , a [ N ], b [ N ]; ll f [ N ], g [ N ]; int main (){ n = read (); rep ( i , 1 , n ) a [ i ] = read (); rep ( i , 1 , n ) b [ i ] = a [ i ] - a [ i -1 ]; rep ( i , 2 , n ){ if ( b [ i ] <= 0 ){ f [ i ] = f [ i -1 ] - b [ i ] + 1 ; } else f [ i ] = f [ i -1 ]; } per ( i , n , 2 ){ if ( b [ i ] >= 0 ){ g [ i ] = g [ i + 1 ] + b [ i ] + 1 ; } else g [ i ] = g [ i + 1 ]; } ll ans = 1e18 ; rep ( i , 1 , n ) ans = min ( ans , max ( f [ i ], g [ i + 1 ])); printf ( \"%lld \\n \" , ans ); return 0 ; }","title":"T1. \u3068\u3066\u3082\u305f\u306e\u3057\u3044\u5bb6\u5ead\u83dc\u5712 4"},{"location":"%E7%AC%94%E8%AE%B0/JOI%202021%20Final/#t2","text":"\u9898\u610f\uff1a \u4e00\u4e2a\u6570\u8f74\u4e0a\u6709 \\(N\\) \u4e2a\u8d28\u91cf\u4e3a \\(0\\) \u7684\u96ea\u7403\uff0c\u6700\u521d\u7b2c \\(i\\) \u4e2a\u96ea\u7403\u7684\u5750\u6807\u4e3a \\(X_i\\) \uff0c\u6570\u8f74\u4e0a\u8986\u76d6\u4e86\u96ea\u3002\u6709 \\(Q\\) \u5929\u7684\u5f3a\u98ce\uff0c\u7b2c \\(j\\) \u5929\u7684\u98ce\u4f1a\u4f7f\u6240\u6709\u96ea\u7403\u540c\u65f6\u79fb\u52a8 \\(W_j\\) \u8ddd\u79bb\u3002 \u5982\u679c\u6709\u96ea\u7403\u6eda\u8fc7\u4e00\u4e2a\u88ab\u96ea\u8986\u76d6\u7684\u533a\u95f4 \\([a,a+1]\\) \uff0c\u533a\u95f4\u4e0a\u7684\u96ea\u4f1a\u6d88\u5931\uff0c\u540c\u65f6\u96ea\u7403\u7684\u8d28\u91cf\u589e\u52a0 \\(1\\) \u3002\u8ba1\u7b97\u5728 \\(Q\\) \u5929\u540e\u6bcf\u4e2a\u96ea\u7403\u7684\u8d28\u91cf\u3002 \u89e3\u6790\uff1a \u6240\u6709\u96ea\u7403\u4e00\u8d77\u5e73\u79fb\uff0c\u6240\u4ee5\u4efb\u610f\u4e00\u4e2a\u96ea\u7403\u90fd\u65e0\u6cd5\u8de8\u8d8a\u76f8\u90bb\u7684\u96ea\u7403\u53bb\u79ef\u96ea\uff0c\u800c\u5bf9\u4e00\u4e2a\u96ea\u7403\u8d21\u732e\u96ea\u7684\u533a\u95f4\u5fc5\u7136\u8fde\u7eed\u3002\u4e8e\u662f\u6211\u4eec\u8003\u8651\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u96ea\u7403\uff0c\u8ba1\u7b97\u5b83\u6eda\u5230\u96ea\u7684\u6700\u5de6\u548c\u6700\u53f3\u7aef\u70b9 \\(l_i,r_i\\) \u3002 \u5177\u4f53\u5730\uff0c\u6211\u4eec\u53d1\u73b0\u4e24\u4e2a\u96ea\u7403\u95f4\u7684\u8ddd\u79bb\u8d8a\u77ed\uff0c\u91cc\u9762\u7684\u96ea\u4f1a\u5148\u88ab\u6eda\u5b8c\uff0c\u53ef\u4ee5\u628a\u8fd9\u4e9b\u533a\u95f4\u957f\u5ea6\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\u3002\u8bb0\u5f55\u5411\u5de6\u548c\u5411\u53f3\u7684\u6700\u5927\u4f4d\u79fb \\(L,R\\) \uff0c\u82e5\u5f53\u524d\u7684\u98ce\u529b\u66f4\u65b0\u4e86\u8fd9\u4e2a\u4f4d\u79fb\uff0c\u4f7f\u5f97 \\(L+R\\) \u8d85\u8fc7\u4e86\u67d0\u4e2a\u533a\u95f4\u7684\u5927\u5c0f\uff0c\u5c31\u53ef\u4ee5\u7ef4\u62a4 \\(r_i,l_{i+1}\\) \uff0c\u5373\u4e24\u70b9\u5728\u533a\u95f4\u5185\u5206\u96ea\u7684\u4f4d\u7f6e\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N\\log N+Q)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<ll,int> #define fi first #define se second #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 ; ll n , q , a [ N ]; ll l [ N ], r [ N ], w , x , L , R ; pii d [ N ]; int main (){ n = read (), q = read (); rep ( i , 1 , n ){ a [ i ] = read (); l [ i ] = r [ i ] = -1 ; } rep ( i , 1 , n -1 ) d [ i ] = { a [ i + 1 ] - a [ i ], i }; sort ( d + 1 , d + n ); int now = 1 ; while ( q -- ){ x = read (); w += x ; if ( w > 0 ) R = max ( R , w ); else L = max ( L , - w ); while ( L + R >= d [ now ]. fi && now < n ){ int i = d [ now ]. se ; if ( w > 0 ) r [ i ] = a [ i + 1 ] - L ; else r [ i ] = a [ i ] + R ; l [ i + 1 ] = r [ i ]; ++ now ; } } rep ( i , 1 , n ){ if ( l [ i ] == -1 ) l [ i ] = a [ i ] - L ; if ( r [ i ] == -1 ) r [ i ] = a [ i ] + R ; } rep ( i , 1 , n ) printf ( \"%lld \\n \" , r [ i ] - l [ i ]); return 0 ; }","title":"T2. \u96ea\u7389"},{"location":"%E7%AC%94%E8%AE%B0/JOI%202021%20Final/#t3","text":"\u9898\u610f\uff1a \u7ed9\u4e00\u4e2a \\(1\\sim N\\) \u7684\u6392\u5217 \\(a\\) \uff0c\u8981\u6c42\u7ecf\u8fc7\u82e5\u5e72\u6b21\u4ea4\u6362 \\(a_i,a_{i+1}\\) \u540e\uff0c\u5bf9\u6240\u6709 \\(i\\) \u5747\u6ee1\u8db3 \\(a_i<a_{i+1}+2\\) \u3002\u6c42\u6700\u5c11\u7684\u4ea4\u6362\u6b21\u6570\u3002 \u89e3\u6790\uff1a \u521a\u5f00\u59cb\u5f88\u6ca1\u6709\u5934\u7eea\uff0c\u4e0d\u59a8\u770b\u770b\u64cd\u4f5c\u5b8c\u540e\u7684\u5e8f\u5217\u957f\u4ec0\u4e48\u6837\u5b50\u3002\u7531 \\(a_i<a_{i+1}+2\\) \u5f97 \\(a_i\\le a_{i+1}+1\\) \uff0c\u4e5f\u5c31\u662f\u4e00\u4e2a\u6570\u6700\u591a\u6bd4\u540e\u9762\u7684\u6570\u5927 \\(1\\) \u3002\u90a3\u4e48\u53ef\u4ee5\u628a\u6700\u7ec8\u7684\u5e8f\u5217\u5206\u6210\u82e5\u5e72\u4e2a\u4e0b\u964d\u5e8f\u5217\uff0c\u5373\u5206\u4e3a \\(k\\) \u4e2a\u533a\u95f4 \\([l_1,r_1],[l_2,r_2],\\dots,[l_k,r_k]\\) \u3002\u4e0d\u96be\u53d1\u73b0 \\([l_i,r_i]\\) \u4e2d\u7684\u6570\u53ea\u80fd\u662f \\(r_i \\sim l_i\\) \u3002 \u8003\u8651\u5bf9\u4e8e\u8fd9\u6837\u7684\u5408\u6cd5\u5e8f\u5217\u6700\u5c0f\u64cd\u4f5c\u6b21\u6570\u662f\u4ec0\u4e48\uff0c\u8bbe\u539f\u6392\u5217\u4e2d \\(i\\) \u5728 \\(p_i\\) \u4f4d\u7f6e\uff0c\u5219\u65b0\u5e8f\u5217\u5230\u539f\u5e8f\u5217\u7684\u64cd\u4f5c\u6b21\u6570\u548c\u9006\u5e8f\u5bf9\u6709\u5173\uff0c\u5373\uff1a \\sum_{i=1}^n\\sum_{j=i+1}^n[p_{a_i}>p_{a_j}] \u8bbe \\(f_i\\) \u4e3a\u5c06\u524d \\(i\\) \u4e2a\u6570\u64cd\u4f5c\u6210\u5408\u6cd5\u5e8f\u5217\u7684\u6700\u5c0f\u4ee3\u4ef7\uff0c\u679a\u4e3e\u6700\u540e\u4e00\u4e2a\u533a\u95f4\u7684\u8d77\u70b9\u53ef\u5f97 \\( \\(f_i=\\min_{1\\le j\\le i}\\{f_{j-1}+\\operatorname{calc}(j,i)\\}\\) \\) \uff0c\u63a5\u4e0b\u6765\u53ea\u7528\u8003\u8651\u5982\u4f55\u5feb\u901f\u8ba1\u7b97 \\(\\operatorname{calc}\\) \u51fd\u6570\u3002 \u5bf9\u4e8e \\(k\\in[j,i]\\) \uff0c\u6211\u4eec\u8ba1\u7b97\u5b83\u4e0e \\([1,j-1]\\) \u4e2d\u7684\u9006\u5e8f\u5bf9\u6570\u548c\u5b83\u4e0e\u81ea\u5df1\u533a\u95f4\u5185\u7684\u9006\u5e8f\u5bf9\u6570\u3002\u77e5\u9053\u5728\u65b0\u5e8f\u5217\u4e2d \\(x<j,k<x\\le i\\) \u5728\u5b83\u524d\u9762\uff0c \\(j\\le x<k\\) \u5728\u5b83\u540e\u9762\u3002\u5012\u5e8f\u679a\u4e3e \\(j\\) \uff0c\u9006\u5e8f\u5bf9\u6570\u53ef\u4ee5\u5f00\u4e24\u4e2a\u6811\u72b6\u6570\u7ec4\u4f18\u5316\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N^2\\log N)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define fi first #define se second #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 , inf = 1e9 ; int n , p [ N ], f [ N ], A [ N ], B [ N ]; void I ( int * t , int x , int val ){ for (; x <= n ; x += x &- x ) t [ x ] += val ; } int Q ( int * t , int x ){ int res = 0 ; for (; x ; x -= x &- x ) res += t [ x ]; return res ; } int main (){ n = read (); rep ( i , 1 , n ){ int x = read (); p [ x ] = i ; } rep ( i , 1 , n ){ //printf(\"i=%d:\\n\",i); f [ i ] = inf ; int sum = 0 ; memset ( B , 0 , sizeof ( B )); I ( A , p [ i ], 1 ); per ( j , i , 1 ){ sum += i - Q ( A , p [ j ]) - Q ( B , p [ j ]); //printf(\"j=%d: sum=%d,f=%d\\n\",j,sum,f[j-1]); f [ i ] = min ( f [ i ], f [ j -1 ] + sum ); I ( B , p [ j ], 1 ); } } printf ( \"%d \\n \" , f [ n ]); return 0 ; }","title":"T3. \u96c6\u5408\u5199\u771f"},{"location":"%E7%AC%94%E8%AE%B0/JOI%202021%20Final/#t4","text":"\u9898\u610f\uff1a \u7ed9\u5b9a\u4e00\u4e2a \\(N\\) \u4e2a\u70b9\uff0c \\(M\\) \u6761\u8fb9\u7684\u65e0\u5411\u56fe\uff0c\u7b2c \\(i\\) \u6761\u8fb9\u7684\u989c\u8272\u4e3a \\(C_i\\in[1,M]\\) \uff0c\u4f46\u4e0d\u4fdd\u8bc1 \\(C_i\\) \u4e92\u4e0d\u76f8\u7b49\u3002 \u6709\u4e00\u4e2a\u667a\u80fd\u673a\u5668\u4eba\uff0c\u4f60\u544a\u8bc9\u8fd9\u4e2a\u673a\u5668\u4eba\u4e00\u4e2a\u989c\u8272\uff0c\u5982\u679c\u5b83\u5f53\u524d\u6240\u5728\u8282\u70b9\u6709\u4e14\u4ec5\u6709\u4e00\u6761\u8fd9\u79cd\u989c\u8272\u7684\u8fb9\uff0c\u5b83\u5c31\u4f1a\u8d70\u8fd9\u6761\u8def\uff0c\u5426\u5219\u5b83\u4f1a\u505c\u7559\u5728\u539f\u5730\u3002 \u73b0\u5728\u8fd9\u4e2a\u673a\u5668\u4eba\u4ece\u70b9 \\(1\\) \u51fa\u53d1\u60f3\u79fb\u52a8\u5230\u70b9 \\(N\\) \uff0c\u4f46\u662f\u4f60\u4e0d\u4e00\u5b9a\u80fd\u901a\u8fc7\u4ec5\u4ec5\u544a\u8bc9\u5b83\u989c\u8272\u6765\u4f7f\u5b83\u8d70\u5230 \\(N\\) \u3002\u56e0\u6b64\u4f60\u53ef\u4ee5 \u9884\u5148 \u6539\u53d8\u4e00\u4e9b\u8fb9\u7684\u989c\u8272\uff0c\u6539\u53d8\u7b2c \\(i\\) \u6761\u8fb9\u7684\u4ee3\u4ef7\u662f \\(P_i\\) \u3002\u6c42\u6700\u5c0f\u4ee3\u4ef7\uff0c\u5982\u65e0\u89e3\u5219\u8f93\u51fa \\(-1\\) \u3002 \u89e3\u6790\uff1a \u5982\u679c\u5f53\u524d\u8fb9\u552f\u4e00\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u8d70\u3002\u5426\u5219\u5982\u679c\u6211\u4eec\u60f3\u8d70\u4e00\u6761\u8fb9\uff0c\u53ef\u9009\u7684\u64cd\u4f5c\u53ea\u6709\u4e24\u79cd\uff1a \u628a\u5b83\u7684\u989c\u8272\u6362\u6210\u65b0\u989c\u8272\u3002 \u6539\u53d8\u6240\u6709\u548c\u5b83\u989c\u8272\u76f8\u540c\u7684\u8fb9\u7684\u989c\u8272\u3002 \u53d1\u73b0\u597d\u50cf\u5e76\u4e0d\u80fd\u8fd9\u6837\u5efa\u56fe\u8dd1 dijkstra\uff0c\u56e0\u4e3a\u6709\u7279\u6b8a\u60c5\u51b5: \u82e5\u6709 \\((u,v),(v,w)\\) \u4e24\u8fb9\u989c\u8272\u76f8\u540c\uff0c\u800c\u6211\u4eec\u5bf9 \\((u,v)\\) \u4f7f\u7528\u4e86\u64cd\u4f5c 1\uff0c\u5bf9 \\((v,w)\\) \u4f7f\u7528\u4e86\u64cd\u4f5c 2\uff0c\u5219\u4f1a\u91cd\u590d\u8ba1\u7b97\u5bf9 \\((u,v)\\) \u64cd\u4f5c\u7684\u4ee3\u4ef7\u3002\u8003\u8651\u5efa\u865a\u70b9\u6765\u53bb\u6389\u8fd9\u4e2a\u4ee3\u4ef7\uff0c\u5bf9\u6bcf\u6761\u8fb9 \\((u,v,c)\\) \u5efa \\(u\\) \u5411 \\(v_c\\) \u7684\u8fb9\u6743\u4e3a \\(0\\) \u7684\u6709\u5411\u8fb9\uff0c\u5373\u7701\u53bb\u4e86\u64cd\u4f5c 1 \u7684\u4ee3\u4ef7\u3002 \\(v_c\\) \u5411 \\(w\\) \u8fde\u8fb9\u6743\u4e3a\u64cd\u4f5c 2 \u4ee3\u4ef7\u7684\u6709\u5411\u8fb9\uff0c\u8fd9\u6837 \\(u\\to v_c\\to w\\) \u76f8\u5f53\u4e8e\u8fdb\u884c\u4e86\u4e00\u6b21\u64cd\u4f5c 1 \u548c\u4e00\u6b21\u64cd\u4f5c 2\u3002 \u6ce8\u610f\u5230\u6211\u4eec\u5bf9\u6bcf\u6761\u8fb9\u90fd\u5efa\u4e00\u4e2a\u865a\u70b9\uff0c\u8fd9\u6837\u7684\u70b9\u6570\u662f \\(O(N+M)\\) \u7684\uff0c\u8fb9\u6570\u662f \\(O(M)\\) \u7684\uff0c\u53ef\u4ee5\u7528 dijkstra \u901a\u8fc7\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O((N+M)\\log(N+M))\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define pii pair<int,int> #define fi first #define se second #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } struct node { ll d ; int u , c ; friend bool operator < ( node a , node b ){ return a . d > b . d ; } }; priority_queue < node > Q ; const int N = 1e5 + 5 , M = 4e5 + 5 ; int n , m , tot , head [ N ]; struct E { int to , nxt , c , w ; } e [ M ]; map < int , ll > sum [ N ], dis [ N ]; map < int , vector < pii >> mp [ N ]; inline void addedge ( int u , int v , int c , int w ){ e [ ++ tot ] = { v , head [ u ], c , w }; head [ u ] = tot ; mp [ u ][ c ]. push_back ({ v , w }); sum [ u ][ c ] += w ; } inline void upd ( int u , int c , ll d ){ if ( ! dis [ u ]. count ( c ) || dis [ u ][ c ] > d ){ dis [ u ][ c ] = d , Q . push ({ d , u , c }); } } inline void dijkstra (){ upd ( 1 , 0 , 0 ); while ( ! Q . empty ()){ node tmp = Q . top (); Q . pop (); ll d = tmp . d ; int u = tmp . u , c = tmp . c ; if ( dis [ u ][ c ] != d ) continue ; if ( ! c ){ for ( int i = head [ u ]; i ; i = e [ i ]. nxt ){ int v = e [ i ]. to ; upd ( v , e [ i ]. c , d ); upd ( v , 0 , d + min (( ll ) e [ i ]. w , sum [ u ][ e [ i ]. c ] - e [ i ]. w )); } } else { if ( dis [ u ]. count ( c )){ for ( pii tmp : mp [ u ][ c ]){ int v = tmp . fi , w = tmp . se ; upd ( v , 0 , d + sum [ u ][ c ] - w ); } } } } } int main (){ n = read (), m = read (); rep ( i , 1 , m ){ int u = read (), v = read (), c = read (), w = read (); addedge ( u , v , c , w ), addedge ( v , u , c , w ); } dijkstra (); if ( dis [ n ]. count ( 0 )) printf ( \"%lld \\n \" , dis [ n ][ 0 ]); else puts ( \"-1\" ); return 0 ; }","title":"T4. \u30ed\u30dc\u30c3\u30c8"},{"location":"%E7%AC%94%E8%AE%B0/JOI%202021%20Final/#t5-3","text":"\u9898\u610f\uff1a \u6709\u4e00\u4e2a \\(N+1\\) \u5c42\u7684\u5730\u7262\u548c \\(M\\) \u4e2a\u4eba\u3002\u73a9\u5bb6\u53ea\u80fd\u4ece\u4e00\u5c42\u79fb\u52a8\u5230\u4e0b\u4e00\u5c42\uff0c\u5bf9\u4e8e \\(1\\le i\\le N\\) \uff0c\u4ece\u7b2c \\(i\\) \u5c42\u79fb\u52a8\u5230\u7b2c \\(i+1\\) \u5c42\u9700\u8981\u80fd\u91cf \\(A_i\\) \u3002\u6bcf\u5c42\u8fd8\u6709\u6cbb\u7597\u6cc9\uff0c\u5728\u7b2c \\(i\\) \u5c42\u7684\u6cbb\u7597\u6cc9\u4e2d\uff0c\u73a9\u5bb6\u53ef\u4ee5\u82b1 \\(B_i\\) \u91d1\u5e01\u6765\u8d2d\u4e70\u4e00\u683c\u80fd\u91cf\u3002\u4f46\u662f\uff0c\u6bcf\u4e2a\u73a9\u5bb6\u90fd\u6709\u4e00\u4e2a\u80fd\u91cf\u4e0a\u9650\uff0c\u4f7f\u7528\u6cbb\u7597\u6cc9\u65e0\u6cd5\u4f7f\u80fd\u91cf\u8d85\u8fc7\u8be5\u4e0a\u9650\u3002 \u73b0\u5728\u544a\u8bc9\u4f60\u7b2c \\(j\\) \u4e2a\u73a9\u5bb6\u5728\u7b2c \\(S_j\\) \u5c42\uff0c\u8981\u53bb \\(T_j\\) \u5c42\u4e14\u4ed6\u521d\u59cb\u80fd\u91cf\u4e3a \\(0\\) \uff0c\u80fd\u91cf\u4e0a\u9650\u4e3a \\(U_j\\) \u3002\u5728\u8def\u4e0a\u4ed6\u7684\u80fd\u91cf\u4e0d\u80fd\u5c0f\u4e8e \\(0\\) \uff0c\u90a3\u4e48\u4ed6\u9700\u8981\u591a\u5c11\u91d1\u5e01\u5462\uff1f \u89e3\u6790\uff1a \u5148\u628a\u6bcf\u4e00\u5c42\u770b\u4f5c\u6570\u8f74\u4e0a\u7684\u70b9\uff0c\u5373\u7b2c\u4e00\u5c42\u770b\u4f5c\u6570\u8f74\u539f\u70b9\uff0c\u4e24\u5c42\u4e4b\u95f4\u8ddd\u79bb\u4e3a \\(A_i\\) \u3002\u4e0d\u96be\u60f3\u5230\u4e00\u4e2a\u8d2a\u5fc3\uff1a\u6bcf\u6b21\u53bb\u6700\u8fd1\u7684 \\(B\\) \u6bd4\u5f53\u524d\u70b9\u5c0f\uff08\u56de\u590d\u6cc9\u4fbf\u5b9c\uff09\u7684\u70b9\uff0c\u5e76\u5c06\u80fd\u91cf\u56de\u590d\u5230\u6070\u597d\u5230\u8fbe\u8fd9\u4e2a\u70b9\uff0c\u5426\u5219\u5c31\u56de\u6ee1\u80fd\u91cf\u3002 \u63a5\u4e0b\u6765\u5148\u770b\u5b50\u4efb\u52a1 \\(2\\) \uff0c\u5373\u5bf9\u6240\u6709\u4eba \\(U\\) \u4e3a\u5b9a\u503c\u7684\u60c5\u51b5\u3002\u6211\u4eec\u53ef\u4ee5\u7528\u5355\u8c03\u6808\u4ece\u540e\u5f80\u524d\u626b\u4e00\u904d\u505a\u51fa\u5bf9\u4e8e\u7b2c \\(i\\) \u4e2a\u70b9\u6700\u4f18\u7684\u8f6c\u79fb\u70b9\u3002\u8fd9\u6837\u53ef\u4ee5\u505a\u5230 \\(O(N\\log N)\\) \u3002 \u518d\u770b\u5b50\u4efb\u52a1 \\(3\\) \uff0c \\(T_i=N+1\\) \u5373\u6240\u6709\u4eba\u7684\u7ec8\u70b9\u76f8\u540c\uff0c\u663e\u7136\u53ef\u4ee5\u5bf9\u8d77\u70b9\u6392\u5e8f\u540e\u5012\u7740\u626b\u4e00\u904d\u5904\u7406\u7b54\u6848\u3002\u6ce8\u610f\u5230\u4ecd\u7136\u53ef\u4ee5\u7528\u5355\u8c03\u6808\u7ef4\u62a4\u4ef7\u683c\uff0c\u5982\u679c\u5f53\u524d\u7684\u4ef7\u683c\u66f4\u4fbf\u5b9c\uff0c\u5c31\u5f39\u51fa\u6808\u9876\u5e76\u4e14\u8003\u8651\u662f\u5426\u80fd\u5728\u5f53\u524d\u70b9\u4e70\u80fd\u91cf\u3002 \u7b54\u6848\u663e\u7136\u968f\u7740 \\(U\\) \u589e\u5927\u800c\u51cf\u5c0f\uff0c\u4e14\u53ef\u4ee5\u628a\u5728 \\(i\\) \u70b9\u56de\u590d\u770b\u4f5c\u659c\u7387\u4e3a \\(B_i\\) \u7684\u4e00\u6b21\u51fd\u6570\uff0c\u5219\u672c\u8d28\u4e0a\u4e3a\u82e5\u5e72\u4e2a\u5206\u6bb5\u51fd\u6570\u7684\u548c\u3002\u79bb\u6563\u5316 \\(U\\) \u5373\u53ef\u7528\u6811\u72b6\u6570\u7ec4\u7ef4\u62a4\u659c\u7387\u548c\u622a\u8ddd\u3002 \u6700\u540e\uff0c\u5982\u679c\u627e\u51fa \\([S,T]\\) \u4e2d\u79bb \\(T\\) \u8ddd\u79bb \\(\\le U\\) \u7684\u6700\u5c0f\u4f4d\u7f6e \\(mid\\) \uff0c\u8bbe \\(f(S,T)\\) \u4e3a \\(S\\) \u5230 \\(T\\) \u7684\u6700\u5c0f\u4ee3\u4ef7\uff0c\u6709\uff1a f(S,T)=f(S,N+1)-f(T,N+1)-(T-mid)\\times B_{mid} \u8fd9\u6837\u5c31\u89e3\u51b3\u4e86\u539f\u9898\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N\\log N)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define fi first #define se second #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 ; int n , m , a [ N ], b [ N ]; int lg [ N ], lsh [ N ], top , stk [ N ], tp ; ll x [ N ], ans [ N ]; pii mx [ N ][ 20 ], mn [ N ][ 20 ]; struct BIT { ll c1 [ N ], c2 [ N ]; void add ( ll x , ll y , ll z ){ int i = lower_bound ( lsh + 1 , lsh + top + 1 , x ) - lsh ; for (; i <= n ; i += i &- i ) c1 [ i ] += y , c2 [ i ] += z ; } ll sum ( ll x ){ ll res1 = 0 , res2 = 0 ; int i = lower_bound ( lsh + 1 , lsh + top + 1 , x ) - lsh ; for (; i ; i -= i &- i ) res1 += c1 [ i ], res2 += c2 [ i ]; return res1 * x + res2 ; } } T ; struct query { int u , id , t ;}; vector < query > Q [ N ]; inline pii Mx ( int l , int r ){ int L = lg [ r - l + 1 ]; return max ( mx [ l ][ L ], mx [ r - ( 1 << L ) + 1 ][ L ]); } inline pii Mn ( int l , int r ){ int L = lg [ r - l + 1 ]; return min ( mn [ l ][ L ], mn [ r - ( 1 << L ) + 1 ][ L ]); } int main (){ //freopen(\"02-01.in\",\"r\",stdin); //freopen(\"tes.out\",\"w\",stdout); n = read (), m = read (); lg [ 0 ] = -1 ; rep ( i , 1 , n ){ a [ i ] = read (), mx [ i ][ 0 ] = { a [ i ], i }; x [ i ] = x [ i -1 ] + a [ i ]; lg [ i ] = lg [ i >> 1 ] + 1 ; } per ( i , n + 1 , 1 ) x [ i ] = x [ i -1 ]; rep ( i , 1 , n ){ b [ i ] = read (), mn [ i ][ 0 ] = { b [ i ], i }; } rep ( j , 1 , 20 ) rep ( i , 1 , n - ( 1 << j ) + 1 ){ mx [ i ][ j ] = max ( mx [ i ][ j -1 ], mx [ i + ( 1 << ( j -1 ))][ j -1 ]); mn [ i ][ j ] = min ( mn [ i ][ j -1 ], mn [ i + ( 1 << ( j -1 ))][ j -1 ]); } rep ( i , 1 , m ){ int s = read (), t = read (), u = read (); if ( Mx ( s , t -1 ). fi > u ){ ans [ i ] = -1 ; continue ; } ll l = max (( ll )( lower_bound ( x + 1 , x + n + 1 , x [ t ] - u ) - x ),( ll ) s ); int mid = Mn ( l , t -1 ). se ; assert ( mid < t ); ans [ i ] = ( x [ t ] - x [ mid ]) * b [ mid ]; Q [ s ]. push_back ({ u , i , 1 }), Q [ mid ]. push_back ({ u , i , -1 }); lsh [ ++ top ] = u ; } sort ( lsh + 1 , lsh + top + 1 ); top = unique ( lsh + 1 , lsh + top + 1 ) - lsh -1 ; stk [ 0 ] = n + 1 ; per ( i , n , 1 ){ while ( b [ stk [ tp ]] > b [ i ]){ int u = stk [ tp ], v = stk [ tp -1 ]; tp -- ; ll L0 = x [ u ] - x [ i ], L1 = x [ v ] - x [ i ]; T . add ( L0 , - b [ u ], L0 * b [ u ]); T . add ( L1 , b [ u ], - L1 * b [ u ]); } ll L0 = x [ stk [ tp ]] - x [ i ]; T . add ( 0 , b [ i ], 0 ); T . add ( L0 , - b [ i ], L0 * b [ i ]); stk [ ++ tp ] = i ; for ( auto q : Q [ i ]) ans [ q . id ] += 1l l * q . t * T . sum ( q . u ); } rep ( i , 1 , m ) printf ( \"%lld \\n \" , ans [ i ]); return 0 ; }","title":"T5. \u30c0\u30f3\u30b8\u30e7\u30f3 3"},{"location":"%E7%AC%94%E8%AE%B0/P3396%20%E5%93%88%E5%B8%8C%E5%86%B2%E7%AA%81/","text":"P3396 \u54c8\u5e0c\u51b2\u7a81 \u00b6 \u601d\u8def\uff1a\u5bf9\u4e8e \\(p>\\sqrt n\\) \uff0c\u4f59 \\(k\\) \u7684\u6c60\u5b50\u91cc\u9762\u6700\u591a\u4e0d\u8d85\u8fc7 \\(\\sqrt n\\) \u4e2a\u5143\u7d20\uff0c\u53ef\u4ee5\u66b4\u529b\u3002\u5bf9\u4e8e \\(p<\\sqrt n\\) \uff0c\u6211\u4eec\u6362\u4e00\u79cd\u5904\u7406\u601d\u8def\uff1a 1 for ( int p = 1 ; p <= B ; p ++ ) ans [ p ][ i % p ] += val [ i ]; \u8fd9\u6837\u7684\u4fee\u6539\u4e5f\u662f \\(O(\\sqrt n)\\) \u7684\uff0c\u9884\u5904\u7406\u9700\u8981 \\(O(n\\sqrt n)\\) \uff0c\u6545\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a \\(O((n+m)\\sqrt n)\\) \u3002","title":"P3396 \u54c8\u5e0c\u51b2\u7a81"},{"location":"%E7%AC%94%E8%AE%B0/P3396%20%E5%93%88%E5%B8%8C%E5%86%B2%E7%AA%81/#p3396","text":"\u601d\u8def\uff1a\u5bf9\u4e8e \\(p>\\sqrt n\\) \uff0c\u4f59 \\(k\\) \u7684\u6c60\u5b50\u91cc\u9762\u6700\u591a\u4e0d\u8d85\u8fc7 \\(\\sqrt n\\) \u4e2a\u5143\u7d20\uff0c\u53ef\u4ee5\u66b4\u529b\u3002\u5bf9\u4e8e \\(p<\\sqrt n\\) \uff0c\u6211\u4eec\u6362\u4e00\u79cd\u5904\u7406\u601d\u8def\uff1a 1 for ( int p = 1 ; p <= B ; p ++ ) ans [ p ][ i % p ] += val [ i ]; \u8fd9\u6837\u7684\u4fee\u6539\u4e5f\u662f \\(O(\\sqrt n)\\) \u7684\uff0c\u9884\u5904\u7406\u9700\u8981 \\(O(n\\sqrt n)\\) \uff0c\u6545\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a \\(O((n+m)\\sqrt n)\\) \u3002","title":"P3396 \u54c8\u5e0c\u51b2\u7a81"},{"location":"%E7%AC%94%E8%AE%B0/P4238%20%E3%80%90%E6%A8%A1%E6%9D%BF%E3%80%91%E5%A4%9A%E9%A1%B9%E5%BC%8F%E4%B9%98%E6%B3%95%E9%80%86/","text":"P4238 \u3010\u6a21\u677f\u3011\u591a\u9879\u5f0f\u4e58\u6cd5\u9006 \u00b6 \u601d\u8def\uff1a\u5047\u8bbe\u6211\u4eec\u5df2\u7ecf\u6c42\u51fa\u4e86 \\(F(x)\\) \u5728\u6a21 \\(x^{\\lceil\\frac{n}{2}\\rceil}\\) \u610f\u4e49\u4e0b\u7684\u9006\u5143 \\(H(x)\\) . \u90a3\u4e48 \\[F(x)(G(x)-H(x))\\equiv 0 (\\mathrm{mod} \\,x^{\\left\\lceil\\frac{n}{2}\\right\\rceil})\\] \\[G(x)-H(x)\\equiv 0 (\\mathrm{mod} \\,x^{\\left\\lceil\\frac{n}{2}\\right\\rceil})\\] \\[(G(x)-H(x))^2\\equiv 0 (\\mathrm{mod} \\,x^n)\\] \\[G^2(x)-2G(x)H(x)+H^2(x)\\equiv 0(\\mathrm{mod}x^n)\\] \\[F(x)(G^2(x)-2G(x)H(x)+H^2(x))\\equiv G(x)-2H(x)+F(x)H^2(x)\\equiv0(\\mathrm{mod}x^n)\\] \\[\\Longrightarrow G(x)=H(x)(2-F(x)H(x))(\\mathrm{mod}\\,x^n)\\] \u53ef\u4ee5\u901a\u8fc7\u6b64\u7b97\u6cd5\u9012\u5f52\u5904\u7406\u9006\u5143\uff0c\u591a\u9879\u5f0f\u4e58\u6cd5\u7528 \\(NTT\\) \uff0c\u603b\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a \\(O(n\\log n)\\) \u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);i++) #define per(i,a,b) for(int i=(b);i>=(a);i--) #define ll long long using namespace std ; const ll N = 400000 , P = 998244353 , G = 3 , IG = ( P + 1 ) / G ; int n , limit , m , type , inv , a [ N ]; ll A [ N ], B [ N ], C [ N ]; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } inline ll fpow ( ll a , ll b ){ ll ret = 1 ; while ( b ){ if ( b & 1 ) ret = ( ret * a ) % P ; b >>= 1 ; a = ( a * a ) % P ; } return ret ; } int rev [ N ]; inline void init ( int x ){ for ( limit = 1 ; limit < x ;) limit <<= 1 ; rep ( i , 0 , limit ) rev [ i ] = ( rev [ i >> 1 ] >> 1 ) | (( i & 1 ) ? limit >> 1 : 0 ); inv = fpow ( limit , P -2 ); } void ntt ( ll * f , bool flag ){ for ( int i = 0 ; i < limit ; i ++ ) if ( i < rev [ i ]) swap ( f [ i ], f [ rev [ i ]]); for ( int len = 2 , k = 1 ; len <= limit ; len <<= 1 , k <<= 1 ){ ll wn = fpow ( flag ? G : IG ,( P -1 ) / len ); for ( int i = 0 ; i < limit ; i += len ){ for ( ll j = i , w = 1 ; j < i + k ; j ++ , w = w * wn % P ){ ll tmp = w * f [ j + k ] % P ; f [ j + k ] = ( f [ j ] - tmp + P ) % P ; f [ j ] = ( f [ j ] + tmp ) % P ; } } } if ( ! flag ) rep ( i , 0 , limit ) f [ i ] = f [ i ] * inv % P ; } inline void work ( int deg , ll * a , ll * b ){ if ( deg == 1 ){ b [ 0 ] = fpow ( a [ 0 ], P -2 ); return ; } work (( deg + 1 ) >> 1 , a , b ); init ( deg << 1 ); rep ( i , 0 , deg -1 ) C [ i ] = a [ i ]; rep ( i , deg , limit -1 ) C [ i ] = 0 ; ntt ( C , 1 ); ntt ( b , 1 ); rep ( i , 0 , limit -1 ){ b [ i ] = ( 2 - C [ i ] * b [ i ] % P + P ) % P * b [ i ] % P ; } ntt ( b , 0 ); rep ( i , deg , limit -1 ) b [ i ] = 0 ; } int main (){ n = read (); rep ( i , 0 , n -1 ) A [ i ] = read (); work ( n , A , B ); rep ( i , 0 , n -1 ) printf ( \"%lld \" , B [ i ]); return 0 ; }","title":"P4238 \u3010\u6a21\u677f\u3011\u591a\u9879\u5f0f\u4e58\u6cd5\u9006"},{"location":"%E7%AC%94%E8%AE%B0/P4238%20%E3%80%90%E6%A8%A1%E6%9D%BF%E3%80%91%E5%A4%9A%E9%A1%B9%E5%BC%8F%E4%B9%98%E6%B3%95%E9%80%86/#p4238","text":"\u601d\u8def\uff1a\u5047\u8bbe\u6211\u4eec\u5df2\u7ecf\u6c42\u51fa\u4e86 \\(F(x)\\) \u5728\u6a21 \\(x^{\\lceil\\frac{n}{2}\\rceil}\\) \u610f\u4e49\u4e0b\u7684\u9006\u5143 \\(H(x)\\) . \u90a3\u4e48 \\[F(x)(G(x)-H(x))\\equiv 0 (\\mathrm{mod} \\,x^{\\left\\lceil\\frac{n}{2}\\right\\rceil})\\] \\[G(x)-H(x)\\equiv 0 (\\mathrm{mod} \\,x^{\\left\\lceil\\frac{n}{2}\\right\\rceil})\\] \\[(G(x)-H(x))^2\\equiv 0 (\\mathrm{mod} \\,x^n)\\] \\[G^2(x)-2G(x)H(x)+H^2(x)\\equiv 0(\\mathrm{mod}x^n)\\] \\[F(x)(G^2(x)-2G(x)H(x)+H^2(x))\\equiv G(x)-2H(x)+F(x)H^2(x)\\equiv0(\\mathrm{mod}x^n)\\] \\[\\Longrightarrow G(x)=H(x)(2-F(x)H(x))(\\mathrm{mod}\\,x^n)\\] \u53ef\u4ee5\u901a\u8fc7\u6b64\u7b97\u6cd5\u9012\u5f52\u5904\u7406\u9006\u5143\uff0c\u591a\u9879\u5f0f\u4e58\u6cd5\u7528 \\(NTT\\) \uff0c\u603b\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a \\(O(n\\log n)\\) \u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);i++) #define per(i,a,b) for(int i=(b);i>=(a);i--) #define ll long long using namespace std ; const ll N = 400000 , P = 998244353 , G = 3 , IG = ( P + 1 ) / G ; int n , limit , m , type , inv , a [ N ]; ll A [ N ], B [ N ], C [ N ]; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } inline ll fpow ( ll a , ll b ){ ll ret = 1 ; while ( b ){ if ( b & 1 ) ret = ( ret * a ) % P ; b >>= 1 ; a = ( a * a ) % P ; } return ret ; } int rev [ N ]; inline void init ( int x ){ for ( limit = 1 ; limit < x ;) limit <<= 1 ; rep ( i , 0 , limit ) rev [ i ] = ( rev [ i >> 1 ] >> 1 ) | (( i & 1 ) ? limit >> 1 : 0 ); inv = fpow ( limit , P -2 ); } void ntt ( ll * f , bool flag ){ for ( int i = 0 ; i < limit ; i ++ ) if ( i < rev [ i ]) swap ( f [ i ], f [ rev [ i ]]); for ( int len = 2 , k = 1 ; len <= limit ; len <<= 1 , k <<= 1 ){ ll wn = fpow ( flag ? G : IG ,( P -1 ) / len ); for ( int i = 0 ; i < limit ; i += len ){ for ( ll j = i , w = 1 ; j < i + k ; j ++ , w = w * wn % P ){ ll tmp = w * f [ j + k ] % P ; f [ j + k ] = ( f [ j ] - tmp + P ) % P ; f [ j ] = ( f [ j ] + tmp ) % P ; } } } if ( ! flag ) rep ( i , 0 , limit ) f [ i ] = f [ i ] * inv % P ; } inline void work ( int deg , ll * a , ll * b ){ if ( deg == 1 ){ b [ 0 ] = fpow ( a [ 0 ], P -2 ); return ; } work (( deg + 1 ) >> 1 , a , b ); init ( deg << 1 ); rep ( i , 0 , deg -1 ) C [ i ] = a [ i ]; rep ( i , deg , limit -1 ) C [ i ] = 0 ; ntt ( C , 1 ); ntt ( b , 1 ); rep ( i , 0 , limit -1 ){ b [ i ] = ( 2 - C [ i ] * b [ i ] % P + P ) % P * b [ i ] % P ; } ntt ( b , 0 ); rep ( i , deg , limit -1 ) b [ i ] = 0 ; } int main (){ n = read (); rep ( i , 0 , n -1 ) A [ i ] = read (); work ( n , A , B ); rep ( i , 0 , n -1 ) printf ( \"%lld \" , B [ i ]); return 0 ; }","title":"P4238 \u3010\u6a21\u677f\u3011\u591a\u9879\u5f0f\u4e58\u6cd5\u9006"},{"location":"%E7%AC%94%E8%AE%B0/P5978%20%5BCEOI2018%5DGlobal%20warming%20%E9%A2%98%E8%A7%A3/","text":"P5978 [CEOI2018]Global warming \u9898\u89e3 \u00b6 \u9898\u610f\uff1a\u7ed9\u5b9a\u957f\u5ea6\u4e3a \\(n\\) \u7684\u6570\u7ec4 \\(a\\) \uff0c\u4f60\u53ef\u4ee5\u5c06\u4efb\u610f\u4e00\u6bb5\u533a\u95f4 \\([l,r]\\) \u4e2d\u7684\u6bcf\u4e00\u4e2a\u5143\u7d20 \\(+d\\) \uff0c\u5176\u4e2d \\(-x\\le d\\le x\\) \uff0c\u95ee\u4e00\u6b21\u64cd\u4f5c\u540e\u7684\u6700\u957f\u4e0a\u5347\u5b50\u5e8f\u5217\u957f\u5ea6\u3002 \u6570\u636e\u8303\u56f4\uff1a \\(1\\le n\\le 2\\times 10^5\\) \u3002 \u601d\u8def\uff1a\u5982\u679c\u628a \\([l,r]\\) \u533a\u95f4\u7684\u6570\u53d8\u5c0f\uff0c\u53ef\u80fd\u4f1a\u589e\u52a0\u5230\u8fd9\u4e00\u6bb5\u533a\u95f4\u548c\u540e\u9762 \\([r+1,n]\\) \u63a5\u4e0a\u7684LCS\u957f\u5ea6\uff0c\u4f46\u540c\u65f6\u53ef\u80fd\u51cf\u5c11 \\([1,r]\\) \u8fd9\u6bb5\u7684LCS\u957f\u5ea6\u3002\u4e0d\u96be\u53d1\u73b0\uff0c\u5bf9\u4e8e\u540c\u6837\u7684 \\(d<0\\) \uff0c\u64cd\u4f5c \\([1,r]\\) \u8fd9\u4e2a\u533a\u95f4\u4e00\u5b9a\u6bd4\u64cd\u4f5c \\([l,r]\\) \u533a\u95f4\u66f4\u4f18\u3002 \u540c\u65f6\uff0c\u7531\u4e8e\u64cd\u4f5c\u8fc7\u540e\u5143\u7d20\u7684\u76f8\u5bf9\u5927\u5c0f\u4e0d\u53d8\uff0c \\([1,r]\\) \u51cf\u5c0f \\(d\\) \u548c \\([r+1,n]\\) \u589e\u52a0 \\(d\\) \u8fd9\u4e24\u4e2a\u64cd\u4f5c\u672c\u8d28\u4e0a\u662f\u4e00\u6837\u7684\u3002\u56e0\u4e3a\u524d\u7f00\u4e2d\u5143\u7d20\u7684\u76f8\u5bf9\u5927\u5c0f\u4e0d\u53d8\uff0c\u4e3a\u4e86LCS\u66f4\u957f\uff0c\u663e\u7136 \\(d=x\\) \u65f6\u6700\u4f18\u3002\u4e8e\u662f\u9898\u76ee\u5c31\u8f6c\u5316\u6210\u4e86\uff1a\u8003\u8651\u5bf9\u524d\u7f00 \\([1,r]\\) \u4e2d\u7684\u5143\u7d20 \\(-x\\) \uff0c\u95ee\u64cd\u4f5c\u540e\u6700\u957f\u7684LCS\u957f\u5ea6\u3002\u66b4\u529b+LCS\u53ef\u4ee5\u505a\u5230 \\(O(n^2\\log n)\\) \uff0c\u4f46\u8fd9\u4e0d\u662f\u6211\u4eec\u60f3\u8981\u7684\u3002 \u64cd\u4f5c\u4e86\u4e00\u6bb5\u524d\u7f00\u5e76\u4e0d\u4f1a\u5f71\u54cd\u8fd9\u6bb5\u524d\u7f00\u5185\u90e8\u7684LCS\uff0c\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7dp\u6c42\u89e3 \\([1,i]\\) \u8fd9\u6bb5\u524d\u7f00\u4ee5 \\(a_i\\) \u4e3a\u7ec8\u70b9\u7684LCS\u957f\u5ea6\uff0c\u8bb0\u4e3a \\(L_i\\) \u3002\u8bbe \\(R_i\\) \u4e3a\u5728 \\([1,i]\\) \u533a\u95f4\u4fee\u6539\u8fc7\u540e\uff0c\u4ee5 \\(a_i\\) \u4e3a\u8d77\u70b9\u7684LCS\uff0c\u90a3\u4e48\u7b54\u6848\u5c31\u662f\uff1a \\[\\max_{i=1}^n L_i+R_i-1\\] \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(n\\log n)\\) \u3002 \u4ee3\u7801\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);i++) #define per(i,a,b) for(int i=(a);i>=(b);i--) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 ; int n , x , a [ N ], lis [ N ], L [ N ], R [ N ], ans ; int main (){ n = read (), x = read (); rep ( i , 1 , n ) a [ i ] = read (); memset ( lis , 0x3f , sizeof ( lis )); rep ( i , 1 , n ){ //\u8ba1\u7b97[1,i]\u7684LIS int j = lower_bound ( lis , lis + n , a [ i ]) - lis ; lis [ j ] = a [ i ]; L [ i ] = j + 1 ; ans = max ( ans , L [ i ]); } memset ( lis , 0x3f , sizeof ( lis )); per ( i , n , 1 ){ //\u8ba1\u7b97\u540e\u7f00\u7684\u4e0b\u964d\u5b50\u5e8f\u5217=\u4ee5i\u4e3a\u8d77\u70b9\u7684\u4e0a\u5347\u5b50\u5e8f\u5217 int j = lower_bound ( lis , lis + n , - a [ i ] + x ) - lis ; int jj = lower_bound ( lis , lis + n , - a [ i ]) - lis ; lis [ jj ] =- a [ i ]; ans = max ( ans , L [ i ] + j ); } printf ( \"%d \\n \" , ans ); return 0 ; }","title":"P5978 [CEOI2018]Global warming \u9898\u89e3"},{"location":"%E7%AC%94%E8%AE%B0/P5978%20%5BCEOI2018%5DGlobal%20warming%20%E9%A2%98%E8%A7%A3/#p5978-ceoi2018global-warming","text":"\u9898\u610f\uff1a\u7ed9\u5b9a\u957f\u5ea6\u4e3a \\(n\\) \u7684\u6570\u7ec4 \\(a\\) \uff0c\u4f60\u53ef\u4ee5\u5c06\u4efb\u610f\u4e00\u6bb5\u533a\u95f4 \\([l,r]\\) \u4e2d\u7684\u6bcf\u4e00\u4e2a\u5143\u7d20 \\(+d\\) \uff0c\u5176\u4e2d \\(-x\\le d\\le x\\) \uff0c\u95ee\u4e00\u6b21\u64cd\u4f5c\u540e\u7684\u6700\u957f\u4e0a\u5347\u5b50\u5e8f\u5217\u957f\u5ea6\u3002 \u6570\u636e\u8303\u56f4\uff1a \\(1\\le n\\le 2\\times 10^5\\) \u3002 \u601d\u8def\uff1a\u5982\u679c\u628a \\([l,r]\\) \u533a\u95f4\u7684\u6570\u53d8\u5c0f\uff0c\u53ef\u80fd\u4f1a\u589e\u52a0\u5230\u8fd9\u4e00\u6bb5\u533a\u95f4\u548c\u540e\u9762 \\([r+1,n]\\) \u63a5\u4e0a\u7684LCS\u957f\u5ea6\uff0c\u4f46\u540c\u65f6\u53ef\u80fd\u51cf\u5c11 \\([1,r]\\) \u8fd9\u6bb5\u7684LCS\u957f\u5ea6\u3002\u4e0d\u96be\u53d1\u73b0\uff0c\u5bf9\u4e8e\u540c\u6837\u7684 \\(d<0\\) \uff0c\u64cd\u4f5c \\([1,r]\\) \u8fd9\u4e2a\u533a\u95f4\u4e00\u5b9a\u6bd4\u64cd\u4f5c \\([l,r]\\) \u533a\u95f4\u66f4\u4f18\u3002 \u540c\u65f6\uff0c\u7531\u4e8e\u64cd\u4f5c\u8fc7\u540e\u5143\u7d20\u7684\u76f8\u5bf9\u5927\u5c0f\u4e0d\u53d8\uff0c \\([1,r]\\) \u51cf\u5c0f \\(d\\) \u548c \\([r+1,n]\\) \u589e\u52a0 \\(d\\) \u8fd9\u4e24\u4e2a\u64cd\u4f5c\u672c\u8d28\u4e0a\u662f\u4e00\u6837\u7684\u3002\u56e0\u4e3a\u524d\u7f00\u4e2d\u5143\u7d20\u7684\u76f8\u5bf9\u5927\u5c0f\u4e0d\u53d8\uff0c\u4e3a\u4e86LCS\u66f4\u957f\uff0c\u663e\u7136 \\(d=x\\) \u65f6\u6700\u4f18\u3002\u4e8e\u662f\u9898\u76ee\u5c31\u8f6c\u5316\u6210\u4e86\uff1a\u8003\u8651\u5bf9\u524d\u7f00 \\([1,r]\\) \u4e2d\u7684\u5143\u7d20 \\(-x\\) \uff0c\u95ee\u64cd\u4f5c\u540e\u6700\u957f\u7684LCS\u957f\u5ea6\u3002\u66b4\u529b+LCS\u53ef\u4ee5\u505a\u5230 \\(O(n^2\\log n)\\) \uff0c\u4f46\u8fd9\u4e0d\u662f\u6211\u4eec\u60f3\u8981\u7684\u3002 \u64cd\u4f5c\u4e86\u4e00\u6bb5\u524d\u7f00\u5e76\u4e0d\u4f1a\u5f71\u54cd\u8fd9\u6bb5\u524d\u7f00\u5185\u90e8\u7684LCS\uff0c\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7dp\u6c42\u89e3 \\([1,i]\\) \u8fd9\u6bb5\u524d\u7f00\u4ee5 \\(a_i\\) \u4e3a\u7ec8\u70b9\u7684LCS\u957f\u5ea6\uff0c\u8bb0\u4e3a \\(L_i\\) \u3002\u8bbe \\(R_i\\) \u4e3a\u5728 \\([1,i]\\) \u533a\u95f4\u4fee\u6539\u8fc7\u540e\uff0c\u4ee5 \\(a_i\\) \u4e3a\u8d77\u70b9\u7684LCS\uff0c\u90a3\u4e48\u7b54\u6848\u5c31\u662f\uff1a \\[\\max_{i=1}^n L_i+R_i-1\\] \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(n\\log n)\\) \u3002 \u4ee3\u7801\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);i++) #define per(i,a,b) for(int i=(a);i>=(b);i--) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 ; int n , x , a [ N ], lis [ N ], L [ N ], R [ N ], ans ; int main (){ n = read (), x = read (); rep ( i , 1 , n ) a [ i ] = read (); memset ( lis , 0x3f , sizeof ( lis )); rep ( i , 1 , n ){ //\u8ba1\u7b97[1,i]\u7684LIS int j = lower_bound ( lis , lis + n , a [ i ]) - lis ; lis [ j ] = a [ i ]; L [ i ] = j + 1 ; ans = max ( ans , L [ i ]); } memset ( lis , 0x3f , sizeof ( lis )); per ( i , n , 1 ){ //\u8ba1\u7b97\u540e\u7f00\u7684\u4e0b\u964d\u5b50\u5e8f\u5217=\u4ee5i\u4e3a\u8d77\u70b9\u7684\u4e0a\u5347\u5b50\u5e8f\u5217 int j = lower_bound ( lis , lis + n , - a [ i ] + x ) - lis ; int jj = lower_bound ( lis , lis + n , - a [ i ]) - lis ; lis [ jj ] =- a [ i ]; ans = max ( ans , L [ i ] + j ); } printf ( \"%d \\n \" , ans ); return 0 ; }","title":"P5978 [CEOI2018]Global warming \u9898\u89e3"},{"location":"%E7%AC%94%E8%AE%B0/P6078%20%5BCEOI2004%5D%20Sweets%E9%A2%98%E8%A7%A3/","text":"P6078 [CEOI2004] Sweets\u9898\u89e3 \u00b6 \u9898\u610f\uff1a \\(n\\) \u79cd\u7cd6\u679c\uff0c\u7b2c \\(i\\) \u79cd\u6709 \\(m_i\\) \u9897\uff0c\u95ee\u6709\u591a\u5c11\u79cd\u65b9\u6848\u4ece\u4e2d\u9009\u51fa\u603b\u6570 \\([a,b]\\) \u4e4b\u95f4\u9897\u7cd6\uff0c\u7b54\u6848\u5bf9 \\(2004\\) \u53d6\u6a21\u3002 \u6570\u636e\u8303\u56f4\uff1a \\(1\\le n\\le 10,0\\le a\\le b\\le 10^7,0\\le m_i\\le 10^6\\) \u601d\u8def\uff1a \u751f\u6210\u51fd\u6570\u5165\u95e8\u9898\uff0c\u4e0d\u96be\u5f97\u51fa\u603b\u65b9\u6848\u7684\u751f\u6210\u51fd\u6570\u4e3a\uff1a \\[G(x)=\\prod_{i=1}^n \\frac{1-x^{m_i+1}}{1-x}=(1-x)^{-n}\\cdot\\prod_{i=1}^{n}(1-x^{m_i+1})\\] \u6ce8\u610f\u5230 \\(n\\) \u5f88\u5c0f\uff0c\u56e0\u6b64\u5bf9\u4e8e\u53f3\u8fb9\u7684\u5f0f\u5b50\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u66b4\u529b\u6c42\u89e3\uff08\u8fd9\u4e00\u90e8\u5206\u662f \\(O(2^n)\\) \uff09\uff0c\u800c\u5de6\u8fb9\u53ef\u4ee5\u7528\u725b\u987f\u4e8c\u9879\u5f0f\u5b9a\u7406\u6c42\u89e3\uff1a \\[(1-x)^{-n}=\\sum_{i\\ge 0}\\binom{n-1+i}{i}x^i\\] \u4e8e\u662f\u6211\u4eec\u5f97\u51fa\u4e86\u8fd9\u4e2a\u591a\u9879\u5f0f\u3002\u73b0\u5728\u8981\u6c42\u7684\u662f \\(\\sum_{i=a}^b[x^i]G(x)\\) \u3002 \u679a\u4e3e \\(\\prod_{i=1}^{n}(1-x^{m_i+1})\\) \u4e2d\u7b2c \\(k\\) \u9879\u7cfb\u6570\uff0c\u8bbe\u4e3a \\(c_k\\) \u3002\u90a3\u4e48\u5b83\u5bf9\u7b54\u6848\u7684\u8d21\u732e\u662f\uff1a \\[c_k\\sum_{i=a-k}^{b-k}\\binom{n-1+i}{i}=c_k(\\binom{n+b-k}{b-k}-\\binom{n+a-k-1}{a-k-1})\\] \u6700\u540e\u7ec4\u5408\u6570 \\(\\binom{n+b-k}{n}=\\dfrac{(n+b-k)!}{n!(b-k)!}\\) \u5bf9 \\(2004\\) \u53d6\u6a21\u7684\u7ec6\u8282\u95ee\u9898\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u8ba1\u7b97 \\(\\dfrac{(n+b-k)!}{(b-k)!}\\) \u5bf9 \\(2004\\cdot n!\\) \u53d6\u6a21\u518d\u5c06\u7b54\u6848\u9664\u4ee5 \\(n!\\) \u5373\u53ef\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(2^n+b)\\) \u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 #include <bits/stdc++.h> #define ll long long using namespace std ; const int mod = 2004 ; int n , l , r ; ll a [ 15 ], fac = 1 , sum = 0 ; inline ll C ( int m , int n ){ ll M = mod * fac , ans = 1 ; for ( int i = n - m + 1 ; i <= n ; i ++ ) ans = ( ans * i ) % M ; return ( ans / fac ) % mod ; } void dfs ( int pos , int val , int key , int lim ){ if ( key > lim ) return ; if ( pos > n ){ sum += 1l l * val * C ( n , n + lim - key ) % mod ; sum = ( sum + mod ) % mod ; return ; } dfs ( pos + 1 , val , key , lim ); dfs ( pos + 1 , - val , key + a [ pos ] + 1 , lim ); } ll solve ( int lim ){ sum = 0 ; dfs ( 1 , 1 , 0 , lim ); return ( sum % mod + mod ) % mod ; } int main (){ scanf ( \"%d%d%d\" , & n , & l , & r ); for ( int i = 1 ; i <= n ; i ++ ){ scanf ( \"%lld\" , & a [ i ]); fac *= i ; } printf ( \"%lld \\n \" ,(( solve ( r ) - solve ( l -1 )) % mod + mod ) % mod ); return 0 ; }","title":"P6078 [CEOI2004] Sweets\u9898\u89e3"},{"location":"%E7%AC%94%E8%AE%B0/P6078%20%5BCEOI2004%5D%20Sweets%E9%A2%98%E8%A7%A3/#p6078-ceoi2004-sweets","text":"\u9898\u610f\uff1a \\(n\\) \u79cd\u7cd6\u679c\uff0c\u7b2c \\(i\\) \u79cd\u6709 \\(m_i\\) \u9897\uff0c\u95ee\u6709\u591a\u5c11\u79cd\u65b9\u6848\u4ece\u4e2d\u9009\u51fa\u603b\u6570 \\([a,b]\\) \u4e4b\u95f4\u9897\u7cd6\uff0c\u7b54\u6848\u5bf9 \\(2004\\) \u53d6\u6a21\u3002 \u6570\u636e\u8303\u56f4\uff1a \\(1\\le n\\le 10,0\\le a\\le b\\le 10^7,0\\le m_i\\le 10^6\\) \u601d\u8def\uff1a \u751f\u6210\u51fd\u6570\u5165\u95e8\u9898\uff0c\u4e0d\u96be\u5f97\u51fa\u603b\u65b9\u6848\u7684\u751f\u6210\u51fd\u6570\u4e3a\uff1a \\[G(x)=\\prod_{i=1}^n \\frac{1-x^{m_i+1}}{1-x}=(1-x)^{-n}\\cdot\\prod_{i=1}^{n}(1-x^{m_i+1})\\] \u6ce8\u610f\u5230 \\(n\\) \u5f88\u5c0f\uff0c\u56e0\u6b64\u5bf9\u4e8e\u53f3\u8fb9\u7684\u5f0f\u5b50\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u66b4\u529b\u6c42\u89e3\uff08\u8fd9\u4e00\u90e8\u5206\u662f \\(O(2^n)\\) \uff09\uff0c\u800c\u5de6\u8fb9\u53ef\u4ee5\u7528\u725b\u987f\u4e8c\u9879\u5f0f\u5b9a\u7406\u6c42\u89e3\uff1a \\[(1-x)^{-n}=\\sum_{i\\ge 0}\\binom{n-1+i}{i}x^i\\] \u4e8e\u662f\u6211\u4eec\u5f97\u51fa\u4e86\u8fd9\u4e2a\u591a\u9879\u5f0f\u3002\u73b0\u5728\u8981\u6c42\u7684\u662f \\(\\sum_{i=a}^b[x^i]G(x)\\) \u3002 \u679a\u4e3e \\(\\prod_{i=1}^{n}(1-x^{m_i+1})\\) \u4e2d\u7b2c \\(k\\) \u9879\u7cfb\u6570\uff0c\u8bbe\u4e3a \\(c_k\\) \u3002\u90a3\u4e48\u5b83\u5bf9\u7b54\u6848\u7684\u8d21\u732e\u662f\uff1a \\[c_k\\sum_{i=a-k}^{b-k}\\binom{n-1+i}{i}=c_k(\\binom{n+b-k}{b-k}-\\binom{n+a-k-1}{a-k-1})\\] \u6700\u540e\u7ec4\u5408\u6570 \\(\\binom{n+b-k}{n}=\\dfrac{(n+b-k)!}{n!(b-k)!}\\) \u5bf9 \\(2004\\) \u53d6\u6a21\u7684\u7ec6\u8282\u95ee\u9898\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u8ba1\u7b97 \\(\\dfrac{(n+b-k)!}{(b-k)!}\\) \u5bf9 \\(2004\\cdot n!\\) \u53d6\u6a21\u518d\u5c06\u7b54\u6848\u9664\u4ee5 \\(n!\\) \u5373\u53ef\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(2^n+b)\\) \u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 #include <bits/stdc++.h> #define ll long long using namespace std ; const int mod = 2004 ; int n , l , r ; ll a [ 15 ], fac = 1 , sum = 0 ; inline ll C ( int m , int n ){ ll M = mod * fac , ans = 1 ; for ( int i = n - m + 1 ; i <= n ; i ++ ) ans = ( ans * i ) % M ; return ( ans / fac ) % mod ; } void dfs ( int pos , int val , int key , int lim ){ if ( key > lim ) return ; if ( pos > n ){ sum += 1l l * val * C ( n , n + lim - key ) % mod ; sum = ( sum + mod ) % mod ; return ; } dfs ( pos + 1 , val , key , lim ); dfs ( pos + 1 , - val , key + a [ pos ] + 1 , lim ); } ll solve ( int lim ){ sum = 0 ; dfs ( 1 , 1 , 0 , lim ); return ( sum % mod + mod ) % mod ; } int main (){ scanf ( \"%d%d%d\" , & n , & l , & r ); for ( int i = 1 ; i <= n ; i ++ ){ scanf ( \"%lld\" , & a [ i ]); fac *= i ; } printf ( \"%lld \\n \" ,(( solve ( r ) - solve ( l -1 )) % mod + mod ) % mod ); return 0 ; }","title":"P6078 [CEOI2004] Sweets\u9898\u89e3"},{"location":"%E7%AC%94%E8%AE%B0/SP34096%20DIVCNTK%20%E9%A2%98%E8%A7%A3/","text":"SP34096 DIVCNTK \u9898\u89e3 \u00b6 \u9898\u610f\uff1a\u6c42 \\(S_k(n)=\\sum_{i=1}^{n}d(i^k)\\) \u3002 \u6570\u636e\u8303\u56f4\uff1a\u591a\u7ec4\u6570\u636e\uff0c \\(1\\le T\\le 10^4,n,k\\le 10^{10}\\) \u601d\u8def\uff1a\u8bbe \\(f(x)=d(x^k)\\) \uff0c\u53d1\u73b0 \\(f(p^c)=kc+1\\) \uff0c\u5728\u8d28\u6570\u5e42\u65f6\u53ef\u4ee5\u5feb\u901f\u6c42\u503c\uff0c\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u7528 \\(Min\\_25\\) \u7b5b\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(\\dfrac{n^{0.75}}{\\log n}+n^{1-\\epsilon})\\) \u4ee3\u7801\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 #include <bits/stdc++.h> using namespace std ; typedef unsigned long long ll ; const int N = 1e6 + 5 ; int T , sqr ; ll n , k , lmt , num , pri [ N ], val [ N << 1 ], tot , g [ N << 1 ], id1 [ N ], id2 [ N ]; bool v [ N ]; inline ll S ( ll x , int y ){ if ( x < pri [ y ]) return 0 ; ll t = ( x <= sqr ? id1 [ x ] : id2 [ n / x ]); ll ans = g [ t ] - y * ( k + 1 ); for ( int i = y + 1 ; i <= num && 1l l * pri [ i ] * pri [ i ] <= x ; i ++ ){ ll pe = pri [ i ]; for ( int e = 1 ; pe <= x ; e ++ , pe = pe * pri [ i ]){ ans += ( k * e + 1 ) * ( S ( x / pe , i ) + ( e != 1 )); } } return ans ; } int main (){ for ( int i = 2 ; i < N ; i ++ ){ if ( ! v [ i ]) pri [ ++ num ] = i ; for ( int j = 1 ; j <= num && pri [ j ] * i < N ; j ++ ){ v [ i * pri [ j ]] = 1 ; if ( i % pri [ j ] == 0 ) break ; } } scanf ( \"%d\" , & T ); while ( T -- ){ scanf ( \"%lld%lld\" , & n , & k ); sqr = sqrt ( n ); for ( lmt = 1 ; lmt <= num && pri [ lmt ] <= sqr ;) lmt ++ ; lmt -- ; tot = 0 ; for ( ll l = 1 , r ; l <= n ; l = r + 1 ){ r = n / ( n / l ); val [ ++ tot ] = n / l ; g [ tot ] = val [ tot ] -1 ; if ( n / l <= sqr ) id1 [ n / l ] = tot ; else id2 [ r ] = tot ; } for ( int j = 1 ; j <= lmt ; j ++ ){ for ( int i = 1 ; pri [ j ] * pri [ j ] <= val [ i ]; i ++ ){ ll k = val [ i ] / pri [ j ]; k = ( k <= sqr ? id1 [ k ] : id2 [ n / k ]); g [ i ] -= ( g [ k ] - j + 1 ); } } for ( int i = 1 ; i <= tot ; i ++ ) g [ i ] *= ( k + 1 ); printf ( \"%llu \\n \" , S ( n , 0 ) + 1 ); } return 0 ; }","title":"SP34096 DIVCNTK \u9898\u89e3"},{"location":"%E7%AC%94%E8%AE%B0/SP34096%20DIVCNTK%20%E9%A2%98%E8%A7%A3/#sp34096-divcntk","text":"\u9898\u610f\uff1a\u6c42 \\(S_k(n)=\\sum_{i=1}^{n}d(i^k)\\) \u3002 \u6570\u636e\u8303\u56f4\uff1a\u591a\u7ec4\u6570\u636e\uff0c \\(1\\le T\\le 10^4,n,k\\le 10^{10}\\) \u601d\u8def\uff1a\u8bbe \\(f(x)=d(x^k)\\) \uff0c\u53d1\u73b0 \\(f(p^c)=kc+1\\) \uff0c\u5728\u8d28\u6570\u5e42\u65f6\u53ef\u4ee5\u5feb\u901f\u6c42\u503c\uff0c\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u7528 \\(Min\\_25\\) \u7b5b\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(\\dfrac{n^{0.75}}{\\log n}+n^{1-\\epsilon})\\) \u4ee3\u7801\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 #include <bits/stdc++.h> using namespace std ; typedef unsigned long long ll ; const int N = 1e6 + 5 ; int T , sqr ; ll n , k , lmt , num , pri [ N ], val [ N << 1 ], tot , g [ N << 1 ], id1 [ N ], id2 [ N ]; bool v [ N ]; inline ll S ( ll x , int y ){ if ( x < pri [ y ]) return 0 ; ll t = ( x <= sqr ? id1 [ x ] : id2 [ n / x ]); ll ans = g [ t ] - y * ( k + 1 ); for ( int i = y + 1 ; i <= num && 1l l * pri [ i ] * pri [ i ] <= x ; i ++ ){ ll pe = pri [ i ]; for ( int e = 1 ; pe <= x ; e ++ , pe = pe * pri [ i ]){ ans += ( k * e + 1 ) * ( S ( x / pe , i ) + ( e != 1 )); } } return ans ; } int main (){ for ( int i = 2 ; i < N ; i ++ ){ if ( ! v [ i ]) pri [ ++ num ] = i ; for ( int j = 1 ; j <= num && pri [ j ] * i < N ; j ++ ){ v [ i * pri [ j ]] = 1 ; if ( i % pri [ j ] == 0 ) break ; } } scanf ( \"%d\" , & T ); while ( T -- ){ scanf ( \"%lld%lld\" , & n , & k ); sqr = sqrt ( n ); for ( lmt = 1 ; lmt <= num && pri [ lmt ] <= sqr ;) lmt ++ ; lmt -- ; tot = 0 ; for ( ll l = 1 , r ; l <= n ; l = r + 1 ){ r = n / ( n / l ); val [ ++ tot ] = n / l ; g [ tot ] = val [ tot ] -1 ; if ( n / l <= sqr ) id1 [ n / l ] = tot ; else id2 [ r ] = tot ; } for ( int j = 1 ; j <= lmt ; j ++ ){ for ( int i = 1 ; pri [ j ] * pri [ j ] <= val [ i ]; i ++ ){ ll k = val [ i ] / pri [ j ]; k = ( k <= sqr ? id1 [ k ] : id2 [ n / k ]); g [ i ] -= ( g [ k ] - j + 1 ); } } for ( int i = 1 ; i <= tot ; i ++ ) g [ i ] *= ( k + 1 ); printf ( \"%llu \\n \" , S ( n , 0 ) + 1 ); } return 0 ; }","title":"SP34096 DIVCNTK \u9898\u89e3"},{"location":"%E7%AC%94%E8%AE%B0/USACO%2021DEC/","text":"USACO 21DEC Platinum \u00b6 T1 Ticket \u00b6 \u9898\u76ee\u96be\u5ea6\uff1aUSACO P/\u7701\u9009 \u5148\u60f3\u66b4\u529b\u505a\u6cd5\u3002\u6ce8\u610f\u5230\u4e00\u4e2a\u4eba\u4e0d\u4f1a\u91cd\u590d\u4e70\u7968\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u628a\u6bcf\u79cd\u7968\u770b\u4f5c\u865a\u62df\u8282\u70b9\uff0c\u4e70\u7968\u770b\u4f5c\u4ece \\(c_i\\) \u5230 \\(i\\) \u53f7\u7968\u8fb9\u6743\u4e3a \\(p_i\\) \u7684\u8fb9\uff0c\u540c\u65f6 \\(i\\) \u53f7\u7968\u5411\u533a\u95f4 \\([a_i,b_i]\\) \u4e2d\u7684\u6240\u6709\u70b9\u8fde\u8fb9\u6743\u4e3a \\(0\\) \u7684\u8fb9\u3002\u9898\u76ee\u5e0c\u671b\u6c42\u51fa\u6bcf\u4e2a\u70b9\u5230\u8fbe \\(1\\) \u548c \\(n\\) \u6240\u9700\u7684\u6700\u5c0f\u4ee3\u4ef7\uff0c\u4e0d\u59a8\u5efa\u53cd\u56fe\u4ee5 \\(1\\) \u548c \\(n\\) \u4e3a\u539f\u70b9\u5206\u522b\u8dd1\u4e00\u904d\u6700\u77ed\u8def\u3002 \u7136\u800c\u8fd9\u6837\u4f1a\u559c\u63d0 WA \u3002\u56e0\u4e3a\u4ecd\u7136\u6ca1\u6709\u89e3\u51b3\u91cd\u590d\u4e70\u7968\u7684\u95ee\u9898\uff0c\u4e24\u6761\u6700\u77ed\u8def\u7684\u4ea4\u96c6\u4e2d\u7684\u6240\u6709\u8fb9\u88ab\u7b97\u4e86\u4e24\u904d\u3002\u600e\u4e48\u89e3\u51b3\uff1f\u5148\u8bb0\u5f53\u524d\u7b54\u6848\u4e3a \\(dis_i=d1_i+dn_i\\) \uff0c\u82e5\u8282\u70b9 \\(u\\) \u7684\u4e24\u6761\u6700\u77ed\u8def\u5747\u7ecf\u8fc7\u5b83\u7684\u90bb\u5c45 \\(v\\) \uff0c\u4e0d\u96be\u53d1\u73b0 \\(dis_u=dis_v+w\\) \u3002\u8fd9\u548c\u5355\u6e90\u6700\u77ed\u8def\u7684\u677e\u5f1b\u672c\u8d28\u76f8\u540c\uff0c\u6211\u4eec\u5bf9\u7b54\u6848\u6570\u7ec4\u91cd\u65b0\u8dd1\u4e00\u904d\u6700\u77ed\u8def\u5373\u53ef\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(NK\\log(NK))\\) \u4e0b\u9762\u63d0\u4f9b\u4e24\u79cd\u4f18\u5316\u7684\u601d\u8def\uff0c\u7b2c\u4e00\u79cd\u662f\u8003\u573a\u7b2c\u4e00\u773c\u770b\u51fa\u7684\u7ebf\u6bb5\u6811\u4f18\u5316\u5efa\u56fe\uff0c\u5177\u4f53\u77e5\u8bc6\u53ef\u4ee5\u53c2\u8003\u8fd9\u4e2a\u535a\u5ba2 DS\u4f18\u5316\u5efa\u56fe \u3002 \u5bf9\u533a\u95f4\u4e2d\u7684\u6bcf\u4e2a\u70b9\u66b4\u529b\u8fde\u8fb9\u662f\u4e0d\u597d\u7684\uff01\u6211\u4eec\u7528\u7ebf\u6bb5\u6811\u5efa\u56fe\u7684\u65b9\u5f0f\u8fde\u8fb9\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a \\(O(N\\log^2 N)\\) \u3002USACO\u8bc4\u6d4b\u673a\u6216\u6d1b\u8c37\u5f00 O2 \u5747\u53ef\u901a\u8fc7\u672c\u9898\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e6 + 5 , M = 7e6 + 5 ; const ll inf = 1e16 ; int head [ N ], cnt ; struct Edge { int to , nxt , w ; } e [ M ]; inline void add ( int u , int v , int w ){ e [ ++ cnt ] = { v , head [ u ], w }; head [ u ] = cnt ;} int n , q , s ; struct Node { int l , r ;} t [ N ]; #define ls (p<<1) #define rs (ls|1) inline void build ( int p , int l , int r ){ t [ p ]. l = l , t [ p ]. r = r ; if ( l == r ){ //\u53f6\u5b50\u8282\u70b9\u4e0e\u539f\u56fe\u52a0\u8fb9 add ( l + 8 * n , p , 0 ); add ( p + 4 * n , l + 8 * n , 0 ); add ( p , l + 8 * n , 0 ); add ( l + 8 * n , p + 4 * n , 0 ); return ; } //\u5411\u513f\u5b50\u8fde\u8fb9 add ( p , ls , 0 ); add (( ls ) + 4 * n , p + 4 * n , 0 ); add ( p , rs , 0 ); add (( rs ) + 4 * n , p + 4 * n , 0 ); int mid = ( l + r ) >> 1 ; build ( ls , l , mid ); build ( rs , mid + 1 , r ); } inline void upd ( int p , int L , int R , int u , int w ){ int l = t [ p ]. l , r = t [ p ]. r , mid = ( l + r ) >> 1 ; if ( l == L && r == R ){ //\u5f53\u524d\u8282\u70b9\u8986\u76d6\u533a\u95f4 add ( p + 4 * n , u + 8 * n , w ); return ; } if ( R <= mid ) upd ( ls , L , R , u , w ); else if ( L > mid ) upd ( rs , L , R , u , w ); else { upd ( ls , L , mid , u , w ); upd ( rs , mid + 1 , R , u , w ); } } ll dis [ N ], d [ N ]; struct node { ll dis ; int pos ; bool operator < ( const node & x ) const { return x . dis < dis ; } }; bool vis [ N ]; priority_queue < node > pq ; inline void dijkstra ( bool op = 0 ){ if ( ! op ){ memset ( dis , 0x3f , sizeof ( dis )); dis [ s ] = 0 ; pq . push ({ 0 , s }); } else { rep ( i , 1 , 9 * n + q ) pq . push ({ dis [ i ], i }); } memset ( vis , 0 , sizeof ( vis )); while ( ! pq . empty ()){ node tmp = pq . top (); pq . pop (); int x = tmp . pos ; if ( vis [ x ]) continue ; vis [ x ] = 1 ; for ( int i = head [ x ]; i ; i = e [ i ]. nxt ){ int y = e [ i ]. to ; if ( dis [ y ] > dis [ x ] + e [ i ]. w ){ dis [ y ] = dis [ x ] + e [ i ]. w ; pq . push ({ dis [ y ], y }); } } } } int main (){ n = read (), q = read (); build ( 1 , 1 , n ); rep ( i , 1 , q ){ int a = read (), w = read (), b = read (), c = read (); upd ( 1 , b , c , i + n , 0 ); add ( 9 * n + i , a + 8 * n , w ); } s = 8 * n + 1 ; dijkstra (); memcpy ( d , dis , sizeof ( d )); //rep(i,1,n)cout<<dis[i+8*n]<<' '; s = 9 * n ; dijkstra (); rep ( i , 1 , 9 * n + q ) dis [ i ] += d [ i ]; dijkstra ( 1 ); rep ( i , 1 , n ){ if ( dis [ i + 8 * n ] > inf ) puts ( \"-1\" ); else printf ( \"%lld \\n \" , dis [ i + 8 * n ]); } return 0 ; } \u5982\u4f55\u4f18\u5316\uff1f\u8003\u8651 dijkstra \u65f6\u5b9e\u9645\u4e0a\u5728\u505a\u4ec0\u4e48\u3002\u539f\u56fe\u4e2d\u7684\u8282\u70b9\u4f1a\u5f71\u54cd\u5c06\u5b83\u5305\u542b\u7684\u7968\u7684\u865a\u62df\u8282\u70b9\uff0c\u7136\u540e\u8fd9\u4e2a\u865a\u62df\u8282\u70b9\u4ec5\u5f71\u54cd\u5176\u6240\u5bf9\u5e94\u7684\u4e00\u4e2a\u539f\u56fe\u8282\u70b9 \\((i\\to c_i)\\) \u3002\u5176\u6b21\uff0c\u6211\u4eec\u77e5\u9053\u5806\u4f18\u5316 dijkstra \u540e\u6bcf\u4e2a\u7968\u4ec5\u4f1a\u88ab\u66f4\u65b0\u4e00\u6b21\u3002\u4e8e\u662f\u5e76\u4e0d\u9700\u8981\u5efa\u51fa\u56fe\uff0c\u5728\u7ebf\u6bb5\u6811\u4e0a\u8f6c\u79fb\u5e76\u4e14\u5bf9\u66f4\u65b0\u5b8c\u7684\u533a\u95f4\u6253\u4e0a\u6807\u8bb0\u5c31\u53ef\u4ee5\u505a\u5230 \\(O(N\\log N)\\) \uff08\u4ee3\u7801\u5495\u5495\u5495\uff09\u3002 \u7b2c\u4e8c\u79cd\u505a\u6cd5\u6765\u81ea Benq \u7684\u9898\u89e3\u3002\u540c\u6837\u5229\u7528\u4e0a\u9762\u7684\u6027\u8d28\uff0c\u5bf9\u6240\u6709\u7968\u6309\u5de6\u7aef\u70b9\u5347\u5e8f\u6392\u5217\uff0c\u6ce8\u610f\u5230\u6bcf\u4e2a\u95e8\u7968\u6700\u591a\u5165\u961f\u4e00\u6b21\uff0c\u5efa\u4e00\u68f5\u52bf\u80fd\u7ebf\u6bb5\u6811\u7ef4\u62a4\u4e00\u6bb5\u533a\u95f4\u7684\u6240\u6709\u7968\u53f3\u7aef\u70b9\u7684\u6700\u5927\u503c\u5373\u53ef\u3002\u5728\u6bcf\u4e2a\u7968\u5165\u961f\u540e\u6253\u4e0a\u6807\u8bb0\uff0c\u5747\u644a\u5206\u6790\u53ef\u4ee5\u5f97\u51fa\u590d\u6742\u5ea6\u4e3a \\(O(N\\log N)\\) \u3002\u76ee\u524d\u5728\u6d1b\u8c37\u4e0a\u662f\u6700\u4f18\u89e3\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N\\log N)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define vi vector<int> #define fi first #define se second #define pb push_back #define ALL(x) x.begin(),x.end() #define sz(x) int(x.size()) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 ; const ll inf = 1e18 ; struct ticket { int c , p , a , b ;}; bool cmp ( ticket x , ticket y ){ return x . a < y . a ;} struct SegTree { int n , sz ; vector < int > mx ; vector < ticket > tickets ; #define ls (p<<1) #define rs (ls|1) void pushup ( int p ){ mx [ p ] = max ( mx [ ls ], mx [ rs ]);} SegTree ( vector < ticket > tickets ) : tickets ( tickets ){ //\u521d\u59cb\u5316 n = 1 ; sz = sz ( tickets ); while ( n < sz ) n <<= 1 ; mx . assign ( 2 * n , 0 ); rep ( i , 0 , n -1 ){ if ( i < sz ){ mx [ i + n ] = tickets [ i ]. b ; } else mx [ i + n ] = -1 ; } per ( i , n -1 , 1 ) pushup ( i ); } //\u627e\u5230\u6240\u6709\u53ef\u80fd\u8f6c\u79fb\u7684\u95e8\u7968\u5e76\u79fb\u9664 void remove ( vector < int > & v , int x , int p = 1 , int L = 0 , int R = -1 ){ if ( R == -1 ) R += n ; if ( L >= sz || tickets [ L ]. a > x || mx [ p ] < x ) return ; if ( L == R ){ mx [ p ] = -1 ; v . pb ( L ); return ; } int mid = ( L + R ) >> 1 ; remove ( v , x , ls , L , mid ), remove ( v , x , rs , mid + 1 , R ); pushup ( p ); } }; void Min ( ll & a , const ll b ){ if ( a > b ) a = b ;} int main (){ int n = read (), k = read (); vector < ticket > tickets ( k ); for ( auto & t : tickets ){ t . c = read () -1 , t . p = read (), t . a = read () -1 , t . b = read () -1 ; } sort ( ALL ( tickets ), cmp ); auto Dij = [ & ]( vector < ll > & dis ){ //Dijkstra priority_queue < pair < ll , int >> pq ; rep ( i , 0 , k -1 ){ Min ( dis [ tickets [ i ]. c ], dis [ i + n ] + tickets [ i ]. p ); } rep ( i , 0 , n -1 ){ if ( dis [ i ] < inf ) pq . push ({ - dis [ i ], i }); } SegTree seg ( tickets ); while ( ! pq . empty ()){ pii x = pq . top (); pq . pop (); if ( - x . fi > dis [ x . se ]) continue ; vector < int > vec ; seg . remove ( vec , x . se ); //\u627e\u5230\u8f6c\u79fb\u7684\u95e8\u7968 for ( int t : vec ){ if ( dis [ t + n ] > dis [ x . se ]){ dis [ t + n ] = dis [ x . se ]; if ( dis [ tickets [ t ]. c ] > dis [ x . se ] + tickets [ t ]. p ){ dis [ tickets [ t ]. c ] = dis [ x . se ] + tickets [ t ]. p ; pq . push ({ - dis [ tickets [ t ]. c ], tickets [ t ]. c }); } } } } }; //\u4e09\u6b21\u6700\u77ed\u8def vector < ll > L ( n + k , inf ), R ( n + k , inf ), dis ( n + k ); L [ 0 ] = 0 , R [ n -1 ] = 0 ; Dij ( L ), Dij ( R ); rep ( i , 0 , n + k -1 ) dis [ i ] = L [ i ] + R [ i ]; Dij ( dis ); rep ( i , 0 , n -1 ){ if ( dis [ i ] < inf ) printf ( \"%lld \\n \" , dis [ i ]); else puts ( \"-1\" ); } return 0 ; } T2 Paired Up \u00b6 \u9898\u76ee\u96be\u5ea6\uff1aUSACO P+/NOI- \u5b50\u4efb\u52a1 1\uff1a \\(T=1,N\\le 5000\\) \u8bbe \\(dp[i][j]\\) \u4e3a\u5f53\u524d\u8003\u8651\u5230\u7b2c \\(i\\) \u5934 H \u725b\uff0c\u7b2c \\(j\\) \u5934 G \u725b\u65f6\u5339\u914d\u7684\u725b\u7684\u6700\u5927\u6743\u503c\u548c\u3002\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u9009\u62e9\u4e0d\u5339\u914d \\(i\\) \uff0c\u4e0d\u5339\u914d \\(j\\) \uff0c\u6216\u8005\u662f\u5c06 \\(i\\) \u548c \\(j\\) \u5339\u914d\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N^2)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define pii pair<int,int> #define vi vector<int> int main (){ T = read (), n = read (), K = read (); vector < pii > cow [ 2 ]; cow [ 0 ]. pb ({ 0 , 0 }), cow [ 1 ]. pb ({ 0 , 0 }); rep ( i , 1 , n ){ cin >> c ; int x = read (), y = read (); cow [ c == 'H' ]. pb ({ x , y }); sum += y ; } A = sz ( cow [ 0 ]), B = sz ( cow [ 1 ]); if ( T == 1 ){ vector < vi > dp ( A + 1 , vi ( B + 1 )); rep ( i , 1 , A ) rep ( j , 1 , B ){ dp [ i ][ j ] = max ( dp [ i -1 ][ j ], dp [ i ][ j -1 ]); if ( abs ( cow [ 0 ][ i ]. x - cow [ 1 ][ j ]. x ) <= K ) dp [ i ][ j ] = max ( dp [ i ][ j ], dp [ i -1 ][ j -1 ] + cow [ 0 ][ i ]. y + cow [ 1 ][ j ]. y ); } printf ( \"%d \\n \" , sum - dp [ A ][ B ]); } } \u5b50\u4efb\u52a1 2\uff1a \\(T=2,N\\le 300\\) \u5bf9\u4e8e\u6700\u5927\u5316\u672a\u5339\u914d\u7684\u6743\u503c\u548c\uff0c\u6211\u4eec\u8003\u8651\u4f7f\u7528\u7c7b\u4f3c\u7684 dp \u72b6\u6001\u3002\u4f46\u662f\u6ce8\u610f\u5230\u5728\u4e0a\u8ff0\u8f6c\u79fb\u65f6\uff0c\u6709\u65f6\u5019\u6211\u4eec\u8003\u8651\u7684\u5e76\u4e0d\u662f \u6700\u5927 \u5339\u914d\uff0c\u53ea\u662f\u56e0\u4e3a\u6700\u4f18\u89e3\u53ea\u4ea7\u751f\u4e8e\u6700\u5927\u5339\u914d\uff08\u82e5\u4e0d\u662f\u6700\u5927\u5339\u914d\uff0c\u591a\u5339\u914d\u4e24\u5934\u725b\u663e\u7136\u66f4\u4f18\uff09\uff0c\u6211\u4eec\u624d\u80fd\u5f97\u5230 \\(T=1\\) \u65f6\u7684\u7b54\u6848\u3002 \u4e8e\u662f\u6211\u4eec\u9700\u8981\u628a \u6700\u5927 \u5339\u914d\u8fd9\u4e00\u9650\u5236\u52a0\u5165\u6211\u4eec\u7684 dp \u72b6\u6001\uff0c\u5177\u4f53\u5730\uff0c\u6211\u4eec\u52a0\u5165\u4e00\u7ef4 \\(k\\) \u8868\u793a\u6700\u540e\u4e00\u5934\u672a\u5339\u914d\u7684\u725b\uff0c\u5047\u8bbe\u6211\u4eec\u4e0d\u60f3\u5339\u914d\u5f53\u524d\u7684 H \u725b\uff0c\u90a3\u4e48\u725b \\(k\\) \u5fc5\u987b\u6ee1\u8db3\u5982\u4e0b\u6761\u4ef6\u4e4b\u4e00\uff1a \u725b \\(k\\) \u7684\u54c1\u79cd\u662f \\(H\\) \u725b \\(k\\) \u4e0e\u5f53\u524d\u725b\u7684\u8ddd\u79bb\u5927\u4e8e \\(K\\) \u72b6\u6001\u91cf\u662f \\(O(N^3)\\) \uff0c\u6bcf\u6b21\u8f6c\u79fb\u8fd8\u662f \\(O(1)\\) \u7684\uff0c\u8db3\u591f\u901a\u8fc7\u8be5\u5b50\u4efb\u52a1\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N^3)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 vector < vector < vi >> dp ( A + 1 , vector < vi > ( B + 1 , vi ( n + 1 , -1 ))); dp [ 0 ][ 0 ][ n ] = 0 ; rep ( i , 0 , A ) rep ( j , 0 , B ) rep ( k , 0 , n ){ if ( dp [ i ][ j ][ k ] == -1 ) continue ; if ( i < A && j < B && abs ( cow [ 0 ][ i ]. x - cow [ 1 ][ j ]. x ) <= K ) Max ( dp [ i + 1 ][ j + 1 ][ k ], dp [ i ][ j ][ k ]); if ( i < A && ( ! ( A <= k && k < n && cow [ 0 ][ i ]. x <= cow [ 1 ][ k - A ]. x + K ))) Max ( dp [ i + 1 ][ j ][ i ], dp [ i ][ j ][ k ] + cow [ 0 ][ i ]. y ); if ( j < B && ( ! ( k < A && cow [ 1 ][ j ]. x <= cow [ 0 ][ k ]. x + K ))) Max ( dp [ i ][ j + 1 ][ A + j ], dp [ i ][ j ][ k ] + cow [ 1 ][ j ]. y ); } int ans = 0 ; rep ( i , 0 , n ) Max ( ans , dp [ A ][ B ][ i ]); printf ( \"%d \\n \" , ans ); \u5b50\u4efb\u52a1 1\uff1a \\(T=1,N\\le 5000\\) \u8003\u8651\u6700\u7ec8\u7684\u4f18\u5316\uff0c \\(i,j\\) \u4e24\u7ef4\u6bd4\u8f83\u96be\u820d\u53bb\uff0c\u4f46\u6211\u4eec\u53ef\u4ee5\u4fee\u6539\u6700\u540e\u4e00\u7ef4\u7684\u5b9a\u4e49\u3002\u5b9a\u4e49 \\(dp[i][j][x]\\) \u4e3a\u5904\u7406\u5230\u524d \\(i\\) \u5934 H \u725b\uff0c \\(j\\) \u5934 G \u725b\uff0c\u5e76\u4e14\u94a6\u5b9a\u4e0b\u4e00\u79cd\u4e0d\u653e\u5165\u5339\u914d\u7684\u725b\u7684\u54c1\u79cd\u4e3a \\(x\\) \u3002\u6709\u8f6c\u79fb\uff1a dp[i][j][x]\\to dp[i+1][j+1][x]\\\\ dp[i][j][H]\\to dp[i+1][j][H]\\\\ dp[i][j][G]\\to dp[i][j+1][G]\\\\ \u5f53\u7136\u6211\u4eec\u4e5f\u53ef\u4ee5\u8f6c\u6362\u94a6\u5b9a\u7684\u54c1\u79cd\uff1a\u5982\u679c\u4e4b\u524d\u6211\u4eec\u88ab\u5f3a\u5236\u4e0d\u9009 H \u725b\uff0c\u90a3\u4e48\u6700\u540e\u4e00\u4e2a\u672a\u5339\u914d\u7684 H \u725b\u6700\u591a\u662f\u7b2c \\(i\\) \u4e2a\u3002\u80fd\u4e0d\u653e\u5165\u5339\u914d\u7684 G \u725b\u9700\u8981\u79bb\u8be5\u725b\u8ddd\u79bb\u81f3\u5c11\u4e3a \\(K\\) \uff0c\u4e14\u5728\u8be5\u725b\u4e4b\u524d\u7684\u6240\u6709\u725b\u90fd\u8981\u653e\u5165\u5339\u914d\u3002\u9884\u5904\u7406\u51fa\u5bf9\u4e8e\u6240\u6709 \\(i\\) \uff0c\u6ee1\u8db3\u6761\u4ef6\u7684 G \u725b\u7f16\u53f7\u7684\u6700\u5c0f\u503c\uff0c\u5e76\u4e14\u5224\u65ad\u8fd9\u6bb5\u533a\u95f4\u7684\u725b\u662f\u5426\u80fd\u5168\u90e8\u5339\u914d\u5373\u53ef\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N^2)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 per ( i , A , 1 ) per ( j , B , 1 ){ if ( chk ( i , j )) lst [ i ][ j ] = lst [ i + 1 ][ j + 1 ] + 1 ; else lst [ i ][ j ] = 0 ; } int j = 1 ; rep ( i , 1 , A ){ while ( j <= B && ( chk ( i , j ) || G [ j ]. x < H [ i ]. x )) j ++ ; nxtH [ i ] = j ; } j = 1 ; rep ( i , 1 , B ){ while ( j <= A && ( chk ( j , i ) || H [ j ]. x < G [ i ]. x )) j ++ ; nxtG [ i ] = j ; } memset ( f , -0x3f , sizeof ( f )); memset ( g , -0x3f , sizeof ( g )); nxtG [ 0 ] = nxtH [ 0 ] = 1 ; f [ 0 ][ 0 ] = g [ 0 ][ 0 ] = 0 ; rep ( i , 0 , A ) rep ( j , 0 , B ){ int cnt = max ( nxtH [ i ] - j -1 , 0 ); if ( i + cnt <= A && lst [ i + 1 ][ j + 1 ] >= cnt ) Max ( g [ i + cnt ][ j + cnt ], f [ i ][ j ]); cnt = max ( nxtG [ j ] - i -1 , 0 ); if ( j + cnt <= B && lst [ i + 1 ][ j + 1 ] >= cnt ) Max ( f [ i + cnt ][ j + cnt ], g [ i ][ j ]); if ( i < A && j < B && chk ( i + 1 , j + 1 )){ Max ( f [ i + 1 ][ j + 1 ], f [ i ][ j ]); Max ( g [ i + 1 ][ j + 1 ], g [ i ][ j ]); } if ( i < A ) Max ( f [ i + 1 ][ j ], f [ i ][ j ] + H [ i + 1 ]. y ); if ( j < B ) Max ( g [ i ][ j + 1 ], g [ i ][ j ] + G [ j + 1 ]. y ); } printf ( \"%d \\n \" , max ( f [ A ][ B ], g [ A ][ B ])); T3 HILO \u00b6 \u9898\u76ee\u96be\u5ea6\uff1aUSACO P/\u7701\u9009- \u4e0d\u96be\u53d1\u73b0\u731c HI \u7684\u6570\u4e0d\u4f1a\u4f7f\u731c LO \u7684\u6570\u88ab\u8df3\u8fc7\u3002\u8bbe \\(y=N-x\\) \uff0c\u90a3\u4e48\u539f\u9898\u76f8\u5f53\u4e8e\u5c06 \\(a_1,a_2,\\dots,a_x\\) \u548c \\(b_1,b_2,\\cdots,b_y\\) \u6392\u5217\uff0c\u53ea\u8bb0\u5f55 \\(a,b\\) \u7684\u6bcf\u6b21\u4e0b\u6807\u6700\u5927\u503c\u7684\u51fa\u73b0\u4f4d\u7f6e\uff0c\u6c42\u671f\u671b \\(ba\\) \u7684\u6570\u91cf\u3002 \u8fd9\u53ef\u4ee5 dp \uff0c\u8bbe \\(dp[i][j][0/1]\\) \u4e3a\u5f53\u524d\u6700\u5927\u51fa\u73b0 \\(a_i,b_j\\) \u4ee5\u53ca\u6700\u540e\u4e00\u4e2a\u51fa\u73b0\u7684\u662f \\(a/b\\) \uff0c\u901a\u8fc7\u7b80\u5355\u7684\u8f6c\u79fb\u53ef\u4ee5\u505a\u5230 \\(O(N^3)\\) \u3002\u524d\u7f00\u548c\u4f18\u5316\u53ef\u4ee5\u505a\u5230 \\(O(N^2)\\) \uff0c\u8fd9\u91cc\u4e0d\u518d\u8d58\u8ff0\u3002 \u6bd4\u8f83\u5438\u5f15\u6211\u7684\u662f\u5728\u8d5b\u540e\u8ba8\u8bba\u4e2d\u770b\u5230\u7684 \\(O(N)\\) \u505a\u6cd5\uff0c\u8fd9\u91cc\u7b80\u5355\u7684\u8bc1\u660e\u4e00\u4e0b\u3002 \u7ed3\u8bba\uff1a\u4ee4 \\(H_0=0,H_N=1+\\frac{1}{2}+\\cdots+\\frac{1}{N}\\) . \u6709 E[\\#(ba)]=\\frac{1}{2}(H_x+H_y-H_N+\\frac{y}{N})\\\\ \u8bc1\u660e\uff1a \\(x=0\\) \u6216 \\(y=0\\) \u65f6\u7ed3\u8bba\u663e\u7136\u6210\u7acb\uff0c\u4e0d\u59a8\u5bf9 \\(y\\) \u5f52\u7eb3\u3002\u5373\u8bc1 \\((x,y)\\to(x,y+1)\\) \u540e\u671f\u671b\u7684\u53d8\u5316\u4e3a\uff1a \\Delta=\\frac12(\\frac1{y+1}-\\frac{1}{N+1}+\\frac{y+1}{N+1}-\\frac{y}{N})=\\frac{1}{2(y+1)}-\\frac{y}{2N(N+1)} \u8ba1\u7b97\u5bf9 \\(a_1a_2\\dots a_xb_2b_3\\dots b_y\\) \u7684\u6392\u5217\u4e2d\u63d2\u5165 \\(b_1\\) \u5bf9\u7b54\u6848\u7684\u8d21\u732e\uff0c \\(b_1\\) \u53ea\u80fd\u6392\u5728\u7b2c\u4e00\u4e2a\u51fa\u73b0\u7684 \\(b\\) \u4e4b\u524d\uff0c\u5426\u5219\u4f1a\u88ab\u8df3\u8fc7\u3002 \\(y\\) \u4e2a \\(b\\) \u5c06 \\(x\\) \u4e2a \\(a\\) \u5206\u6210 \\(y+1\\) \u6bb5\uff0c\u6545\u7b2c\u4e00\u4e2a \\(b\\) \u524d \\(a\\) \u7684\u671f\u671b\u4e2a\u6570\u4e3a \\(\\frac{x}{y+1}\\) \u4e2a\u3002\u8bbe\u524d\u9762\u6709 \\(k\\) \u4e2a \\(a\\) \u3002 \u63a5\u4e0b\u6765\uff0c\u53ea\u8981 \\(b_1\\) \u88ab\u63d2\u5165\u5728 \\(k\\) \u4e2a \\(a\\) \u4e2d\u6700\u5927\u7684 \\(a\\) \u524d\u9762\uff0c\u90fd\u4f1a\u5bf9\u671f\u671b\u8d21\u732e\u4e00\u4e2a \"ba\" \u3002\u6700\u5927\u7684 \\(a\\) \u7684\u671f\u671b\u4f4d\u7f6e\u4e3a\uff1a E[index]=\\left\\{\\begin{matrix} \\frac{k+1}2,\\qquad k>0\\\\ 0,\\qquad k=0\\\\ \\end{matrix}\\right. \\(k=0\\) \u5373\u4e3a\u539f\u6392\u5217\u9996\u9879\u662f \\(b\\) \u7684\u6982\u7387\uff0c\u4e3a \\(\\frac{y}{N}\\) \u3002 \u80fd\u5f97\u51fa\uff1a \\Delta = \\frac{1}{N+1}(\\frac{1}{2}\\times(\\frac{x}{y+1}+1)-\\frac{y}{N}\\times\\frac{0+1}{2})\\\\ =\\frac{1}{2(y+1)}-\\frac{y}{2N(N+1)} 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 const int N = 2e5 + 5 , P = 1e9 + 7 ; int n , x ; ll H [ N ], inv [ N ]; int main (){ n = read (), x = read (); inv [ 1 ] = 1 ; ll fac = 1 ; rep ( i , 2 , n ){ inv [ i ] = ( P - P / i ) * inv [ P % i ] % P ; fac = fac * i % P ; } rep ( i , 1 , n ) H [ i ] = ( H [ i -1 ] + inv [ i ]) % P ; int y = n - x ; cout << ( fac * inv [ 2 ] % P * ( inv [ n ] * y % P + H [ x ] + H [ y ] - H [ n ]) % P + P ) % P ; return 0 ; }","title":"USACO 21DEC Platinum"},{"location":"%E7%AC%94%E8%AE%B0/USACO%2021DEC/#usaco-21dec-platinum","text":"","title":"USACO 21DEC Platinum"},{"location":"%E7%AC%94%E8%AE%B0/USACO%2021DEC/#t1-ticket","text":"\u9898\u76ee\u96be\u5ea6\uff1aUSACO P/\u7701\u9009 \u5148\u60f3\u66b4\u529b\u505a\u6cd5\u3002\u6ce8\u610f\u5230\u4e00\u4e2a\u4eba\u4e0d\u4f1a\u91cd\u590d\u4e70\u7968\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u628a\u6bcf\u79cd\u7968\u770b\u4f5c\u865a\u62df\u8282\u70b9\uff0c\u4e70\u7968\u770b\u4f5c\u4ece \\(c_i\\) \u5230 \\(i\\) \u53f7\u7968\u8fb9\u6743\u4e3a \\(p_i\\) \u7684\u8fb9\uff0c\u540c\u65f6 \\(i\\) \u53f7\u7968\u5411\u533a\u95f4 \\([a_i,b_i]\\) \u4e2d\u7684\u6240\u6709\u70b9\u8fde\u8fb9\u6743\u4e3a \\(0\\) \u7684\u8fb9\u3002\u9898\u76ee\u5e0c\u671b\u6c42\u51fa\u6bcf\u4e2a\u70b9\u5230\u8fbe \\(1\\) \u548c \\(n\\) \u6240\u9700\u7684\u6700\u5c0f\u4ee3\u4ef7\uff0c\u4e0d\u59a8\u5efa\u53cd\u56fe\u4ee5 \\(1\\) \u548c \\(n\\) \u4e3a\u539f\u70b9\u5206\u522b\u8dd1\u4e00\u904d\u6700\u77ed\u8def\u3002 \u7136\u800c\u8fd9\u6837\u4f1a\u559c\u63d0 WA \u3002\u56e0\u4e3a\u4ecd\u7136\u6ca1\u6709\u89e3\u51b3\u91cd\u590d\u4e70\u7968\u7684\u95ee\u9898\uff0c\u4e24\u6761\u6700\u77ed\u8def\u7684\u4ea4\u96c6\u4e2d\u7684\u6240\u6709\u8fb9\u88ab\u7b97\u4e86\u4e24\u904d\u3002\u600e\u4e48\u89e3\u51b3\uff1f\u5148\u8bb0\u5f53\u524d\u7b54\u6848\u4e3a \\(dis_i=d1_i+dn_i\\) \uff0c\u82e5\u8282\u70b9 \\(u\\) \u7684\u4e24\u6761\u6700\u77ed\u8def\u5747\u7ecf\u8fc7\u5b83\u7684\u90bb\u5c45 \\(v\\) \uff0c\u4e0d\u96be\u53d1\u73b0 \\(dis_u=dis_v+w\\) \u3002\u8fd9\u548c\u5355\u6e90\u6700\u77ed\u8def\u7684\u677e\u5f1b\u672c\u8d28\u76f8\u540c\uff0c\u6211\u4eec\u5bf9\u7b54\u6848\u6570\u7ec4\u91cd\u65b0\u8dd1\u4e00\u904d\u6700\u77ed\u8def\u5373\u53ef\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(NK\\log(NK))\\) \u4e0b\u9762\u63d0\u4f9b\u4e24\u79cd\u4f18\u5316\u7684\u601d\u8def\uff0c\u7b2c\u4e00\u79cd\u662f\u8003\u573a\u7b2c\u4e00\u773c\u770b\u51fa\u7684\u7ebf\u6bb5\u6811\u4f18\u5316\u5efa\u56fe\uff0c\u5177\u4f53\u77e5\u8bc6\u53ef\u4ee5\u53c2\u8003\u8fd9\u4e2a\u535a\u5ba2 DS\u4f18\u5316\u5efa\u56fe \u3002 \u5bf9\u533a\u95f4\u4e2d\u7684\u6bcf\u4e2a\u70b9\u66b4\u529b\u8fde\u8fb9\u662f\u4e0d\u597d\u7684\uff01\u6211\u4eec\u7528\u7ebf\u6bb5\u6811\u5efa\u56fe\u7684\u65b9\u5f0f\u8fde\u8fb9\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a \\(O(N\\log^2 N)\\) \u3002USACO\u8bc4\u6d4b\u673a\u6216\u6d1b\u8c37\u5f00 O2 \u5747\u53ef\u901a\u8fc7\u672c\u9898\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e6 + 5 , M = 7e6 + 5 ; const ll inf = 1e16 ; int head [ N ], cnt ; struct Edge { int to , nxt , w ; } e [ M ]; inline void add ( int u , int v , int w ){ e [ ++ cnt ] = { v , head [ u ], w }; head [ u ] = cnt ;} int n , q , s ; struct Node { int l , r ;} t [ N ]; #define ls (p<<1) #define rs (ls|1) inline void build ( int p , int l , int r ){ t [ p ]. l = l , t [ p ]. r = r ; if ( l == r ){ //\u53f6\u5b50\u8282\u70b9\u4e0e\u539f\u56fe\u52a0\u8fb9 add ( l + 8 * n , p , 0 ); add ( p + 4 * n , l + 8 * n , 0 ); add ( p , l + 8 * n , 0 ); add ( l + 8 * n , p + 4 * n , 0 ); return ; } //\u5411\u513f\u5b50\u8fde\u8fb9 add ( p , ls , 0 ); add (( ls ) + 4 * n , p + 4 * n , 0 ); add ( p , rs , 0 ); add (( rs ) + 4 * n , p + 4 * n , 0 ); int mid = ( l + r ) >> 1 ; build ( ls , l , mid ); build ( rs , mid + 1 , r ); } inline void upd ( int p , int L , int R , int u , int w ){ int l = t [ p ]. l , r = t [ p ]. r , mid = ( l + r ) >> 1 ; if ( l == L && r == R ){ //\u5f53\u524d\u8282\u70b9\u8986\u76d6\u533a\u95f4 add ( p + 4 * n , u + 8 * n , w ); return ; } if ( R <= mid ) upd ( ls , L , R , u , w ); else if ( L > mid ) upd ( rs , L , R , u , w ); else { upd ( ls , L , mid , u , w ); upd ( rs , mid + 1 , R , u , w ); } } ll dis [ N ], d [ N ]; struct node { ll dis ; int pos ; bool operator < ( const node & x ) const { return x . dis < dis ; } }; bool vis [ N ]; priority_queue < node > pq ; inline void dijkstra ( bool op = 0 ){ if ( ! op ){ memset ( dis , 0x3f , sizeof ( dis )); dis [ s ] = 0 ; pq . push ({ 0 , s }); } else { rep ( i , 1 , 9 * n + q ) pq . push ({ dis [ i ], i }); } memset ( vis , 0 , sizeof ( vis )); while ( ! pq . empty ()){ node tmp = pq . top (); pq . pop (); int x = tmp . pos ; if ( vis [ x ]) continue ; vis [ x ] = 1 ; for ( int i = head [ x ]; i ; i = e [ i ]. nxt ){ int y = e [ i ]. to ; if ( dis [ y ] > dis [ x ] + e [ i ]. w ){ dis [ y ] = dis [ x ] + e [ i ]. w ; pq . push ({ dis [ y ], y }); } } } } int main (){ n = read (), q = read (); build ( 1 , 1 , n ); rep ( i , 1 , q ){ int a = read (), w = read (), b = read (), c = read (); upd ( 1 , b , c , i + n , 0 ); add ( 9 * n + i , a + 8 * n , w ); } s = 8 * n + 1 ; dijkstra (); memcpy ( d , dis , sizeof ( d )); //rep(i,1,n)cout<<dis[i+8*n]<<' '; s = 9 * n ; dijkstra (); rep ( i , 1 , 9 * n + q ) dis [ i ] += d [ i ]; dijkstra ( 1 ); rep ( i , 1 , n ){ if ( dis [ i + 8 * n ] > inf ) puts ( \"-1\" ); else printf ( \"%lld \\n \" , dis [ i + 8 * n ]); } return 0 ; } \u5982\u4f55\u4f18\u5316\uff1f\u8003\u8651 dijkstra \u65f6\u5b9e\u9645\u4e0a\u5728\u505a\u4ec0\u4e48\u3002\u539f\u56fe\u4e2d\u7684\u8282\u70b9\u4f1a\u5f71\u54cd\u5c06\u5b83\u5305\u542b\u7684\u7968\u7684\u865a\u62df\u8282\u70b9\uff0c\u7136\u540e\u8fd9\u4e2a\u865a\u62df\u8282\u70b9\u4ec5\u5f71\u54cd\u5176\u6240\u5bf9\u5e94\u7684\u4e00\u4e2a\u539f\u56fe\u8282\u70b9 \\((i\\to c_i)\\) \u3002\u5176\u6b21\uff0c\u6211\u4eec\u77e5\u9053\u5806\u4f18\u5316 dijkstra \u540e\u6bcf\u4e2a\u7968\u4ec5\u4f1a\u88ab\u66f4\u65b0\u4e00\u6b21\u3002\u4e8e\u662f\u5e76\u4e0d\u9700\u8981\u5efa\u51fa\u56fe\uff0c\u5728\u7ebf\u6bb5\u6811\u4e0a\u8f6c\u79fb\u5e76\u4e14\u5bf9\u66f4\u65b0\u5b8c\u7684\u533a\u95f4\u6253\u4e0a\u6807\u8bb0\u5c31\u53ef\u4ee5\u505a\u5230 \\(O(N\\log N)\\) \uff08\u4ee3\u7801\u5495\u5495\u5495\uff09\u3002 \u7b2c\u4e8c\u79cd\u505a\u6cd5\u6765\u81ea Benq \u7684\u9898\u89e3\u3002\u540c\u6837\u5229\u7528\u4e0a\u9762\u7684\u6027\u8d28\uff0c\u5bf9\u6240\u6709\u7968\u6309\u5de6\u7aef\u70b9\u5347\u5e8f\u6392\u5217\uff0c\u6ce8\u610f\u5230\u6bcf\u4e2a\u95e8\u7968\u6700\u591a\u5165\u961f\u4e00\u6b21\uff0c\u5efa\u4e00\u68f5\u52bf\u80fd\u7ebf\u6bb5\u6811\u7ef4\u62a4\u4e00\u6bb5\u533a\u95f4\u7684\u6240\u6709\u7968\u53f3\u7aef\u70b9\u7684\u6700\u5927\u503c\u5373\u53ef\u3002\u5728\u6bcf\u4e2a\u7968\u5165\u961f\u540e\u6253\u4e0a\u6807\u8bb0\uff0c\u5747\u644a\u5206\u6790\u53ef\u4ee5\u5f97\u51fa\u590d\u6742\u5ea6\u4e3a \\(O(N\\log N)\\) \u3002\u76ee\u524d\u5728\u6d1b\u8c37\u4e0a\u662f\u6700\u4f18\u89e3\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N\\log N)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define vi vector<int> #define fi first #define se second #define pb push_back #define ALL(x) x.begin(),x.end() #define sz(x) int(x.size()) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 ; const ll inf = 1e18 ; struct ticket { int c , p , a , b ;}; bool cmp ( ticket x , ticket y ){ return x . a < y . a ;} struct SegTree { int n , sz ; vector < int > mx ; vector < ticket > tickets ; #define ls (p<<1) #define rs (ls|1) void pushup ( int p ){ mx [ p ] = max ( mx [ ls ], mx [ rs ]);} SegTree ( vector < ticket > tickets ) : tickets ( tickets ){ //\u521d\u59cb\u5316 n = 1 ; sz = sz ( tickets ); while ( n < sz ) n <<= 1 ; mx . assign ( 2 * n , 0 ); rep ( i , 0 , n -1 ){ if ( i < sz ){ mx [ i + n ] = tickets [ i ]. b ; } else mx [ i + n ] = -1 ; } per ( i , n -1 , 1 ) pushup ( i ); } //\u627e\u5230\u6240\u6709\u53ef\u80fd\u8f6c\u79fb\u7684\u95e8\u7968\u5e76\u79fb\u9664 void remove ( vector < int > & v , int x , int p = 1 , int L = 0 , int R = -1 ){ if ( R == -1 ) R += n ; if ( L >= sz || tickets [ L ]. a > x || mx [ p ] < x ) return ; if ( L == R ){ mx [ p ] = -1 ; v . pb ( L ); return ; } int mid = ( L + R ) >> 1 ; remove ( v , x , ls , L , mid ), remove ( v , x , rs , mid + 1 , R ); pushup ( p ); } }; void Min ( ll & a , const ll b ){ if ( a > b ) a = b ;} int main (){ int n = read (), k = read (); vector < ticket > tickets ( k ); for ( auto & t : tickets ){ t . c = read () -1 , t . p = read (), t . a = read () -1 , t . b = read () -1 ; } sort ( ALL ( tickets ), cmp ); auto Dij = [ & ]( vector < ll > & dis ){ //Dijkstra priority_queue < pair < ll , int >> pq ; rep ( i , 0 , k -1 ){ Min ( dis [ tickets [ i ]. c ], dis [ i + n ] + tickets [ i ]. p ); } rep ( i , 0 , n -1 ){ if ( dis [ i ] < inf ) pq . push ({ - dis [ i ], i }); } SegTree seg ( tickets ); while ( ! pq . empty ()){ pii x = pq . top (); pq . pop (); if ( - x . fi > dis [ x . se ]) continue ; vector < int > vec ; seg . remove ( vec , x . se ); //\u627e\u5230\u8f6c\u79fb\u7684\u95e8\u7968 for ( int t : vec ){ if ( dis [ t + n ] > dis [ x . se ]){ dis [ t + n ] = dis [ x . se ]; if ( dis [ tickets [ t ]. c ] > dis [ x . se ] + tickets [ t ]. p ){ dis [ tickets [ t ]. c ] = dis [ x . se ] + tickets [ t ]. p ; pq . push ({ - dis [ tickets [ t ]. c ], tickets [ t ]. c }); } } } } }; //\u4e09\u6b21\u6700\u77ed\u8def vector < ll > L ( n + k , inf ), R ( n + k , inf ), dis ( n + k ); L [ 0 ] = 0 , R [ n -1 ] = 0 ; Dij ( L ), Dij ( R ); rep ( i , 0 , n + k -1 ) dis [ i ] = L [ i ] + R [ i ]; Dij ( dis ); rep ( i , 0 , n -1 ){ if ( dis [ i ] < inf ) printf ( \"%lld \\n \" , dis [ i ]); else puts ( \"-1\" ); } return 0 ; }","title":"T1 Ticket"},{"location":"%E7%AC%94%E8%AE%B0/USACO%2021DEC/#t2-paired-up","text":"\u9898\u76ee\u96be\u5ea6\uff1aUSACO P+/NOI- \u5b50\u4efb\u52a1 1\uff1a \\(T=1,N\\le 5000\\) \u8bbe \\(dp[i][j]\\) \u4e3a\u5f53\u524d\u8003\u8651\u5230\u7b2c \\(i\\) \u5934 H \u725b\uff0c\u7b2c \\(j\\) \u5934 G \u725b\u65f6\u5339\u914d\u7684\u725b\u7684\u6700\u5927\u6743\u503c\u548c\u3002\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u9009\u62e9\u4e0d\u5339\u914d \\(i\\) \uff0c\u4e0d\u5339\u914d \\(j\\) \uff0c\u6216\u8005\u662f\u5c06 \\(i\\) \u548c \\(j\\) \u5339\u914d\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N^2)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define pii pair<int,int> #define vi vector<int> int main (){ T = read (), n = read (), K = read (); vector < pii > cow [ 2 ]; cow [ 0 ]. pb ({ 0 , 0 }), cow [ 1 ]. pb ({ 0 , 0 }); rep ( i , 1 , n ){ cin >> c ; int x = read (), y = read (); cow [ c == 'H' ]. pb ({ x , y }); sum += y ; } A = sz ( cow [ 0 ]), B = sz ( cow [ 1 ]); if ( T == 1 ){ vector < vi > dp ( A + 1 , vi ( B + 1 )); rep ( i , 1 , A ) rep ( j , 1 , B ){ dp [ i ][ j ] = max ( dp [ i -1 ][ j ], dp [ i ][ j -1 ]); if ( abs ( cow [ 0 ][ i ]. x - cow [ 1 ][ j ]. x ) <= K ) dp [ i ][ j ] = max ( dp [ i ][ j ], dp [ i -1 ][ j -1 ] + cow [ 0 ][ i ]. y + cow [ 1 ][ j ]. y ); } printf ( \"%d \\n \" , sum - dp [ A ][ B ]); } } \u5b50\u4efb\u52a1 2\uff1a \\(T=2,N\\le 300\\) \u5bf9\u4e8e\u6700\u5927\u5316\u672a\u5339\u914d\u7684\u6743\u503c\u548c\uff0c\u6211\u4eec\u8003\u8651\u4f7f\u7528\u7c7b\u4f3c\u7684 dp \u72b6\u6001\u3002\u4f46\u662f\u6ce8\u610f\u5230\u5728\u4e0a\u8ff0\u8f6c\u79fb\u65f6\uff0c\u6709\u65f6\u5019\u6211\u4eec\u8003\u8651\u7684\u5e76\u4e0d\u662f \u6700\u5927 \u5339\u914d\uff0c\u53ea\u662f\u56e0\u4e3a\u6700\u4f18\u89e3\u53ea\u4ea7\u751f\u4e8e\u6700\u5927\u5339\u914d\uff08\u82e5\u4e0d\u662f\u6700\u5927\u5339\u914d\uff0c\u591a\u5339\u914d\u4e24\u5934\u725b\u663e\u7136\u66f4\u4f18\uff09\uff0c\u6211\u4eec\u624d\u80fd\u5f97\u5230 \\(T=1\\) \u65f6\u7684\u7b54\u6848\u3002 \u4e8e\u662f\u6211\u4eec\u9700\u8981\u628a \u6700\u5927 \u5339\u914d\u8fd9\u4e00\u9650\u5236\u52a0\u5165\u6211\u4eec\u7684 dp \u72b6\u6001\uff0c\u5177\u4f53\u5730\uff0c\u6211\u4eec\u52a0\u5165\u4e00\u7ef4 \\(k\\) \u8868\u793a\u6700\u540e\u4e00\u5934\u672a\u5339\u914d\u7684\u725b\uff0c\u5047\u8bbe\u6211\u4eec\u4e0d\u60f3\u5339\u914d\u5f53\u524d\u7684 H \u725b\uff0c\u90a3\u4e48\u725b \\(k\\) \u5fc5\u987b\u6ee1\u8db3\u5982\u4e0b\u6761\u4ef6\u4e4b\u4e00\uff1a \u725b \\(k\\) \u7684\u54c1\u79cd\u662f \\(H\\) \u725b \\(k\\) \u4e0e\u5f53\u524d\u725b\u7684\u8ddd\u79bb\u5927\u4e8e \\(K\\) \u72b6\u6001\u91cf\u662f \\(O(N^3)\\) \uff0c\u6bcf\u6b21\u8f6c\u79fb\u8fd8\u662f \\(O(1)\\) \u7684\uff0c\u8db3\u591f\u901a\u8fc7\u8be5\u5b50\u4efb\u52a1\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N^3)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 vector < vector < vi >> dp ( A + 1 , vector < vi > ( B + 1 , vi ( n + 1 , -1 ))); dp [ 0 ][ 0 ][ n ] = 0 ; rep ( i , 0 , A ) rep ( j , 0 , B ) rep ( k , 0 , n ){ if ( dp [ i ][ j ][ k ] == -1 ) continue ; if ( i < A && j < B && abs ( cow [ 0 ][ i ]. x - cow [ 1 ][ j ]. x ) <= K ) Max ( dp [ i + 1 ][ j + 1 ][ k ], dp [ i ][ j ][ k ]); if ( i < A && ( ! ( A <= k && k < n && cow [ 0 ][ i ]. x <= cow [ 1 ][ k - A ]. x + K ))) Max ( dp [ i + 1 ][ j ][ i ], dp [ i ][ j ][ k ] + cow [ 0 ][ i ]. y ); if ( j < B && ( ! ( k < A && cow [ 1 ][ j ]. x <= cow [ 0 ][ k ]. x + K ))) Max ( dp [ i ][ j + 1 ][ A + j ], dp [ i ][ j ][ k ] + cow [ 1 ][ j ]. y ); } int ans = 0 ; rep ( i , 0 , n ) Max ( ans , dp [ A ][ B ][ i ]); printf ( \"%d \\n \" , ans ); \u5b50\u4efb\u52a1 1\uff1a \\(T=1,N\\le 5000\\) \u8003\u8651\u6700\u7ec8\u7684\u4f18\u5316\uff0c \\(i,j\\) \u4e24\u7ef4\u6bd4\u8f83\u96be\u820d\u53bb\uff0c\u4f46\u6211\u4eec\u53ef\u4ee5\u4fee\u6539\u6700\u540e\u4e00\u7ef4\u7684\u5b9a\u4e49\u3002\u5b9a\u4e49 \\(dp[i][j][x]\\) \u4e3a\u5904\u7406\u5230\u524d \\(i\\) \u5934 H \u725b\uff0c \\(j\\) \u5934 G \u725b\uff0c\u5e76\u4e14\u94a6\u5b9a\u4e0b\u4e00\u79cd\u4e0d\u653e\u5165\u5339\u914d\u7684\u725b\u7684\u54c1\u79cd\u4e3a \\(x\\) \u3002\u6709\u8f6c\u79fb\uff1a dp[i][j][x]\\to dp[i+1][j+1][x]\\\\ dp[i][j][H]\\to dp[i+1][j][H]\\\\ dp[i][j][G]\\to dp[i][j+1][G]\\\\ \u5f53\u7136\u6211\u4eec\u4e5f\u53ef\u4ee5\u8f6c\u6362\u94a6\u5b9a\u7684\u54c1\u79cd\uff1a\u5982\u679c\u4e4b\u524d\u6211\u4eec\u88ab\u5f3a\u5236\u4e0d\u9009 H \u725b\uff0c\u90a3\u4e48\u6700\u540e\u4e00\u4e2a\u672a\u5339\u914d\u7684 H \u725b\u6700\u591a\u662f\u7b2c \\(i\\) \u4e2a\u3002\u80fd\u4e0d\u653e\u5165\u5339\u914d\u7684 G \u725b\u9700\u8981\u79bb\u8be5\u725b\u8ddd\u79bb\u81f3\u5c11\u4e3a \\(K\\) \uff0c\u4e14\u5728\u8be5\u725b\u4e4b\u524d\u7684\u6240\u6709\u725b\u90fd\u8981\u653e\u5165\u5339\u914d\u3002\u9884\u5904\u7406\u51fa\u5bf9\u4e8e\u6240\u6709 \\(i\\) \uff0c\u6ee1\u8db3\u6761\u4ef6\u7684 G \u725b\u7f16\u53f7\u7684\u6700\u5c0f\u503c\uff0c\u5e76\u4e14\u5224\u65ad\u8fd9\u6bb5\u533a\u95f4\u7684\u725b\u662f\u5426\u80fd\u5168\u90e8\u5339\u914d\u5373\u53ef\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N^2)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 per ( i , A , 1 ) per ( j , B , 1 ){ if ( chk ( i , j )) lst [ i ][ j ] = lst [ i + 1 ][ j + 1 ] + 1 ; else lst [ i ][ j ] = 0 ; } int j = 1 ; rep ( i , 1 , A ){ while ( j <= B && ( chk ( i , j ) || G [ j ]. x < H [ i ]. x )) j ++ ; nxtH [ i ] = j ; } j = 1 ; rep ( i , 1 , B ){ while ( j <= A && ( chk ( j , i ) || H [ j ]. x < G [ i ]. x )) j ++ ; nxtG [ i ] = j ; } memset ( f , -0x3f , sizeof ( f )); memset ( g , -0x3f , sizeof ( g )); nxtG [ 0 ] = nxtH [ 0 ] = 1 ; f [ 0 ][ 0 ] = g [ 0 ][ 0 ] = 0 ; rep ( i , 0 , A ) rep ( j , 0 , B ){ int cnt = max ( nxtH [ i ] - j -1 , 0 ); if ( i + cnt <= A && lst [ i + 1 ][ j + 1 ] >= cnt ) Max ( g [ i + cnt ][ j + cnt ], f [ i ][ j ]); cnt = max ( nxtG [ j ] - i -1 , 0 ); if ( j + cnt <= B && lst [ i + 1 ][ j + 1 ] >= cnt ) Max ( f [ i + cnt ][ j + cnt ], g [ i ][ j ]); if ( i < A && j < B && chk ( i + 1 , j + 1 )){ Max ( f [ i + 1 ][ j + 1 ], f [ i ][ j ]); Max ( g [ i + 1 ][ j + 1 ], g [ i ][ j ]); } if ( i < A ) Max ( f [ i + 1 ][ j ], f [ i ][ j ] + H [ i + 1 ]. y ); if ( j < B ) Max ( g [ i ][ j + 1 ], g [ i ][ j ] + G [ j + 1 ]. y ); } printf ( \"%d \\n \" , max ( f [ A ][ B ], g [ A ][ B ]));","title":"T2 Paired Up"},{"location":"%E7%AC%94%E8%AE%B0/USACO%2021DEC/#t3-hilo","text":"\u9898\u76ee\u96be\u5ea6\uff1aUSACO P/\u7701\u9009- \u4e0d\u96be\u53d1\u73b0\u731c HI \u7684\u6570\u4e0d\u4f1a\u4f7f\u731c LO \u7684\u6570\u88ab\u8df3\u8fc7\u3002\u8bbe \\(y=N-x\\) \uff0c\u90a3\u4e48\u539f\u9898\u76f8\u5f53\u4e8e\u5c06 \\(a_1,a_2,\\dots,a_x\\) \u548c \\(b_1,b_2,\\cdots,b_y\\) \u6392\u5217\uff0c\u53ea\u8bb0\u5f55 \\(a,b\\) \u7684\u6bcf\u6b21\u4e0b\u6807\u6700\u5927\u503c\u7684\u51fa\u73b0\u4f4d\u7f6e\uff0c\u6c42\u671f\u671b \\(ba\\) \u7684\u6570\u91cf\u3002 \u8fd9\u53ef\u4ee5 dp \uff0c\u8bbe \\(dp[i][j][0/1]\\) \u4e3a\u5f53\u524d\u6700\u5927\u51fa\u73b0 \\(a_i,b_j\\) \u4ee5\u53ca\u6700\u540e\u4e00\u4e2a\u51fa\u73b0\u7684\u662f \\(a/b\\) \uff0c\u901a\u8fc7\u7b80\u5355\u7684\u8f6c\u79fb\u53ef\u4ee5\u505a\u5230 \\(O(N^3)\\) \u3002\u524d\u7f00\u548c\u4f18\u5316\u53ef\u4ee5\u505a\u5230 \\(O(N^2)\\) \uff0c\u8fd9\u91cc\u4e0d\u518d\u8d58\u8ff0\u3002 \u6bd4\u8f83\u5438\u5f15\u6211\u7684\u662f\u5728\u8d5b\u540e\u8ba8\u8bba\u4e2d\u770b\u5230\u7684 \\(O(N)\\) \u505a\u6cd5\uff0c\u8fd9\u91cc\u7b80\u5355\u7684\u8bc1\u660e\u4e00\u4e0b\u3002 \u7ed3\u8bba\uff1a\u4ee4 \\(H_0=0,H_N=1+\\frac{1}{2}+\\cdots+\\frac{1}{N}\\) . \u6709 E[\\#(ba)]=\\frac{1}{2}(H_x+H_y-H_N+\\frac{y}{N})\\\\ \u8bc1\u660e\uff1a \\(x=0\\) \u6216 \\(y=0\\) \u65f6\u7ed3\u8bba\u663e\u7136\u6210\u7acb\uff0c\u4e0d\u59a8\u5bf9 \\(y\\) \u5f52\u7eb3\u3002\u5373\u8bc1 \\((x,y)\\to(x,y+1)\\) \u540e\u671f\u671b\u7684\u53d8\u5316\u4e3a\uff1a \\Delta=\\frac12(\\frac1{y+1}-\\frac{1}{N+1}+\\frac{y+1}{N+1}-\\frac{y}{N})=\\frac{1}{2(y+1)}-\\frac{y}{2N(N+1)} \u8ba1\u7b97\u5bf9 \\(a_1a_2\\dots a_xb_2b_3\\dots b_y\\) \u7684\u6392\u5217\u4e2d\u63d2\u5165 \\(b_1\\) \u5bf9\u7b54\u6848\u7684\u8d21\u732e\uff0c \\(b_1\\) \u53ea\u80fd\u6392\u5728\u7b2c\u4e00\u4e2a\u51fa\u73b0\u7684 \\(b\\) \u4e4b\u524d\uff0c\u5426\u5219\u4f1a\u88ab\u8df3\u8fc7\u3002 \\(y\\) \u4e2a \\(b\\) \u5c06 \\(x\\) \u4e2a \\(a\\) \u5206\u6210 \\(y+1\\) \u6bb5\uff0c\u6545\u7b2c\u4e00\u4e2a \\(b\\) \u524d \\(a\\) \u7684\u671f\u671b\u4e2a\u6570\u4e3a \\(\\frac{x}{y+1}\\) \u4e2a\u3002\u8bbe\u524d\u9762\u6709 \\(k\\) \u4e2a \\(a\\) \u3002 \u63a5\u4e0b\u6765\uff0c\u53ea\u8981 \\(b_1\\) \u88ab\u63d2\u5165\u5728 \\(k\\) \u4e2a \\(a\\) \u4e2d\u6700\u5927\u7684 \\(a\\) \u524d\u9762\uff0c\u90fd\u4f1a\u5bf9\u671f\u671b\u8d21\u732e\u4e00\u4e2a \"ba\" \u3002\u6700\u5927\u7684 \\(a\\) \u7684\u671f\u671b\u4f4d\u7f6e\u4e3a\uff1a E[index]=\\left\\{\\begin{matrix} \\frac{k+1}2,\\qquad k>0\\\\ 0,\\qquad k=0\\\\ \\end{matrix}\\right. \\(k=0\\) \u5373\u4e3a\u539f\u6392\u5217\u9996\u9879\u662f \\(b\\) \u7684\u6982\u7387\uff0c\u4e3a \\(\\frac{y}{N}\\) \u3002 \u80fd\u5f97\u51fa\uff1a \\Delta = \\frac{1}{N+1}(\\frac{1}{2}\\times(\\frac{x}{y+1}+1)-\\frac{y}{N}\\times\\frac{0+1}{2})\\\\ =\\frac{1}{2(y+1)}-\\frac{y}{2N(N+1)} 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 const int N = 2e5 + 5 , P = 1e9 + 7 ; int n , x ; ll H [ N ], inv [ N ]; int main (){ n = read (), x = read (); inv [ 1 ] = 1 ; ll fac = 1 ; rep ( i , 2 , n ){ inv [ i ] = ( P - P / i ) * inv [ P % i ] % P ; fac = fac * i % P ; } rep ( i , 1 , n ) H [ i ] = ( H [ i -1 ] + inv [ i ]) % P ; int y = n - x ; cout << ( fac * inv [ 2 ] % P * ( inv [ n ] * y % P + H [ x ] + H [ y ] - H [ n ]) % P + P ) % P ; return 0 ; }","title":"T3 HILO"},{"location":"%E7%AC%94%E8%AE%B0/USACO%2022FEB/","text":"T1 \u00b6 \u9898\u610f\uff1a\u7ed9\u5b9a\u79bb\u6563\u5316\u5750\u6807\u540e\u7684 \\(n\\) \u4e2a\u77e9\u5f62\u7684\u4f4d\u7f6e \\((x_1,y_1,x_2,y_2)\\) \uff0c\u5b83\u4eec\u5c06\u5e73\u9762\u5206\u4e3a\u82e5\u5e72\u4e2a\u533a\u57df\u3002\u4ee5\u4e0b\u5217\u89c4\u5219\u9ed1\u767d\u67d3\u8272\uff1a \u6240\u6709\u77e9\u5f62\u7684\u5e76\u96c6\u7684\u5916\u754c\u662f\u767d\u8272 \u76f8\u90bb\u533a\u57df\u7684\u989c\u8272\u4e0d\u540c \u4e00\u4e2a\u8be2\u95ee\uff0c \\(T=1\\) \u65f6\u8be2\u95ee\u603b\u533a\u57df\u6570\u91cf\uff0c \\(T=2\\) \u65f6\u8be2\u95ee\u9ed1\u767d\u8272\u533a\u57df\u5206\u522b\u7684\u6570\u91cf\u3002 \u6570\u636e\u8303\u56f4\uff1a \\(1\\le n\\le 10^5\\) \u5bf9\u4e8e \\(T=1\\) \uff0c\u6211\u4eec\u8fd0\u7528\u5e73\u9762\u56fe\u6b27\u62c9\u5b9a\u7406\uff08\u6216\u8005\u627e\u89c4\u5f8b\uff09\uff1a \\(V-E+F=C+1\\) \uff0c\u53d1\u73b0\u533a\u57df\u6570\u91cf\u7b49\u4e8e\u4ea4\u70b9\u6570\u91cf\u52a0\u8fde\u901a\u5757\u6570\u91cf\u52a01\uff0c\u626b\u63cf\u7ebf\u8ba1\u7b97\u4ea4\u70b9\u6570\u91cf\u5373\u53ef\uff0c\u7528 set \u7ef4\u62a4\u8fde\u901a\u5757\u5373\u53ef\u3002 \\(T=2\\) \uff0c\u5bf9\u4e8e \\(n\\le 2500\\) \uff0c\u53ef\u4ee5\u53d1\u73b0\u88ab\u5947\u6570\u4e2a\u77e9\u5f62\u8986\u76d6\u7684\u533a\u57df\u662f \\(1\\) \uff0c\u5076\u6570\u4e2a\u662f \\(0\\) \uff0c\u5c06\u4e8c\u7ef4\u533a\u95f4\u64cd\u4f5c\u5dee\u5206\u4e3a\u5355\u70b9\u4fee\u6539\uff0c\u6700\u540e\u524d\u7f00\u548c\u7b97\u51fa\u6bcf\u4e2a\u70b9\u7684\u989c\u8272\u518dbfs\u7b97\u533a\u57df\u6570\u91cf\u3002\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a \\(O(n^2)\\) \u3002 \u5b9e\u9645\u4e0a\u5e76\u4e0d\u9700\u8981\u6b27\u62c9\u5b9a\u7406\uff0c\u7528\u6811\u72b6\u6570\u7ec4\u7ef4\u62a4\u989c\u8272\u6bb5\u6570\uff0cset\u7ef4\u62a4\u6bcf\u4e2a\u8fb9\u8fde\u901a\u5757\u6700\u5de6\u4e00\u6761\u8fb9\u7684\u4e0a\u4e0b\u7aef\u70b9\uff0c\u5c31\u53ef\u4ee5\u5904\u7406\u591a\u4e2a\u8fde\u901a\u5757\u7684\u60c5\u51b5\u3002idea \u6765\u81ea @SharpnessV \u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define vi vector<int> #define fi first #define se second #define pb push_back #define ALL(x) x.begin(),x.end() #define sz(x) int(x.size()) #define ll long long using namespace std ; const int N = 2e5 + 5 ; int n , T , op [ N ], L [ N ], R [ N ], t [ N ]; ll c [ 2 ]; void ins ( int x , int v ){ for (; x <= n + n ; x += x & - x ) t [ x ] += v ; } int sum ( int x ){ int res = 0 ; for (; x ; x -= x & - x ) res += t [ x ]; return res ; } void work ( int x , int y ){ int cur = sum ( x ) & 1 , cnt = 1 + sum ( y ) - sum ( x ); //start color & number of segs c [ cur ] += ( cnt + 1 ) / 2 , c [ cur ^ 1 ] += cnt / 2 ; } bool vis [ N ]; struct node { int pos , val , id ; bool operator < ( const node & a ) const { return pos < a . pos ;} }; set < node > S ; void check ( int x , int y ){ auto cur = S . lower_bound ({ x , 0 , 0 }); vector < node > v ; while ( cur != S . end ()){ if (( * cur ). pos > y ) break ; v . pb ( * cur ); cur ++ ; } if ( v . empty ()) return ; sort ( v . begin (), v . end (),[]( node x , node y ){ return x . id < y . id ;}); int id = v [ 0 ]. id ; for ( auto t : v ) if ( t . id != id ){ //\u5408\u5e76 if ( ! vis [ t . id ]){ vis [ t . id ] = 1 , c [ t . val ] -- ; S . erase ({ L [ t . id ], 0 , 0 }), S . erase ({ R [ t . id ] + 1 , 0 , 0 }); } } } int main (){ cin . tie ( 0 ) -> sync_with_stdio ( 0 ); cin >> n >> T ; rep ( i , 1 , n ){ int x , y , X , Y ; cin >> x >> y >> X >> Y ; op [ x ] = 1 , L [ x ] = y , R [ x ] = Y - 1 ; op [ X ] = -1 , L [ X ] = y , R [ X ] = Y - 1 ; } rep ( i , 1 , 2 * n ){ ins ( L [ i ], op [ i ]), ins ( R [ i ] + 1 , op [ i ]); work ( L [ i ], R [ i ]); check ( L [ i ], R [ i ] + 1 ); if ( op [ i ] == 1 ){ if ( sum ( L [ i ]) == sum ( R [ i ])){ //\u65b0\u8fde\u901a\u5757 int w = ( sum ( L [ i ]) & 1 ) ^ 1 ; c [ w ] ++ ; S . insert ({ L [ i ], w , i }), S . insert ({ R [ i ] + 1 , w , i }); } } else { //\u51cf\u53bb\u591a\u7b97\u7684\u989c\u8272 c [ sum ( L [ i ] - 1 ) & 1 ] -- , c [ sum ( R [ i ] + 1 ) & 1 ] -- ; auto cur = S . lower_bound ({ L [ i ], 0 , 0 }); if ( cur != S . end () && ( * cur ). pos == L [ i ]){ S . erase ( cur ); S . erase ({ R [ i ] + 1 , 0 , 0 }); } } } c [ 0 ] ++ ; if ( T == 1 ) cout << c [ 0 ] + c [ 1 ] << '\\n' ; else cout << c [ 0 ] << ' ' << c [ 1 ] << '\\n' ; return 0 ; } T2 \u00b6 \u9898\u610f\uff1a\u7ed9\u5b9a\u4e00\u4e2a\u957f\u5ea6\u4e3a \\(n\\) \u7684\u5e8f\u5217 \\(a\\) \uff0c\u4f60\u53ef\u4ee5\u8fdb\u884c\u4e24\u79cd\u64cd\u4f5c\uff1a \u5408\u5e76\uff1a\u5c06\u76f8\u90bb\u4e24\u4e2a\u6570 \\(a,b\\) \u5220\u9664\u5e76\u5728\u540c\u4e00\u4f4d\u7f6e\u63d2\u5165 \\(a+b\\) \u3002 \u5206\u88c2\uff1a\u5c06\u67d0\u4e2a\u6570 \\(a\\) \u5220\u9664\u5e76\u5728\u540c\u4e00\u4f4d\u7f6e\u63d2\u5165 \\(x,y\\) \uff0c\u6ee1\u8db3 \\(x+y = a\\) \u3002 \u6709 \\(q\\) \u4e2a\u8be2\u95ee\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u8be2\u95ee\u4e2d\u7684 \\(k\\) \uff0c\u6c42\u6700\u5c11\u64cd\u4f5c\u6b21\u6570\u4f7f\u5f97\u5e8f\u5217\u4e2d\u6240\u6709\u6570\u90fd\u4e3a \\(k\\) \u3002 \u6570\u636e\u8303\u56f4\uff1a \\(1\\le n,q\\le 10^5,1\\le a_i,k,\\sum a_i\\le 10^{18}\\) \u9996\u5148 \\(k\\) \u4e0d\u4e3a \\(S=\\sum a_i\\) \u7684\u56e0\u5b50\u65f6\u663e\u7136\u65e0\u89e3\u3002 \u5982\u679c \\(n=1\\) \uff0c\u90a3\u4e48\u76f4\u63a5\u780d \\(a_1/k - 1\\) \u5200\u5c31\u884c\u3002\u7136\u540e\u53d1\u73b0\u539f\u9898\u7b49\u4ef7\u4e8e\u780d\u4e86 \\(n-1\\) \u5200\u7684 \\(S\\) \u8fd8\u8981\u51e0\u6b21\u64cd\u4f5c\uff0c\u4e0d\u96be\u53d1\u73b0\u8fd8\u662f\u6309\u7167\u957f\u5ea6\u4e3a \\(k\\) \u5206\u6bb5\u780d\uff0c\u4f46\u662f\uff1a \u82e5\u539f\u6765\u7684\u843d\u5200\u6ca1\u95ee\u9898\uff0c\u5219\u5c11\u780d\u4e00\u5200 \u53cd\u4e4b\uff0c\u9700\u8981\u591a\u4e00\u6b21\u5408\u5e76\u64cd\u4f5c \u8bb0 \\(b_i = \\sum_{k=1}^i a_i\\) \uff0c\u90a3\u4e48\u7b54\u6848\u663e\u7136\u4e3a\uff1a \\frac{S}{k}-1+n-1-2\\sum_{i=1}^{n-1}[b_i \\equiv 0\\pmod k] \u4e8e\u662f\u6211\u4eec\u5c06\u539f\u547d\u9898\u8f6c\u6362\u4e3a\u7ed9\u4e00\u4e2a\u957f\u5ea6\u4e3a \\(n-1\\) \u7684\u5e8f\u5217 \\(b\\) \uff0c\u6bcf\u6b21\u5bf9\u4e8e\u4e00\u4e2a \\(S\\) \u7684\u56e0\u5b50 \\(k\\) \uff0c\u8be2\u95ee \\(b\\) \u4e2d \\(k\\) \u7684\u500d\u6570\u7684\u4e2a\u6570\u3002\u628a \\(b\\) \u6362\u6210 \\(\\gcd(b,S)\\) \u4e0d\u5f71\u54cd\u7b54\u6848\u3002 \\(10^{18}\\) \u4ee5\u5185\u7684\u6570 \\(S\\) \u7684\u56e0\u5b50\u4e2a\u6570\u7684\u6700\u5927\u503c\u662f \\(O(10^5)\\) \uff0c\u627e\u51fa \\(S\\) \u7684\u6240\u6709\u7d20\u56e0\u5b50\uff0c\u505a\u9ad8\u7ef4\u540e\u7f00\u548c\u89e3\u51b3\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define vi vector<int> #define fi first #define se second #define pb push_back #define debug(...) fprintf(stderr, __VA_ARGS__) #define ALL(x) x.begin(),x.end() #define sz(x) int(x.size()) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e6 + 5 ; int n , q , pri [ N ], tot , flg ; bool vis [ N ]; ll a [ N ], s [ N ]; map < ll , int , greater < ll > > mp ; vector < ll > P ; ll gcd ( ll x , ll y ){ return ! y ? x : gcd ( y , x % y );} int main (){ n = read (); rep ( i , 2 , 1000000 ){ if ( ! vis [ i ]) pri [ ++ tot ] = i ; for ( int j = 1 ; j <= tot && i * pri [ j ] <= 1000000 ; j ++ ){ vis [ i * pri [ j ]] = 1 ; if ( i % pri [ j ] == 0 ) break ; } } rep ( i , 1 , n ) a [ i ] = read (); rep ( i , 1 , n ) s [ i ] = s [ i -1 ] + a [ i ]; ll S = s [ n ]; rep ( i , 1 , tot ){ if ( S % pri [ i ] == 0 ){ while ( S % pri [ i ] == 0 ) S /= pri [ i ]; P . pb ( pri [ i ]); } } ll x = sqrt ( S ); if ( x > 1 && x * x == S ) P . pb ( S / x ), flg = 1 ; rep ( i , 1 , n -1 ){ s [ i ] = gcd ( s [ i ], s [ n ]); mp [ s [ i ]] ++ ; if ( ! flg ){ ll x = s [ i ]; for ( ll p : P ) while ( x % p == 0 ) x /= p ; if ( x > 1e6 && flg != 1 ){ if ( x < S ){ P . pb ( x ), P . pb ( S / x ), flg = 1 ; } else flg = 2 ; } } } if ( flg == 2 ) P . pb ( S ); for ( ll p : P ){ for ( auto it = mp . begin (); it != mp . end (); it ++ ){ if ( it -> fi % p == 0 ) mp [ it -> fi / p ] += it -> se ; } } q = read (); while ( q -- ){ ll k = read (); if ( s [ n ] % k != 0 ){ puts ( \"-1\" ); continue ; } ll ans = s [ n ] / k + n - 2 - 2 * mp [ k ]; printf ( \"%lld \\n \" , ans ); } return 0 ; } T3 \u00b6 \u9898\u610f\uff1a \\(T\\) \u7ec4\u6570\u636e\uff0c\u7ed9\u5b9a\u4e00\u4e2a\u957f\u5ea6\u4e3a \\(n\\) \u7684\u53ea\u5305\u542b1-9\u7684\u5b57\u7b26\u4e32\u3002\u4f60\u53ef\u4ee5\u5c06\u4e32\u5212\u5206\u6210\u4e0d\u4ea4\u7684\u4e00\u4e9b\u533a\u95f4\uff0c\u533a\u95f4\u5185\u7684\u6570\u5b57\u5728\u4e5d\u5bab\u683c\u5185\u9700\u8981\u662f\u5355\u72ec\u3001\u76f8\u90bb\u3001\u62162*2\u65b9\u683c\u3002\u8fd9\u4e9b\u533a\u95f4\u5185\u7684\u6570\u5b57\u53ef\u4ee5\u4efb\u610f\u6392\u5217\uff0c\u95ee\u80fd\u4ea7\u751f\u7684\u4e0d\u540c\u4e32\u4e2a\u6570\u3002 \u6570\u636e\u8303\u56f4\uff1a \\(\\sum n\\le 10^5\\) \u9996\u5148\u770b\u90e8\u5206\u5206\uff0c\u82e5\u6ca1\u6709 2*2 \u65b9\u683c\uff0c\u53ef\u4ee5\u76f4\u63a5\u8bbe \\(f[i][0/1]\\) \u4e3a\u5f53\u524d\u8003\u8651\u5230\u7b2c \\(i\\) \u4f4d\uff0c\u6709\u6ca1\u6709\u548c\u524d\u4e00\u4f4d\u6210\u533a\u95f4\u3002\u56de\u5230\u539f\u9898\uff0c\u6211\u4eec\u9700\u8981\u5bf9\u4e0d\u540c\u5206\u5212\u5e26\u6765\u540c\u6837\u7684\u4e32\u7684\u65b9\u6848\u53bb\u91cd\uff0c\u4e8e\u662f\u72b6\u6001\u5e94\u8be5\u52a0\u5165\u524d\u9762\u56db\u4e2a\u6570\u7684\u6392\u5217\u3002\u65f6\u95f4\u590d\u6742\u5ea6\u5e94\u8be5\u662f\u5927\u5e38\u6570 \\(O(n)\\) \uff1f\u8d5b\u65f6\u60f3\u5230\u8fd9\u4e4b\u540e\u5c31\u4e0d\u5927\u4f1a\u505a\u4e86\uff08 \u8003\u8651\u5bf9\u4e8e\u4e00\u4e2a\u4e32 \\(B\\) \uff0c\u5982\u4f55\u7528 dp \u5224\u65ad\u4e32 \\(A\\) \u662f\u5426\u80fd\u64cd\u4f5c\u540e\u53d8\u6210 \\(B\\) \u3002\u8bbe \\(f_i=0/1\\) \u8868\u793a\u524d \\(i\\) \u4f4d\u662f\u5426\u6ee1\u8db3\u6761\u4ef6\u3002\u82e5\u5f53\u524d\u8003\u8651\u5230\u7b2c \\(i\\) \u4f4d\uff0c \\(f_i=1\\) \u4ec5\u5f53\uff1a \u82e5 \\(f_{i-1}=1\\) \u4e14 \\(A_i=B_i\\) \u3002 \u82e5 \\(f_{i-2}=1\\) \u4e14 \\(A_{i-1},A_{i}\\) \u662f \\(B_{i-1},B_i\\) \u7684\u6392\u5217\u3002 \u82e5 \\(f_{i-4}=1\\) \u4e14 \\(A_{i-2},A_{i-3},A_{i-1},A_{i}\\) \u662f \\(B_{i-2},B_{i-3},B_{i-1},B_{i}\\) \u7684\u6392\u5217\u3002 \u5c06\u8fd9\u4e2a dp \u6539\u6210\u81ea\u52a8\u673a\uff0c\u5219\u5bf9\u4e8e\u7b2c \\(i\\) \u4f4d\u53ea\u9700\u8981\u8bb0\u4f4f\u524d\u4e09\u4f4d\u7684\u6570\u5b57\u4ee5\u53ca \\(f_i\\) \uff0c\u628a\u8fd9\u4e9b\u6570\u5b57\u4e00\u8d77\u5f53\u6210\u81ea\u52a8\u673a\u7684\u8282\u70b9\u5373\u53ef\u3002\u4e0d\u96be\u53d1\u73b0\u5bf9\u4e8e\u6bcf\u4e2a \\(i\\) \uff0c\u5408\u6cd5\u8282\u70b9\u7684\u6570\u91cf\u4e0d\u591a\uff0c\u76f4\u63a5 dp \u5373\u53ef\u3002\u5e76\u4e14\u6709\u4e86\u81ea\u52a8\u673a\u4e4b\u540e\uff0c\u76f4\u63a5\u628a \\(f_i\\) \u6539\u6210\u7edf\u8ba1\u4e2a\u6570\u5373\u53ef\uff0c\u4e0d\u540c\u8282\u70b9\u4ee3\u8868\u7684\u4fe1\u606f\u4e0d\u540c\uff0c\u6240\u4ee5\u4e0d\u4f1a\u7b97\u91cd\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define vi vector<int> #define fi first #define se second #define pb push_back #define debug(...) fprintf(stderr, __VA_ARGS__) #define ALL(x) x.begin(),x.end() #define sz(x) int(x.size()) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 , P = 1e9 + 7 ; int num [ 2048 ]; const int A [ 4 ] = { 1 << 1 | 1 << 2 | 1 << 4 | 1 << 5 , 1 << 2 | 1 << 3 | 1 << 5 | 1 << 6 , 1 << 4 | 1 << 5 | 1 << 7 | 1 << 8 , 1 << 5 | 1 << 6 | 1 << 8 | 1 << 9 }; int sta4 ( int a , int b , int c , int d ){ return 1 << a | 1 << b | 1 << c | 1 << d ;} int sta2 ( int a , int b ){ return 1 << a | 1 << b ;} bool insq ( int S , int c , int sq ){ if (( S & sq ) != S ) return 0 ; if ( num [ S ] != c ) return 0 ; if ( find ( A , A + 4 , sq ) == A + 4 ) return 0 ; return 1 ; } bool line ( int a , int b ){ if ( a != b ) return 0 ; if ( a % 9 == 0 ){ //\u662f\u5426\u5217\u76f8\u90bb a /= 9 ; return ( a & ( a -1 )) == 0 ; } if ( a % 3 == 0 ){ //\u884c\u76f8\u90bb a /= 3 ; if ( a & a -1 ) return 0 ; if ( a == 1 << 3 || a == 1 << 6 ) return 0 ; return 1 ; } return 0 ; } struct S { int a3 , a2 , a1 , a0 ; bool operator < ( const S & x ) const { return a3 < x . a3 || a3 == x . a3 && ( a2 < x . a2 || a2 == x . a2 && ( a1 < x . a1 || a1 == x . a1 && a0 < x . a0 )); } }; char s [ N ]; int n , a [ N ]; inline int c ( char ch ){ return ch - '0' ;} map < S , int > f , g ; void solve (){ scanf ( \"%s\" , s + 1 ); int n = 0 ; while ( s [ n + 1 ]) n ++ ; rep ( i , 1 , n ) a [ i ] = s [ i ] - '0' ; f . clear (); f [( S ){ -1 , -1 , -1 , 0 }] = 1 ; rep ( i , 1 , n ){ g . clear (); for ( auto & pre : f ){ S o = pre . fi ; rep ( x , 1 , 9 ){ S nxt ; nxt . a3 = o . a2 | 1 << x ; nxt . a2 = o . a1 | 1 << x ; nxt . a1 = o . a0 | 1 << x ; nxt . a0 = -1 ; if ( o . a3 != -1 && insq ( o . a3 | 1 << x , 4 , sta4 ( a [ i -3 ], a [ i -2 ], a [ i -1 ], a [ i ]))) nxt . a0 = 0 ; if ( nxt . a2 != -1 && line ( nxt . a2 , sta2 ( a [ i -1 ], a [ i ]))) nxt . a0 = 0 ; if ( nxt . a1 == ( 1 << a [ i ])) nxt . a0 = 0 ; if ( nxt . a3 != -1 && ( i == n || ! insq ( nxt . a3 , 3 , sta4 ( a [ i -2 ], a [ i -1 ], a [ i ], a [ i + 1 ])))) nxt . a3 = -1 ; if ( nxt . a2 != -1 && ( i >= n -1 || ! insq ( nxt . a2 , 2 , sta4 ( a [ i -1 ], a [ i ], a [ i + 1 ], a [ i + 2 ])))) nxt . a2 = -1 ; if ( nxt . a0 != -1 || nxt . a1 != -1 || nxt . a2 != -1 || nxt . a3 != -1 ){ g [ nxt ] = ( g [ nxt ] + pre . se ) % P ; } } } f = g ; } ll ans = 0 ; for ( auto & i : f ) if ( i . fi . a0 == 0 ) ans = ( ans + i . se ) % P ; cout << ans << '\\n' ; } int main (){ rep ( i , 1 , 2047 ) num [ i ] = num [ i >> 1 ] + ( i & 1 ); int T = read (); while ( T -- ) solve (); return 0 ; }","title":"USACO 22FEB"},{"location":"%E7%AC%94%E8%AE%B0/USACO%2022FEB/#t1","text":"\u9898\u610f\uff1a\u7ed9\u5b9a\u79bb\u6563\u5316\u5750\u6807\u540e\u7684 \\(n\\) \u4e2a\u77e9\u5f62\u7684\u4f4d\u7f6e \\((x_1,y_1,x_2,y_2)\\) \uff0c\u5b83\u4eec\u5c06\u5e73\u9762\u5206\u4e3a\u82e5\u5e72\u4e2a\u533a\u57df\u3002\u4ee5\u4e0b\u5217\u89c4\u5219\u9ed1\u767d\u67d3\u8272\uff1a \u6240\u6709\u77e9\u5f62\u7684\u5e76\u96c6\u7684\u5916\u754c\u662f\u767d\u8272 \u76f8\u90bb\u533a\u57df\u7684\u989c\u8272\u4e0d\u540c \u4e00\u4e2a\u8be2\u95ee\uff0c \\(T=1\\) \u65f6\u8be2\u95ee\u603b\u533a\u57df\u6570\u91cf\uff0c \\(T=2\\) \u65f6\u8be2\u95ee\u9ed1\u767d\u8272\u533a\u57df\u5206\u522b\u7684\u6570\u91cf\u3002 \u6570\u636e\u8303\u56f4\uff1a \\(1\\le n\\le 10^5\\) \u5bf9\u4e8e \\(T=1\\) \uff0c\u6211\u4eec\u8fd0\u7528\u5e73\u9762\u56fe\u6b27\u62c9\u5b9a\u7406\uff08\u6216\u8005\u627e\u89c4\u5f8b\uff09\uff1a \\(V-E+F=C+1\\) \uff0c\u53d1\u73b0\u533a\u57df\u6570\u91cf\u7b49\u4e8e\u4ea4\u70b9\u6570\u91cf\u52a0\u8fde\u901a\u5757\u6570\u91cf\u52a01\uff0c\u626b\u63cf\u7ebf\u8ba1\u7b97\u4ea4\u70b9\u6570\u91cf\u5373\u53ef\uff0c\u7528 set \u7ef4\u62a4\u8fde\u901a\u5757\u5373\u53ef\u3002 \\(T=2\\) \uff0c\u5bf9\u4e8e \\(n\\le 2500\\) \uff0c\u53ef\u4ee5\u53d1\u73b0\u88ab\u5947\u6570\u4e2a\u77e9\u5f62\u8986\u76d6\u7684\u533a\u57df\u662f \\(1\\) \uff0c\u5076\u6570\u4e2a\u662f \\(0\\) \uff0c\u5c06\u4e8c\u7ef4\u533a\u95f4\u64cd\u4f5c\u5dee\u5206\u4e3a\u5355\u70b9\u4fee\u6539\uff0c\u6700\u540e\u524d\u7f00\u548c\u7b97\u51fa\u6bcf\u4e2a\u70b9\u7684\u989c\u8272\u518dbfs\u7b97\u533a\u57df\u6570\u91cf\u3002\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a \\(O(n^2)\\) \u3002 \u5b9e\u9645\u4e0a\u5e76\u4e0d\u9700\u8981\u6b27\u62c9\u5b9a\u7406\uff0c\u7528\u6811\u72b6\u6570\u7ec4\u7ef4\u62a4\u989c\u8272\u6bb5\u6570\uff0cset\u7ef4\u62a4\u6bcf\u4e2a\u8fb9\u8fde\u901a\u5757\u6700\u5de6\u4e00\u6761\u8fb9\u7684\u4e0a\u4e0b\u7aef\u70b9\uff0c\u5c31\u53ef\u4ee5\u5904\u7406\u591a\u4e2a\u8fde\u901a\u5757\u7684\u60c5\u51b5\u3002idea \u6765\u81ea @SharpnessV \u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define vi vector<int> #define fi first #define se second #define pb push_back #define ALL(x) x.begin(),x.end() #define sz(x) int(x.size()) #define ll long long using namespace std ; const int N = 2e5 + 5 ; int n , T , op [ N ], L [ N ], R [ N ], t [ N ]; ll c [ 2 ]; void ins ( int x , int v ){ for (; x <= n + n ; x += x & - x ) t [ x ] += v ; } int sum ( int x ){ int res = 0 ; for (; x ; x -= x & - x ) res += t [ x ]; return res ; } void work ( int x , int y ){ int cur = sum ( x ) & 1 , cnt = 1 + sum ( y ) - sum ( x ); //start color & number of segs c [ cur ] += ( cnt + 1 ) / 2 , c [ cur ^ 1 ] += cnt / 2 ; } bool vis [ N ]; struct node { int pos , val , id ; bool operator < ( const node & a ) const { return pos < a . pos ;} }; set < node > S ; void check ( int x , int y ){ auto cur = S . lower_bound ({ x , 0 , 0 }); vector < node > v ; while ( cur != S . end ()){ if (( * cur ). pos > y ) break ; v . pb ( * cur ); cur ++ ; } if ( v . empty ()) return ; sort ( v . begin (), v . end (),[]( node x , node y ){ return x . id < y . id ;}); int id = v [ 0 ]. id ; for ( auto t : v ) if ( t . id != id ){ //\u5408\u5e76 if ( ! vis [ t . id ]){ vis [ t . id ] = 1 , c [ t . val ] -- ; S . erase ({ L [ t . id ], 0 , 0 }), S . erase ({ R [ t . id ] + 1 , 0 , 0 }); } } } int main (){ cin . tie ( 0 ) -> sync_with_stdio ( 0 ); cin >> n >> T ; rep ( i , 1 , n ){ int x , y , X , Y ; cin >> x >> y >> X >> Y ; op [ x ] = 1 , L [ x ] = y , R [ x ] = Y - 1 ; op [ X ] = -1 , L [ X ] = y , R [ X ] = Y - 1 ; } rep ( i , 1 , 2 * n ){ ins ( L [ i ], op [ i ]), ins ( R [ i ] + 1 , op [ i ]); work ( L [ i ], R [ i ]); check ( L [ i ], R [ i ] + 1 ); if ( op [ i ] == 1 ){ if ( sum ( L [ i ]) == sum ( R [ i ])){ //\u65b0\u8fde\u901a\u5757 int w = ( sum ( L [ i ]) & 1 ) ^ 1 ; c [ w ] ++ ; S . insert ({ L [ i ], w , i }), S . insert ({ R [ i ] + 1 , w , i }); } } else { //\u51cf\u53bb\u591a\u7b97\u7684\u989c\u8272 c [ sum ( L [ i ] - 1 ) & 1 ] -- , c [ sum ( R [ i ] + 1 ) & 1 ] -- ; auto cur = S . lower_bound ({ L [ i ], 0 , 0 }); if ( cur != S . end () && ( * cur ). pos == L [ i ]){ S . erase ( cur ); S . erase ({ R [ i ] + 1 , 0 , 0 }); } } } c [ 0 ] ++ ; if ( T == 1 ) cout << c [ 0 ] + c [ 1 ] << '\\n' ; else cout << c [ 0 ] << ' ' << c [ 1 ] << '\\n' ; return 0 ; }","title":"T1"},{"location":"%E7%AC%94%E8%AE%B0/USACO%2022FEB/#t2","text":"\u9898\u610f\uff1a\u7ed9\u5b9a\u4e00\u4e2a\u957f\u5ea6\u4e3a \\(n\\) \u7684\u5e8f\u5217 \\(a\\) \uff0c\u4f60\u53ef\u4ee5\u8fdb\u884c\u4e24\u79cd\u64cd\u4f5c\uff1a \u5408\u5e76\uff1a\u5c06\u76f8\u90bb\u4e24\u4e2a\u6570 \\(a,b\\) \u5220\u9664\u5e76\u5728\u540c\u4e00\u4f4d\u7f6e\u63d2\u5165 \\(a+b\\) \u3002 \u5206\u88c2\uff1a\u5c06\u67d0\u4e2a\u6570 \\(a\\) \u5220\u9664\u5e76\u5728\u540c\u4e00\u4f4d\u7f6e\u63d2\u5165 \\(x,y\\) \uff0c\u6ee1\u8db3 \\(x+y = a\\) \u3002 \u6709 \\(q\\) \u4e2a\u8be2\u95ee\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u8be2\u95ee\u4e2d\u7684 \\(k\\) \uff0c\u6c42\u6700\u5c11\u64cd\u4f5c\u6b21\u6570\u4f7f\u5f97\u5e8f\u5217\u4e2d\u6240\u6709\u6570\u90fd\u4e3a \\(k\\) \u3002 \u6570\u636e\u8303\u56f4\uff1a \\(1\\le n,q\\le 10^5,1\\le a_i,k,\\sum a_i\\le 10^{18}\\) \u9996\u5148 \\(k\\) \u4e0d\u4e3a \\(S=\\sum a_i\\) \u7684\u56e0\u5b50\u65f6\u663e\u7136\u65e0\u89e3\u3002 \u5982\u679c \\(n=1\\) \uff0c\u90a3\u4e48\u76f4\u63a5\u780d \\(a_1/k - 1\\) \u5200\u5c31\u884c\u3002\u7136\u540e\u53d1\u73b0\u539f\u9898\u7b49\u4ef7\u4e8e\u780d\u4e86 \\(n-1\\) \u5200\u7684 \\(S\\) \u8fd8\u8981\u51e0\u6b21\u64cd\u4f5c\uff0c\u4e0d\u96be\u53d1\u73b0\u8fd8\u662f\u6309\u7167\u957f\u5ea6\u4e3a \\(k\\) \u5206\u6bb5\u780d\uff0c\u4f46\u662f\uff1a \u82e5\u539f\u6765\u7684\u843d\u5200\u6ca1\u95ee\u9898\uff0c\u5219\u5c11\u780d\u4e00\u5200 \u53cd\u4e4b\uff0c\u9700\u8981\u591a\u4e00\u6b21\u5408\u5e76\u64cd\u4f5c \u8bb0 \\(b_i = \\sum_{k=1}^i a_i\\) \uff0c\u90a3\u4e48\u7b54\u6848\u663e\u7136\u4e3a\uff1a \\frac{S}{k}-1+n-1-2\\sum_{i=1}^{n-1}[b_i \\equiv 0\\pmod k] \u4e8e\u662f\u6211\u4eec\u5c06\u539f\u547d\u9898\u8f6c\u6362\u4e3a\u7ed9\u4e00\u4e2a\u957f\u5ea6\u4e3a \\(n-1\\) \u7684\u5e8f\u5217 \\(b\\) \uff0c\u6bcf\u6b21\u5bf9\u4e8e\u4e00\u4e2a \\(S\\) \u7684\u56e0\u5b50 \\(k\\) \uff0c\u8be2\u95ee \\(b\\) \u4e2d \\(k\\) \u7684\u500d\u6570\u7684\u4e2a\u6570\u3002\u628a \\(b\\) \u6362\u6210 \\(\\gcd(b,S)\\) \u4e0d\u5f71\u54cd\u7b54\u6848\u3002 \\(10^{18}\\) \u4ee5\u5185\u7684\u6570 \\(S\\) \u7684\u56e0\u5b50\u4e2a\u6570\u7684\u6700\u5927\u503c\u662f \\(O(10^5)\\) \uff0c\u627e\u51fa \\(S\\) \u7684\u6240\u6709\u7d20\u56e0\u5b50\uff0c\u505a\u9ad8\u7ef4\u540e\u7f00\u548c\u89e3\u51b3\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define vi vector<int> #define fi first #define se second #define pb push_back #define debug(...) fprintf(stderr, __VA_ARGS__) #define ALL(x) x.begin(),x.end() #define sz(x) int(x.size()) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e6 + 5 ; int n , q , pri [ N ], tot , flg ; bool vis [ N ]; ll a [ N ], s [ N ]; map < ll , int , greater < ll > > mp ; vector < ll > P ; ll gcd ( ll x , ll y ){ return ! y ? x : gcd ( y , x % y );} int main (){ n = read (); rep ( i , 2 , 1000000 ){ if ( ! vis [ i ]) pri [ ++ tot ] = i ; for ( int j = 1 ; j <= tot && i * pri [ j ] <= 1000000 ; j ++ ){ vis [ i * pri [ j ]] = 1 ; if ( i % pri [ j ] == 0 ) break ; } } rep ( i , 1 , n ) a [ i ] = read (); rep ( i , 1 , n ) s [ i ] = s [ i -1 ] + a [ i ]; ll S = s [ n ]; rep ( i , 1 , tot ){ if ( S % pri [ i ] == 0 ){ while ( S % pri [ i ] == 0 ) S /= pri [ i ]; P . pb ( pri [ i ]); } } ll x = sqrt ( S ); if ( x > 1 && x * x == S ) P . pb ( S / x ), flg = 1 ; rep ( i , 1 , n -1 ){ s [ i ] = gcd ( s [ i ], s [ n ]); mp [ s [ i ]] ++ ; if ( ! flg ){ ll x = s [ i ]; for ( ll p : P ) while ( x % p == 0 ) x /= p ; if ( x > 1e6 && flg != 1 ){ if ( x < S ){ P . pb ( x ), P . pb ( S / x ), flg = 1 ; } else flg = 2 ; } } } if ( flg == 2 ) P . pb ( S ); for ( ll p : P ){ for ( auto it = mp . begin (); it != mp . end (); it ++ ){ if ( it -> fi % p == 0 ) mp [ it -> fi / p ] += it -> se ; } } q = read (); while ( q -- ){ ll k = read (); if ( s [ n ] % k != 0 ){ puts ( \"-1\" ); continue ; } ll ans = s [ n ] / k + n - 2 - 2 * mp [ k ]; printf ( \"%lld \\n \" , ans ); } return 0 ; }","title":"T2"},{"location":"%E7%AC%94%E8%AE%B0/USACO%2022FEB/#t3","text":"\u9898\u610f\uff1a \\(T\\) \u7ec4\u6570\u636e\uff0c\u7ed9\u5b9a\u4e00\u4e2a\u957f\u5ea6\u4e3a \\(n\\) \u7684\u53ea\u5305\u542b1-9\u7684\u5b57\u7b26\u4e32\u3002\u4f60\u53ef\u4ee5\u5c06\u4e32\u5212\u5206\u6210\u4e0d\u4ea4\u7684\u4e00\u4e9b\u533a\u95f4\uff0c\u533a\u95f4\u5185\u7684\u6570\u5b57\u5728\u4e5d\u5bab\u683c\u5185\u9700\u8981\u662f\u5355\u72ec\u3001\u76f8\u90bb\u3001\u62162*2\u65b9\u683c\u3002\u8fd9\u4e9b\u533a\u95f4\u5185\u7684\u6570\u5b57\u53ef\u4ee5\u4efb\u610f\u6392\u5217\uff0c\u95ee\u80fd\u4ea7\u751f\u7684\u4e0d\u540c\u4e32\u4e2a\u6570\u3002 \u6570\u636e\u8303\u56f4\uff1a \\(\\sum n\\le 10^5\\) \u9996\u5148\u770b\u90e8\u5206\u5206\uff0c\u82e5\u6ca1\u6709 2*2 \u65b9\u683c\uff0c\u53ef\u4ee5\u76f4\u63a5\u8bbe \\(f[i][0/1]\\) \u4e3a\u5f53\u524d\u8003\u8651\u5230\u7b2c \\(i\\) \u4f4d\uff0c\u6709\u6ca1\u6709\u548c\u524d\u4e00\u4f4d\u6210\u533a\u95f4\u3002\u56de\u5230\u539f\u9898\uff0c\u6211\u4eec\u9700\u8981\u5bf9\u4e0d\u540c\u5206\u5212\u5e26\u6765\u540c\u6837\u7684\u4e32\u7684\u65b9\u6848\u53bb\u91cd\uff0c\u4e8e\u662f\u72b6\u6001\u5e94\u8be5\u52a0\u5165\u524d\u9762\u56db\u4e2a\u6570\u7684\u6392\u5217\u3002\u65f6\u95f4\u590d\u6742\u5ea6\u5e94\u8be5\u662f\u5927\u5e38\u6570 \\(O(n)\\) \uff1f\u8d5b\u65f6\u60f3\u5230\u8fd9\u4e4b\u540e\u5c31\u4e0d\u5927\u4f1a\u505a\u4e86\uff08 \u8003\u8651\u5bf9\u4e8e\u4e00\u4e2a\u4e32 \\(B\\) \uff0c\u5982\u4f55\u7528 dp \u5224\u65ad\u4e32 \\(A\\) \u662f\u5426\u80fd\u64cd\u4f5c\u540e\u53d8\u6210 \\(B\\) \u3002\u8bbe \\(f_i=0/1\\) \u8868\u793a\u524d \\(i\\) \u4f4d\u662f\u5426\u6ee1\u8db3\u6761\u4ef6\u3002\u82e5\u5f53\u524d\u8003\u8651\u5230\u7b2c \\(i\\) \u4f4d\uff0c \\(f_i=1\\) \u4ec5\u5f53\uff1a \u82e5 \\(f_{i-1}=1\\) \u4e14 \\(A_i=B_i\\) \u3002 \u82e5 \\(f_{i-2}=1\\) \u4e14 \\(A_{i-1},A_{i}\\) \u662f \\(B_{i-1},B_i\\) \u7684\u6392\u5217\u3002 \u82e5 \\(f_{i-4}=1\\) \u4e14 \\(A_{i-2},A_{i-3},A_{i-1},A_{i}\\) \u662f \\(B_{i-2},B_{i-3},B_{i-1},B_{i}\\) \u7684\u6392\u5217\u3002 \u5c06\u8fd9\u4e2a dp \u6539\u6210\u81ea\u52a8\u673a\uff0c\u5219\u5bf9\u4e8e\u7b2c \\(i\\) \u4f4d\u53ea\u9700\u8981\u8bb0\u4f4f\u524d\u4e09\u4f4d\u7684\u6570\u5b57\u4ee5\u53ca \\(f_i\\) \uff0c\u628a\u8fd9\u4e9b\u6570\u5b57\u4e00\u8d77\u5f53\u6210\u81ea\u52a8\u673a\u7684\u8282\u70b9\u5373\u53ef\u3002\u4e0d\u96be\u53d1\u73b0\u5bf9\u4e8e\u6bcf\u4e2a \\(i\\) \uff0c\u5408\u6cd5\u8282\u70b9\u7684\u6570\u91cf\u4e0d\u591a\uff0c\u76f4\u63a5 dp \u5373\u53ef\u3002\u5e76\u4e14\u6709\u4e86\u81ea\u52a8\u673a\u4e4b\u540e\uff0c\u76f4\u63a5\u628a \\(f_i\\) \u6539\u6210\u7edf\u8ba1\u4e2a\u6570\u5373\u53ef\uff0c\u4e0d\u540c\u8282\u70b9\u4ee3\u8868\u7684\u4fe1\u606f\u4e0d\u540c\uff0c\u6240\u4ee5\u4e0d\u4f1a\u7b97\u91cd\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define vi vector<int> #define fi first #define se second #define pb push_back #define debug(...) fprintf(stderr, __VA_ARGS__) #define ALL(x) x.begin(),x.end() #define sz(x) int(x.size()) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 , P = 1e9 + 7 ; int num [ 2048 ]; const int A [ 4 ] = { 1 << 1 | 1 << 2 | 1 << 4 | 1 << 5 , 1 << 2 | 1 << 3 | 1 << 5 | 1 << 6 , 1 << 4 | 1 << 5 | 1 << 7 | 1 << 8 , 1 << 5 | 1 << 6 | 1 << 8 | 1 << 9 }; int sta4 ( int a , int b , int c , int d ){ return 1 << a | 1 << b | 1 << c | 1 << d ;} int sta2 ( int a , int b ){ return 1 << a | 1 << b ;} bool insq ( int S , int c , int sq ){ if (( S & sq ) != S ) return 0 ; if ( num [ S ] != c ) return 0 ; if ( find ( A , A + 4 , sq ) == A + 4 ) return 0 ; return 1 ; } bool line ( int a , int b ){ if ( a != b ) return 0 ; if ( a % 9 == 0 ){ //\u662f\u5426\u5217\u76f8\u90bb a /= 9 ; return ( a & ( a -1 )) == 0 ; } if ( a % 3 == 0 ){ //\u884c\u76f8\u90bb a /= 3 ; if ( a & a -1 ) return 0 ; if ( a == 1 << 3 || a == 1 << 6 ) return 0 ; return 1 ; } return 0 ; } struct S { int a3 , a2 , a1 , a0 ; bool operator < ( const S & x ) const { return a3 < x . a3 || a3 == x . a3 && ( a2 < x . a2 || a2 == x . a2 && ( a1 < x . a1 || a1 == x . a1 && a0 < x . a0 )); } }; char s [ N ]; int n , a [ N ]; inline int c ( char ch ){ return ch - '0' ;} map < S , int > f , g ; void solve (){ scanf ( \"%s\" , s + 1 ); int n = 0 ; while ( s [ n + 1 ]) n ++ ; rep ( i , 1 , n ) a [ i ] = s [ i ] - '0' ; f . clear (); f [( S ){ -1 , -1 , -1 , 0 }] = 1 ; rep ( i , 1 , n ){ g . clear (); for ( auto & pre : f ){ S o = pre . fi ; rep ( x , 1 , 9 ){ S nxt ; nxt . a3 = o . a2 | 1 << x ; nxt . a2 = o . a1 | 1 << x ; nxt . a1 = o . a0 | 1 << x ; nxt . a0 = -1 ; if ( o . a3 != -1 && insq ( o . a3 | 1 << x , 4 , sta4 ( a [ i -3 ], a [ i -2 ], a [ i -1 ], a [ i ]))) nxt . a0 = 0 ; if ( nxt . a2 != -1 && line ( nxt . a2 , sta2 ( a [ i -1 ], a [ i ]))) nxt . a0 = 0 ; if ( nxt . a1 == ( 1 << a [ i ])) nxt . a0 = 0 ; if ( nxt . a3 != -1 && ( i == n || ! insq ( nxt . a3 , 3 , sta4 ( a [ i -2 ], a [ i -1 ], a [ i ], a [ i + 1 ])))) nxt . a3 = -1 ; if ( nxt . a2 != -1 && ( i >= n -1 || ! insq ( nxt . a2 , 2 , sta4 ( a [ i -1 ], a [ i ], a [ i + 1 ], a [ i + 2 ])))) nxt . a2 = -1 ; if ( nxt . a0 != -1 || nxt . a1 != -1 || nxt . a2 != -1 || nxt . a3 != -1 ){ g [ nxt ] = ( g [ nxt ] + pre . se ) % P ; } } } f = g ; } ll ans = 0 ; for ( auto & i : f ) if ( i . fi . a0 == 0 ) ans = ( ans + i . se ) % P ; cout << ans << '\\n' ; } int main (){ rep ( i , 1 , 2047 ) num [ i ] = num [ i >> 1 ] + ( i & 1 ); int T = read (); while ( T -- ) solve (); return 0 ; }","title":"T3"},{"location":"%E7%AC%94%E8%AE%B0/USACO%2022JAN/","text":"\u8d5b\u65f6\u7206\u70b8\u4e86\uff0c\u5f88\u591a\u5e73\u5e38\u719f\u6089\u7684\u5957\u8def\u90fd\u6ca1\u60f3\u8d77\u6765\uff0c\u4f46\u9898\u76ee\u8fd8\u662f\u8981\u8865\u7684\u4e0d\u662f\u5417\uff1f T1 \u00b6 \u9898\u610f\uff1a\u7ed9\u4e00\u4e2a\u957f\u5ea6\u4e3a \\(N\\) \u7684\u6570\u7ec4 \\(a\\) \uff0c\u82e5\u76f8\u90bb\u4e24\u6570\u4e4b\u5dee\u7684\u7edd\u5bf9\u503c\u4e0d\u8d85\u8fc7 \\(K\\) \u5219\u53ef\u4ee5\u4ea4\u6362\uff0c\u95ee\u80fd\u5f97\u5230\u7684\u6240\u6709 \\(a\\) \u4e2d\u5b57\u5178\u5e8f\u6700\u5c0f\u7684\u4e00\u4e2a\u3002 \u6570\u636e\u8303\u56f4\uff1a \\(1\\le N,K\\le 10^5,1\\le a_i\\le 10^9\\) \u53d1\u73b0 \\(|a_i-a_j| > K\\) \u7684\u6570\u65e0\u6cd5\u4ea4\u6362\uff0c\u4e8e\u662f\u627e\u5230\u6240\u6709\u8fd9\u6837\u7684\u9650\u5236\u505a\u62d3\u6251\u6392\u5e8f\u3002\u5982\u4f55\u505a\uff1f\u6b63\u5e38\u6700\u5c0f\u62d3\u6251\u5e8f\u662f\u628a\u6240\u6709\u5165\u5ea6\u4e3a0\u7684\u70b9\u653e\u5165\u4f18\u5148\u961f\u5217\u4e2d\uff0c\u7136\u540e\u6bcf\u6b21\u53d6\u5806\u9876\u7684\u70b9\u5e76\u4ece\u56fe\u4e2d\u5220\u9664\u3002\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a \\(O(NK)\\) \u3002 \u601d\u8003\u4e00\u4e0b\u5982\u4f55\u4f18\u5316\uff0c\u9996\u5148\u53ef\u4ee5\u5bf9\u539f\u6570\u7ec4\u79bb\u6563\u5316\uff0c\u7528\u4e00\u4e2a\u7ebf\u6bb5\u6811\u6765\u7ef4\u62a4\u5f53\u524d\u53ef\u80fd\u7684\u6700\u5c0f\u4f4d\u7f6e\uff0c\u6bcf\u6b21\u53d6\u51fa\u4f5c\u4e3a\u7b54\u6848\u5e76\u66f4\u65b0\u4e0e\u5176\u6709\u8fde\u8fb9\u7684\u70b9\u7684\u5165\u5ea6\u5373\u53ef\u3002\u5177\u4f53\u5730\uff0c\u82e5\u5f53\u524d\u70b9\u7684\u6743\u503c\u4e3a \\(u\\) \uff0c\u5219 \\([1,m]\\setminus[u-K+1,u+K-1]\\) \u4e2d\u7684\u6240\u6709\u6743\u503c\u5bf9\u5e94\u7684\u70b9\u7684\u5165\u5ea6 \\(-1\\) \u3002\u9700\u8981\u4e00\u4e2a\u5e26\u61d2\u6807\u8bb0\u7ebf\u6bb5\u6811\u505a\u533a\u95f4\u66f4\u65b0\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N\\log N)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define vi vector<int> #define fi first #define se second #define pb push_back #define debug(...) fprintf(stderr, __VA_ARGS__) #define ALL(x) x.begin(),x.end() #define sz(x) int(x.size()) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 ; int n , K , a [ N ], val [ N ], deg [ N ]; unordered_map < int , int > vis ; #define ls (p<<1) #define rs (ls|1) #define mid ((L+R)>>1) pii t [ N << 2 ]; int tag [ N << 2 ]; inline pii Min ( const pii a , const pii b ){ if ( a . se == b . se ) return make_pair ( min ( a . fi , b . fi ), a . se ); return a . se < b . se ? a : b ; } void build ( int p , int L , int R ){ if ( L == R ){ t [ p ] = make_pair ( L , deg [ L ]); return ; } build ( ls , L , mid ), build ( rs , mid + 1 , R ); t [ p ] = Min ( t [ ls ], t [ rs ]); } void push ( int p , int v ){ tag [ p ] += v , t [ p ]. se += v ;} void down ( int p ){ if ( ! tag [ p ]) return ; push ( ls , tag [ p ]), push ( rs , tag [ p ]); tag [ p ] = 0 ; } void upd ( int p , int L , int R , int l , int r , int v ){ if ( l > R || r < L ) return ; if ( l <= L && R <= r ){ push ( p , v ); return ; } down ( p ); upd ( ls , L , mid , l , r , v ), upd ( rs , mid + 1 , R , l , r , v ); t [ p ] = Min ( t [ ls ], t [ rs ]); } int T [ N ]; void add ( int x ){ for (; x <= n ; x += x & - x ) T [ x ] ++ ;} int Q ( int x ){ int res = 0 ; for (; x ; x -= x & - x ) res += T [ x ]; return res ; } int main (){ n = read (), K = read (); rep ( i , 1 , n ) a [ i ] = read (), val [ i ] = a [ i ]; sort ( val + 1 , val + n + 1 ); rep ( i , 1 , n ){ vis [ a [ i ]] ++ ; a [ i ] = lower_bound ( val + 1 , val + n + 1 , a [ i ]) - val + vis [ a [ i ]] - 1 ; } //calculating in-degree rep ( i , 1 , n ){ int x = lower_bound ( val + 1 , val + n + 1 , val [ a [ i ]] - K ) - val - 1 ; int y = lower_bound ( val + 1 , val + n + 1 , val [ a [ i ]] + K + 1 ) - val - 1 ; deg [ a [ i ]] = ( i -1 ) + Q ( x ) - Q ( y ); add ( a [ i ]); } build ( 1 , 1 , n ); rep ( i , 1 , n ){ int u = t [ 1 ]. fi ; cout << val [ u ] << '\\n' ; int x = lower_bound ( val + 1 , val + n + 1 , val [ u ] - K ) - val - 1 ; //cout << 1 << ' ' << x << '\\n'; int y = lower_bound ( val + 1 , val + n + 1 , val [ u ] + K + 1 ) - val - 1 ; //cout << y+1 << ' ' << n << '\\n'; //cout << u << ' ' << u << '\\n'; upd ( 1 , 1 , n , 1 , x , -1 ); upd ( 1 , 1 , n , y + 1 , n , -1 ); upd ( 1 , 1 , n , u , u , n ); } return 0 ; } T2 \u00b6 \u9898\u610f\uff1a\u7ed9\u4e00\u4e2a\u957f\u5ea6\u4e3a \\(N\\) \u7684\u6570\u7ec4 \\(a\\) \uff0c\u76f8\u90bb\u4e24\u9879\u82e5\u5dee\u4e0d\u5927\u4e8e1\u5219\u53ef\u4ee5\u4ea4\u6362\uff0c\u95ee\u80fd\u5f97\u5230\u7684\u4e0d\u540c \\(a\\) \u4e2a\u6570\uff0c\u7b54\u6848\u6a21 \\(10^9+7\\) \u3002 \u6570\u636e\u8303\u56f4\uff1a \\(1\\le N\\le 5000,1\\le a_i\\le10^9\\) \u8ba1\u6570\u95ee\u9898\u57fa\u672c\u5c31\u662f dp \u4e86\u3002\u53d1\u73b0\u4ece\u4e0a\u4e00\u9898\u4e2d\u7684\u4e0d\u5927\u4e8e \\(K\\) \u53d8\u6210\u4e86\u4e0d\u5927\u4e8e \\(1\\) \uff0c\u5fc5\u7136\u6709\u732b\u817b\u3002\u7531\u4e8e\u5dee\u5927\u4e8e \\(1\\) \u7684\u6570\u5f88\u591a\uff0c\u6240\u4ee5\u5927\u90e8\u5206\u6570\u4e4b\u95f4\u662f\u4e0d\u80fd\u591f\u5bf9\u6362\u4f4d\u7f6e\u7684\uff0c\u8003\u8651\u4ece\u8fd9\u4e00\u70b9\u5165\u624b\u89e3\u51b3\u95ee\u9898\u3002 \u7136\u540e\u6b64\u65f6\u5982\u679c\u89c2\u5bdf\u5230\u4e86\u5947\u6570\u4e4b\u95f4\u4e0d\u53ef\u80fd\u8c03\u6362\u4f4d\u7f6e\uff08\u9664\u975e\u4e24\u6570\u76f8\u540c\uff0c\u4f46\u662f\u8fd9\u6837\u7684\u8c03\u6362\u6ca1\u6709\u610f\u4e49\uff09\uff0c\u5076\u6570\u4e5f\u540c\u7406\u3002\u4e8e\u662f\u8bbe\u8ba1 dp \u72b6\u6001\u4e3a \\(dp[i][j]\\) \u8868\u793a\u5f53\u524d\u786e\u5b9a\u4e86\u524d \\(i+j\\) \u4e2a\u4f4d\u7f6e\uff0c\u6709 \\(i\\) \u4e2a\u5947\u6570\uff0c \\(j\\) \u4e2a\u5076\u6570\u3002\u5bf9\u6bcf\u4e2a\u6570\uff0c\u9884\u5904\u7406\u5b83\u6700\u8fdc\u80fd\u4e0e\u5b83\u4e0d\u540c\u5947\u5076\u6027\u7684\u54ea\u4e2a\u6570\u4ea4\u6362\u5373\u53ef\u3002\u8f6c\u79fb\u662f\u7b80\u5355\u7684\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N^2)\\) \u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define vi vector<int> #define fi first #define se second #define pb push_back #define debug(...) fprintf(stderr, __VA_ARGS__) #define ALL(x) x.begin(),x.end() #define sz(x) int(x.size()) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 5e3 + 5 , P = 1e9 + 7 ; int n , a [ N ], pos [ N ]; void add ( int & x , const int y ){ x += y ; if ( x > P ) x -= P ;} void sub ( int & x , const int y ){ x -= y ; if ( x < 0 ) x += P ;} void solve (){ n = read (); vector < int > even , odd ; rep ( i , 1 , n ){ a [ i ] = read (); if ( a [ i ] & 1 ){ pos [ i ] = sz ( odd ); odd . pb ( i ); } else { pos [ i ] = sz ( even ); even . pb ( i ); } } vector < int > pre ( n + 1 ); rep ( i , 1 , n ){ if ( a [ i ] & 1 ) pre [ i ] = sz ( even ); else pre [ i ] = sz ( odd ); rep ( j , i + 1 , n ) if ((( a [ i ] - a [ j ]) & 1 ) && abs ( a [ i ] - a [ j ]) > 1 ){ pre [ i ] = min ( pre [ i ], pos [ j ]); } } vector < vi > dp ( sz ( even ) + 1 , vi ( sz ( odd ) + 1 )); dp [ 0 ][ 0 ] = 1 ; rep ( i , 0 , sz ( even )) rep ( j , 0 , sz ( odd )){ if ( ! dp [ i ][ j ]) continue ; if ( i < sz ( even ) && j <= pre [ even [ i ]]) add ( dp [ i + 1 ][ j ], dp [ i ][ j ]); if ( j < sz ( odd ) && i <= pre [ odd [ j ]]) add ( dp [ i ][ j + 1 ], dp [ i ][ j ]); } cout << dp [ sz ( even )][ sz ( odd )] << '\\n' ; } int main (){ int T = read (); while ( T -- ) solve (); return 0 ; } T3 \u00b6 \u9898\u610f\uff1a\u7ed9\u5b9a \\(n\\) \u7ec4\u5411\u91cf\uff0c\u6c42\u6bcf\u4e00\u7ec4\u4e2d\u9009\u51fa\u4e00\u4e2a\u5411\u91cf\uff0c\u52a0\u8d77\u6765\u540e\u6700\u5927\u7684\u957f\u5ea6\u3002 \u6570\u636e\u8303\u56f4\uff1a\u5411\u91cf\u6570\u4e0d\u8d85\u8fc7 \\(10^5\\) \uff0c \\(|x|,|y|\\le \\frac{10^9}{N}\\) \u3002 \u6211\u4eec\u7ef4\u62a4\u5f53\u524d\u6240\u6709\u53ef\u80fd\u7b54\u6848\u6784\u6210\u7684\u70b9\u96c6\uff0c\u6709 \u6027\u8d281\uff1a\u5982\u679c\u4e00\u4e2a\u70b9\u4e0d\u5728\u8be5\u70b9\u96c6\u7684\u51f8\u5305\u4e0a\uff0c\u90a3\u4e48\u8fd9\u4e2a\u70b9\u79bb\u539f\u70b9\u7684\u8ddd\u79bb\u4e0d\u662f\u6700\u5927\u7684\u3002 \u5bf9\u6bcf\u4e00\u7ec4\u5411\u91cf\u6211\u4eec\u90fd\u53ef\u4ee5\u6c42\u51fa\u5b83\u7684\u51f8\u5305\u3002\u5bf9\u4e8e\u7b2c \\(i\\) \u7ec4\u5411\u91cf\uff0c\u6211\u4eec\u5c06\u5b83\u7684\u51f8\u5305\u4e0e\u524d \\(i-1\\) \u7ec4\u5f97\u5230\u7684\u7b54\u6848\u51f8\u5305\u5408\u5e76\uff0c\u7528 Minkowski \u548c\u5373\u53ef\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N\\log N)\\) \u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define vi vector<int> #define fi first #define se second #define pb push_back #define debug(...) fprintf(stderr, __VA_ARGS__) #define ALL(x) x.begin(),x.end() #define sz(x) int(x.size()) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 ; struct node { ll x , y ; node operator - ( const node a ){ return ( node ){ x - a . x , y - a . y };} node operator + ( const node a ){ return ( node ){ x + a . x , y + a . y };} ll operator * ( node a ) const { return x * a . y - y * a . x ;} //cross pro ll len () const { return x * x + y * y ;} } O ; bool cmpy ( const node & a , const node & b ){ return a . y == b . y ? a . x < b . x : a . y < b . y ;} bool cmp ( const node & a , const node & b ){ return a * b == 0 ? a . len () < b . len () : a * b > 0 ;} int n , m , q , stk [ N ], top , tot ; void Convex ( vector < node > & A ){ sort ( A . begin (), A . end (), cmpy ); O = A [ 0 ]; stk [ top = 1 ] = 0 ; rep ( i , 0 , sz ( A ) -1 ) A [ i ] = A [ i ] - O ; sort ( A . begin () + 1 , A . end (), cmp ); //\u6781\u89d2\u6392\u5e8f rep ( i , 1 , sz ( A ) -1 ){ while ( top > 1 && ( A [ i ] - A [ stk [ top -1 ]]) * ( A [ stk [ top ]] - A [ stk [ top -1 ]]) >= 0 ) top -- ; stk [ ++ top ] = i ; } rep ( i , 1 , top ) A [ i -1 ] = A [ stk [ i ]] + O ; A . resize ( top ); //rep(i,0,sz(A)-1)cout << A[i].x << ' ' << A[i].y << '\\n'; A . pb ( A [ 0 ]); } vector < node > A , B , vec [ N ], dA , dB , ans , tmp ; void Minkowski ( vector < node > & A , vector < node > & B ){ dA . resize ( sz ( A )), dB . resize ( sz ( B )); rep ( i , 0 , sz ( A ) -1 ) dA [ i ] = A [( i + 1 ) % sz ( A )] - A [ i ]; rep ( i , 0 , sz ( B ) -1 ) dB [ i ] = B [( i + 1 ) % sz ( B )] - B [ i ]; ans . pb ( A [ 0 ] + B [ 0 ]); int a = 0 , b = 0 ; while ( a < sz ( A ) && b < sz ( B )){ if ( dA [ a ] * dB [ b ] >= 0 ) ans . pb ( ans . back () + dA [ a ++ ]); else ans . pb ( ans . back () + dB [ b ++ ]); } while ( a < sz ( A )) ans . pb ( ans . back () + dA [ a ++ ]); while ( b < sz ( B )) ans . pb ( ans . back () + dB [ b ++ ]); } int main (){ n = read (); rep ( i , 1 , n ){ int x = read (); rep ( j , 1 , x ) vec [ i ]. pb (( node ){ read (), read ()}); Convex ( vec [ i ]); } ans = vec [ 1 ]; rep ( i , 2 , n ){ tmp = ans ; ans . clear (); Minkowski ( vec [ i ], tmp ); Convex ( ans ); } ll len = 0 ; for ( auto t : ans ) len = max ( len , t . len ()); cout << len << '\\n' ; return 0 ; } \u8d5b\u540e\u603b\u7ed3\uff1a \u8fd9\u6b21\u6bd4\u8d5b\u5bf9\u65f6\u95f4\u7684\u628a\u63a7\u6781\u4e3a\u5931\u8d25\uff0c\u4e0d\u5e94\u8be5\u56e0\u4e3a\u770b\u5230\u4e86\u719f\u6089/\u611f\u89c9\u80fd\u505a\u7684\u9898\u76ee\u5c31\u4e00\u76f4\u6b7b\u78d5\u5728\u4e0a\u9762\uff0c\u8fd9\u5bf9\u6bd4\u8d5b\u662f\u6781\u5176\u4e0d\u5229\u7684\uff0c\u5e0c\u671b\u4ee5\u540e\u80fd\u5b66\u4f1a\u5408\u7406\u5229\u7528\u65f6\u95f4\u3002\u9664\u4e86T3\u7684\u8ba1\u7b97\u51e0\u4f55\u5bf9USACO\u662f\u76f8\u5bf9\u65b0\u9896\u7684\u8003\u70b9\uff0c\u53e6\u5916\u4e24\u9898\u5e76\u6ca1\u6709\u4ec0\u4e48\u65b0\u7684\u4e1c\u897f\uff0cT3\u4e5f\u5bb9\u6613\u5728\u4e86\u89e3\u4e00\u70b9\u77e5\u8bc6\u540e\u5957\u6a21\u677f\u89e3\u51b3\u3002","title":"USACO 22JAN"},{"location":"%E7%AC%94%E8%AE%B0/USACO%2022JAN/#t1","text":"\u9898\u610f\uff1a\u7ed9\u4e00\u4e2a\u957f\u5ea6\u4e3a \\(N\\) \u7684\u6570\u7ec4 \\(a\\) \uff0c\u82e5\u76f8\u90bb\u4e24\u6570\u4e4b\u5dee\u7684\u7edd\u5bf9\u503c\u4e0d\u8d85\u8fc7 \\(K\\) \u5219\u53ef\u4ee5\u4ea4\u6362\uff0c\u95ee\u80fd\u5f97\u5230\u7684\u6240\u6709 \\(a\\) \u4e2d\u5b57\u5178\u5e8f\u6700\u5c0f\u7684\u4e00\u4e2a\u3002 \u6570\u636e\u8303\u56f4\uff1a \\(1\\le N,K\\le 10^5,1\\le a_i\\le 10^9\\) \u53d1\u73b0 \\(|a_i-a_j| > K\\) \u7684\u6570\u65e0\u6cd5\u4ea4\u6362\uff0c\u4e8e\u662f\u627e\u5230\u6240\u6709\u8fd9\u6837\u7684\u9650\u5236\u505a\u62d3\u6251\u6392\u5e8f\u3002\u5982\u4f55\u505a\uff1f\u6b63\u5e38\u6700\u5c0f\u62d3\u6251\u5e8f\u662f\u628a\u6240\u6709\u5165\u5ea6\u4e3a0\u7684\u70b9\u653e\u5165\u4f18\u5148\u961f\u5217\u4e2d\uff0c\u7136\u540e\u6bcf\u6b21\u53d6\u5806\u9876\u7684\u70b9\u5e76\u4ece\u56fe\u4e2d\u5220\u9664\u3002\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a \\(O(NK)\\) \u3002 \u601d\u8003\u4e00\u4e0b\u5982\u4f55\u4f18\u5316\uff0c\u9996\u5148\u53ef\u4ee5\u5bf9\u539f\u6570\u7ec4\u79bb\u6563\u5316\uff0c\u7528\u4e00\u4e2a\u7ebf\u6bb5\u6811\u6765\u7ef4\u62a4\u5f53\u524d\u53ef\u80fd\u7684\u6700\u5c0f\u4f4d\u7f6e\uff0c\u6bcf\u6b21\u53d6\u51fa\u4f5c\u4e3a\u7b54\u6848\u5e76\u66f4\u65b0\u4e0e\u5176\u6709\u8fde\u8fb9\u7684\u70b9\u7684\u5165\u5ea6\u5373\u53ef\u3002\u5177\u4f53\u5730\uff0c\u82e5\u5f53\u524d\u70b9\u7684\u6743\u503c\u4e3a \\(u\\) \uff0c\u5219 \\([1,m]\\setminus[u-K+1,u+K-1]\\) \u4e2d\u7684\u6240\u6709\u6743\u503c\u5bf9\u5e94\u7684\u70b9\u7684\u5165\u5ea6 \\(-1\\) \u3002\u9700\u8981\u4e00\u4e2a\u5e26\u61d2\u6807\u8bb0\u7ebf\u6bb5\u6811\u505a\u533a\u95f4\u66f4\u65b0\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N\\log N)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define vi vector<int> #define fi first #define se second #define pb push_back #define debug(...) fprintf(stderr, __VA_ARGS__) #define ALL(x) x.begin(),x.end() #define sz(x) int(x.size()) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 ; int n , K , a [ N ], val [ N ], deg [ N ]; unordered_map < int , int > vis ; #define ls (p<<1) #define rs (ls|1) #define mid ((L+R)>>1) pii t [ N << 2 ]; int tag [ N << 2 ]; inline pii Min ( const pii a , const pii b ){ if ( a . se == b . se ) return make_pair ( min ( a . fi , b . fi ), a . se ); return a . se < b . se ? a : b ; } void build ( int p , int L , int R ){ if ( L == R ){ t [ p ] = make_pair ( L , deg [ L ]); return ; } build ( ls , L , mid ), build ( rs , mid + 1 , R ); t [ p ] = Min ( t [ ls ], t [ rs ]); } void push ( int p , int v ){ tag [ p ] += v , t [ p ]. se += v ;} void down ( int p ){ if ( ! tag [ p ]) return ; push ( ls , tag [ p ]), push ( rs , tag [ p ]); tag [ p ] = 0 ; } void upd ( int p , int L , int R , int l , int r , int v ){ if ( l > R || r < L ) return ; if ( l <= L && R <= r ){ push ( p , v ); return ; } down ( p ); upd ( ls , L , mid , l , r , v ), upd ( rs , mid + 1 , R , l , r , v ); t [ p ] = Min ( t [ ls ], t [ rs ]); } int T [ N ]; void add ( int x ){ for (; x <= n ; x += x & - x ) T [ x ] ++ ;} int Q ( int x ){ int res = 0 ; for (; x ; x -= x & - x ) res += T [ x ]; return res ; } int main (){ n = read (), K = read (); rep ( i , 1 , n ) a [ i ] = read (), val [ i ] = a [ i ]; sort ( val + 1 , val + n + 1 ); rep ( i , 1 , n ){ vis [ a [ i ]] ++ ; a [ i ] = lower_bound ( val + 1 , val + n + 1 , a [ i ]) - val + vis [ a [ i ]] - 1 ; } //calculating in-degree rep ( i , 1 , n ){ int x = lower_bound ( val + 1 , val + n + 1 , val [ a [ i ]] - K ) - val - 1 ; int y = lower_bound ( val + 1 , val + n + 1 , val [ a [ i ]] + K + 1 ) - val - 1 ; deg [ a [ i ]] = ( i -1 ) + Q ( x ) - Q ( y ); add ( a [ i ]); } build ( 1 , 1 , n ); rep ( i , 1 , n ){ int u = t [ 1 ]. fi ; cout << val [ u ] << '\\n' ; int x = lower_bound ( val + 1 , val + n + 1 , val [ u ] - K ) - val - 1 ; //cout << 1 << ' ' << x << '\\n'; int y = lower_bound ( val + 1 , val + n + 1 , val [ u ] + K + 1 ) - val - 1 ; //cout << y+1 << ' ' << n << '\\n'; //cout << u << ' ' << u << '\\n'; upd ( 1 , 1 , n , 1 , x , -1 ); upd ( 1 , 1 , n , y + 1 , n , -1 ); upd ( 1 , 1 , n , u , u , n ); } return 0 ; }","title":"T1"},{"location":"%E7%AC%94%E8%AE%B0/USACO%2022JAN/#t2","text":"\u9898\u610f\uff1a\u7ed9\u4e00\u4e2a\u957f\u5ea6\u4e3a \\(N\\) \u7684\u6570\u7ec4 \\(a\\) \uff0c\u76f8\u90bb\u4e24\u9879\u82e5\u5dee\u4e0d\u5927\u4e8e1\u5219\u53ef\u4ee5\u4ea4\u6362\uff0c\u95ee\u80fd\u5f97\u5230\u7684\u4e0d\u540c \\(a\\) \u4e2a\u6570\uff0c\u7b54\u6848\u6a21 \\(10^9+7\\) \u3002 \u6570\u636e\u8303\u56f4\uff1a \\(1\\le N\\le 5000,1\\le a_i\\le10^9\\) \u8ba1\u6570\u95ee\u9898\u57fa\u672c\u5c31\u662f dp \u4e86\u3002\u53d1\u73b0\u4ece\u4e0a\u4e00\u9898\u4e2d\u7684\u4e0d\u5927\u4e8e \\(K\\) \u53d8\u6210\u4e86\u4e0d\u5927\u4e8e \\(1\\) \uff0c\u5fc5\u7136\u6709\u732b\u817b\u3002\u7531\u4e8e\u5dee\u5927\u4e8e \\(1\\) \u7684\u6570\u5f88\u591a\uff0c\u6240\u4ee5\u5927\u90e8\u5206\u6570\u4e4b\u95f4\u662f\u4e0d\u80fd\u591f\u5bf9\u6362\u4f4d\u7f6e\u7684\uff0c\u8003\u8651\u4ece\u8fd9\u4e00\u70b9\u5165\u624b\u89e3\u51b3\u95ee\u9898\u3002 \u7136\u540e\u6b64\u65f6\u5982\u679c\u89c2\u5bdf\u5230\u4e86\u5947\u6570\u4e4b\u95f4\u4e0d\u53ef\u80fd\u8c03\u6362\u4f4d\u7f6e\uff08\u9664\u975e\u4e24\u6570\u76f8\u540c\uff0c\u4f46\u662f\u8fd9\u6837\u7684\u8c03\u6362\u6ca1\u6709\u610f\u4e49\uff09\uff0c\u5076\u6570\u4e5f\u540c\u7406\u3002\u4e8e\u662f\u8bbe\u8ba1 dp \u72b6\u6001\u4e3a \\(dp[i][j]\\) \u8868\u793a\u5f53\u524d\u786e\u5b9a\u4e86\u524d \\(i+j\\) \u4e2a\u4f4d\u7f6e\uff0c\u6709 \\(i\\) \u4e2a\u5947\u6570\uff0c \\(j\\) \u4e2a\u5076\u6570\u3002\u5bf9\u6bcf\u4e2a\u6570\uff0c\u9884\u5904\u7406\u5b83\u6700\u8fdc\u80fd\u4e0e\u5b83\u4e0d\u540c\u5947\u5076\u6027\u7684\u54ea\u4e2a\u6570\u4ea4\u6362\u5373\u53ef\u3002\u8f6c\u79fb\u662f\u7b80\u5355\u7684\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N^2)\\) \u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define vi vector<int> #define fi first #define se second #define pb push_back #define debug(...) fprintf(stderr, __VA_ARGS__) #define ALL(x) x.begin(),x.end() #define sz(x) int(x.size()) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 5e3 + 5 , P = 1e9 + 7 ; int n , a [ N ], pos [ N ]; void add ( int & x , const int y ){ x += y ; if ( x > P ) x -= P ;} void sub ( int & x , const int y ){ x -= y ; if ( x < 0 ) x += P ;} void solve (){ n = read (); vector < int > even , odd ; rep ( i , 1 , n ){ a [ i ] = read (); if ( a [ i ] & 1 ){ pos [ i ] = sz ( odd ); odd . pb ( i ); } else { pos [ i ] = sz ( even ); even . pb ( i ); } } vector < int > pre ( n + 1 ); rep ( i , 1 , n ){ if ( a [ i ] & 1 ) pre [ i ] = sz ( even ); else pre [ i ] = sz ( odd ); rep ( j , i + 1 , n ) if ((( a [ i ] - a [ j ]) & 1 ) && abs ( a [ i ] - a [ j ]) > 1 ){ pre [ i ] = min ( pre [ i ], pos [ j ]); } } vector < vi > dp ( sz ( even ) + 1 , vi ( sz ( odd ) + 1 )); dp [ 0 ][ 0 ] = 1 ; rep ( i , 0 , sz ( even )) rep ( j , 0 , sz ( odd )){ if ( ! dp [ i ][ j ]) continue ; if ( i < sz ( even ) && j <= pre [ even [ i ]]) add ( dp [ i + 1 ][ j ], dp [ i ][ j ]); if ( j < sz ( odd ) && i <= pre [ odd [ j ]]) add ( dp [ i ][ j + 1 ], dp [ i ][ j ]); } cout << dp [ sz ( even )][ sz ( odd )] << '\\n' ; } int main (){ int T = read (); while ( T -- ) solve (); return 0 ; }","title":"T2"},{"location":"%E7%AC%94%E8%AE%B0/USACO%2022JAN/#t3","text":"\u9898\u610f\uff1a\u7ed9\u5b9a \\(n\\) \u7ec4\u5411\u91cf\uff0c\u6c42\u6bcf\u4e00\u7ec4\u4e2d\u9009\u51fa\u4e00\u4e2a\u5411\u91cf\uff0c\u52a0\u8d77\u6765\u540e\u6700\u5927\u7684\u957f\u5ea6\u3002 \u6570\u636e\u8303\u56f4\uff1a\u5411\u91cf\u6570\u4e0d\u8d85\u8fc7 \\(10^5\\) \uff0c \\(|x|,|y|\\le \\frac{10^9}{N}\\) \u3002 \u6211\u4eec\u7ef4\u62a4\u5f53\u524d\u6240\u6709\u53ef\u80fd\u7b54\u6848\u6784\u6210\u7684\u70b9\u96c6\uff0c\u6709 \u6027\u8d281\uff1a\u5982\u679c\u4e00\u4e2a\u70b9\u4e0d\u5728\u8be5\u70b9\u96c6\u7684\u51f8\u5305\u4e0a\uff0c\u90a3\u4e48\u8fd9\u4e2a\u70b9\u79bb\u539f\u70b9\u7684\u8ddd\u79bb\u4e0d\u662f\u6700\u5927\u7684\u3002 \u5bf9\u6bcf\u4e00\u7ec4\u5411\u91cf\u6211\u4eec\u90fd\u53ef\u4ee5\u6c42\u51fa\u5b83\u7684\u51f8\u5305\u3002\u5bf9\u4e8e\u7b2c \\(i\\) \u7ec4\u5411\u91cf\uff0c\u6211\u4eec\u5c06\u5b83\u7684\u51f8\u5305\u4e0e\u524d \\(i-1\\) \u7ec4\u5f97\u5230\u7684\u7b54\u6848\u51f8\u5305\u5408\u5e76\uff0c\u7528 Minkowski \u548c\u5373\u53ef\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N\\log N)\\) \u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define vi vector<int> #define fi first #define se second #define pb push_back #define debug(...) fprintf(stderr, __VA_ARGS__) #define ALL(x) x.begin(),x.end() #define sz(x) int(x.size()) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 ; struct node { ll x , y ; node operator - ( const node a ){ return ( node ){ x - a . x , y - a . y };} node operator + ( const node a ){ return ( node ){ x + a . x , y + a . y };} ll operator * ( node a ) const { return x * a . y - y * a . x ;} //cross pro ll len () const { return x * x + y * y ;} } O ; bool cmpy ( const node & a , const node & b ){ return a . y == b . y ? a . x < b . x : a . y < b . y ;} bool cmp ( const node & a , const node & b ){ return a * b == 0 ? a . len () < b . len () : a * b > 0 ;} int n , m , q , stk [ N ], top , tot ; void Convex ( vector < node > & A ){ sort ( A . begin (), A . end (), cmpy ); O = A [ 0 ]; stk [ top = 1 ] = 0 ; rep ( i , 0 , sz ( A ) -1 ) A [ i ] = A [ i ] - O ; sort ( A . begin () + 1 , A . end (), cmp ); //\u6781\u89d2\u6392\u5e8f rep ( i , 1 , sz ( A ) -1 ){ while ( top > 1 && ( A [ i ] - A [ stk [ top -1 ]]) * ( A [ stk [ top ]] - A [ stk [ top -1 ]]) >= 0 ) top -- ; stk [ ++ top ] = i ; } rep ( i , 1 , top ) A [ i -1 ] = A [ stk [ i ]] + O ; A . resize ( top ); //rep(i,0,sz(A)-1)cout << A[i].x << ' ' << A[i].y << '\\n'; A . pb ( A [ 0 ]); } vector < node > A , B , vec [ N ], dA , dB , ans , tmp ; void Minkowski ( vector < node > & A , vector < node > & B ){ dA . resize ( sz ( A )), dB . resize ( sz ( B )); rep ( i , 0 , sz ( A ) -1 ) dA [ i ] = A [( i + 1 ) % sz ( A )] - A [ i ]; rep ( i , 0 , sz ( B ) -1 ) dB [ i ] = B [( i + 1 ) % sz ( B )] - B [ i ]; ans . pb ( A [ 0 ] + B [ 0 ]); int a = 0 , b = 0 ; while ( a < sz ( A ) && b < sz ( B )){ if ( dA [ a ] * dB [ b ] >= 0 ) ans . pb ( ans . back () + dA [ a ++ ]); else ans . pb ( ans . back () + dB [ b ++ ]); } while ( a < sz ( A )) ans . pb ( ans . back () + dA [ a ++ ]); while ( b < sz ( B )) ans . pb ( ans . back () + dB [ b ++ ]); } int main (){ n = read (); rep ( i , 1 , n ){ int x = read (); rep ( j , 1 , x ) vec [ i ]. pb (( node ){ read (), read ()}); Convex ( vec [ i ]); } ans = vec [ 1 ]; rep ( i , 2 , n ){ tmp = ans ; ans . clear (); Minkowski ( vec [ i ], tmp ); Convex ( ans ); } ll len = 0 ; for ( auto t : ans ) len = max ( len , t . len ()); cout << len << '\\n' ; return 0 ; } \u8d5b\u540e\u603b\u7ed3\uff1a \u8fd9\u6b21\u6bd4\u8d5b\u5bf9\u65f6\u95f4\u7684\u628a\u63a7\u6781\u4e3a\u5931\u8d25\uff0c\u4e0d\u5e94\u8be5\u56e0\u4e3a\u770b\u5230\u4e86\u719f\u6089/\u611f\u89c9\u80fd\u505a\u7684\u9898\u76ee\u5c31\u4e00\u76f4\u6b7b\u78d5\u5728\u4e0a\u9762\uff0c\u8fd9\u5bf9\u6bd4\u8d5b\u662f\u6781\u5176\u4e0d\u5229\u7684\uff0c\u5e0c\u671b\u4ee5\u540e\u80fd\u5b66\u4f1a\u5408\u7406\u5229\u7528\u65f6\u95f4\u3002\u9664\u4e86T3\u7684\u8ba1\u7b97\u51e0\u4f55\u5bf9USACO\u662f\u76f8\u5bf9\u65b0\u9896\u7684\u8003\u70b9\uff0c\u53e6\u5916\u4e24\u9898\u5e76\u6ca1\u6709\u4ec0\u4e48\u65b0\u7684\u4e1c\u897f\uff0cT3\u4e5f\u5bb9\u6613\u5728\u4e86\u89e3\u4e00\u70b9\u77e5\u8bc6\u540e\u5957\u6a21\u677f\u89e3\u51b3\u3002","title":"T3"},{"location":"%E7%AC%94%E8%AE%B0/USACO%2022OPEN/","text":"\u4e8b\u5b9e\u8bc1\u660eUSACO\u9898\u76ee\u96be\u5ea6\u4e0d\u518d\u4e25\u683c\u5347\u5e8f\u6392\u5217\uff0c\u5012\u5e8f\u5f00\u9898\u4eba\u8d62\u9ebb\u4e86\uff08 \u8bf4\u660e\uff1a\u6700\u8fd1\u6709\u70b9\u5fd9\uff0c\u6ca1\u6765\u5f97\u53ca\u5199\u9898\u89e3qwq\u3002\u4e0d\u8fc7\u8fd9\u573a\u6bd4\u8d5b\u559c\u63d0 USA rk3 \u5e76\u4e14\u6df7\u8fdb\u961f\uff0c\u503c\u5f97\u7eaa\u5ff5\u4e00\u6ce2\u3002 T1 \u00b6 \u9898\u610f\uff1a\u7ed9\u5b9a\u4e00\u4e2a\u957f\u5ea6\u4e3a \\(N\\) \u7684\u5e8f\u5217 \\(a\\) \uff0c\u6bcf\u6b21\u64cd\u4f5c\u53ef\u4ee5\u5c06\u4e24\u4e2a\u76f8\u90bb\u6570 \\(x,y\\) \u5408\u5e76\u4e3a \\(\\max(x,y)+1\\) \uff0c\u76ee\u6807\u662f\u6700\u5c0f\u5316\u6700\u540e\u5269\u4e0b\u7684\u6570\u3002\u6c42\u5bf9\u6570\u5217\u7684\u6240\u6709 \\(\\frac{N(N+1)}{2}\\) \u4e2a\u8fde\u7eed\u5b50\u5e8f\u5217\uff0c\u6240\u6709\u7b54\u6848\u7684\u548c\u3002 \u6570\u636e\u8303\u56f4\uff1a \\(1\\le N\\le 2^{18},1\\le a_i\\le 10^6\\) \u8bc4\u4ef7\uff1a\u4e2a\u4eba\u8ba4\u4e3a\u662f\u672c\u573a\u6700\u5927\u6bd2\u7624\uff0c\u4f46\u662f\u505a\u51fa\u6765\u7684\u4eba\u6570\u83ab\u540d\u548cT2\u76f8\u5f53\u3002\u91cd\u70b9\u5e94\u8be5\u662f\u5148\u4ece\u5b50\u4efb\u52a1\u4e2d\u7684\u500d\u589e dp \u5165\u624b\uff0c\u7136\u540e\u89c2\u5bdf\u5230\u6781\u5927\u7684\u5b50\u6bb5\u4e0d\u591a\u5c31\u505a\u51fa\u6765\u4e86\u3002 \u9996\u5148\u6709\u663e\u7136\u7684\u533a\u95f4dp\uff1a f_{l,r}=\\min_k{\\max(f_{l,k},f_{k+1,r})}+1 \u76f4\u63a5\u66b4\u529b\u662f \\(O(N^3)\\) \uff0c\u53d1\u73b0\u5355\u8c03\u6027\u5c31\u53ef\u4ee5 \\(O(N^2)\\) \u3002 \u601d\u8003\u600e\u4e48\u5408\u5e76\u662f\u6700\u4f18\u7684\uff0c\u5f53 \\(N\\) \u4e3a 2 \u7684\u5e42\uff0c\u6211\u4eec\u53ef\u4ee5\u6bcf\u6b21\u5c06 \\((1,2),(3,4),\\dots,(N-1,N)\\) \u8fd9\u6837\u7684\u7ec4\u5408\u5e76\uff0c\u4e0d\u96be\u53d1\u73b0\u6bcf\u6b21\u6570\u51cf\u534a\uff0c\u5f97\u5230\u7684\u7b54\u6848\u6700\u5927\u4e3a \\(\\max{a_i}+\\log N\\) \u3002\u6545\u4e00\u6bb5\u533a\u95f4\u7684\u7b54\u6848\u8303\u56f4\u5728 \\([x,x+\\log N]\\) \u4e4b\u95f4\u3002 \u8bbe \\(f_{i,k}\\) \u4e3a\u6700\u5927\u6ee1\u8db3 \\([i,f_{i,k}]\\) \u5408\u5e76\u51fa \\(k\\) \u7684\u53f3\u7aef\u70b9\u3002 \u6709 \\(f[i][k+1]=f[f[i][k]+1][k+1]\\) \u3002\u7edf\u8ba1\u7b54\u6848\u65f6\u679a\u4e3e \\(i,k\\) \u5373\u53ef\uff0c\u8fd9\u6837\u505a\u7684\u590d\u6742\u5ea6\u4e3a \\(O(N\\max a_i)\\) \uff0c\u53ef\u4ee5\u6253\u4e00\u6863\u90e8\u5206\u5206\u3002 \u8003\u8651\u4f18\u5316 dp \u7684\u8fc7\u7a0b\u3002\u79f0\u4e00\u4e2a\u5b50\u6bb5\u662f \u6781\u5927\u7684 \uff0c\u82e5\u5b83\u5411\u5de6\u6216\u5411\u53f3\u62d3\u5c55\u90fd\u4f1a\u4f7f\u5b83\u5408\u5e76\u7684\u503c\u589e\u52a0\u3002 \u5f15\u7406\uff1a\u6781\u5927\u5b50\u6bb5\u4e2a\u6570\u4e3a \\(f(N)=O(N\\log N)\\) \u3002 \u8bc1\u660e\uff1a\u8003\u8651\u539f\u5e8f\u5217\u7684\u7b1b\u5361\u5c14\u6811\uff0c\u8bbe\u5e8f\u5217\u7684\u5176\u4e2d\u4e00\u4e2a\u6700\u5927\u5143\u7d20\u5728\u4f4d\u7f6e \\(p\\) \u3002\u6709 f(N)\\le f(p-1)+f(N-p)+C \u5176\u4e2d \\(C\\) \u4e3a\u539f\u5e8f\u5217\u7684\u5305\u542b\u4f4d\u7f6e \\(p\\) \u7684\u6700\u5927\u5b50\u6bb5\u6570\u91cf\u3002\u4e0b\u8bc1 C\\le O(p\\log(\\frac{N}{p})) \u53ea\u9700\u53d1\u73b0\u503c\u4e3a \\(a_p+k\\) \u7684\u5305\u542b\u4f4d\u7f6e \\(p\\) \u7684\u5b50\u6bb5\u4e0d\u8d85\u8fc7 \\(\\min(p,2^k)\\) \uff0c\u6c42\u548c\u5373\u5f97\u3002 \u7528 set \u8bb0\u5f55\u6240\u6709\u503c\u4e3a \\(v\\) \u7684\u6781\u957f\u5b50\u6bb5\u540e\uff0c\u7528\u5e76\u67e5\u96c6\u7ef4\u62a4\u5408\u5e76\u533a\u95f4\u5373\u53ef\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N\\log^2 N)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define vi vector<int> #define fi first #define se second #define pb push_back #define ALL(x) x.begin(),x.end() #define sz(x) int(x.size()) #define ll long long using namespace std ; const int N = 3e5 + 5 , M = 1e6 + 50 ; struct DSU { vector < int > p , sz ; void init ( int n ){ p . resize ( n ); sz . assign ( n , 1 ); iota ( p . begin (), p . end (), 0 ); } int find ( int x ){ return p [ x ] == x ? x : p [ x ] = find ( p [ x ]);} void merge ( int u , int v ){ u = find ( u ), v = find ( v ); if ( u == v ) return ; if ( sz [ u ] > sz [ v ]) swap ( u , v ); p [ u ] = v , sz [ v ] += sz [ u ], sz [ u ] = 0 ; } } d ; int n ; int main (){ cin . tie ( 0 ) -> sync_with_stdio ( 0 ); cin >> n ; vi a ( n ); for ( auto & x : a ) cin >> x ; vector < vi > vec ( M ); rep ( i , 0 , n -1 ) vec [ a [ i ]]. pb ( i ); vector < ll > cnt ( M ); vi R ( n , -1 ), L ( n + 1 , -1 ); auto getR = [ & ]( int x ){ if ( x == n ) return n ; return R [ d . find ( x )]; }; set < int > alive ; ll ans = 0 , now = 0 ; //the amount of values <= i d . init ( n ); rep ( i , 1 , M -1 ){ vector < int > dead , remove ; for ( int x : alive ){ int r = getR ( x ); int nxtR = max ( r , r == n ? -1 : getR ( r )); if ( nxtR == r ) dead . pb ( x ); else { if ( L [ nxtR ] != -1 ) dead . pb ( x ); else { L [ nxtR ] = x ; remove . pb ( nxtR ); } now += 1l l * ( nxtR - r ) * d . sz [ d . find ( x )]; R [ d . find ( x )] = nxtR ; } } for ( int x : dead ){ alive . erase ( x ); if ( L [ getR ( x )] == -1 ) L [ getR ( x )] = x ; else d . merge ( L [ getR ( x )], x ); } for ( int x : remove ) L [ x ] = -1 ; for ( int x : vec [ i ]){ ++ now ; R [ x ] = x + 1 ; alive . insert ( x ); if ( L [ x ] != -1 ) alive . insert ( L [ x ]); L [ x ] = -1 ; } cnt [ i ] = now ; } per ( i , M -1 , 0 ) cnt [ i ] -= cnt [ i -1 ]; rep ( i , 1 , M -1 ) ans += cnt [ i ] * i ; cout << ans << '\\n' ; return 0 ; } T2 \u00b6 \u9898\u610f\uff1a\u6709\u4e00\u4e2a \\(N\\) \u4e2a\u70b9 \\(M\\) \u6761\u8fb9\u7684\u6709\u5411\u56fe\uff0c\u4e24\u4e2a\u4eba\u5728\u4e0a\u9762\u505a\u6e38\u620f\u3002\u6e38\u620f\u5f00\u59cb\u65f6\u6709\u4e24\u679a\u68cb\u5b50\u5206\u522b\u653e\u5728\u4e0d\u540c\u7684\u8282\u70b9\u4e0a\uff0c\u6bcf\u4e00\u8f6e\u6e38\u620f\u4e2d\u7531\u5c0fB\u51b3\u5b9a\u79fb\u52a8\u54ea\u4e00\u679a\u68cb\u5b50\uff0c\u5c0fH\u51b3\u5b9a\u6cbf\u7740\u54ea\u4e00\u6761\u8fb9\u79fb\u52a8\u3002\u5982\u679c\u5c0fH\u5728\u67d0\u4e2a\u65f6\u523b\u65e0\u6cd5\u79fb\u52a8\u4e86\uff0c\u5219\u5c0fB\u83b7\u80dc\uff1b\u53cd\u4e4b\u5c0fH\u83b7\u80dc\u3002 \u73b0\u5728\u6709 \\(Q\\) \u4e2a\u8be2\u95ee\uff0c\u6bcf\u4e2a\u8be2\u95ee\u5206\u522b\u7ed9\u51fa\u521d\u59cb\u4e24\u4e2a\u68cb\u5b50\u7684\u4f4d\u7f6e\uff0c\u8981\u6c42\u56de\u7b54\u54ea\u4e2a\u73a9\u5bb6\u4f1a\u83b7\u80dc\u3002 \u6570\u636e\u8303\u56f4\uff1a \\(2\\le N\\le 10^5,2\\le M\\le 2\\times 10^5,1\\le Q\\le 10^5\\) \u8bc4\u4ef7\uff1a\u53cc\u4eba\u535a\u5f08\u4e2d\u8003\u8651\u53cc\u65b9\u7684\u6700\u4f18\u7b56\u7565\u6765\u7b80\u5316\u5c40\u9762\uff0c\u611f\u89c9\u6bd4\u8f83\u7ecf\u5178\u3002\u4e0d\u60f3\u504f\u5e94\u8be5\u86ee\u597d\u505a\u7684\uff1f \u51fa\u5ea6\u4e3a0\u663e\u7136\u6b7b\uff0c\u4e8e\u662f\u5728\u53cd\u56fe\u4e0a\u5148\u62d3\u6251\u6392\u5e8f\u628a\u6240\u6709\u5fc5\u6b7b\u70b9\u627e\u51fa\u6765\uff0c\u5269\u4e0b\u7684\u70b9\u51fa\u5ea6\u663e\u7136\u90fd\u4e0d\u5c0f\u4e8e1\u3002\u518d\u5408\u5e76\u6240\u6709\u51fa\u5ea6\u7b49\u4e8e1\u7684\u70b9\u548c\u51fa\u8fb9\u6240\u6307\u5411\u7684\u70b9\u3002\u6700\u540e\u5269\u4e0b\u7684\u70b9\u51fa\u5ea6\u90fd\u4e0d\u5c0f\u4e8e2\uff0c\u6b64\u65f6\u82e5\u4e24\u4e2a\u68cb\u5b50\u5728\u4e0d\u540c\u4f4d\u7f6e\uff0cB \u65e0\u6cd5\u628a H \u9a97\u8fdb\u6b7b\u8def\u6216\u8005\u7528\u4e00\u4e2a\u68cb\u5b50\u5835\u4f4f\u53e6\u4e00\u4e2a\uff0cH \u8d62\u3002\u4e24\u4e2a\u8fc7\u7a0b\u53ef\u4ee5\u7c7b\u4f3c\u62d3\u6251\u6392\u5e8f\u5904\u7406\uff0c\u5408\u5e76\u4e24\u70b9\u7684\u8fb9\u96c6\u7528set\u8fdb\u884c\u542f\u53d1\u5f0f\u5408\u5e76\uff0c\u7528\u5e76\u67e5\u96c6\u7ef4\u62a4\u7b49\u4ef7\u5173\u7cfb\u5373\u53ef\u3002 \u65f6\u95f4\u590d\u6742\u5ea6 \\(O(N\\log N)\\) \u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define vi vector<int> #define fi first #define se second #define pb push_back #define ALL(x) x.begin(),x.end() #define sz(x) int(x.size()) #define ll long long using namespace std ; const int N = 1e5 + 5 ; int n , m , q , fa [ N ], out [ N ]; int find ( int x ){ return fa [ x ] == x ? x : fa [ x ] = find ( fa [ x ]);} set < int > G [ N ], R [ N ]; bool chk ( int x , int y ){ x = find ( x ), y = find ( y ); if ( ! fa [ x ] || ! fa [ y ]) return 1 ; //dead end if ( x == y ) return 1 ; return 0 ; } int main (){ cin . tie ( 0 ) -> sync_with_stdio ( 0 ); cin >> n >> m ; int u , v ; rep ( i , 1 , m ){ cin >> u >> v ; out [ u ] ++ ; R [ v ]. insert ( u ); //reverse graph G [ u ]. insert ( v ); } queue < int > Q ; rep ( i , 1 , n ){ fa [ i ] = i ; if ( sz ( G [ i ]) <= 1 ) Q . push ( i ); } while ( ! Q . empty ()){ //topo int u = Q . front (); Q . pop (); int v = 0 ; for ( int x : G [ u ]) if ( find ( x ) != 0 ){ v = find ( x ); break ; } if ( v == 0 ){ //dead end fa [ u ] = 0 ; for ( int x : R [ u ]){ -- out [ x ]; if ( out [ x ] == 1 ) Q . push ( x ); } } else { //merge points of outdeg = 1 if ( u == v ) continue ; R [ v ]. erase ( u ); if ( sz ( R [ u ]) > sz ( R [ v ])) swap ( R [ u ], R [ v ]); fa [ u ] = v ; for ( int x : R [ u ]){ if ( R [ v ]. find ( x ) != R [ v ]. end ()){ -- out [ x ]; if ( out [ x ] == 1 ) Q . push ( x ); } else R [ v ]. insert ( x ); } } R [ u ]. clear (); } cin >> q ; while ( q -- ){ cin >> u >> v ; if ( chk ( u , v )) putchar ( 'B' ); else putchar ( 'H' ); } return 0 ; } T3 \u00b6 \u9898\u610f\uff1a\u7ed9\u5b9a\u957f\u5ea6\u4e3a \\(N\\) \u7684\u4e00\u4e2a\u6392\u5217 \\(p\\) \u548c\u4e00\u4e2a\u957f\u5ea6\u4e3a \\(N-1\\) \u7684\u5b57\u7b26\u4e32 \\(S\\) \uff0c \\(S\\) \u53ea\u5305\u542b\u5b57\u6bcd U \u548c D \u3002\u8981\u6c42\u627e\u51fa \\(p\\) \u6700\u957f\u7684\u5b50\u5e8f\u5217 \\(a_0,a_1,\\dots,a_K\\) \uff0c\u6ee1\u8db3 \\(S_i = U\\) \u65f6 \\(a_{i-1} < a_i\\) \uff0c\u53cd\u4e4b \\(a_{i-1} > a_i\\) \u3002 \u6570\u636e\u8303\u56f4\uff1a \\(2\\le N\\le 3\\times 10^5\\) \u8bc4\u4ef7\uff1a\u8fd9\u662f\u94c2\u91d1\u9898\uff1f \u8bbe \\(f_{i,j}\\) \u4e3a\u8003\u8651\u5230\u7b2c \\(i\\) \u4f4d\uff0c\u4e0e \\(S\\) \u7684\u524d \\(j\\) \u4f4d\u5339\u914d\u540e\u6700\u540e\u4e00\u4f4d\u6700\u4f18\u662f\u591a\u5c11\uff0c\u53ef\u4ee5\u505a\u5230 \\(O(N^2)\\) \u3002 \u8003\u8651\u4f18\u5316\uff0c\u95ee\u9898\u5728\u539f\u6765\u7684\u72b6\u6001\u8bbe\u8ba1\u9700\u8981\u5bf9\u4e8e\u6bcf\u4e2a\u72b6\u6001\u5206\u522b\u66f4\u65b0\u3002\u4e0d\u59a8\u8bbe \\(f_i,g_i\\) \u4e3a\u4ee5\u6743\u503c \\(i\\) \u7ed3\u5c3e\uff0c\u4e0b\u4e00\u4f4d\u94a6\u5b9a\u4e3a U/D \u65f6\u80fd\u5339\u914d\u7684\u6700\u957f\u524d\u7f00\u3002\u8fd9\u6837\u4e00\u6765\u6bcf\u6b21\u8f6c\u79fb\u53ef\u4ee5\u4f7f\u7528\u7ebf\u6bb5\u6811\u67e5\u8be2\u6700\u4f18\u7684\u65b9\u6848\u4e86\u3002\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a \\(O(N\\log N)\\) \u3002 \u4ee3\u7801\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define vi vector<int> #define fi first #define se second #define pb push_back #define ll long long using namespace std ; const int N = 3e5 + 5 ; #define mid ((L + R) >> 1) #define ls (p << 1) #define rs (ls | 1) struct SegTree { int mx [ N << 2 ]; void pushup ( int p ){ mx [ p ] = max ( mx [ ls ], mx [ rs ]);} void modify ( int p , int L , int R , int x , int v ){ if ( L == R ){ mx [ p ] = max ( mx [ p ], v ); return ; } x <= mid ? modify ( ls , L , mid , x , v ) : modify ( rs , mid + 1 , R , x , v ); pushup ( p ); } int Q ( int p , int L , int R , int l , int r ){ if ( r < L || R < l ) return 0 ; if ( l <= L && R <= r ) return mx [ p ]; return max ( Q ( ls , L , mid , l , r ), Q ( rs , mid + 1 , R , l , r )); } } f , g ; int n , a [ N ]; string s ; int main (){ cin . tie ( 0 ) -> sync_with_stdio ( 0 ); cin >> n ; rep ( i , 1 , n ) cin >> a [ i ]; cin >> s ; rep ( i , 1 , n ){ int U = f . Q ( 1 , 1 , n , 1 , a [ i ]), D = g . Q ( 1 , 1 , n , a [ i ], n ); U ++ , D ++ ; if ( s [ U - 1 ] == 'U' ) f . modify ( 1 , 1 , n , a [ i ], U ); else g . modify ( 1 , 1 , n , a [ i ], U ); if ( s [ D - 1 ] == 'U' ) f . modify ( 1 , 1 , n , a [ i ], D ); else g . modify ( 1 , 1 , n , a [ i ], D ); } int ans = max ( f . Q ( 1 , 1 , n , 1 , n ), g . Q ( 1 , 1 , n , 1 , n )); cout << ans - 1 << '\\n' ; return 0 ; }","title":"USACO 22OPEN"},{"location":"%E7%AC%94%E8%AE%B0/USACO%2022OPEN/#t1","text":"\u9898\u610f\uff1a\u7ed9\u5b9a\u4e00\u4e2a\u957f\u5ea6\u4e3a \\(N\\) \u7684\u5e8f\u5217 \\(a\\) \uff0c\u6bcf\u6b21\u64cd\u4f5c\u53ef\u4ee5\u5c06\u4e24\u4e2a\u76f8\u90bb\u6570 \\(x,y\\) \u5408\u5e76\u4e3a \\(\\max(x,y)+1\\) \uff0c\u76ee\u6807\u662f\u6700\u5c0f\u5316\u6700\u540e\u5269\u4e0b\u7684\u6570\u3002\u6c42\u5bf9\u6570\u5217\u7684\u6240\u6709 \\(\\frac{N(N+1)}{2}\\) \u4e2a\u8fde\u7eed\u5b50\u5e8f\u5217\uff0c\u6240\u6709\u7b54\u6848\u7684\u548c\u3002 \u6570\u636e\u8303\u56f4\uff1a \\(1\\le N\\le 2^{18},1\\le a_i\\le 10^6\\) \u8bc4\u4ef7\uff1a\u4e2a\u4eba\u8ba4\u4e3a\u662f\u672c\u573a\u6700\u5927\u6bd2\u7624\uff0c\u4f46\u662f\u505a\u51fa\u6765\u7684\u4eba\u6570\u83ab\u540d\u548cT2\u76f8\u5f53\u3002\u91cd\u70b9\u5e94\u8be5\u662f\u5148\u4ece\u5b50\u4efb\u52a1\u4e2d\u7684\u500d\u589e dp \u5165\u624b\uff0c\u7136\u540e\u89c2\u5bdf\u5230\u6781\u5927\u7684\u5b50\u6bb5\u4e0d\u591a\u5c31\u505a\u51fa\u6765\u4e86\u3002 \u9996\u5148\u6709\u663e\u7136\u7684\u533a\u95f4dp\uff1a f_{l,r}=\\min_k{\\max(f_{l,k},f_{k+1,r})}+1 \u76f4\u63a5\u66b4\u529b\u662f \\(O(N^3)\\) \uff0c\u53d1\u73b0\u5355\u8c03\u6027\u5c31\u53ef\u4ee5 \\(O(N^2)\\) \u3002 \u601d\u8003\u600e\u4e48\u5408\u5e76\u662f\u6700\u4f18\u7684\uff0c\u5f53 \\(N\\) \u4e3a 2 \u7684\u5e42\uff0c\u6211\u4eec\u53ef\u4ee5\u6bcf\u6b21\u5c06 \\((1,2),(3,4),\\dots,(N-1,N)\\) \u8fd9\u6837\u7684\u7ec4\u5408\u5e76\uff0c\u4e0d\u96be\u53d1\u73b0\u6bcf\u6b21\u6570\u51cf\u534a\uff0c\u5f97\u5230\u7684\u7b54\u6848\u6700\u5927\u4e3a \\(\\max{a_i}+\\log N\\) \u3002\u6545\u4e00\u6bb5\u533a\u95f4\u7684\u7b54\u6848\u8303\u56f4\u5728 \\([x,x+\\log N]\\) \u4e4b\u95f4\u3002 \u8bbe \\(f_{i,k}\\) \u4e3a\u6700\u5927\u6ee1\u8db3 \\([i,f_{i,k}]\\) \u5408\u5e76\u51fa \\(k\\) \u7684\u53f3\u7aef\u70b9\u3002 \u6709 \\(f[i][k+1]=f[f[i][k]+1][k+1]\\) \u3002\u7edf\u8ba1\u7b54\u6848\u65f6\u679a\u4e3e \\(i,k\\) \u5373\u53ef\uff0c\u8fd9\u6837\u505a\u7684\u590d\u6742\u5ea6\u4e3a \\(O(N\\max a_i)\\) \uff0c\u53ef\u4ee5\u6253\u4e00\u6863\u90e8\u5206\u5206\u3002 \u8003\u8651\u4f18\u5316 dp \u7684\u8fc7\u7a0b\u3002\u79f0\u4e00\u4e2a\u5b50\u6bb5\u662f \u6781\u5927\u7684 \uff0c\u82e5\u5b83\u5411\u5de6\u6216\u5411\u53f3\u62d3\u5c55\u90fd\u4f1a\u4f7f\u5b83\u5408\u5e76\u7684\u503c\u589e\u52a0\u3002 \u5f15\u7406\uff1a\u6781\u5927\u5b50\u6bb5\u4e2a\u6570\u4e3a \\(f(N)=O(N\\log N)\\) \u3002 \u8bc1\u660e\uff1a\u8003\u8651\u539f\u5e8f\u5217\u7684\u7b1b\u5361\u5c14\u6811\uff0c\u8bbe\u5e8f\u5217\u7684\u5176\u4e2d\u4e00\u4e2a\u6700\u5927\u5143\u7d20\u5728\u4f4d\u7f6e \\(p\\) \u3002\u6709 f(N)\\le f(p-1)+f(N-p)+C \u5176\u4e2d \\(C\\) \u4e3a\u539f\u5e8f\u5217\u7684\u5305\u542b\u4f4d\u7f6e \\(p\\) \u7684\u6700\u5927\u5b50\u6bb5\u6570\u91cf\u3002\u4e0b\u8bc1 C\\le O(p\\log(\\frac{N}{p})) \u53ea\u9700\u53d1\u73b0\u503c\u4e3a \\(a_p+k\\) \u7684\u5305\u542b\u4f4d\u7f6e \\(p\\) \u7684\u5b50\u6bb5\u4e0d\u8d85\u8fc7 \\(\\min(p,2^k)\\) \uff0c\u6c42\u548c\u5373\u5f97\u3002 \u7528 set \u8bb0\u5f55\u6240\u6709\u503c\u4e3a \\(v\\) \u7684\u6781\u957f\u5b50\u6bb5\u540e\uff0c\u7528\u5e76\u67e5\u96c6\u7ef4\u62a4\u5408\u5e76\u533a\u95f4\u5373\u53ef\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N\\log^2 N)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define vi vector<int> #define fi first #define se second #define pb push_back #define ALL(x) x.begin(),x.end() #define sz(x) int(x.size()) #define ll long long using namespace std ; const int N = 3e5 + 5 , M = 1e6 + 50 ; struct DSU { vector < int > p , sz ; void init ( int n ){ p . resize ( n ); sz . assign ( n , 1 ); iota ( p . begin (), p . end (), 0 ); } int find ( int x ){ return p [ x ] == x ? x : p [ x ] = find ( p [ x ]);} void merge ( int u , int v ){ u = find ( u ), v = find ( v ); if ( u == v ) return ; if ( sz [ u ] > sz [ v ]) swap ( u , v ); p [ u ] = v , sz [ v ] += sz [ u ], sz [ u ] = 0 ; } } d ; int n ; int main (){ cin . tie ( 0 ) -> sync_with_stdio ( 0 ); cin >> n ; vi a ( n ); for ( auto & x : a ) cin >> x ; vector < vi > vec ( M ); rep ( i , 0 , n -1 ) vec [ a [ i ]]. pb ( i ); vector < ll > cnt ( M ); vi R ( n , -1 ), L ( n + 1 , -1 ); auto getR = [ & ]( int x ){ if ( x == n ) return n ; return R [ d . find ( x )]; }; set < int > alive ; ll ans = 0 , now = 0 ; //the amount of values <= i d . init ( n ); rep ( i , 1 , M -1 ){ vector < int > dead , remove ; for ( int x : alive ){ int r = getR ( x ); int nxtR = max ( r , r == n ? -1 : getR ( r )); if ( nxtR == r ) dead . pb ( x ); else { if ( L [ nxtR ] != -1 ) dead . pb ( x ); else { L [ nxtR ] = x ; remove . pb ( nxtR ); } now += 1l l * ( nxtR - r ) * d . sz [ d . find ( x )]; R [ d . find ( x )] = nxtR ; } } for ( int x : dead ){ alive . erase ( x ); if ( L [ getR ( x )] == -1 ) L [ getR ( x )] = x ; else d . merge ( L [ getR ( x )], x ); } for ( int x : remove ) L [ x ] = -1 ; for ( int x : vec [ i ]){ ++ now ; R [ x ] = x + 1 ; alive . insert ( x ); if ( L [ x ] != -1 ) alive . insert ( L [ x ]); L [ x ] = -1 ; } cnt [ i ] = now ; } per ( i , M -1 , 0 ) cnt [ i ] -= cnt [ i -1 ]; rep ( i , 1 , M -1 ) ans += cnt [ i ] * i ; cout << ans << '\\n' ; return 0 ; }","title":"T1"},{"location":"%E7%AC%94%E8%AE%B0/USACO%2022OPEN/#t2","text":"\u9898\u610f\uff1a\u6709\u4e00\u4e2a \\(N\\) \u4e2a\u70b9 \\(M\\) \u6761\u8fb9\u7684\u6709\u5411\u56fe\uff0c\u4e24\u4e2a\u4eba\u5728\u4e0a\u9762\u505a\u6e38\u620f\u3002\u6e38\u620f\u5f00\u59cb\u65f6\u6709\u4e24\u679a\u68cb\u5b50\u5206\u522b\u653e\u5728\u4e0d\u540c\u7684\u8282\u70b9\u4e0a\uff0c\u6bcf\u4e00\u8f6e\u6e38\u620f\u4e2d\u7531\u5c0fB\u51b3\u5b9a\u79fb\u52a8\u54ea\u4e00\u679a\u68cb\u5b50\uff0c\u5c0fH\u51b3\u5b9a\u6cbf\u7740\u54ea\u4e00\u6761\u8fb9\u79fb\u52a8\u3002\u5982\u679c\u5c0fH\u5728\u67d0\u4e2a\u65f6\u523b\u65e0\u6cd5\u79fb\u52a8\u4e86\uff0c\u5219\u5c0fB\u83b7\u80dc\uff1b\u53cd\u4e4b\u5c0fH\u83b7\u80dc\u3002 \u73b0\u5728\u6709 \\(Q\\) \u4e2a\u8be2\u95ee\uff0c\u6bcf\u4e2a\u8be2\u95ee\u5206\u522b\u7ed9\u51fa\u521d\u59cb\u4e24\u4e2a\u68cb\u5b50\u7684\u4f4d\u7f6e\uff0c\u8981\u6c42\u56de\u7b54\u54ea\u4e2a\u73a9\u5bb6\u4f1a\u83b7\u80dc\u3002 \u6570\u636e\u8303\u56f4\uff1a \\(2\\le N\\le 10^5,2\\le M\\le 2\\times 10^5,1\\le Q\\le 10^5\\) \u8bc4\u4ef7\uff1a\u53cc\u4eba\u535a\u5f08\u4e2d\u8003\u8651\u53cc\u65b9\u7684\u6700\u4f18\u7b56\u7565\u6765\u7b80\u5316\u5c40\u9762\uff0c\u611f\u89c9\u6bd4\u8f83\u7ecf\u5178\u3002\u4e0d\u60f3\u504f\u5e94\u8be5\u86ee\u597d\u505a\u7684\uff1f \u51fa\u5ea6\u4e3a0\u663e\u7136\u6b7b\uff0c\u4e8e\u662f\u5728\u53cd\u56fe\u4e0a\u5148\u62d3\u6251\u6392\u5e8f\u628a\u6240\u6709\u5fc5\u6b7b\u70b9\u627e\u51fa\u6765\uff0c\u5269\u4e0b\u7684\u70b9\u51fa\u5ea6\u663e\u7136\u90fd\u4e0d\u5c0f\u4e8e1\u3002\u518d\u5408\u5e76\u6240\u6709\u51fa\u5ea6\u7b49\u4e8e1\u7684\u70b9\u548c\u51fa\u8fb9\u6240\u6307\u5411\u7684\u70b9\u3002\u6700\u540e\u5269\u4e0b\u7684\u70b9\u51fa\u5ea6\u90fd\u4e0d\u5c0f\u4e8e2\uff0c\u6b64\u65f6\u82e5\u4e24\u4e2a\u68cb\u5b50\u5728\u4e0d\u540c\u4f4d\u7f6e\uff0cB \u65e0\u6cd5\u628a H \u9a97\u8fdb\u6b7b\u8def\u6216\u8005\u7528\u4e00\u4e2a\u68cb\u5b50\u5835\u4f4f\u53e6\u4e00\u4e2a\uff0cH \u8d62\u3002\u4e24\u4e2a\u8fc7\u7a0b\u53ef\u4ee5\u7c7b\u4f3c\u62d3\u6251\u6392\u5e8f\u5904\u7406\uff0c\u5408\u5e76\u4e24\u70b9\u7684\u8fb9\u96c6\u7528set\u8fdb\u884c\u542f\u53d1\u5f0f\u5408\u5e76\uff0c\u7528\u5e76\u67e5\u96c6\u7ef4\u62a4\u7b49\u4ef7\u5173\u7cfb\u5373\u53ef\u3002 \u65f6\u95f4\u590d\u6742\u5ea6 \\(O(N\\log N)\\) \u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define vi vector<int> #define fi first #define se second #define pb push_back #define ALL(x) x.begin(),x.end() #define sz(x) int(x.size()) #define ll long long using namespace std ; const int N = 1e5 + 5 ; int n , m , q , fa [ N ], out [ N ]; int find ( int x ){ return fa [ x ] == x ? x : fa [ x ] = find ( fa [ x ]);} set < int > G [ N ], R [ N ]; bool chk ( int x , int y ){ x = find ( x ), y = find ( y ); if ( ! fa [ x ] || ! fa [ y ]) return 1 ; //dead end if ( x == y ) return 1 ; return 0 ; } int main (){ cin . tie ( 0 ) -> sync_with_stdio ( 0 ); cin >> n >> m ; int u , v ; rep ( i , 1 , m ){ cin >> u >> v ; out [ u ] ++ ; R [ v ]. insert ( u ); //reverse graph G [ u ]. insert ( v ); } queue < int > Q ; rep ( i , 1 , n ){ fa [ i ] = i ; if ( sz ( G [ i ]) <= 1 ) Q . push ( i ); } while ( ! Q . empty ()){ //topo int u = Q . front (); Q . pop (); int v = 0 ; for ( int x : G [ u ]) if ( find ( x ) != 0 ){ v = find ( x ); break ; } if ( v == 0 ){ //dead end fa [ u ] = 0 ; for ( int x : R [ u ]){ -- out [ x ]; if ( out [ x ] == 1 ) Q . push ( x ); } } else { //merge points of outdeg = 1 if ( u == v ) continue ; R [ v ]. erase ( u ); if ( sz ( R [ u ]) > sz ( R [ v ])) swap ( R [ u ], R [ v ]); fa [ u ] = v ; for ( int x : R [ u ]){ if ( R [ v ]. find ( x ) != R [ v ]. end ()){ -- out [ x ]; if ( out [ x ] == 1 ) Q . push ( x ); } else R [ v ]. insert ( x ); } } R [ u ]. clear (); } cin >> q ; while ( q -- ){ cin >> u >> v ; if ( chk ( u , v )) putchar ( 'B' ); else putchar ( 'H' ); } return 0 ; }","title":"T2"},{"location":"%E7%AC%94%E8%AE%B0/USACO%2022OPEN/#t3","text":"\u9898\u610f\uff1a\u7ed9\u5b9a\u957f\u5ea6\u4e3a \\(N\\) \u7684\u4e00\u4e2a\u6392\u5217 \\(p\\) \u548c\u4e00\u4e2a\u957f\u5ea6\u4e3a \\(N-1\\) \u7684\u5b57\u7b26\u4e32 \\(S\\) \uff0c \\(S\\) \u53ea\u5305\u542b\u5b57\u6bcd U \u548c D \u3002\u8981\u6c42\u627e\u51fa \\(p\\) \u6700\u957f\u7684\u5b50\u5e8f\u5217 \\(a_0,a_1,\\dots,a_K\\) \uff0c\u6ee1\u8db3 \\(S_i = U\\) \u65f6 \\(a_{i-1} < a_i\\) \uff0c\u53cd\u4e4b \\(a_{i-1} > a_i\\) \u3002 \u6570\u636e\u8303\u56f4\uff1a \\(2\\le N\\le 3\\times 10^5\\) \u8bc4\u4ef7\uff1a\u8fd9\u662f\u94c2\u91d1\u9898\uff1f \u8bbe \\(f_{i,j}\\) \u4e3a\u8003\u8651\u5230\u7b2c \\(i\\) \u4f4d\uff0c\u4e0e \\(S\\) \u7684\u524d \\(j\\) \u4f4d\u5339\u914d\u540e\u6700\u540e\u4e00\u4f4d\u6700\u4f18\u662f\u591a\u5c11\uff0c\u53ef\u4ee5\u505a\u5230 \\(O(N^2)\\) \u3002 \u8003\u8651\u4f18\u5316\uff0c\u95ee\u9898\u5728\u539f\u6765\u7684\u72b6\u6001\u8bbe\u8ba1\u9700\u8981\u5bf9\u4e8e\u6bcf\u4e2a\u72b6\u6001\u5206\u522b\u66f4\u65b0\u3002\u4e0d\u59a8\u8bbe \\(f_i,g_i\\) \u4e3a\u4ee5\u6743\u503c \\(i\\) \u7ed3\u5c3e\uff0c\u4e0b\u4e00\u4f4d\u94a6\u5b9a\u4e3a U/D \u65f6\u80fd\u5339\u914d\u7684\u6700\u957f\u524d\u7f00\u3002\u8fd9\u6837\u4e00\u6765\u6bcf\u6b21\u8f6c\u79fb\u53ef\u4ee5\u4f7f\u7528\u7ebf\u6bb5\u6811\u67e5\u8be2\u6700\u4f18\u7684\u65b9\u6848\u4e86\u3002\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a \\(O(N\\log N)\\) \u3002 \u4ee3\u7801\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define vi vector<int> #define fi first #define se second #define pb push_back #define ll long long using namespace std ; const int N = 3e5 + 5 ; #define mid ((L + R) >> 1) #define ls (p << 1) #define rs (ls | 1) struct SegTree { int mx [ N << 2 ]; void pushup ( int p ){ mx [ p ] = max ( mx [ ls ], mx [ rs ]);} void modify ( int p , int L , int R , int x , int v ){ if ( L == R ){ mx [ p ] = max ( mx [ p ], v ); return ; } x <= mid ? modify ( ls , L , mid , x , v ) : modify ( rs , mid + 1 , R , x , v ); pushup ( p ); } int Q ( int p , int L , int R , int l , int r ){ if ( r < L || R < l ) return 0 ; if ( l <= L && R <= r ) return mx [ p ]; return max ( Q ( ls , L , mid , l , r ), Q ( rs , mid + 1 , R , l , r )); } } f , g ; int n , a [ N ]; string s ; int main (){ cin . tie ( 0 ) -> sync_with_stdio ( 0 ); cin >> n ; rep ( i , 1 , n ) cin >> a [ i ]; cin >> s ; rep ( i , 1 , n ){ int U = f . Q ( 1 , 1 , n , 1 , a [ i ]), D = g . Q ( 1 , 1 , n , a [ i ], n ); U ++ , D ++ ; if ( s [ U - 1 ] == 'U' ) f . modify ( 1 , 1 , n , a [ i ], U ); else g . modify ( 1 , 1 , n , a [ i ], U ); if ( s [ D - 1 ] == 'U' ) f . modify ( 1 , 1 , n , a [ i ], D ); else g . modify ( 1 , 1 , n , a [ i ], D ); } int ans = max ( f . Q ( 1 , 1 , n , 1 , n ), g . Q ( 1 , 1 , n , 1 , n )); cout << ans - 1 << '\\n' ; return 0 ; }","title":"T3"},{"location":"%E7%AC%94%E8%AE%B0/%E3%80%8CJOI%202020%20Final%E3%80%8D%E7%81%AB%E4%BA%8B/","text":"\u9898\u76ee\u5927\u610f\uff1a \u7ed9\u5b9a\u4e00\u4e2a\u957f\u5ea6\u4e3a \\(N\\) \u7684\u5e8f\u5217 \\(S\\) \uff0c\u6709 \\(Q\\) \u4e2a\u8be2\u95ee\u3002\u521d\u59cb\u4e3a\u65f6\u523b \\(0\\) \uff0c\u4e14\u5728 \\(T\\) \u65f6\u523b\u65f6\u5e8f\u5217\u53d8\u6362\u4e3a \\(S'_i=\\max_{i-T\\le j\\le i}\\{S_j\\}\\) \u3002\u8981\u6c42\u5bf9\u8be2\u95ee\u7ed9\u51fa\u7684 \\((T,L,R)\\) \uff0c\u56de\u7b54 \\sum_{L\\le i\\le R}S'_i \u6570\u636e\u8303\u56f4\uff1a \\(1\\le N,Q\\le 2\\times10^5,1\\le S_i\\le 10^9,1\\le T,L,R\\le N\\) \u3002 \u9898\u76ee\u96be\u5ea6\uff1aNOI/NOI+ \u6807\u7b7e\uff1a\u6570\u636e\u7ed3\u6784 \u89e3\u6790\uff1a \u5b50\u4efb\u52a1 \\(1\\) \uff0c \\(Q,N\\le 200\\) \u3002\u76f4\u63a5\u6a21\u62df\u5373\u53ef\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 \\(O(QN^2)\\) \u3002 \u5b50\u4efb\u52a1 \\(2\\) \uff0c\u6240\u6709\u8be2\u95ee\u65f6\u95f4 \\(T\\) \u76f8\u7b49\u3002\u53ef\u4ee5\u7528\u5355\u8c03\u961f\u5217\u4e00\u6b21\u6027\u6c42\u51fa\u6b64\u65f6\u7684 \\(S\\) \u5e8f\u5217\uff0c\u524d\u7f00\u548c\u5904\u7406\u540e\u56de\u7b54\u8be2\u95ee\u5373\u53ef\uff0c\u65f6\u95f4\u590d\u6742\u5ea6 \\(O(N)\\) \u3002 \u5b50\u4efb\u52a1 \\(3\\) \uff0c\u6240\u6709\u8be2\u95ee \\(L=R\\) \u3002\u7b49\u4ef7\u4e8e\u5355\u70b9\u67e5\u8be2\uff0c\u8fd9\u53ef\u4ee5\u901a\u8fc7 RMQ \u505a\u5230 \\(O(N\\log N+Q)\\) \uff08ST\u8868\uff09\u6216 \\(O(N+Q\\log N)\\) \uff08\u7ebf\u6bb5\u6811\uff09\u3002 \u5b50\u4efb\u52a1 \\(4\\) \uff0c \\(S_i\\le 2\\) \u3002 \u9996\u5148\u53d1\u73b0\u6bcf\u4e2a \\(S_i\\) \u4ece\u67d0\u4e2a\u65f6\u95f4\u5f00\u59cb\u5c31\u4e00\u76f4\u4e3a \\(2\\) \uff0c\u6240\u4ee5\u6bcf\u4e2a\u70b9\u6700\u591a\u88ab\u5f71\u54cd\u4e00\u6b21\u3002\u5bf9\u8be2\u95ee\u6309\u65f6\u95f4\u987a\u5e8f\u6392\u5e8f\uff0c\u6211\u4eec\u6700\u591a\u7684\u5355\u70b9\u4fee\u6539\u6b21\u6570\u4e0d\u8d85\u8fc7 \\(N\\) \u3002\u5355\u70b9\u66f4\u65b0+\u533a\u95f4\u6c42\u548c\uff0c\u4f7f\u7528\u7ebf\u6bb5\u6811\u6216\u6811\u72b6\u6570\u7ec4\u53ef\u4ee5\u505a\u5230 \\(O((N+Q)\\log N)\\) \u3002 \u6700\u540e\u8003\u8651\u7ed3\u5408\u4e0a\u8ff0\u601d\u60f3\uff0c\u63a8\u5e7f\u81f3\u6ee1\u5206\u505a\u6cd5\u3002 \u4ecd\u7136\u53ef\u4ee5\u6309\u65f6\u95f4\u987a\u5e8f\u5904\u7406\u6240\u6709\u8be2\u95ee\uff0c\u6211\u4eec\u5217\u51fa\u4e00\u4e2a\u8868\u683c\uff0c\u7b2c \\(i\\) \u884c\u7b2c \\(j\\) \u5217\u7684\u6570\u8868\u793a\u65f6\u523b \\(i\\) \u65f6 \\(S_j\\) \u7684\u53d6\u503c\uff0c\u53ef\u4ee5\u53d1\u73b0\u6bcf\u4e2a\u6570\u5728\u8868\u683c\u91cc\u586b\u5145\u7684\u90e8\u5206\u5448\u5e73\u884c\u56db\u8fb9\u5f62\u6216\u76f4\u89d2\u68af\u5f62\u72b6\u3002\u5e76\u4e14\u82e5\u627e\u51fa \\(S_i\\) \u5f80\u5de6\u548c\u53f3\u7b2c\u4e00\u4e2a\u5927\u4e8e\u5b83\u7684\u6570\u6240\u5728\u4f4d\u7f6e \\(l_i,r_i\\) \uff0c\u5c31\u53ef\u4ee5\u6c42\u51fa\u5e73\u884c\u56db\u8fb9\u5f62\u7684\u56db\u9876\u70b9\u5750\u6807\u3002 \uff08\u4e4b\u540e\u5c31\u4e0d\u4f1a\u4e86\uff0c\u6682\u5495 QAQ","title":"\u300cJOI 2020 Final\u300d\u706b\u4e8b"},{"location":"%E7%AC%94%E8%AE%B0/%E3%80%8CJOI%20Open%202016%E3%80%8D%E6%91%A9%E5%A4%A9%E5%A4%A7%E6%A5%BC/","text":"\u9898\u76ee\u94fe\u63a5\uff1a https://loj.ac/p/2743 \u9898\u76ee\u96be\u5ea6\uff1aUSACO P/\u7701\u9009 \u597d\u50cf\u662f\u6691\u5047\u4e4b\u524d\u5728 KarL05 \u63a8\u8350\u7ed9\u6211\u7684dp\u535a\u5ba2\u91cc\u9762\u770b\u5230\u7684\u9898\u76ee\uff0c\u4f46\u662f\u56e0\u4e3a\u592a\u61d2\u4e00\u76f4\u6ca1\u6709\u505a\uff0c\u73b0\u5728\u51ed\u4e0d\u5b8c\u6574\u7684\u8bb0\u5fc6\u628a\u6b63\u89e3\u91cd\u65b0\u5199\u51fa\u6765\u3002 \u601d\u8def\uff1a \u4f30\u4e00\u4e0b\u590d\u6742\u5ea6\u5fc5\u7136\u548c \\(N,L\\) \u6709\u5173\uff0c\u5e76\u4e14\u9898\u76ee\u8981\u6c42\u5e26\u9650\u5236\u7684\u6392\u5217\u6570\uff0c\u4e0d\u96be\u60f3\u5230\u89e3\u6cd5\u5e94\u8be5\u662f\u67d0\u79cddp\u3002\u7531\u4e8e\u8981\u6c42 \\(A\\) \u4e2d\u4e00\u4e9b\u6570\u5dee\u503c\u7684\u548c\uff08\u4e0b\u6587\u8bb0\u4e3a\u8d39\u7528\uff09\uff0c\u4e0d\u59a8\u5148\u5c06 \\(A\\) \u6570\u7ec4\u6392\u5e8f\u3002\u63a5\u4e0b\u6765\uff0c\u8003\u8651\u5982\u4f55\u53bb\u6389\u7edd\u5bf9\u503c\uff0c\u6211\u4eec\u53ef\u4ee5\u4ece\u5c0f\u5230\u5927\u5c06\u6570\u63d2\u5165\u6392\u5217\uff0c\u7c7b\u4f3c\u7684trick\u53eb Component dp \u6216\u8005 \u63d2\u5165dp \u3002 \u5047\u8bbe\u73b0\u5728\u63d2\u5165\u5230 \\(A_i\\) \uff0c\u5982\u4f55\u8ba1\u7b97\u63d2\u5165\u540e\u5bf9\u8d39\u7528\u7684\u53d8\u5316\u5462\uff1f\u53ef\u4ee5\u5dee\u5206\u8ba1\u7b97\uff0c\u4e8e\u662f\u8bb0 \\(dp_{i,j,k,l}\\) \u4e3a\u586b\u5230\u7b2c \\(i\\) \u4e2a\u6570\uff0c\u6709 \\(j\\) \u4e2a\u8fde\u901a\u5206\u91cf\uff0c\u5f53\u524d\u8d39\u7528\u4e3a \\(k\\) \uff0c\u4ee5\u53ca\u6392\u5217\u7684\u5934\u5c3e\u88ab\u586b\u5165\u4e86\u51e0\u4e2a\u3002\u5177\u4f53\u5730\uff1a \u63d2\u5728\u4e24\u4e2a\u8fde\u901a\u5757\u4e2d\u95f4\u5e76\u5c06\u4e24\u5757\u5408\u5e76\uff0c\u6709 \\(j-1\\) \u79cd\u65b9\u6848\u3002 \u65b0\u589e\u4e00\u4e2a\u8fde\u901a\u5757\uff0c\u5982\u679c\u5934\u548c\u5c3e\u6ca1\u6709\u653e\u5c31\u53ef\u4ee5\u653e\uff0c\u5171\u6709 \\(j+1-l\\) \u79cd\u65b9\u6848\u3002 \u653e\u5728\u4e00\u4e2a\u8fde\u901a\u5757\u7684\u5934\u6216\u5c3e\u90e8\uff0c\u5e76\u4e14\u4e0d\u6539\u53d8 \\(l\\) \uff0c\u6709 \\(2j-s\\) \u79cd\u65b9\u6848\u3002 \u653e\u5728\u6574\u4e2a\u6392\u5217\u7684\u5934\u6216\u5c3e\u90e8\uff0c\u5982\u679c\u5f53\u524d\u6392\u5217\u5df2\u7ecf\u586b\u5165\u4e86\u6570\uff0c\u5219\u53ef\u4ee5\u770b\u4f5c\u52a0\u5165\u4e86\u8fd9\u4e2a\u6392\u5217\u4e2d\u6700\u5de6\u7684\u8fde\u901a\u5757\u7684\u5de6\u7aef\uff0c\u6216\u6700\u53f3\u8fde\u901a\u5757\u7684\u53f3\u7aef\u3002\u6709 \\(2-s\\) \u79cd\u65b9\u6848\u3002 \u5bf9\u4e0a\u8ff0\u60c5\u51b5\u5206\u522b\u8f6c\u79fb\u5373\u53ef\uff0c\u6700\u540e\u6ce8\u610f\u5230 \\(i\\) \u8fd9\u4e00\u7ef4\u53ef\u4ee5\u6eda\u52a8\u6570\u7ec4\u4f18\u5316\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N^2L)\\) \u3002 \u4ee3\u7801\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define vi vector<int> #define fi first #define se second #define pb push_back #define ALL(x) x.begin(),x.end() #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int MN = 105 , ML = 1005 , P = 1e9 + 7 ; void upd ( int & a , int b ){ a += b ; if ( a > P ) a -= P ;} int N , L , A [ MN ], f [ 2 ][ 3 ][ MN ][ ML ], ans ; #define now (i&1) #define pre (now^1) int main (){ N = read (), L = read (); rep ( i , 1 , N ) A [ i ] = read (); if ( N == 1 ){ puts ( \"1\" ); return 0 ;} sort ( A + 1 , A + N + 1 ); A [ 0 ] = 0 ; f [ 0 ][ 0 ][ 0 ][ 0 ] = 1 ; rep ( i , 1 , N ){ rep ( s , 0 , 2 ) rep ( j , 0 , i -1 ) rep ( k , 0 , L ) f [ now ][ s ][ j ][ k ] = 0 ; rep ( j , 0 , i -1 ) rep ( s , 0 , min ( 2 , 2 * j )){ int w = ( 2 * j - s ) * ( A [ i ] - A [ i -1 ]); rep ( k , 0 , L - w ){ int val = f [ pre ][ s ][ j ][ k ]; if ( ! val ) continue ; upd ( f [ now ][ s ][ j + 1 ][ k + w ], 1l l * ( j + 1 - s ) * val % P ); if ( j > 1 ) upd ( f [ now ][ s ][ j -1 ][ k + w ], 1l l * ( j -1 ) * val % P ); if ( j && s < 2 ) upd ( f [ now ][ s + 1 ][ j ][ k + w ], 1l l * ( 2 - s ) * val % P ); if ( s < 2 ) upd ( f [ now ][ s + 1 ][ j + 1 ][ k + w ], 1l l * ( 2 - s ) * val % P ); if ( j ) upd ( f [ now ][ s ][ j ][ k + w ], 1l l * ( 2 * j - s ) * val % P ); } } } rep ( i , 0 , L ) upd ( ans , f [ N & 1 ][ 2 ][ 1 ][ i ]); printf ( \"%d \\n \" , ans ); return 0 ; }","title":"\u300cJOI Open 2016\u300d\u6469\u5929\u5927\u697c"},{"location":"%E7%AC%94%E8%AE%B0/%E3%80%8CeJOI2021%E3%80%8D%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/","text":"\u52a0K \u00b6 \u9996\u5148\u770b\u67e5\u8be2\u64cd\u4f5c\uff0c\u8bbe B_n=\\sum_{i=1}^n A_i,C_i=\\sum_{i=1}^ni\\times A_i \u90a3\u4e48\u5bf9\u4e8e \\(r-l+1 < m\\) \uff0c\u663e\u7136\u6709 \\(f(l,r,m)=0\\) \u3002\u5426\u5219\u62c6\u8d21\u732e\uff0c\u53ef\u4ee5\u770b\u4f5c f(l,r,m)=\\sum_{i=l}^{r-m+1}\\sum_{j=i}^{i+m-1}A_i\\\\ =m\\sum_{i=l}^r A_i-\\sum_{i=l}^{l+m-1}(l+m-1-i)A_i+\\sum_{i=r-m+1}^{r}(i-(r-m+1))A_r\\\\ =m\\times sumB(l,r)-(l+m-1)\\times sumB(l,l+m-1)+(r-m+1)\\times sumB(r-m+1,r)+sumC(l,l+m-1)-sumC(r-m+1,r)\\\\ \u6811\u72b6\u6570\u7ec4\u7ef4\u62a4 \\(B,C\\) \u5373\u53ef\u3002 K \u5212\u5206 \u00b6 \u7531\u5b9a\u4e49\uff0c\u4e00\u4e2a\u957f\u5ea6\u4e3a \\(K\\) \u7684\u533a\u95f4\u53ef\u4ee5\u88ab\u5212\u5206\uff0c\u5f53\u4e14\u4ec5\u5f53\u8fd9\u4e00\u6bb5\u7684\u548c \\(S\\) \u4e3a\u5076\u6570\u4e14\u53ef\u4ee5\u53d6\u51fa\u4e00\u4e9b\u6570\u6ee1\u8db3\u548c\u4e3a \\(S/2\\) \u3002\u6211\u4eec\u8bb0 \\(dp[i]\\) \u4e3a\u6700\u53f3\u7684\u4f4d\u7f6e\u4f7f\u5f97\u5b58\u5728\u4ece\u8be5\u4f4d\u7f6e\u5f00\u59cb\u7684\u4e00\u4e2a\u5b50\u5e8f\u5217\u548c\u4e3a \\(i\\) \u3002\u5f53\u6211\u4eec\u8003\u8651\u5230 \\(A_n\\) \u65f6\uff0c\u6709\u8f6c\u79fb\uff1a dp[v+A[i]]=\\max(dp[v+A[i]],dp[v]) \u6bcf\u6b21\u66f4\u65b0\u540e\uff0c\u6211\u4eec\u5bf9\u4e8e\u5f53\u524d\u53ef\u80fd\u7684\u6240\u6709 \\(K\\) \u5206\u522b\u5224\u5b9a\u5373\u53ef\u3002\u603b\u65f6\u95f4\u590d\u6742\u5ea6\u662f \\(O(\\frac{N\\sum{A_i}}{2})\\) \u7684\u3002","title":"\u300ceJOI2021\u300d\u505a\u9898\u8bb0\u5f55"},{"location":"%E7%AC%94%E8%AE%B0/%E3%80%8CeJOI2021%E3%80%8D%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#k","text":"\u9996\u5148\u770b\u67e5\u8be2\u64cd\u4f5c\uff0c\u8bbe B_n=\\sum_{i=1}^n A_i,C_i=\\sum_{i=1}^ni\\times A_i \u90a3\u4e48\u5bf9\u4e8e \\(r-l+1 < m\\) \uff0c\u663e\u7136\u6709 \\(f(l,r,m)=0\\) \u3002\u5426\u5219\u62c6\u8d21\u732e\uff0c\u53ef\u4ee5\u770b\u4f5c f(l,r,m)=\\sum_{i=l}^{r-m+1}\\sum_{j=i}^{i+m-1}A_i\\\\ =m\\sum_{i=l}^r A_i-\\sum_{i=l}^{l+m-1}(l+m-1-i)A_i+\\sum_{i=r-m+1}^{r}(i-(r-m+1))A_r\\\\ =m\\times sumB(l,r)-(l+m-1)\\times sumB(l,l+m-1)+(r-m+1)\\times sumB(r-m+1,r)+sumC(l,l+m-1)-sumC(r-m+1,r)\\\\ \u6811\u72b6\u6570\u7ec4\u7ef4\u62a4 \\(B,C\\) \u5373\u53ef\u3002","title":"\u52a0K"},{"location":"%E7%AC%94%E8%AE%B0/%E3%80%8CeJOI2021%E3%80%8D%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95/#k_1","text":"\u7531\u5b9a\u4e49\uff0c\u4e00\u4e2a\u957f\u5ea6\u4e3a \\(K\\) \u7684\u533a\u95f4\u53ef\u4ee5\u88ab\u5212\u5206\uff0c\u5f53\u4e14\u4ec5\u5f53\u8fd9\u4e00\u6bb5\u7684\u548c \\(S\\) \u4e3a\u5076\u6570\u4e14\u53ef\u4ee5\u53d6\u51fa\u4e00\u4e9b\u6570\u6ee1\u8db3\u548c\u4e3a \\(S/2\\) \u3002\u6211\u4eec\u8bb0 \\(dp[i]\\) \u4e3a\u6700\u53f3\u7684\u4f4d\u7f6e\u4f7f\u5f97\u5b58\u5728\u4ece\u8be5\u4f4d\u7f6e\u5f00\u59cb\u7684\u4e00\u4e2a\u5b50\u5e8f\u5217\u548c\u4e3a \\(i\\) \u3002\u5f53\u6211\u4eec\u8003\u8651\u5230 \\(A_n\\) \u65f6\uff0c\u6709\u8f6c\u79fb\uff1a dp[v+A[i]]=\\max(dp[v+A[i]],dp[v]) \u6bcf\u6b21\u66f4\u65b0\u540e\uff0c\u6211\u4eec\u5bf9\u4e8e\u5f53\u524d\u53ef\u80fd\u7684\u6240\u6709 \\(K\\) \u5206\u522b\u5224\u5b9a\u5373\u53ef\u3002\u603b\u65f6\u95f4\u590d\u6742\u5ea6\u662f \\(O(\\frac{N\\sum{A_i}}{2})\\) \u7684\u3002","title":"K \u5212\u5206"},{"location":"%E7%AC%94%E8%AE%B0/%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86/","text":"# \u524d\u7f6e\u57fa\u7840\u77e5\u8bc6 \u5fc5\u8bfb\u6750\u6599\u4e3a\u5b66\u751f\u5b8c\u6210\u6bd4\u8d5b\u9898\u76ee\u7684\u5fc5\u8981\u6761\u4ef6\uff0c\u5176\u4e3b\u8981\u5185\u5bb9\u6709\uff1a Python\u57fa\u7840\u3001Numpy\u4f7f\u7528\u57fa\u7840\u3001\u7ebf\u6027\u56de\u5f52\u3001\u903b\u8f91\u56de\u5f52LR\u3001\u5d4c\u5165\u5c42\u3001CTR\u9884\u4f30\u5165\u95e8\u4e86\u89e3\u3001\u5e7f\u544a\u70b9\u51fb\u7387\u9884\u4f30\u662f\u600e\u4e48\u56de\u4e8b \u5176\u4f59\u5185\u5bb9\u4e3a\u62d3\u5c55\u6750\u6599\uff0c\u4fbf\u4e8e\u5b66\u751f\u81ea\u5b66\u63d0\u9ad8\u3002 ## Python\u57fa\u7840 https://nbviewer.jupyter.org/github/MLEveryday/practicalAI-cn/blob/master/notebooks/01_Python.ipynb ## Numpy\u4f7f\u7528\u57fa\u7840 https://nbviewer.jupyter.org/github/MLEveryday/practicalAI-cn/blob/master/notebooks/02_NumPy.ipynb ## Pandas\u4f7f\u7528\u57fa\u7840 https://nbviewer.jupyter.org/github/MLEveryday/practicalAI-cn/blob/master/notebooks/03_Pandas.ipynb ## \u7ebf\u6027\u56de\u5f52 https://nbviewer.jupyter.org/github/MLEveryday/practicalAI-cn/blob/master/notebooks/04_Linear_Regression.ipynb ## \u903b\u8f91\u56de\u5f52LR https://nbviewer.jupyter.org/github/MLEveryday/practicalAI-cn/blob/master/notebooks/05_Logistic_Regression.ipynb ## \u968f\u673a\u68ee\u6797 https://nbviewer.jupyter.org/github/MLEveryday/practicalAI-cn/blob/master/notebooks/06_Random_Forests.ipynb ## \u591a\u5c42\u611f\u77e5\u673a https://nbviewer.jupyter.org/github/MLEveryday/practicalAI-cn/blob/master/notebooks/08_Multilayer_Perceptron.ipynb ## \u5377\u79ef\u795e\u7ecf\u7f51\u7edc https://nbviewer.jupyter.org/github/MLEveryday/practicalAI-cn/blob/master/notebooks/11_Convolutional_Neural_Networks.ipynb ## \u5d4c\u5165\u5c42 https://nbviewer.jupyter.org/github/MLEveryday/practicalAI-cn/blob/master/notebooks/12_Embeddings.ipynb ## \u7279\u5f81\u5de5\u7a0b\u5e38\u7528\u65b9\u6cd5 \u89c1\u672c\u6587\u4ef6\u5939\u5185\u7684\u201c\u7279\u5f81\u5de5\u7a0b\u4ecb\u7ecd\u201d ## CTR\u9884\u4f30\u5165\u95e8\u4e86\u89e3 https://www.meihua.info/a/72378 ## \u5e7f\u544a\u70b9\u51fb\u7387\u9884\u4f30\u662f\u600e\u4e48\u56de\u4e8b https://zhuanlan.zhihu.com/p/23499698 ## GBDT + LR\u5b9e\u4f8b https://github.com/zxxwin/GBDT_LR ## Pytorh\u6846\u67b6\u5b66\u4e60 \u89c1\u672c\u6587\u4ef6\u5939\u5185\u7684\u201cPyTorch\u5b98\u65b9\u6559\u7a0b\u4e2d\u6587\u7248.pdf\u201d ## TensorFlow\u6846\u67b6\u5b66\u4e60 \u89c1\u672c\u6587\u4ef6\u5939\u5185\u7684\"TensorFlow\u5b98\u65b9\u6559\u7a0b\u4e2d\u6587\u7248.pdf\"","title":"\u524d\u7f6e\u77e5\u8bc6"},{"location":"%E7%AC%94%E8%AE%B0/%E5%9C%86%E6%96%B9%E6%A0%91%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","text":"P5236 \u3010\u6a21\u677f\u3011\u9759\u6001\u4ed9\u4eba\u638c \u00b6 \u9898\u89e3\uff1a \u5efa\u5706\u65b9\u6811\uff0c\u5bf9\u4e8e\u6811\u4e0a\u7684 \\(u\\rightarrow v\\) \u8fb9\u6743\uff1a \\(u,v\\) \u5747\u4e3a\u5706\u70b9\u5219\u4e3a\u539f\u56fe\u8fb9\u6743 \\(u\\) \u4e3a\u65b9\u70b9\u5219\u4e3a \\(v\\) \u5230 \\(u\\) \u7236\u4eb2\u7684\u6700\u77ed\u8def \u5426\u5219\u6743\u503c\u4e3a \\(0\\) \u627e\u6811\u4e0a\u6700\u77ed\u8def\u65f6\u8003\u8651\u5bf9 \\(p=lca(u,v)\\) \u5206\u7c7b\u8ba8\u8bba\uff1a \\(p\\) \u4e3a\u5706\u70b9\uff0c\u5219\u76f4\u63a5\u505a\u6811\u4e0a\u8ddd\u79bb \\(p\\) \u4e3a\u65b9\u70b9\uff0c\u5219\u9700\u8981\u627e\u51fa \\(p\\) \u7684\u4e24\u4e2a\u513f\u5b50 \\(A,B\\) \uff0c\u5206\u522b\u4e3a \\(u,v\\) \u7956\u5148\u3002\u7531\u4e8e \\(A,B\\) \u5728\u4e00\u4e2a\u73af\u4e0a\uff0c\u53ef\u4ee5\u76f4\u63a5\u6c42 \\(dis(A,B)\\) \u3002\u7b54\u6848\u5c31\u662f \\(dis(A,B)+dis(A,u)+dis(B,v)\\) \u4ee3\u7801\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long inline int read (){ int x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } struct edge { int v , w ; edge ( int v = 0 , int w = 0 ) : v ( v ), w ( w ){} }; using namespace std ; const int N = 1e5 + 5 ; int n , m , q , ans ; int dfn [ N ], low [ N ], dfc , cnt ; int fa [ N ], top [ N ], son [ N ], size [ N ], dep [ N ], b [ N ], sum [ N ], dis [ N ]; vector < edge > G [ N ], T [ N << 1 ]; inline int min ( int a , int b ){ return a < b ? a : b ;} inline void solve ( int u , int v , int w ){ ++ cnt ; int pw , pre = w , i = v ; while ( i != fa [ u ]){ sum [ i ] = pre ; pre += b [ i ]; i = fa [ i ]; } sum [ cnt ] = sum [ u ]; //\u628a\u6574\u4e2a\u73af\u7684\u8fb9\u6743\u548c\u5b58\u5230\u65b9\u70b9\u4e0a sum [ u ] = 0 ; i = v ; while ( i != fa [ u ]){ pw = min ( sum [ i ], sum [ cnt ] - sum [ i ]); //\u627e\u6700\u77ed\u8def\u5efa\u6811\u8fb9 T [ cnt ]. push_back ({ i , pw }); T [ i ]. push_back ({ cnt , pw }); i = fa [ i ]; } } void Tarjan ( int u , int f ) { low [ u ] = dfn [ u ] = ++ dfc ; int v , w , l = G [ u ]. size (); for ( int i = 0 ; i < l ; i ++ ) { v = G [ u ][ i ]. v ; if ( v == f ) continue ; w = G [ u ][ i ]. w ; if ( ! dfn [ v ]) { fa [ v ] = u , b [ v ] = w ; //\u628au->v\u7684\u8fb9\u6743\u5b58\u5230v\u4e0a Tarjan ( v , u ); low [ u ] = min ( low [ u ], low [ v ]); } else low [ u ] = min ( low [ u ], dfn [ v ]); if ( low [ v ] <= dfn [ u ]) continue ; //\u5706\u70b9\u4e4b\u95f4\u7684\u8fde\u8fb9,\u4fdd\u7559\u539f\u56fe\u4e2d\u6570\u636e T [ u ]. push_back ({ v , w }); T [ v ]. push_back ({ u , w }); } for ( int i = 0 ; i < l ; i ++ ){ v = G [ u ][ i ]. v ; if ( fa [ v ] == u || dfn [ v ] <= dfn [ u ]) continue ; //\u627e\u5230\u975e\u6811\u8fb9,\u7136\u540e\u5efa\u65b9\u70b9\u5e76\u8fde\u8fb9 solve ( u , v , G [ u ][ i ]. w ); } } void dfs1 ( int u , int f ){ fa [ u ] = f ; dep [ u ] = dep [ f ] + 1 ; size [ u ] = 1 ; int v , t = -1 , l = T [ u ]. size (); for ( int i = 0 ; i < l ; ++ i ){ v = T [ u ][ i ]. v ; if ( v == f ) continue ; dis [ v ] = dis [ u ] + T [ u ][ i ]. w ; dfs1 ( v , u ); size [ u ] += size [ v ]; if ( size [ v ] > t ){ t = size [ v ]; son [ u ] = v ; } } } void dfs2 ( int u , int f ){ top [ u ] = f ; if ( son [ u ] == 0 ) return ; dfs2 ( son [ u ], f ); int v , l = T [ u ]. size (); for ( int i = 0 ; i < l ; ++ i ){ v = T [ u ][ i ]. v ; if ( v == fa [ u ] || v == son [ u ]) continue ; dfs2 ( v , v ); } } inline int lca ( int u , int v ){ while ( top [ u ] != top [ v ]){ if ( dep [ top [ u ]] < dep [ top [ v ]]) swap ( u , v ); u = fa [ top [ u ]]; } return dep [ u ] < dep [ v ] ? u : v ; } inline int find ( int u , int f ){ int res ; while ( top [ u ] != top [ f ]){ res = top [ u ]; u = fa [ top [ u ]]; } return u == f ? res : son [ f ]; } int main (){ n = read (), m = read (), q = read (); cnt = n ; rep ( i , 1 , m ){ int u = read (), v = read (), w = read (); G [ u ]. push_back ({ v , w }); G [ v ]. push_back ({ u , w }); } Tarjan ( 1 , 0 ); dfs1 ( 1 , 0 ); dfs2 ( 1 , 1 ); while ( q -- ){ int u = read (), v = read (); int p = lca ( u , v ); if ( p <= n ) ans = dis [ u ] + dis [ v ] - dis [ p ] * 2 ; //lca\u4e3a\u5706\u70b9 else { int A = find ( u , p ), B = find ( v , p ); //\u627e\u5230\u513f\u5b50A,B ans = dis [ u ] + dis [ v ] - dis [ A ] - dis [ B ]; if ( sum [ A ] < sum [ B ]) swap ( A , B ); ans += min ( sum [ A ] - sum [ B ], sum [ p ] + sum [ B ] - sum [ A ]); } printf ( \"%d \\n \" , ans ); } return 0 ; } P5058 [ZJOI2004]\u55c5\u63a2\u5668 \u00b6 \u9898\u89e3\uff1a \u4ece \\(a\\) \u5f00\u59cbTarjan\uff0c\u8fc7\u7a0b\u4e2d\u627e\u51fa\u4e0d\u4e3a \\(a\\) \u7684\u4e00\u4e2a\u5272\u70b9\uff0c\u5e76\u4e14\u5224\u65ad \\(b\\) \u662f\u5426\u88ab\u641c\u5230\u5373\u53ef\u3002 \u4ee3\u7801\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 ; vector < int > G [ N ]; int n , a , b , dfn [ N ], low [ N ], cut [ N ], tim ; void tarjan ( int u ){ dfn [ u ] = low [ u ] =++ tim ; for ( int i = 0 ; i < G [ u ]. size (); i ++ ){ int v = G [ u ][ i ]; if ( ! dfn [ v ]){ tarjan ( v ); low [ u ] = min ( low [ u ], low [ v ]); if ( low [ v ] >= dfn [ u ] && u != a && dfn [ b ] >= dfn [ v ]){ cut [ u ] = 1 ; } } else low [ u ] = min ( low [ u ], dfn [ v ]); } } int main (){ n = read (); int u = read (), v = read (); while ( ! ( u == 0 && v == 0 )){ G [ u ]. push_back ( v ); G [ v ]. push_back ( u ); u = read (), v = read (); } a = read (), b = read (); tarjan ( a ); rep ( i , 1 , n ){ if ( cut [ i ]){ printf ( \"%d \\n \" , i ); return 0 ; } } puts ( \"No solution\" ); return 0 ; }","title":"P5236 \u3010\u6a21\u677f\u3011\u9759\u6001\u4ed9\u4eba\u638c"},{"location":"%E7%AC%94%E8%AE%B0/%E5%9C%86%E6%96%B9%E6%A0%91%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#p5236","text":"\u9898\u89e3\uff1a \u5efa\u5706\u65b9\u6811\uff0c\u5bf9\u4e8e\u6811\u4e0a\u7684 \\(u\\rightarrow v\\) \u8fb9\u6743\uff1a \\(u,v\\) \u5747\u4e3a\u5706\u70b9\u5219\u4e3a\u539f\u56fe\u8fb9\u6743 \\(u\\) \u4e3a\u65b9\u70b9\u5219\u4e3a \\(v\\) \u5230 \\(u\\) \u7236\u4eb2\u7684\u6700\u77ed\u8def \u5426\u5219\u6743\u503c\u4e3a \\(0\\) \u627e\u6811\u4e0a\u6700\u77ed\u8def\u65f6\u8003\u8651\u5bf9 \\(p=lca(u,v)\\) \u5206\u7c7b\u8ba8\u8bba\uff1a \\(p\\) \u4e3a\u5706\u70b9\uff0c\u5219\u76f4\u63a5\u505a\u6811\u4e0a\u8ddd\u79bb \\(p\\) \u4e3a\u65b9\u70b9\uff0c\u5219\u9700\u8981\u627e\u51fa \\(p\\) \u7684\u4e24\u4e2a\u513f\u5b50 \\(A,B\\) \uff0c\u5206\u522b\u4e3a \\(u,v\\) \u7956\u5148\u3002\u7531\u4e8e \\(A,B\\) \u5728\u4e00\u4e2a\u73af\u4e0a\uff0c\u53ef\u4ee5\u76f4\u63a5\u6c42 \\(dis(A,B)\\) \u3002\u7b54\u6848\u5c31\u662f \\(dis(A,B)+dis(A,u)+dis(B,v)\\) \u4ee3\u7801\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long inline int read (){ int x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } struct edge { int v , w ; edge ( int v = 0 , int w = 0 ) : v ( v ), w ( w ){} }; using namespace std ; const int N = 1e5 + 5 ; int n , m , q , ans ; int dfn [ N ], low [ N ], dfc , cnt ; int fa [ N ], top [ N ], son [ N ], size [ N ], dep [ N ], b [ N ], sum [ N ], dis [ N ]; vector < edge > G [ N ], T [ N << 1 ]; inline int min ( int a , int b ){ return a < b ? a : b ;} inline void solve ( int u , int v , int w ){ ++ cnt ; int pw , pre = w , i = v ; while ( i != fa [ u ]){ sum [ i ] = pre ; pre += b [ i ]; i = fa [ i ]; } sum [ cnt ] = sum [ u ]; //\u628a\u6574\u4e2a\u73af\u7684\u8fb9\u6743\u548c\u5b58\u5230\u65b9\u70b9\u4e0a sum [ u ] = 0 ; i = v ; while ( i != fa [ u ]){ pw = min ( sum [ i ], sum [ cnt ] - sum [ i ]); //\u627e\u6700\u77ed\u8def\u5efa\u6811\u8fb9 T [ cnt ]. push_back ({ i , pw }); T [ i ]. push_back ({ cnt , pw }); i = fa [ i ]; } } void Tarjan ( int u , int f ) { low [ u ] = dfn [ u ] = ++ dfc ; int v , w , l = G [ u ]. size (); for ( int i = 0 ; i < l ; i ++ ) { v = G [ u ][ i ]. v ; if ( v == f ) continue ; w = G [ u ][ i ]. w ; if ( ! dfn [ v ]) { fa [ v ] = u , b [ v ] = w ; //\u628au->v\u7684\u8fb9\u6743\u5b58\u5230v\u4e0a Tarjan ( v , u ); low [ u ] = min ( low [ u ], low [ v ]); } else low [ u ] = min ( low [ u ], dfn [ v ]); if ( low [ v ] <= dfn [ u ]) continue ; //\u5706\u70b9\u4e4b\u95f4\u7684\u8fde\u8fb9,\u4fdd\u7559\u539f\u56fe\u4e2d\u6570\u636e T [ u ]. push_back ({ v , w }); T [ v ]. push_back ({ u , w }); } for ( int i = 0 ; i < l ; i ++ ){ v = G [ u ][ i ]. v ; if ( fa [ v ] == u || dfn [ v ] <= dfn [ u ]) continue ; //\u627e\u5230\u975e\u6811\u8fb9,\u7136\u540e\u5efa\u65b9\u70b9\u5e76\u8fde\u8fb9 solve ( u , v , G [ u ][ i ]. w ); } } void dfs1 ( int u , int f ){ fa [ u ] = f ; dep [ u ] = dep [ f ] + 1 ; size [ u ] = 1 ; int v , t = -1 , l = T [ u ]. size (); for ( int i = 0 ; i < l ; ++ i ){ v = T [ u ][ i ]. v ; if ( v == f ) continue ; dis [ v ] = dis [ u ] + T [ u ][ i ]. w ; dfs1 ( v , u ); size [ u ] += size [ v ]; if ( size [ v ] > t ){ t = size [ v ]; son [ u ] = v ; } } } void dfs2 ( int u , int f ){ top [ u ] = f ; if ( son [ u ] == 0 ) return ; dfs2 ( son [ u ], f ); int v , l = T [ u ]. size (); for ( int i = 0 ; i < l ; ++ i ){ v = T [ u ][ i ]. v ; if ( v == fa [ u ] || v == son [ u ]) continue ; dfs2 ( v , v ); } } inline int lca ( int u , int v ){ while ( top [ u ] != top [ v ]){ if ( dep [ top [ u ]] < dep [ top [ v ]]) swap ( u , v ); u = fa [ top [ u ]]; } return dep [ u ] < dep [ v ] ? u : v ; } inline int find ( int u , int f ){ int res ; while ( top [ u ] != top [ f ]){ res = top [ u ]; u = fa [ top [ u ]]; } return u == f ? res : son [ f ]; } int main (){ n = read (), m = read (), q = read (); cnt = n ; rep ( i , 1 , m ){ int u = read (), v = read (), w = read (); G [ u ]. push_back ({ v , w }); G [ v ]. push_back ({ u , w }); } Tarjan ( 1 , 0 ); dfs1 ( 1 , 0 ); dfs2 ( 1 , 1 ); while ( q -- ){ int u = read (), v = read (); int p = lca ( u , v ); if ( p <= n ) ans = dis [ u ] + dis [ v ] - dis [ p ] * 2 ; //lca\u4e3a\u5706\u70b9 else { int A = find ( u , p ), B = find ( v , p ); //\u627e\u5230\u513f\u5b50A,B ans = dis [ u ] + dis [ v ] - dis [ A ] - dis [ B ]; if ( sum [ A ] < sum [ B ]) swap ( A , B ); ans += min ( sum [ A ] - sum [ B ], sum [ p ] + sum [ B ] - sum [ A ]); } printf ( \"%d \\n \" , ans ); } return 0 ; }","title":"P5236 \u3010\u6a21\u677f\u3011\u9759\u6001\u4ed9\u4eba\u638c"},{"location":"%E7%AC%94%E8%AE%B0/%E5%9C%86%E6%96%B9%E6%A0%91%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/#p5058-zjoi2004","text":"\u9898\u89e3\uff1a \u4ece \\(a\\) \u5f00\u59cbTarjan\uff0c\u8fc7\u7a0b\u4e2d\u627e\u51fa\u4e0d\u4e3a \\(a\\) \u7684\u4e00\u4e2a\u5272\u70b9\uff0c\u5e76\u4e14\u5224\u65ad \\(b\\) \u662f\u5426\u88ab\u641c\u5230\u5373\u53ef\u3002 \u4ee3\u7801\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 ; vector < int > G [ N ]; int n , a , b , dfn [ N ], low [ N ], cut [ N ], tim ; void tarjan ( int u ){ dfn [ u ] = low [ u ] =++ tim ; for ( int i = 0 ; i < G [ u ]. size (); i ++ ){ int v = G [ u ][ i ]; if ( ! dfn [ v ]){ tarjan ( v ); low [ u ] = min ( low [ u ], low [ v ]); if ( low [ v ] >= dfn [ u ] && u != a && dfn [ b ] >= dfn [ v ]){ cut [ u ] = 1 ; } } else low [ u ] = min ( low [ u ], dfn [ v ]); } } int main (){ n = read (); int u = read (), v = read (); while ( ! ( u == 0 && v == 0 )){ G [ u ]. push_back ( v ); G [ v ]. push_back ( u ); u = read (), v = read (); } a = read (), b = read (); tarjan ( a ); rep ( i , 1 , n ){ if ( cut [ i ]){ printf ( \"%d \\n \" , i ); return 0 ; } } puts ( \"No solution\" ); return 0 ; }","title":"P5058 [ZJOI2004]\u55c5\u63a2\u5668"},{"location":"%E7%AC%94%E8%AE%B0/%E6%95%B0%E7%BB%84%EF%BC%8C%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%8C%E5%87%BD%E6%95%B0/","text":"\u6570\u7ec4 \u00b6 \u4efb\u4f55 \u6570\u636e\u7c7b\u578b\u52a0\u4e0a\u6570\u7ec4\u7b26\u53f7 [] \u5373\u53ef\u6210\u4e3a\u4e00\u4e2a\u6570\u7ec4 string s[1005]; char c[1005]; vector<int> v[1005]; int a[205],a[200+5],a[MAXN] \u53ef\u4ee5\u7528\u5faa\u73af\u679a\u4e3e\u6570\u7ec4\u4e2d\u7684\u5143\u7d20 \u4f8b\u9898\uff1aP1428 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 #include <iostream> using namespace std ; int main (){ int a [ 110 ], n ; cin >> n ; for ( int i = 0 ; i < n ; i ++ ){ cin >> a [ i ]; //\u8bfb\u5165\u6bcf\u6761\u9c7c\u7684\u53ef\u7231\u503c } for ( int i = 0 ; i < n ; i ++ ){ //\u679a\u4e3en\u6761\u9c7c int cnt = 0 ; for ( int j = i -1 ; j >= 0 ; j -- ){ //\u4ece\u7b2c i \u4e2a\u4f4d\u7f6e\u5012\u7740\u5f80\u524d\u627e if ( a [ j ] < a [ i ]){ cnt ++ ; //\u5982\u679c\u627e\u5230\u6bd4\u7b2c i \u6761\u9c7c\u6ca1\u6709\u6bd4\u4e0d\u4e0a\uff0c\u8ba1\u6570\u5668\u5c31\u589e\u52a0 1 } } cout << cnt << ' ' ; } return 0 ; } \u7ec3\u4e60\uff1aP1427 \u591a\u7ef4\u6570\u7ec4 a[3][MAXN] \u7528 a[i][j] \u6765\u8bbf\u95ee\u7b2c i \u884c\u3001\u7b2c j \u5217\u7684\u5143\u7d20\u3002 \u53ef\u4ee5\u66f4\u9ad8\u7ef4 \u4f8b\u9898\uff1aP5728 \u7ec3\u4e60\uff1aP5729 \u5b57\u7b26\u4e32 \u00b6 \u53ef\u4ee5\u770b\u4f5c\u5b57\u7b26\u6570\u7ec4 char s[1005] \u4f8b\u9898\uff1aP5733 \u8bfb\u5165\u65b9\u5f0f\uff1a scanf(\"%s\",s) cin>>s \u8bfb\u5165/\u8f93\u51fa\u4e00\u4e2a\u5b57\u7b26\uff1a getchar() , putchar() string \u7c7b\u578b\u5b57\u7b26\u4e32 string s s.length() s.size() s+=str s<str s.substr(pos,len) \u6bd4\u5982\uff1ainformation s.substr(2,6) s.insert(pos,str) s.find(str,pos) \u6bd4\u5982\uff1ainformation \u9605\u8bfb\uff1a\u6df1\u5165\u6d45\u51fa P87-88 \u4f8b\u9898\uff1aP5015 \u51fd\u6570 \u00b6 \u51fd\u6570\u53c8\u88ab\u79f0\u4e3a\u5b50\u7a0b\u5e8f\uff0c\u51fd\u6570\u5b9a\u4e49\u7684\u4e00\u822c\u5f62\u5f0f\u5982\u4e0b\uff1a 1 2 3 4 \u8fd4\u56de\u7c7b\u578b \u51fd\u6570\u540d ( \u53c2\u6570\u7c7b\u578b 1 \u53c2\u6570\u540d 1 , ..., \u53c2\u6570\u7c7b\u578b n \u53c2\u6570\u540d n ) { ... return \u7ed3\u679c ; } \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u6211\u4eec\u77e5\u9053\u7edd\u5bf9\u503c\u51fd\u6570\u662f\u8fd9\u6837\u7684\uff1a \\(x\\ge 0\\Longrightarrow |x|=x\\) \\(x<0\\Longrightarrow |x|=-x\\) \u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u5bf9 double \u7c7b\u578b\u7684 x \u5b9a\u4e49\u7edd\u5bf9\u503c\u51fd\u6570\uff1a 1 2 3 4 double Abs ( double x ){ if ( x >= 0 ) return x ; return - x ; } \u4e5f\u53ef\u4ee5\u7701\u7565 else \uff0c\u56e0\u4e3a\u4e00\u4e2a\u51fd\u6570\u5728\u524d\u9762\u8fd4\u56de\u503c\u540e\u5c31\u4e0d\u4f1a\u5f80\u4e0b\u9762\u8fd0\u884c\u3002 \u4f8b\u9898\uff1aP5735 \u9012\u5f52\u51fd\u6570 \u00b6 \u91cd\u70b9\uff1a\u51fd\u6570\u53ef\u4ee5\u81ea\u5df1\u8c03\u7528\u81ea\u5df1\uff01 \u4f8b\u9898\uff1aP5739\uff0c\u8981\u6c42\u4e0d\u4f7f\u7528\u5faa\u73af\u8bed\u53e5\u8ba1\u7b97\u9636\u4e58\u3002 \u8bbe \\(n!=1\\times2\\times3\\times\\cdots\\times n\\) \u4e3a \\(f(n)\\) \uff0c\u90a3\u4e48\u6211\u4eec\u77e5\u9053 \\(f(n)=f(n-1)\\times n\\) \u3002\u4e8e\u662f\u5b9a\u4e49\u51fd\u6570 \\(f\\) \uff0c\u53ef\u4ee5\u5199\u51fa\uff1a 1 2 3 4 5 6 7 8 9 10 11 #include <iostream> using namespace std ; int f ( int n ){ if ( n == 1 ) return 1 ; //n=1\u65f6\u8fd4\u56de1!=1 return f ( n -1 ) * n ; //\u5426\u5219\u8c03\u7528\u81ea\u5df1\u53bb\u7528\u66f4\u5c0f\u7684\u9636\u4e58\u7b54\u6848 (n-1)! \u4e58\u4e0a n \u8fd4\u56de } int main (){ int n ; cin >> n ; cout << f ( n ) << endl ; }","title":"\u6570\u7ec4\uff0c\u5b57\u7b26\u4e32\uff0c\u51fd\u6570"},{"location":"%E7%AC%94%E8%AE%B0/%E6%95%B0%E7%BB%84%EF%BC%8C%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%8C%E5%87%BD%E6%95%B0/#_1","text":"\u4efb\u4f55 \u6570\u636e\u7c7b\u578b\u52a0\u4e0a\u6570\u7ec4\u7b26\u53f7 [] \u5373\u53ef\u6210\u4e3a\u4e00\u4e2a\u6570\u7ec4 string s[1005]; char c[1005]; vector<int> v[1005]; int a[205],a[200+5],a[MAXN] \u53ef\u4ee5\u7528\u5faa\u73af\u679a\u4e3e\u6570\u7ec4\u4e2d\u7684\u5143\u7d20 \u4f8b\u9898\uff1aP1428 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 #include <iostream> using namespace std ; int main (){ int a [ 110 ], n ; cin >> n ; for ( int i = 0 ; i < n ; i ++ ){ cin >> a [ i ]; //\u8bfb\u5165\u6bcf\u6761\u9c7c\u7684\u53ef\u7231\u503c } for ( int i = 0 ; i < n ; i ++ ){ //\u679a\u4e3en\u6761\u9c7c int cnt = 0 ; for ( int j = i -1 ; j >= 0 ; j -- ){ //\u4ece\u7b2c i \u4e2a\u4f4d\u7f6e\u5012\u7740\u5f80\u524d\u627e if ( a [ j ] < a [ i ]){ cnt ++ ; //\u5982\u679c\u627e\u5230\u6bd4\u7b2c i \u6761\u9c7c\u6ca1\u6709\u6bd4\u4e0d\u4e0a\uff0c\u8ba1\u6570\u5668\u5c31\u589e\u52a0 1 } } cout << cnt << ' ' ; } return 0 ; } \u7ec3\u4e60\uff1aP1427 \u591a\u7ef4\u6570\u7ec4 a[3][MAXN] \u7528 a[i][j] \u6765\u8bbf\u95ee\u7b2c i \u884c\u3001\u7b2c j \u5217\u7684\u5143\u7d20\u3002 \u53ef\u4ee5\u66f4\u9ad8\u7ef4 \u4f8b\u9898\uff1aP5728 \u7ec3\u4e60\uff1aP5729","title":"\u6570\u7ec4"},{"location":"%E7%AC%94%E8%AE%B0/%E6%95%B0%E7%BB%84%EF%BC%8C%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%8C%E5%87%BD%E6%95%B0/#_2","text":"\u53ef\u4ee5\u770b\u4f5c\u5b57\u7b26\u6570\u7ec4 char s[1005] \u4f8b\u9898\uff1aP5733 \u8bfb\u5165\u65b9\u5f0f\uff1a scanf(\"%s\",s) cin>>s \u8bfb\u5165/\u8f93\u51fa\u4e00\u4e2a\u5b57\u7b26\uff1a getchar() , putchar() string \u7c7b\u578b\u5b57\u7b26\u4e32 string s s.length() s.size() s+=str s<str s.substr(pos,len) \u6bd4\u5982\uff1ainformation s.substr(2,6) s.insert(pos,str) s.find(str,pos) \u6bd4\u5982\uff1ainformation \u9605\u8bfb\uff1a\u6df1\u5165\u6d45\u51fa P87-88 \u4f8b\u9898\uff1aP5015","title":"\u5b57\u7b26\u4e32"},{"location":"%E7%AC%94%E8%AE%B0/%E6%95%B0%E7%BB%84%EF%BC%8C%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%8C%E5%87%BD%E6%95%B0/#_3","text":"\u51fd\u6570\u53c8\u88ab\u79f0\u4e3a\u5b50\u7a0b\u5e8f\uff0c\u51fd\u6570\u5b9a\u4e49\u7684\u4e00\u822c\u5f62\u5f0f\u5982\u4e0b\uff1a 1 2 3 4 \u8fd4\u56de\u7c7b\u578b \u51fd\u6570\u540d ( \u53c2\u6570\u7c7b\u578b 1 \u53c2\u6570\u540d 1 , ..., \u53c2\u6570\u7c7b\u578b n \u53c2\u6570\u540d n ) { ... return \u7ed3\u679c ; } \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u6211\u4eec\u77e5\u9053\u7edd\u5bf9\u503c\u51fd\u6570\u662f\u8fd9\u6837\u7684\uff1a \\(x\\ge 0\\Longrightarrow |x|=x\\) \\(x<0\\Longrightarrow |x|=-x\\) \u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u5bf9 double \u7c7b\u578b\u7684 x \u5b9a\u4e49\u7edd\u5bf9\u503c\u51fd\u6570\uff1a 1 2 3 4 double Abs ( double x ){ if ( x >= 0 ) return x ; return - x ; } \u4e5f\u53ef\u4ee5\u7701\u7565 else \uff0c\u56e0\u4e3a\u4e00\u4e2a\u51fd\u6570\u5728\u524d\u9762\u8fd4\u56de\u503c\u540e\u5c31\u4e0d\u4f1a\u5f80\u4e0b\u9762\u8fd0\u884c\u3002 \u4f8b\u9898\uff1aP5735","title":"\u51fd\u6570"},{"location":"%E7%AC%94%E8%AE%B0/%E6%95%B0%E7%BB%84%EF%BC%8C%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%8C%E5%87%BD%E6%95%B0/#_4","text":"\u91cd\u70b9\uff1a\u51fd\u6570\u53ef\u4ee5\u81ea\u5df1\u8c03\u7528\u81ea\u5df1\uff01 \u4f8b\u9898\uff1aP5739\uff0c\u8981\u6c42\u4e0d\u4f7f\u7528\u5faa\u73af\u8bed\u53e5\u8ba1\u7b97\u9636\u4e58\u3002 \u8bbe \\(n!=1\\times2\\times3\\times\\cdots\\times n\\) \u4e3a \\(f(n)\\) \uff0c\u90a3\u4e48\u6211\u4eec\u77e5\u9053 \\(f(n)=f(n-1)\\times n\\) \u3002\u4e8e\u662f\u5b9a\u4e49\u51fd\u6570 \\(f\\) \uff0c\u53ef\u4ee5\u5199\u51fa\uff1a 1 2 3 4 5 6 7 8 9 10 11 #include <iostream> using namespace std ; int f ( int n ){ if ( n == 1 ) return 1 ; //n=1\u65f6\u8fd4\u56de1!=1 return f ( n -1 ) * n ; //\u5426\u5219\u8c03\u7528\u81ea\u5df1\u53bb\u7528\u66f4\u5c0f\u7684\u9636\u4e58\u7b54\u6848 (n-1)! \u4e58\u4e0a n \u8fd4\u56de } int main (){ int n ; cin >> n ; cout << f ( n ) << endl ; }","title":"\u9012\u5f52\u51fd\u6570"},{"location":"%E7%AC%94%E8%AE%B0/%E9%A2%98%E8%A7%A3%20CF367E/","text":"\u4f20\u9001\u95e8 \u9996\u5148 \\(n>m\\) \u65f6\u663e\u7136\u65e0\u89e3\u3002\u7531\u539f\u9898\u7684\u6570\u636e\u8303\u56f4\u53ef\u5f97 \\(n\\le \\sqrt{10^5}\\) \u3002 \u8003\u8651\u5982\u4f55\u6784\u9020\u51fa\u6ee1\u8db3\u6761\u4ef6\u7684 \\(n\\) \u4e2a\u533a\u95f4\u3002\u4e0d\u96be\u53d1\u73b0\u5bf9\u4e8e\u4efb\u610f\u4e24\u4e2a\u4e0d\u540c\u533a\u95f4 \\([l_i,r_i],[l_j,r_j]\\) \uff0c\u90fd\u6709 \\(l_i<l_j,r_i<r_j\\) \u5373\u53ef\u3002\u90a3\u4e48\u6211\u4eec\u5982\u679c\u9009\u53d6\u4e86 \\(n\\) \u4e2a\u5de6\u7aef\u70b9\u548c \\(n\\) \u4e2a\u53f3\u7aef\u70b9\uff0c \u6709\u4e14\u4ec5\u6709 \u4e00\u79cd\u6ee1\u8db3\u9898\u610f\u7684\u6784\u9020\u65b9\u5f0f\uff0c\u4e5f\u5c31\u662f\u5c06\u5de6\u53f3\u7aef\u70b9\u5206\u522b\u6392\u5e8f\u540e\u6309\u5e8f\u53f7\u5339\u914d\u3002 \u4e0b\u9762\u8003\u8651\u5982\u4f55\u8ba1\u7b97\u603b\u65b9\u6848\u6570\u3002\u5b9a\u4e49 \\(dp[i][j][k]\\) \u4e3a\u8003\u8651\u5b8c\u524d \\(i\\) \u4e2a\u4f4d\u7f6e\uff0c\u76ee\u524d\u6709 \\(j\\) \u4e2a\u5de6\u7aef\u70b9\u88ab\u9009\u62e9\uff0c \\(k\\) \u4e2a\u53f3\u7aef\u70b9\u88ab\u9009\u62e9\u3002\u800c\u53f3\u7aef\u70b9\u603b\u662f\u8981\u4e0e\u5de6\u7aef\u70b9\u5339\u914d\uff0c\u6240\u4ee5\u9700\u8981\u4fdd\u8bc1 \\(j\\ge k\\) \u3002\u6ce8\u610f\u5230\u5173\u952e\u70b9\u65f6\u53ea\u80fd\u8003\u8651\u5411 \\(k+1\\) \u8f6c\u79fb\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(mn^2)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 , P = 1e9 + 7 ; int n , m , x , fac [ N ]; inline void Add ( int & x , const int & y ){ x += y ; if ( x > P ) x -= P ;} int main (){ n = read (), m = read (), x = read (); if ( n > m ) return puts ( \"0\" ), 0 ; int dp [ 2 ][ n + 5 ][ n + 5 ]; memset ( dp , 0 , sizeof ( dp )); dp [ 0 ][ 0 ][ 0 ] = 1 ; rep ( i , 1 , m ){ int now = i & 1 , pre = now ^ 1 ; memset ( dp [ now ], 0 , sizeof ( dp [ now ])); rep ( j , 0 , n ) rep ( k , 0 , j ){ //\u7b2ci\u4e2a\u4f4d\u7f6e\uff0cj\u4e2a\u5de6\u62ec\u53f7\uff0ck\u4e2a\u53f3\u62ec\u53f7 if ( j > k && i != x ) Add ( dp [ now ][ j ][ k + 1 ], dp [ pre ][ j ][ k ]); Add ( dp [ now ][ j + 1 ][ k ], dp [ pre ][ j ][ k ]); Add ( dp [ now ][ j + 1 ][ k + 1 ], dp [ pre ][ j ][ k ]); if ( i != x ) Add ( dp [ now ][ j ][ k ], dp [ pre ][ j ][ k ]); } } fac [ 0 ] = 1 ; rep ( i , 1 , n ) fac [ i ] = 1l l * fac [ i -1 ] * i % P ; printf ( \"%lld \\n \" , 1l l * dp [ m & 1 ][ n ][ n ] * fac [ n ] % P ); return 0 ; }","title":"\u9898\u89e3 CF367E"},{"location":"%E7%AC%94%E8%AE%B0/%E9%A2%98%E8%A7%A3%20CF466D/","text":"\u4f20\u9001\u95e8 \u601d\u7ef4\u9898\u3002 \u9996\u5148\u53ef\u4ee5\u8bbe \\(a'_i=h-a_i\\) \u4e3a\u6bcf\u4e2a\u6570\u79bb \\(h\\) \u5dee\u7684\u64cd\u4f5c\u6b21\u6570\uff0c\u800c\u6211\u4eec\u60f3\u901a\u8fc7\u82e5\u5e72\u6b21\u5de6\u53f3\u7aef\u70b9\u4e0d\u91cd\u5408\u7684\u533a\u95f4 \\(-1\\) \u6765\u4f7f \\(a'_i=0\\) \u3002\u8003\u8651\u533a\u95f4 \\(-1\\) \u6240\u5e26\u6765\u7684\u5f71\u54cd\uff0c\u8bbe\u8fd9\u6bb5\u533a\u95f4\u4e3a \\([l,r]\\) \uff0c\u5b9e\u8d28\u4e0a\u4e3a\u5c06\u5dee\u5206\u6570\u7ec4 \\(d\\) \u4e2d\u7684 \\(d_l\\) \u51cf\u4e00\uff0c \\(d_{r+1}\\) \u52a0\u4e00\u3002\u800c\u6700\u7ec8\u6240\u6709\u5143\u7d20\u503c\u76f8\u7b49\u5219\u7b49\u4ef7\u4e8e\u5c06\u5dee\u5206\u6570\u7ec4\u8f6c\u4e3a\u5168 \\(0\\) \uff0c\u6545\u4e0b\u9762\u53ea\u8003\u8651\u5dee\u5206\u6570\u7ec4\u4e0a\u7684\u64cd\u4f5c\u3002 \u518d\u770b\u5de6\u53f3\u7aef\u70b9\u4e0d\u91cd\u5408\u7684\u6761\u4ef6\uff0c\u8fd9\u8bf4\u660e\u4e86\u4e00\u4e2a\u503c\u548c\u539f\u6765\u76f8\u6bd4\uff0c\u53ea\u6709 \\(+1,-1\\) \u6216\u4e0d\u53d8\u4e09\u79cd\u3002\u6240\u4ee5\u5982\u679c\u5dee\u5206\u6570\u7ec4\u4e2d\u67d0\u4e2a\u503c\u7684\u7edd\u5bf9\u503c\u5927\u4e8e \\(1\\) \uff0c\u663e\u7136\u65e0\u89e3\u3002\u6700\u540e\u505a\u533a\u95f4\u7aef\u70b9\u5339\u914d\u5373\u53ef\uff0c\u5177\u4f53\u5730\uff1a \u5dee\u5206\u503c\u4e3a \\(1\\) \u5219\u653e\u8fdb\u5de6\u7aef\u70b9\u4e2d \u4e3a \\(0\\) \u53ef\u4ee5\u4e0d\u64cd\u4f5c\uff0c\u6216\u8005\u540c\u65f6\u4e3a\u5de6\u53f3\u7aef\u70b9 \u4e3a \\(-1\\) \u5219\u662f\u53f3\u7aef\u70b9\uff0c\u4e0e\u524d\u9762\u6709\u7684\u4efb\u610f\u5de6\u7aef\u70b9\u5339\u914d\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(n)\\) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 1e5 + 5 , mod = 1e9 + 7 ; int n , h , a [ N ], d [ N ], num ; ll ans = 1 ; int main (){ n = read (), h = read (); rep ( i , 1 , n ) a [ i ] = h - read (); rep ( i , 1 , n + 1 ){ d [ i ] = a [ i ] - a [ i -1 ]; if ( abs ( d [ i ]) > 1 ) return puts ( \"0\" ), 0 ; } rep ( i , 1 , n + 1 ){ if ( d [ i ] == 1 ) ++ num ; if ( d [ i ] == 0 ){ ans = ans * ( num + 1 ) % mod ; } if ( d [ i ] == -1 ){ ans = ans * num % mod ; -- num ; } } printf ( \"%lld \\n \" , ans ); return 0 ; }","title":"\u9898\u89e3 CF466D"},{"location":"%E7%AC%94%E8%AE%B0/%E9%A2%98%E8%A7%A3%20P4184%20%5BUSACO18JAN%5DSprinklers%20P/","text":"\u9898\u76ee\u5927\u610f\uff1a \u7ed9\u4e00\u5757 \\(N\\times N\\) \u7684\u7f51\u683c\uff0c\u5176\u4e2d\u6709 \\(N\\) \u4e2a\u7279\u6b8a\u683c\u5b50\uff0c\u6240\u5728\u7684\u884c\u548c\u5217\u4e92\u4e0d\u76f8\u540c\u3002\u4e00\u4e2a\u4f4d\u4e8e \\((i,j)\\) \u7684\u7279\u6b8a\u683c\u6709\u4ee5\u4e0b\u6548\u679c\uff1a \u5bf9\u6240\u6709 \\(0\\le x\\le i,0\\le y\\le j\\) \u7684 \\((x,y)\\) \u5e26\u6765\u6548\u679c \\(1\\) \u3002 \u5bf9\u6240\u6709 \\(i\\le x\\le N,j\\le y\\le N\\) \u7684 \\((x,y)\\) \u5e26\u6765\u6548\u679c \\(2\\) \u3002 \u95ee\u7f51\u683c\u4e2d\u6709\u591a\u5c11\u4e2a\u5b50\u77e9\u5f62\uff0c\u6ee1\u8db3\u6240\u6709\u683c\u90fd\u88ab\u6548\u679c \\(1\\) \u548c \\(2\\) \u8986\u76d6\u3002 \u6570\u636e\u8303\u56f4\uff1a \\(1\\le N\\le 10^5\\) . \u9898\u76ee\u96be\u5ea6\uff1a\u7701\u9009/USACO Platinum \u77e5\u8bc6\u50a8\u5907\uff1a\u57fa\u7840\u7b97\u6cd5 \u89e3\u6790\uff1a \u9996\u5148\u8003\u8651\u6bcf\u4e00\u884c\u4e2d\u54ea\u4e9b\u683c\u5b50\u4f1a\u540c\u65f6\u53d7\u5230\u6548\u679c \\(1\\) \u548c \\(2\\) \u3002\u7531\u4e8e\u6bcf\u6b21\u5f71\u54cd\u7684\u662f\u4e00\u4e2a\u8fde\u7eed\u7684\u533a\u95f4\uff0c\u663e\u7136\u884c\u4e0a\u540c\u65f6\u53d7\u5230\u5f71\u54cd\u7684\u533a\u95f4\u4e5f\u662f\u8fde\u7eed\u7684\u3002\u8bbe \\(l_i,r_i\\) \u4e3a\u8fd9\u6bb5\u533a\u95f4\uff0c\u90a3\u4e48\u4e0d\u96be\u53d1\u73b0 \\(l_i\\) \u4e3a\u7b2c \\(i\\) \u884c\u4ee5\u4e0a\u6700\u9760\u5de6\u7684\u7279\u6b8a\u683c\u6a2a\u5750\u6807\uff0c \\(r_i\\) \u4e3a\u7b2c \\(i\\) \u884c\u4ee5\u4e0b\u6700\u9760\u53f3\u7684\u7279\u6b8a\u683c\u6a2a\u5750\u6807\u3002\u53ef\u4ee5\u7b80\u5355\u9884\u5904\u7406\u51fa\u6240\u6709\u884c\u7684 \\(l_i,r_i\\) \u3002 \u679a\u4e3e\u77e9\u5f62\u7684\u53f3\u4e0b\u89d2 \\((i,j)\\) \u548c\u5de6\u4e0a\u89d2 \\((x,y)\\) \uff0c\u6709 \\sum_{i=1}^{n}\\sum_{j=l_i}^{r_i}\\sum_{y=l_i}^{j-1}\\sum_{x=up_y}^{i-1}1 \u7b80\u5355\u63a8\u4e00\u4e0b\u5f0f\u5b50\u4f18\u5316\uff1a \\begin{aligned} &=\\sum_{i=1}^{n}\\sum_{j=l_i}^{r_i}\\sum_{y=l_i}^{j-1}(i-up_y)\\\\ &=\\sum_{i=1}^{n}(i\\times\\frac{(r_i-l_i)(r_i-l_i+1)}{2}-\\sum_{y=l_i}^{j-1}\\sum_{j=y+1}^{r_i}up_y)\\\\ &=\\sum_{i=1}^{n}(i\\times\\frac{(r_i-l_i)(r_i-l_i+1)}{2}-\\sum_{y=l_i}^{j-1}up_y\\times(r_i-y))\\\\ \\end{aligned} \u524d\u7f00\u548c\u4f18\u5316\u5373\u53ef \\(O(N)\\) \u8ba1\u7b97\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N)\\) . 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define fi first #define se second #define pb push_back #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 , P = 1e9 + 7 ; int n , a [ N ], sum1 [ N ], sum2 [ N ]; int ans , l [ N ], r [ N ], up [ N ]; int main (){ n = read (); rep ( i , 1 , n ){ int x = read () + 1 , y = read () + 1 ; a [ x ] = y ; } l [ 0 ] = n , r [ n + 1 ] = 0 ; rep ( i , 1 , n ) l [ i ] = min ( l [ i -1 ], a [ i ]); per ( i , n , 1 ) r [ i ] = max ( r [ i + 1 ], a [ i ]); int pos = r [ 1 ]; rep ( i , 1 , n ){ while ( pos && pos >= l [ i ]){ up [ pos ] = i , pos -- ; } } rep ( i , 1 , n ) sum1 [ i ] = ( sum1 [ i -1 ] + up [ i ]) % P ; rep ( i , 1 , n ) sum2 [ i ] = ( sum2 [ i -1 ] + 1l l * i * up [ i ] % P ) % P ; rep ( i , 1 , n ){ ans = ( ans + 1l l * i * ( 1l l * ( r [ i ] - l [ i ]) * ( r [ i ] - l [ i ] + 1 ) / 2l l % P ) % P -1ll * ( sum1 [ r [ i ] -1 ] - sum1 [ l [ i ] -1 ] + P ) % P * r [ i ] % P + ( sum2 [ r [ i ] -1 ] - sum2 [ l [ i ] -1 ] + P ) % P ) % P ; } printf ( \"%d \\n \" ,( ans + P ) % P ); return 0 ; }","title":"\u9898\u89e3 P4184 [USACO18JAN]Sprinklers P"},{"location":"%E7%AC%94%E8%AE%B0/%E9%A2%98%E8%A7%A3%20P4374%20%5BUSACO18OPEN%5DDisruption%20P/","text":"\u9898\u76ee\u5927\u610f\uff1a \u7ed9\u4e00\u68f5 \\(N\\) \u4e2a\u70b9\u7684\u6811\u548c \\(M\\) \u6761\u7279\u6b8a\u8fb9\uff0c\u7279\u6b8a\u8fb9\u6709\u8fb9\u6743\u3002\u5e0c\u671b\u6c42\u51fa\u53bb\u6389\u6811\u4e0a\u4efb\u610f\u4e00\u6761\u8fb9\u540e\uff0c\u52a0\u4e00\u6761\u7279\u6b8a\u8fb9\u4f7f\u56fe\u8fde\u901a\u7684\u6700\u5c0f\u4ee3\u4ef7\u3002 \u6570\u636e\u8303\u56f4\uff1a \\(2\\le N\\le 5\\times 10^4,M\\le 5\\times10^4\\) . \u77e5\u8bc6\u50a8\u5907\uff1a\u5e76\u67e5\u96c6\uff0c\u500d\u589eLCA \u9898\u76ee\u96be\u5ea6\uff1a\u7701\u9009/USACO Platinum \u89e3\u6790\uff1a \uff08\u8fd9\u9053\u9898\u7a0d\u4e3a\u81ea\u7136\u7684\u60f3\u6cd5\u662f\u8003\u8651\u7279\u6b8a\u8fb9\u80fd\u7ed9\u54ea\u4e9b\u8fb9\u7684\u7b54\u6848\u5e26\u6765\u8d21\u732e\uff0c\u5e76\u7528\u6811\u5256+\u7ebf\u6bb5\u6811\u7ef4\u62a4\u6700\u5c0f\u503c\uff0c\u8fd9\u79cd\u505a\u6cd5\u7684\u590d\u6742\u5ea6\u662f \\(O(N\\log^2 N)\\) \u7684\uff0c\u53ef\u4ee5\u901a\u8fc7\u672c\u9898\u3002 \u8fd9\u91cc\u7ed9\u51fa\u4e00\u4e2a\u66f4\u4e3a\u7cbe\u5999\u7684\u79bb\u7ebf\u505a\u6cd5\u3002\uff09 \u5bf9\u7279\u6b8a\u8fb9\u6309\u8fb9\u6743\u5347\u5e8f\u6392\u5e8f\u3002\u8003\u8651\u7279\u6b8a\u8fb9 \\((u,v)\\) \u80fd\u6210\u4e3a\u54ea\u4e9b\u6811\u4e0a\u8fb9\u7684\u7b54\u6848\u3002\u53bb\u6389\u4e00\u6761\u8fb9\u52a0\u4e0a \\((u,v)\\) \u540e\u539f\u56fe\u4ecd\u4e3a\u6811\uff0c\u4e0d\u96be\u53d1\u73b0\u53bb\u6389\u7684\u8fd9\u6761\u8fb9\u5fc5\u987b\u5728 \\([u,v]\\) \u7684\u6811\u4e0a\u8def\u5f84\u4e0a\u3002\u5176\u6b21\uff0c\u5f53\u8fd9\u6761\u6811\u8fb9\u7684\u7b54\u6848\u5df2\u7ecf\u786e\u5b9a\u540e\uff0c\u4e0d\u9700\u8981\u518d\u8003\u8651\u8fd9\u6761\u8fb9\u65ad\u5f00\u7684\u60c5\u51b5\uff0c\u4e8e\u662f\u53ef\u4ee5\u7528\u5e76\u67e5\u96c6\u5408\u5e76\u4e24\u4e2a\u7aef\u70b9\u3002 \u5b9e\u73b0\u6bd4\u8f83\u7b80\u5355\uff0c\u9884\u5904\u7406\u500d\u589e LCA \uff0c\u4ece\u5c0f\u5230\u5927\u904d\u5386\u7279\u6b8a\u8fb9\uff0c\u5bf9\u6811\u4e0a\u8fb9\u66f4\u65b0\u7b54\u6848\u5373\u53ef\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(M\\alpha(n))\\) . 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define fi first #define se second #define pb push_back #define ll long long using namespace std ; inline int read (){ int x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 ; int n , m , fa [ N ][ 20 ], Log [ N ], pos [ N ], dep [ N ]; int dsu [ N ], ans [ N ]; int find ( int x ){ return x == dsu [ x ] ? x : dsu [ x ] = find ( dsu [ x ]);} struct Edge { int u , v , w ; bool operator < ( const Edge a ) const { return w < a . w ; } } e [ N ]; vector < pii > G [ N ]; void dfs ( int u , int f ){ dep [ u ] = dep [ f ] + 1 , fa [ u ][ 0 ] = f ; for ( auto x : G [ u ]){ if ( x . fi == f ) continue ; pos [ x . se ] = x . fi ; dfs ( x . fi , u ); } } int lca ( int x , int y ) { if ( dep [ x ] < dep [ y ]) swap ( x , y ); while ( dep [ x ] > dep [ y ]){ x = fa [ x ][ Log [ dep [ x ] - dep [ y ]]]; } if ( x == y ) return x ; for ( int i = Log [ dep [ x ]]; i >= 0 ; i -- ){ if ( fa [ x ][ i ] != fa [ y ][ i ]){ x = fa [ x ][ i ]; y = fa [ y ][ i ]; } } return fa [ x ][ 0 ]; } void init (){ Log [ 0 ] = -1 ; rep ( i , 1 , n ){ Log [ i ] = Log [ i >> 1 ] + 1 ; ans [ i ] = -1 ; dsu [ i ] = i ; } rep ( i , 1 , 16 ){ rep ( j , 1 , n ) fa [ j ][ i ] = fa [ fa [ j ][ i -1 ]][ i -1 ]; } sort ( e + 1 , e + m + 1 ); } int main (){ //freopen(\"disrupt.in\",\"r\",stdin); //freopen(\"disrupt.out\",\"w\",stdout); n = read (), m = read (); rep ( i , 1 , n -1 ){ int u = read (), v = read (); G [ u ]. pb ({ v , i }), G [ v ]. pb ({ u , i }); } dfs ( 1 , 0 ); rep ( i , 1 , m ){ e [ i ] = { read (), read (), read ()}; } init (); rep ( i , 1 , m ){ int u = e [ i ]. u , v = e [ i ]. v , w = e [ i ]. w ; int L = lca ( u , v ); for ( u = find ( u ); dep [ u ] > dep [ L ]; u = find ( fa [ u ][ 0 ])){ ans [ u ] = w , dsu [ u ] = fa [ u ][ 0 ]; } for ( v = find ( v ); dep [ v ] > dep [ L ]; v = find ( fa [ v ][ 0 ])){ ans [ v ] = w , dsu [ v ] = fa [ v ][ 0 ]; } } rep ( i , 1 , n -1 ) printf ( \"%d \\n \" , ans [ pos [ i ]]); return 0 ; }","title":"\u9898\u89e3 P4374 [USACO18OPEN]Disruption P"},{"location":"%E7%AC%94%E8%AE%B0/%E9%A2%98%E8%A7%A3%20P5203%20%5BUSACO19JAN%5DExercise%20Route%20P/","text":"\u9898\u76ee\u5927\u610f\uff1a \u7ed9\u5b9a \\(n\\) \u4e2a\u70b9 \\(m\\) \u6761\u8fb9\uff0c\u5176\u4e2d \\(n-1\\) \u6761\u8fb9\u4e3a\u666e\u901a\u8fb9\uff0c\u8fd9\u4e9b\u666e\u901a\u8fb9\u6784\u6210\u4e86\u4e00\u68f5\u6811\uff0c\u5269\u4e0b\u7684\u8fb9\u4e3a\u7279\u6b8a\u8fb9\u3002\u95ee\u56fe\u4e2d\u6709\u591a\u5c11\u7b80\u5355\u73af\u6070\u5305\u542b\u4e24\u6761\u7279\u6b8a\u8fb9\u3002 \u6570\u636e\u8303\u56f4\uff1a \\(1\\le n\\le 2\\times10^5,1\\le m\\le 2\\times 10^5,m\\ge n-1,1\\le a_i,b_i\\le n\\) . \u77e5\u8bc6\u50a8\u5907\uff1aLCA \u9898\u76ee\u96be\u5ea6\uff1a\u7701\u9009/USACO Platinum \u89e3\u6790\uff1a \u4e0d\u96be\u53d1\u73b0\uff0c\u7b80\u5355\u73af\u7684\u5f62\u5f0f\u662f\u4e24\u6761\u7279\u6b8a\u8fb9\u52a0\u4e0a\u82e5\u5e72\u6811\u4e0a\u8fb9\u3002\u5982\u679c\u8bbe\u8fd9\u4e24\u6761\u7279\u6b8a\u8fb9\u4e3a \\((u_1,v_1),(u_2,v_2)\\) \uff0c\u5f53\u4e14\u4ec5\u5f53\u6811\u4e0a\u8def\u5f84 \\([u_1,v_1],[u_2,v_2]\\) \u6709\u8fb9\u91cd\u5408\u65f6\u624d\u80fd\u6784\u9020\u51fa\u7b80\u5355\u73af\u3002 \u4e0b\u9762\u601d\u8003\u5982\u4f55\u5bf9\u91cd\u5408\u7684\u6811\u4e0a\u8def\u5f84\u8fdb\u884c\u8ba1\u6570\u3002\u5148\u8003\u8651\u4e00\u6761\u94fe\u4e0a\u7684\u60c5\u51b5\uff0c\u5373\u5e8f\u5217\u4e0a\u8ba1\u7b97\u91cd\u5408\u533a\u95f4\u7684\u6570\u91cf\u3002\u53ef\u4ee5\u626b\u4e00\u904d\u5e8f\u5217\uff0c\u5bf9\u4e8e\u5f53\u524d\u533a\u95f4 \\([l_i,r_i]\\) \uff0c\u8ba1\u7b97\u5176\u4ed6\u533a\u95f4\u7684\u5de6\u7aef\u70b9\u88ab\u8be5\u533a\u95f4\u5305\u542b\u7684\u6570\u91cf\u5373\u53ef\u3002 \u6811\u4e0a\u8def\u5f84\u4e5f\u662f\u7c7b\u4f3c\u7684\uff0c\u6211\u4eec\u5c06 \\([u,v]\\) \u62c6\u5206\u4e3a \\([u,L],[v,L]\\) \uff0c\u5176\u4e2d \\(L\\) \u4e3a \\(u,v\\) \u7684 LCA \u3002\u8fd9\u6837\u6bcf\u4e2a \\([u,v]\\) \u5c31\u88ab\u62c6\u5206\u4e3a\u4e86\u4e24\u4e2a\u94fe\u4e0a\u7684\u60c5\u51b5\uff0c\u7c7b\u4f3c\u5904\u7406\u5e8f\u5217\u7684\u65b9\u6cd5\u5c31\u53ef\u4ee5\u8ba1\u6570\u3002 \u7136\u800c\u8fd9\u53ef\u80fd\u5e26\u6765\u4e00\u5b9a\u91cd\u590d\uff1a \\([u_i,v_i],[u_j,v_j]\\) \u5728\u4e24\u6761\u94fe\u4e0a\u90fd\u6709\u4ea4\uff1a \u8003\u8651 \\([u,L],[v,L]\\) \u94fe\u4e0a \\(L\\) \u7684\u513f\u5b50 topx, topy \uff0c\u90a3\u4e48\u4e24\u6761\u94fe\u90fd\u6709\u4ea4\u7b49\u4ef7\u4e8e \\(i,j\\) \u7684 topx, topy \u76f8\u540c\u3002\u7528 map \u5b58\u6709\u76f8\u540c topx, topy \u7684 \\([u,v]\\) \u6570\u91cf \\(k\\) \uff0c\u7b54\u6848\u51cf\u53bb \\(\\binom{k}{2}\\) \u5373\u53ef\u3002 \u67d0\u6761\u94fe\u4e0a\u7684\u8d77\u59cb\u70b9\u76f8\u540c\uff1a \u82e5\u8fd9\u4e2a\u8d77\u59cb\u70b9\u6709 \\(k\\) \u6761\u94fe\uff0c\u90a3\u4e48\u4f1a\u7b97 \\(k^2\\) \u6b21\uff0c\u6211\u4eec\u5e0c\u671b\u7b97 \\(\\binom k2\\) \u6b21\uff0c\u51cf\u53bb\u7b97\u591a\u7684\u5373\u53ef\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(n\\log n)\\) . 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define fi first #define se second #define pb push_back #define ll long long using namespace std ; inline int read (){ int x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e5 + 5 ; int n , m , fa [ N ][ 20 ], Log [ N ], dep [ N ]; int a [ N ], b [ N ], L [ N ], siz [ N ], sum [ N ]; ll ans ; vector < int > G [ N ]; void dfs ( int u , int f ){ dep [ u ] = dep [ f ] + 1 , fa [ u ][ 0 ] = f ; for ( int x : G [ u ]) if ( x != f ) dfs ( x , u ); } int lca ( int x , int y ) { if ( dep [ x ] < dep [ y ]) swap ( x , y ); while ( dep [ x ] > dep [ y ]){ x = fa [ x ][ Log [ dep [ x ] - dep [ y ]]]; } if ( x == y ) return x ; per ( i , 18 , 0 ){ if ( fa [ x ][ i ] != fa [ y ][ i ]){ x = fa [ x ][ i ]; y = fa [ y ][ i ]; } } return fa [ x ][ 0 ]; } int Top ( int x , int anc ){ if ( x == anc ) return -1 ; per ( i , 18 , 0 ){ if ( dep [ fa [ x ][ i ]] > dep [ anc ]) x = fa [ x ][ i ]; } return x ; } map < pii , int > mp ; void dfs2 ( int u , int f , int now ){ siz [ u ] = now ; for ( int v : G [ u ]) if ( v != f ){ dfs2 ( v , u , now + sum [ v ]); } } void init (){ Log [ 0 ] = -1 ; rep ( i , 1 , n ) Log [ i ] = Log [ i >> 1 ] + 1 ; rep ( i , 1 , 18 ){ rep ( j , 1 , n ) fa [ j ][ i ] = fa [ fa [ j ][ i -1 ]][ i -1 ]; } } int main (){ //freopen(\"disrupt.in\",\"r\",stdin); //freopen(\"disrupt.out\",\"w\",stdout); n = read (), m = read (); rep ( i , 1 , n -1 ){ int u = read (), v = read (); G [ u ]. pb ( v ), G [ v ]. pb ( u ); } dfs ( 1 , 0 ); init (); rep ( i , n , m ){ a [ i ] = read (), b [ i ] = read (); L [ i ] = lca ( a [ i ], b [ i ]); } rep ( i , n , m ){ int topx = Top ( a [ i ], L [ i ]), topy = Top ( b [ i ], L [ i ]); if ( topx != -1 ){ sum [ topx ] ++ ; ans -= sum [ topx ]; } if ( topy != -1 ){ sum [ topy ] ++ ; ans -= sum [ topy ]; } if ( topx != -1 && topy != -1 ){ if ( topx > topy ) swap ( topx , topy ); ans -= mp [{ topx , topy }]; mp [{ topx , topy }] ++ ; } //cout<<i<<\" \"<<topx<<\" \"<<topy<<\" \"<<ans<<endl; } dfs2 ( 1 , 0 , 0 ); rep ( i , n , m ){ ans += siz [ a [ i ]] + siz [ b [ i ]] -2 * siz [ L [ i ]]; } printf ( \"%lld \\n \" , ans ); return 0 ; }","title":"\u9898\u89e3 P5203 [USACO19JAN]Exercise Route P"},{"location":"%E7%AC%94%E8%AE%B0/%E9%A2%98%E8%A7%A3%20P5243%20%5BUSACO19FEB%5DMoorio%20Kart%20P/","text":"\u9898\u76ee\u5927\u610f\uff1a \u7ed9\u5b9a\u4e00\u4e2a \\(N\\) \u4e2a\u70b9 \\(M\\) \u6761\u8fb9\u7684\u68ee\u6797\uff0c\u8fb9\u6709\u957f\u5ea6\u3002\u5047\u8bbe\u56fe\u4e2d\u6709 \\(K\\) \u4e2a\u6811\uff0c\u6211\u4eec\u5e0c\u671b\u4ece\u6bcf\u4e2a\u6811\u4e2d\u9009\u53d6\u4e00\u6761\u8def\u5f84\uff0c\u5e76\u7528 \\(K\\) \u6761\u957f\u5ea6\u4e3a \\(X\\) \u7684\u8fb9\u5c06\u5176\u8fde\u6210\u73af\u3002\u95ee\u80fd\u7ec4\u6210\u591a\u5c11\u79cd\u957f\u5ea6\u81f3\u5c11\u4e3a \\(Y\\) \u7684\u73af\u3002 \u6570\u636e\u8303\u56f4\uff1a \\(1\\le N\\le 1500,1\\le M\\le N-1,0\\le X,Y\\le 2500\\) . \u77e5\u8bc6\u50a8\u5907\uff1a\u6811\u5f62dp \u9898\u76ee\u96be\u5ea6\uff1a\u7701\u9009/USACO Platinum \u89e3\u6790\uff1a \u53d1\u73b0\u53ef\u4ee5\u5bf9\u6bcf\u68f5\u6811 \\(O(n^2)\\) dfs \u6765\u7edf\u8ba1\u6811\u4e0a\u7684\u8def\u5f84\u957f\u5ea6\u4ee5\u53ca\u8be5\u957f\u5ea6\u7684\u6570\u91cf\u3002\u5408\u5e76\u6bcf\u9897\u6811\u4e0a\u7684\u7b54\u6848\u7c7b\u4f3c\u5377\u79ef\uff0c\u4e5f\u53ef\u4ee5 \\(O(K^2)\\) \u6c42\u51fa\u3002\u5177\u4f53\u5730\uff0c\u8bbe \\(f_{i,0/1}\\) \u4e3a\u603b\u957f\u5ea6\u4e3a \\(i\\) \u7684\u65b9\u6848\u6570/\u957f\u5ea6\u548c\uff0c \\(g_{i,0/1}\\) \u4e3a\u6811\u4e0a\u7684\u957f\u5ea6\u4e3a \\(i\\) \u7684\u8def\u5f84\u6570/\u957f\u5ea6\u548c\uff0c\u6709\uff1a f_{i+j,0}\\leftarrow f_{i,0}\\cdot g_{j,0}\\\\ f_{i+j,1}\\leftarrow f_{i,0}\\cdot g_{j,1}+f_{i,1}\\cdot g_{j,0}\\\\ \u66b4\u529b\u8f6c\u79fb\u5373\u53ef\uff0c\u8003\u8651\u8fd9\u6837\u66b4\u529b\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a\u4ec0\u4e48\u53ef\u4ee5\u901a\u8fc7\u3002\u9996\u5148\u6211\u4eec\u53ea\u5173\u6ce8\u603b\u957f\u5ea6\u662f\u5426\u8d85\u8fc7 \\(Y\\) \uff0c\u6240\u4ee5\u53ef\u4ee5\u5c06\u6240\u6709\u957f\u5ea6 \\(\\ge Y\\) \u7684\u8bb0\u5728\u4e00\u8d77\u3002\u5e76\u4e14\u6bcf\u9897\u6811\u4e0a\u6700\u591a \\(n^2\\) \u4e2a\u4e0d\u540c\u957f\u5ea6\u7684\u8def\u5f84\uff0c\u8bbe\u7b2c \\(i\\) \u9897\u6811\u7684\u5927\u5c0f\u4e3a \\(n_i\\) \u3002\u603b\u65f6\u95f4\u590d\u6742\u5ea6\u5219\u4e3a \\(O(\\sum n_i^2+Ymin(Y,n_i^2))=O(NY\\sqrt Y)\\) \uff0c\u5f53 \\(n_1=n_2=\\cdots=\\sqrt Y\\) \u65f6\u53d6\u6700\u5927\u503c\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(NY\\sqrt Y)\\) . 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define fi first #define se second #define pb push_back #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2505 , P = 1e9 + 7 ; int ecnt , head [ N ]; struct Edge { int to , nxt , w ; } e [ N << 1 ]; inline void add ( int u , int v , int w ){ e [ ++ ecnt ] = { v , head [ u ], w }; head [ u ] = ecnt ; } int n , m , X , Y , cnt , fa [ N ], col [ N ]; ll ans , f [ N ][ 2 ], g [ N ][ 2 ], sum [ N ][ N ], tot [ N ][ N ]; int find ( int x ){ return fa [ x ] == x ? x : fa [ x ] = find ( fa [ x ]);} void color ( int u , int f , int id ){ //\u5bf9\u540c\u4e00\u4e2a\u8fde\u901a\u5757\u67d3\u8272 col [ u ] = id ; for ( int i = head [ u ]; i ; i = e [ i ]. nxt ){ int v = e [ i ]. to ; if ( v == f ) continue ; color ( v , u , id ); } } void dfs ( int u , int f , int len ){ //\u5355\u4e2a\u6811\u4e0a\u8def\u5f84\u7edf\u8ba1 if ( f ){ int c = col [ u ], l = min ( len , Y ); sum [ c ][ l ] = ( sum [ c ][ l ] + len ) % P ; ++ tot [ c ][ l ]; } for ( int i = head [ u ]; i ; i = e [ i ]. nxt ){ int v = e [ i ]. to ; if ( v == f ) continue ; dfs ( v , u , len + e [ i ]. w ); } } int main (){ //freopen(\"mooriokart.in\",\"r\",stdin); //freopen(\"mooriokart.out\",\"w\",stdout); n = read (), m = read (), X = read (), Y = read (); rep ( i , 1 , n ) fa [ i ] = i ; rep ( i , 1 , m ){ int u = read (), v = read (), w = read (); add ( u , v , w ); add ( v , u , w ); fa [ find ( u )] = find ( v ); } rep ( i , 1 , n ) if ( i == find ( i )) color ( i , 0 , ++ cnt ); rep ( i , 1 , n ) dfs ( i , 0 , 0 ); //dp(\u5377\u79ef\u5408\u5e76\u7b54\u6848) int cur = min ( cnt * X , Y ); f [ cur ][ 0 ] = 1 , f [ cur ][ 1 ] = X * cnt ; rep ( i , 1 , cnt ){ rep ( j , cur , Y ){ g [ j ][ 0 ] = f [ j ][ 0 ], g [ j ][ 1 ] = f [ j ][ 1 ]; f [ j ][ 0 ] = f [ j ][ 1 ] = 0 ; } rep ( j , 0 , Y ){ if ( ! tot [ i ][ j ]) continue ; rep ( k , cur , Y ){ if ( ! g [ k ][ 0 ]) continue ; int l = min ( j + k , Y ); f [ l ][ 0 ] = ( f [ l ][ 0 ] + tot [ i ][ j ] * g [ k ][ 0 ] % P ) % P ; f [ l ][ 1 ] = ( f [ l ][ 1 ] + sum [ i ][ j ] * g [ k ][ 0 ] % P + tot [ i ][ j ] * g [ k ][ 1 ]) % P ; } } } ans = f [ Y ][ 1 ]; rep ( i , 1 , cnt -1 ) ans = ans * i % P ; printf ( \"%lld \\n \" , ans * (( P + 1 ) / 2 ) % P ); return 0 ; }","title":"\u9898\u89e3 P5243 [USACO19FEB]Moorio Kart P"},{"location":"%E7%AC%94%E8%AE%B0/%E9%A2%98%E8%A7%A3%20P6143%20%5BUSACO20FEB%5DEquilateral%20Triangles%20P/","text":"\u9898\u76ee\u5927\u610f\uff1a \u7ed9\u4e00\u4e2a \\(N\\times N\\) \u7684\u65b9\u9635\uff0c\u91cc\u9762\u6709\u82e5\u5e72\u4e2a\u70b9\uff0c\u95ee\u8fd9\u4e9b\u70b9\u5728\u66fc\u54c8\u987f\u8ddd\u79bb\u610f\u4e49\u4e0b\u80fd\u6784\u6210\u591a\u5c11\u4e2a\u7b49\u8fb9\u4e09\u89d2\u5f62\uff1f \u6570\u636e\u8303\u56f4\uff1a \\(1\\le N\\le 300\\) . \u77e5\u8bc6\u50a8\u5907\uff1a\u524d\u7f00\u548c\uff0c\u66fc\u54c8\u987f\u8ddd\u79bb \u9898\u76ee\u96be\u5ea6\uff1a\u63d0\u9ad8+/\u7701\u9009- \u89e3\u6790\uff1a \uff08\u66fc\u54c8\u987f\u8ddd\u79bb\u4e0e\u5207\u6bd4\u96ea\u592b\u8ddd\u79bb\u7684\u4e92\u76f8\u8f6c\u5316\u662f\u5173\u952e\u601d\u60f3\u3002\uff09 \u5148\u6784\u9020\u51e0\u4e2a\u7b49\u8fb9\u4e09\u89d2\u5f62\uff0c\u4e0d\u96be\u53d1\u73b0\u6709\u4e00\u6761\u8fb9\u4e00\u5b9a\u4e0e\u5750\u6807\u8f74\u6210 \\(45^\\circ\\) \u5ea6\u89d2\u3002\u56fa\u5b9a\u8fd9\u6761\u8fb9\u627e\u7b2c\u4e09\u70b9\uff0c\u53d1\u73b0\u7b2c\u4e09\u70b9\u4e00\u5b9a\u5728\u4ee5\u8fd9\u6761\u8fb9\u4e3a\u8fb9\u957f\u7684\u6b63\u65b9\u5f62\u4e0a\uff0c\u4e14\u5728\u8fd9\u6761\u8fb9\u7684\u5bf9\u8fb9\u3002\u6bd4\u5982\u5bf9\u4e8e \\(A(0,2),B(2,0)\\) \uff0c\u82e5 \\(C\\) \u5728 \\(AB\\) \u4e0a\u65b9\uff0c\u80fd\u6784\u6210\u7b49\u8fb9\u4e09\u89d2\u5f62\u7684 \\(C\\) \u53ea\u80fd\u5728 \\((4,2),(3,3),(2,4)\\) \u8fd9\u4e9b\u4f4d\u7f6e\u3002\u8fd9\u4e2a\u7ed3\u8bba\u53ef\u4ee5\u901a\u8fc7\u66fc\u54c8\u987f\u8ddd\u79bb\u8f6c\u5207\u6bd4\u96ea\u592b\u8ddd\u79bb\u66f4\u52a0\u65b9\u4fbf\u7684\u5f97\u51fa\u3002 \u6709\u4e86\u8fd9\u4e2a\u7ed3\u8bba\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u524d\u7f00\u548c\u5904\u7406\u6bcf\u4e2a\u659c\u7ebf\u4e0a\u7684\u70b9\u6570\uff0c\u8fd9\u6837\u5bf9\u4e8e\u6bcf\u4e2a\u659c\u8fb9 \\(AB\\) \u90fd\u53ef\u4ee5 \\(O(1)\\) \u7b97\u51fa\u6ee1\u8db3\u6761\u4ef6\u7684 \\(C\\) \u3002\u5bf9\u4e24\u79cd\u659c\u7ebf\u90fd\u8981\u7b97\u4e00\u6b21\uff0c\u540c\u65f6\u4e5f\u8981\u6ce8\u610f\u53bb\u6389\u91cd\u590d\u60c5\u51b5\uff0c\u5269\u4e0b\u7684\u7b80\u5355\u679a\u4e3e\u5373\u53ef\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N^3)\\) . 1","title":"\u9898\u89e3 P6143 [USACO20FEB]Equilateral Triangles P"},{"location":"%E7%AC%94%E8%AE%B0/%E9%A2%98%E8%A7%A3%20P7156%20%5BUSACO20DEC%5D%20Cowmistry%20P/","text":"\u9898\u76ee\u5927\u610f\uff1a \u7ed9 \\(N\\) \u4e2a\u533a\u95f4 \\([l_i,r_i]\\) \uff0c\u95ee\u5728\u6240\u6709\u533a\u95f4\u7684\u5e76\u4e2d\u6709\u591a\u5c11\u4e2a\u4e09\u5143\u7ec4 \\((a,b,c)\\) \uff0c\u6ee1\u8db3\uff1a \\(a,b,c\\) \u4e92\u4e0d\u76f8\u540c . \\(a\\oplus b,a\\oplus c,b\\oplus c\\le K\\) . \u8f93\u51fa\u5bf9 \\(10^9+7\\) \u53d6\u6a21\u3002 \u6570\u636e\u8303\u56f4\uff1a \\(1\\le N\\le 2\\times 10^4,1\\le K\\le 10^9\\) . \u9898\u76ee\u96be\u5ea6\uff1aNOI/NOI+/CTSC \u89e3\u6790\uff1a \u6ca1\u4eba\u5199\u5b98\u65b9\u9898\u89e3\u601d\u8def\u554a\uff0c\u90a3\u6211\u5199\u4e00\u624b \u9996\u5148\u5bf9 \\(K+1\\) \u8fd9\u6837\u5c31\u628a \\(\\le\\) \u8f6c\u5316\u6210\u4e86 \\(<K\\) \u3002\u5b9a\u4e49 \\(P\\) \u4e3a\u6700\u5c0f\u7684 \\(2\\) \u7684\u6b21\u5e42\u4f7f\u5f97 \\(P>K\\) \uff0c\u90a3\u4e48\u663e\u7136 \\((a,b,c)\\) \u5fc5\u987b\u6ee1\u8db3\uff08\u5426\u5219\u4f1a\u6709 \\(>K\\) \u4e14\u4e0d\u4e3a 0 \u7684\u4f4d\u51fa\u73b0\uff09\uff1a \\lfloor\\frac{a}{P}\\rfloor=\\lfloor\\frac{b}{P}\\rfloor=\\lfloor\\frac{c}{P}\\rfloor \u63a5\u4e0b\u6765\u5206\u7c7b\u8ba8\u8bba\uff1a \\(\\lfloor\\frac{a}{P/2}\\rfloor=\\lfloor\\frac{b}{P/2}\\rfloor=\\lfloor\\frac{c}{P/2}\\rfloor\\) \u6b64\u65f6 \\(a\\oplus b\\) \u5728 \\(P/2\\) \u4ee5\u4e0a\u7684\u4f4d\u5747\u4e3a \\(0\\) \uff0c\u663e\u7136\u6ee1\u8db3\u8981\u6c42\uff0c\u7edf\u8ba1\u76f8\u7b49\u7684\u6570\u91cf\u5e76\u5bf9\u7b54\u6848\u52a0\u4e0a \\(\\binom{cnt}{3}\\) \u5373\u53ef\u3002 \u5176\u4ed6\u60c5\u51b5 \u7531\u4e8e \\(P\\) \u4ee5\u4e0a\u7684\u4e8c\u8fdb\u5236\u4f4d\u503c\u90fd\u4e00\u6837\uff0c\u62bd\u5c49\u539f\u7406\u5f97\u51fa\u5fc5\u6709\u4e24\u9879 \\(a,b\\) \u6ee1\u8db3 \\(\\lfloor\\frac{a}{P/2}\\rfloor=\\lfloor\\frac{b}{P/2}\\rfloor\\) \u3002\u4e0d\u59a8\u8003\u8651 \\(\\lfloor\\frac{a}{P/2}\\rfloor=\\lfloor\\frac{b}{P/2}\\rfloor>\\lfloor\\frac{c}{P/2}\\rfloor\\) \u65f6\u7684\u60c5\u51b5\uff0c\u7531\u4e8e\u663e\u7136\u6709 \\(a\\oplus b<P/2<K\\) \uff0c\u53ea\u7528\u8003\u8651\u5bf9\u6bcf\u4e2a \\(c\\) \u6c42\u6240\u6709\u6ee1\u8db3 \\(c\\oplus a<K\\) \u7684 \\(a\\) \u3002 \u5177\u4f53\u5730\uff0c\u6709 \\(c\\in[Pt+P/2,Pt+P)\\) \uff0c\u96c6\u5408 \\(S\\) \u4e3a \u6240\u6709 \\(x\\in[Pt,Pt+P/2)\\) \u4e14 \\(x\\oplus c<K\\) \u7684 \\(x\\) \uff0c\u5bf9\u4e8e\u8be5 \\(c\\) \u7684\u7b54\u6848\u5c31\u662f \\(\\binom{|S|}{2}\\) \u3002 \u4e0b\u9762\u8003\u8651\u5982\u4f55\u5b9e\u73b0\uff0c\u9996\u5148\u6211\u4eec\u5c06\u6bcf\u4e2a\u539f\u533a\u95f4\u6309\u4e0a\u8ff0\u8ba8\u8bba\u62c6\u4e3a\u957f\u5ea6\u4e3a \\(P\\) \u7684\u6574\u5757\u548c\u4e0d\u5230 \\(P\\) \u7684\u6563\u5757\u3002\u5bf9\u4e8e\u957f\u5ea6\u4e3a \\(P\\) \u7684\u5757\uff0c\u7b54\u6848\u4e3a 2\\times\\binom{P/2}{3}+P\\times\\binom{K-P/2}{2} \u63a5\u4e0b\u6765\u628a\u6563\u5757\u79bb\u7ebf\u5904\u7406\uff0c 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 void solve ( vector < pii > v ){ int p2 = p / 2 ; vector < pii > tot [ 2 ]; for ( auto & t : v ){ if ( t . fi / p2 < t . se / p2 ){ tot [ 0 ]. push_back ({ t . fi , p2 -1 }); tot [ 1 ]. push_back ({ 0 , t . se - p2 }); } else tot [ t . fi / p2 ]. push_back ({ t . fi % p2 , t . se % p2 }); } rep ( i , 0 , 1 ){ add ( ans , c3 ( totlen ( tot [ i ]))); //\u7b2c\u4e00\u7c7b solve2 ( tot [ i ], tot [ i ^ 1 ], p2 , 0 ); //\u7b2c\u4e8c\u7c7b } } \u7b2c\u4e00\u7c7b\u7684\u7b54\u6848\u5f88\u597d\u7edf\u8ba1\uff0c\u8003\u8651\u5982\u4f55\u5904\u7406\u7b2c\u4e8c\u7c7b\u3002\u53ef\u4ee5\u5c06\u7b2c\u4e8c\u7c7b\u5212\u5206\u4e3a\u66f4\u5c0f\u7684\u4e24\u4e2a\u533a\u95f4\u8fdb\u884c\u8ba1\u7b97\uff0c\u8fd9\u6837\u7684\u5206\u6cbb\u6700\u591a\u8fdb\u884c \\(O(\\log K)\\) \u5c42\uff0c\u53ef\u4ee5\u901a\u8fc7\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(N\\log K)\\) . 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define pii pair<int,int> #define fi first #define se second #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int M = 1e9 + 7 , i6 = 166666668 ; int n , k , p = 1 ; ll ans ; ll c2 ( ll x ){ return 1l l * x * ( x -1 ) / 2 % M ;} ll c3 ( ll x ){ return 1l l * x * ( x -1 ) % M * ( x -2 ) % M * i6 % M ;} inline void add ( ll & a , const ll b ){ a = ( a + b ) % M ;} inline ll totlen ( const vector < pii >& v ){ ll len = 0 ; for ( auto & t : v ) len += t . se - t . fi + 1 ; return len ; } void solve2 ( const vector < pii >& a , const vector < pii >& b , int block , int cur ){ //\u57fa\u672c\u60c5\u51b5 if ( ! ( int ) a . size ()) return ; if ( ! ( int ) b . size ()){ ans = ( ans + c2 ( cur ) * totlen ( a ) % M ) % M ; return ; } vector < pii > des {{ 0 , block -1 }}; if ( b == des ) { // b = [0,block) cur = ( cur + (( block -1 ) & k )) % M ; ans = ( ans + c2 ( cur ) * totlen ( a ) % M ) % M ; return ; } //\u7ee7\u7eed\u5f80\u4e0b\u5206\u6cbb vector < pii > A [ 2 ], B [ 2 ]; auto ad = [ & ]( vector < pii >& v , pii p ) { p . fi = max ( p . fi , 0 ), p . se = min ( p . se , block / 2-1 ); if ( p . fi > p . se ) return ; v . push_back ( p ); }; for ( auto & t : a ) ad ( A [ 0 ], t ), ad ( A [ 1 ],{ t . fi - block / 2 , t . se - block / 2 }); for ( auto & t : b ) ad ( B [ 0 ], t ), ad ( B [ 1 ],{ t . fi - block / 2 , t . se - block / 2 }); if ( k & ( block / 2 )) { for ( int i = 0 ; i < 2 ; ++ i ) solve2 ( A [ i ], B [ i ^ 1 ], block / 2 ,( cur + totlen ( B [ i ])) % M ); } else { for ( int i = 0 ; i < 2 ; ++ i ) solve2 ( A [ i ], B [ i ], block / 2 , cur ); } } //\u5904\u7406a/P\u76f8\u7b49\u7684\u6563\u5757 void solve ( vector < pii > v ){ int p2 = p / 2 ; vector < pii > tot [ 2 ]; for ( auto & t : v ){ if ( t . fi / p2 < t . se / p2 ){ tot [ 0 ]. push_back ({ t . fi , p2 -1 }); tot [ 1 ]. push_back ({ 0 , t . se - p2 }); } else tot [ t . fi / p2 ]. push_back ({ t . fi % p2 , t . se % p2 }); } rep ( i , 0 , 1 ){ add ( ans , c3 ( totlen ( tot [ i ]))); //\u7b2c\u4e00\u7c7b solve2 ( tot [ i ], tot [ i ^ 1 ], p2 , 0 ); //\u7b2c\u4e8c\u7c7b } } int main (){ n = read (), k = read (); ++ k ; while ( p <= k ) p <<= 1 ; k = k - p / 2 ; ll sum = ( p * c2 ( k ) % M + 2 * c3 ( p / 2 ) % M ) % M ; //\u6574\u5757\u7b54\u6848\u76f4\u63a5\u7edf\u8ba1 map < int , vector < pii >> todo ; rep ( i , 1 , n ){ int l = read (), r = read (); int LL = l / p , RR = r / p ; if ( LL != RR ){ add ( ans , sum * ( RR - LL -1 ) % M ); todo [ LL ]. push_back ({ l % p , p -1 }); todo [ RR ]. push_back ({ 0 , r % p }); } else todo [ LL ]. push_back ({ l % p , r % p }); } for ( auto & t : todo ) solve ( t . se ); printf ( \"%lld \\n \" , ans % M ); return 0 ; }","title":"\u9898\u89e3 P7156 [USACO20DEC] Cowmistry P"},{"location":"%E7%AC%94%E8%AE%B0/%E9%A2%98%E8%A7%A3%20P7295%20%5BUSACO21JAN%5D%20Paint%20by%20Letters%20P/","text":"\u9898\u76ee\u5927\u610f\uff1a \u7ed9\u5b9a\u4e00\u4e2a \\(n\\times m\\) \u7684\u7f51\u683c\u56fe\uff0c\u6bcf\u4e2a\u683c\u5b50\u6709\u4e00\u4e2a\u989c\u8272\uff0c\u82e5\u76f8\u90bb\u683c\u5b50\u989c\u8272\u76f8\u540c\u5219\u8fde\u4e00\u6761\u8fb9\u3002\u4e00\u5171\u6709 \\(q\\) \u4e2a\u8be2\u95ee\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u8be2\u95ee \\((x_1,y_1,x_2,y_2)\\) \uff0c\u5e0c\u671b\u6c42\u51fa\u8be5\u5b50\u77e9\u5f62\u4e2d\u8fde\u901a\u5757\u7684\u6570\u91cf\u3002 \u6570\u636e\u8303\u56f4\uff1a \\(1\\le n,m,q\\le 1000,1\\le x_1\\le x_2\\le N,1\\le y_1\\le y_2\\le M\\) . \u77e5\u8bc6\u50a8\u5907\uff1a\u5e73\u9762\u56fe\u6b27\u62c9\u5b9a\u7406 \u5b9a\u4e49 \\(F\\) \u4e3a \\(G\\) \u7684\u9762\u6570\uff0c \\(E\\) \u4e3a\u8fb9\u6570\uff0c \\(V\\) \u4e3a\u9876\u70b9\u6570\uff0c \\(C\\) \u4e3a\u8fde\u901a\u5206\u91cf\u4e2a\u6570\uff0c\u6211\u4eec\u6709 F=E-V+C+1 \u9898\u76ee\u96be\u5ea6\uff1a\u7701\u9009+/USACO Platinum+ \u89e3\u6790\uff1a \u4e00\u9053\u7ed3\u8bba\u9898...\u6ca1\u6709\u5b66\u8fc7\u76f8\u5173\u77e5\u8bc6\u70b9\u53ea\u80fd\u653e\u5f03\uff0c\u4e86\u89e3\u7684\u8bdd\u5c31\u4e0d\u7b97\u592a\u96be\u3002 \u7531\u4e0a\u8ff0\u5b9a\u7406\uff0c\u6211\u4eec\u53ef\u4ee5\u6b63\u5e38\u8fde\u8fb9\u6c42\u8fde\u901a\u5757\u6570\uff0c\u4e5f\u53ef\u4ee5\u8003\u8651\u4e0b\u9762\u8fd9\u79cd\u5efa\u56fe\u65b9\u6cd5\uff0c\u601d\u8def\u5927\u9898\u76f8\u540c\u3002 \u82e5\u76f8\u90bb\u4e24\u683c\u989c\u8272\u4e0d\u540c\uff0c\u5219\u5728\u8fb9\u754c\u5904\u8fde\u4e00\u6761\u8fb9\u3002\u4f8b\u5982\u9898\u76ee\u4e2d\u7ed9\u51fa\u7684 \\(3\\times 3\\) \u7684\u753b\u5e03\uff0c 1 2 3 AAB BBA BBB \u5efa\u56fe\u540e\u5219\u4f1a\u53d8\u4e3a 1 2 3 4 5 6 7 .-.-.-. | | | .-.-.-. | | | . . .\u2014. | | .-.-.-. \u6b64\u65f6\u6709 F=18-16+2+1=5 \u4e0d\u96be\u53d1\u73b0\u9700\u8981\u53bb\u6389\u56fe\u5f62\u5916\u9762\u7684\u90a3\u9762\uff0c\u4e8e\u662f\u7b54\u6848\u4e3a \\(F-1=E-V+C\\) . \u800c \\(E\\) \u53ef\u4ee5\u5efa\u56fe\u540e\u7528\u4e8c\u7ef4\u524d\u7f00\u548c\u6c42\u51fa\uff0c \\(V\\) \u53ef\u4ee5\u76f4\u63a5\u8ba1\u7b97\uff0c\u4e8e\u662f\u6211\u4eec\u8003\u8651\u5982\u4f55\u5904\u7406 \\(C\\) . \u6807\u8bb0\u6bcf\u4e2a\u8fde\u901a\u5206\u91cf\u6700\u5de6\u4e0a\u7684\u70b9\u4e3a\u7279\u6b8a\u70b9\uff0c\u7136\u540e\u8be2\u95ee\u4e2d\u7684\u77e9\u5f62\u5185\u6807\u8bb0\u70b9\u7684\u4e2a\u6570\u4e5f\u53ef\u4ee5\u4e8c\u7ef4\u524d\u7f00\u548c\u89e3\u51b3\u3002\u7136\u800c\u8fd9\u4e5f\u7b97\u5165\u4e86\u8fde\u901a\u5206\u91cf\u4e0d\u5b8c\u5168\u5c5e\u4e8e\u8be5\u533a\u57df\uff0c\u800c\u6807\u8bb0\u70b9\u5c5e\u4e8e\u8be5\u533a\u57df\u7684\u70b9\u3002\u6ce8\u610f\u5230\u8fd9\u6837\u7684\u8fde\u901a\u5206\u91cf\u4e00\u5b9a\u8fc7\u8fb9\u754c\u4e0a\u67d0\u4e2a\u70b9\uff0c\u904d\u5386\u8fb9\u754c\u5e76\u4ece \\(C\\) \u4e2d\u51cf\u53bb\u5b83\u5373\u53ef\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(nm+(n+m)q)\\) . 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define per(i,a,b) for(int i=(a);i>=(b);--i) #define pii pair<int,int> #define fi first #define se second #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 2e3 + 5 , d [ 4 ][ 2 ] = {{ 1 , 0 },{ -1 , 0 },{ 0 , 1 },{ 0 , -1 }}; int n , m , q ; char col [ N ][ N ]; pii spe [ N ][ N ]; int s [ N ][ N ], v [ N ][ N ], h [ N ][ N ]; bool in ( int x , int y , int nx , int ny ){ if ( nx < 0 || ny < 0 || nx > n + 1 || ny > m + 1 ) return 0 ; if ( nx == x + 1 ) return col [ x ][ y ] != col [ x ][ y -1 ]; if ( nx == x -1 ) return col [ nx ][ y ] != col [ nx ][ y -1 ]; if ( ny == y + 1 ) return col [ x ][ y ] != col [ x -1 ][ y ]; return col [ x ][ ny ] != col [ x -1 ][ ny ]; } void dfs ( int x , int y ){ //\u5efa\u56fe rep ( i , 0 , 3 ){ int nx = x + d [ i ][ 0 ], ny = y + d [ i ][ 1 ]; if ( in ( x , y , nx , ny )){ //\u5982\u679c\u4e24\u70b9\u95f4\u6709\u8fb9 if ( nx == x + 1 ) v [ x ][ y ] = 1 ; else if ( nx == x -1 ) v [ nx ][ y ] = 1 ; else if ( ny == y + 1 ) h [ x ][ y ] = 1 ; else h [ x ][ ny ] = 1 ; if ( ! spe [ nx ][ ny ]. fi ){ spe [ nx ][ ny ] = spe [ x ][ y ]; dfs ( nx , ny ); } } } } int sum ( int f [ N ][ N ], int x , int y , int a , int b ){ return f [ a ][ b ] + f [ x ][ y ] - f [ x ][ b ] - f [ a ][ y ]; } bool flg [ N ][ N ]; bool out ( int i , int j , int x , int y , int a , int b ){ int nx = spe [ i ][ j ]. fi , ny = spe [ i ][ j ]. se ; if ( nx > x && nx <= a && ny > y && ny <= b &&! flg [ nx ][ ny ]){ flg [ nx ][ ny ] = 1 ; return 1 ; } return 0 ; } void rem ( int x , int y ){ int nx = spe [ x ][ y ]. fi , ny = spe [ x ][ y ]. se ; flg [ nx ][ ny ] = 0 ; } int main (){ n = read (), m = read (), q = read (); rep ( i , 1 , n ){ scanf ( \"%s\" , col [ i ] + 1 ); } rep ( i , 1 , n + 1 ) rep ( j , 1 , m + 1 ){ if ( ! spe [ i ][ j ]. fi ){ s [ i ][ j ] = 1 ; spe [ i ][ j ] = { i , j }; dfs ( i , j ); } } rep ( i , 1 , n + 1 ) rep ( j , 1 , m + 1 ){ s [ i ][ j ] += s [ i ][ j -1 ]; h [ i ][ j ] += h [ i ][ j -1 ]; v [ i ][ j ] += v [ i ][ j -1 ]; } rep ( i , 1 , n + 1 ) rep ( j , 1 , m + 1 ){ s [ i ][ j ] += s [ i -1 ][ j ]; h [ i ][ j ] += h [ i -1 ][ j ]; v [ i ][ j ] += v [ i -1 ][ j ]; } while ( q -- ){ int x = read (), y = read (), a = read (), b = read (); //\u8fd9\u91cc E \u548c V \u5747\u53bb\u6389\u4e86\u5916\u9762\u4e00\u5708\uff0c\u7b54\u6848\u4e0d\u53d8 int E = sum ( v , x -1 , y , a , b ) + sum ( h , x , y -1 , a , b ); int V = ( a - x ) * ( b - y ), C = sum ( s , x , y , a , b ); rep ( i , x , a + 1 ){ if ( out ( i , b + 1 , x , y , a , b )) C -- ; if ( out ( i , y , x , y , a , b )) C -- ; } rep ( i , y , b + 1 ){ if ( out ( a + 1 , i , x , y , a , b )) C -- ; if ( out ( x , i , x , y , a , b )) C -- ; } rep ( i , x , a + 1 ){ rem ( i , b + 1 ); rem ( i , y ); } rep ( i , y , b + 1 ){ rem ( x , i ); rem ( a + 1 , i ); } //printf(\"%d %d %d\\n\",E,V,C); printf ( \"%d \\n \" , E - V + C + 1 ); } return 0 ; }","title":"\u9898\u89e3 P7295 [USACO21JAN] Paint by Letters P"},{"location":"%E7%AC%94%E8%AE%B0/%E9%A2%98%E8%A7%A3%20P7416%20%5BUSACO21FEB%5D%20No%20Time%20to%20Dry%20P/","text":"\u8003\u8651\u4e00\u6bb5\u533a\u95f4 \\([l,r]\\) \u6700\u591a\u8981\u6d82 \\(r-l+1\\) \u7b14\uff0c\u7136\u800c\u6709\u4e9b\u7b14\u662f\u201c\u591a\u4f59\u7684\u201d\u3002\u4e0d\u96be\u53d1\u73b0\uff0c\u5bf9\u4e8e\u6bcf\u5bf9 \\((x,y)\\) \u6ee1\u8db3 \\(A_x=A_y<\\min_{x<i<y}A_i\\) \uff08\u4e00\u5bf9\u76f8\u540c\u989c\u8272\u4e14\u4e2d\u95f4\u7684\u989c\u8272\u66f4\u6df1\uff09\uff0c\u6211\u4eec\u53ef\u4ee5\u5c11\u6d82\u4e00\u7b14\u3002\u90a3\u4e48\u8bb0\u533a\u95f4\u5185\u7684 \\((x,y)\\) \u5bf9\u4e2a\u6570\u4e3a \\(cnt\\) \uff0c\u6240\u6c42\u7684\u7b54\u6848\u5c31\u662f \\(r-l+1-cnt\\) \u3002 \u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u7ef4\u62a4\u4e00\u4e2a\u5355\u8c03\u6808\u6765\u627e\u51fa\u6240\u6709\u8fd9\u6837\u7684\u70b9\u5bf9\uff0c\u6808\u5185\u5143\u7d20\u5355\u8c03\u9012\u589e\u3002\u5982\u679c\u65b0\u63d2\u5165\u7684\u5143\u7d20\u548c\u6808\u9876\u5143\u7d20\u76f8\u7b49\uff0c\u90a3\u4e48\u5b83\u5c31\u662f\u4e00\u5bf9\u7b26\u5408\u8981\u6c42\u7684\u70b9\uff0c\u66f4\u65b0 \\(cnt\\) \u548c\u6808\u9876\u3002\u6700\u540e\u5bf9\u8fd9\u4e9b\u8be2\u95ee\u6309\u7167\u53f3\u7aef\u70b9\u5750\u6807\u6392\u5e8f\uff0c \u7528\u6811\u72b6\u6570\u7ec4\u6765\u7ef4\u62a4\u4e00\u6bb5\u524d\u7f00\u7684 \\(cnt\\) \uff0c\u79bb\u7ebf\u5904\u7406\u6bcf\u7ec4\u8be2\u95ee\u5373\u53ef\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O((N+Q)\\log N)\\) \u3002 \u4ee3\u7801\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 #include <bits/stdc++.h> #define f first #define s second #define pi pair<int,int> using namespace std ; const int N = 2e5 + 5 ; int n , q , a [ N ], stk [ N ], top , ans [ N ], bit [ N ]; inline void I ( int x ){ for (; x <= n ; x += ( x &- x )) bit [ x ] ++ ;} inline int Q ( int x ){ int res = 0 ; for (; x ; x -= ( x &- x )) res += bit [ x ]; return res ;} vector < pi > query [ N ]; int main (){ scanf ( \"%d%d\" , & n , & q ); for ( int i = 1 ; i <= n ; i ++ ) scanf ( \"%d\" , & a [ i ]); for ( int i = 1 , l , r ; i <= q ; i ++ ){ scanf ( \"%d%d\" , & l , & r ); query [ r ]. push_back ({ l , i }); } for ( int i = 1 ; i <= n ; i ++ ){ while ( top && a [ stk [ top ]] > a [ i ]) top -- ; if ( top && a [ stk [ top ]] == a [ i ]){ I ( stk [ top ]); stk [ top ] = i ; } else stk [ ++ top ] = i ; if ( query [ i ]. size ()){ for ( int j = 0 ; j < query [ i ]. size (); j ++ ){ pi t = query [ i ][ j ]; ans [ t . s ] = i - t . f + 1 - ( Q ( i ) - Q ( t . f -1 )); } } } for ( int i = 1 ; i <= q ; i ++ ) printf ( \"%d \\n \" , ans [ i ]); return 0 ; }","title":"\u9898\u89e3 P7416 [USACO21FEB] No Time to Dry P"},{"location":"%E7%AC%94%E8%AE%B0/%E9%A2%98%E8%A7%A3%20%5B%E7%9C%81%E9%80%89%E8%81%94%E8%80%83%202021%20A%3AB%20%E5%8D%B7%5D%20%E6%BB%9A%E6%A6%9C/","text":"\u9898\u76ee\u5927\u610f\uff1a \u7ed9\u5b9a \\(n,m\\) \u548c\u957f\u5ea6\u4e3a \\(n\\) \u7684\u6570\u7ec4 \\(a_i\\) \u3002\u95ee\u6709\u591a\u5c11\u79cd\u6392\u5217 \\(p_n\\) \uff0c\u4f7f\u5f97\u5b58\u5728\u6570\u7ec4 \\(b_i\\) \uff0c\u6ee1\u8db3 \\(b_i\\) \u5355\u8c03\u4e0d\u51cf \\(\\sum_{i=1}^n b_i=m\\) \u4f9d\u6b21\u5bf9 \\(a_{p_i}\\) \u52a0\u4e0a \\(b_i\\) \uff0c\u6ee1\u8db3\u64cd\u4f5c\u540e \\(a_{p_i}\\) \u4e3a\u6700\u5927\u5143\u7d20\u3002 \u6570\u636e\u8303\u56f4\uff1a \\(1\\le n\\le 13,1\\le m\\le 500,0\\le a_i\\le 10^4\\) . \u77e5\u8bc6\u50a8\u5907\uff1a\u72b6\u6001\u538b\u7f29\uff0c\u5dee\u5206 \u9898\u76ee\u96be\u5ea6\uff1a\u7701\u9009/USACO Platinum \u89e3\u6790\uff1a \uff08\u4ece\u6570\u636e\u8303\u56f4\u4e0d\u96be\u60f3\u5230\u8fd9\u662f\u72b6\u538bdp\uff0c\u90a3\u4e48\u5982\u4f55\u8bbe\u8ba1\u72b6\u6001\u548c\u4f18\u5316dp\u5c31\u662f\u89e3\u9898\u7684\u5173\u952e\u3002\uff09 \u9996\u5148\u60f3\u5230\u8fd9\u6837\u7684 dp \uff0c \\(f_{S,i,j}\\) \u4e3a\u524d\u9762\u9009\u53d6\u7684\u72b6\u6001\u4e3a \\(S\\) \uff0c\u4e0a\u4e00\u4e2a\u6570\u4e3a \\(i\\) \uff0c\u5f53\u524d\u7684 \\(\\sum b_i\\) \u4e3a \\(j\\) \u3002\u7136\u800c\u4e3a\u4e86\u4fdd\u8bc1 \\(b_i\\) \u7684\u5355\u8c03\u6027\uff0c\u6211\u4eec\u8fd8\u8981\u52a0\u4e00\u7ef4 \\(k\\) \u7528\u6765\u8bb0\u5f55\u4e0a\u4e00\u4e2a \\(b_i\\) \u7684\u503c\u3002\u6ce8\u610f\u5230\u6211\u4eec\u8981\u6c42\u6392\u5217\u7684\u65b9\u6848\u6570\uff0c\u4e8e\u662f\u53ef\u4ee5\u8d2a\u5fc3\u53d6 \\(b_i\\) \u6765\u5c3d\u91cf\u6ee1\u8db3\u6027\u8d28\u3002\u66b4\u529b\u8f6c\u79fb\u5373\u53ef\uff0c\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a \\(O(2^nn^2m^2)\\) \u3002 \u7136\u540e\u4f60\u4f1a\u53d1\u73b0\u8fd9\u4e2a dp \u751a\u81f3\u4e0d\u5982\u8d2a\u5fc3\u66b4\u529b\u8dd1\u5168\u6392\u5217\uff0c\u540e\u8005\u80fd\u5f97\u5230 60 pts \u7684\u597d\u6210\u7ee9 \u8003\u8651\u4f18\u5316 dp \u72b6\u6001\uff0c\u800c \\(S,i,j\\) \u5bf9\u4e8e\u6211\u4eec\u8003\u8651\u8f6c\u79fb\u662f\u5fc5\u987b\u7684\uff0c\u6240\u4ee5\u60f3\u53bb\u6389 \\(k\\) \u8fd9\u4e00\u7ef4\u3002 \\(b_i\\) \u5355\u8c03\u4e0d\u51cf\u7684\u6027\u8d28\u63d0\u793a\u4e86\u5dee\u5206\uff0c\u8fd0\u7528\u7684\u601d\u60f3\u548c\u4e0b\u9762\u8fd9\u9053\u9898\u7c7b\u4f3c\u3002 CF626F Group Projects \u4e8e\u662f\u8bbe \\(d_i=b_i-b_{i-1}\\ge 0\\) \uff0c\u6709 \\(d_i=\\max(a_{p_{i-1}}-a_{p_i},0)\\) \uff0c\u5e76\u4e14 \\begin{aligned} \\sum_{i=1}^n b_i &=\\sum_{i=1}^n\\sum_{j=1}^i d_j\\\\ &=\\sum_{j=1}^n\\sum_{i=j}^n d_j\\\\ &=\\sum_{j=1}^n(n-j+1)d_j\\\\ \\end{aligned} \u8f6c\u5316\u540e\uff0c\u4ee3\u7801\u5b9e\u73b0\u5c31\u76f8\u5bf9\u7b80\u5355\u4e86\u3002 \u65f6\u95f4\u590d\u6742\u5ea6\uff1a \\(O(2^nn^2m)\\) . 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 #include <bits/stdc++.h> #define rep(i,a,b) for(int i=(a);i<=(b);++i) #define ll long long using namespace std ; inline ll read (){ ll x = 0 , f = 1 ; char ch = getchar (); while ( ! isdigit ( ch )){ if ( ch == '-' ) f = -1 ; ch = getchar ();} while ( isdigit ( ch )){ x = x * 10 + ch -48 ; ch = getchar ();} return x * f ; } const int N = 14 , M = 505 ; int n , m , a [ N ], c [ N ][ N ], ppc [ 1 << N ], id [ 1 << N ], mx ; ll ans , f [ 1 << N ][ N ][ M ]; int main (){ n = read (), m = read (); rep ( i , 1 , n ){ a [ i ] = read (); if ( a [ i ] > a [ mx ]) mx = i ; id [ 1 << ( i -1 )] = i ; } rep ( i , 1 , n ) rep ( j , 1 , n ){ c [ i ][ j ] = max ( 0 , a [ i ] - a [ j ] + ( i < j )); //\u6ce8\u610f\u7f16\u53f7\u5c0f\u7684\u961f\u4f0d\u6392\u540d\u9760\u524d } rep ( i , 1 , n ){ int sum = n * ( a [ mx ] - a [ i ] + ( mx < i )); if ( sum <= m ) f [ 1 << ( i -1 )][ i ][ sum ] = 1 ; } int up = ( 1 << n ) -1 ; rep ( i , 1 , up ) ppc [ i ] = ppc [ i >> 1 ] + ( i & 1 ); rep ( S , 1 , up ){ for ( int t = S ; t ; t -= t &- t ){ int pos = id [ t &- t ]; rep ( sum , 0 , m ) rep ( i , 1 , n ){ if (( S >> ( i -1 )) & 1 ) continue ; int k = sum + ( n - ppc [ S ]) * c [ pos ][ i ]; if ( k <= m ) f [ S | 1 << ( i -1 )][ i ][ k ] += f [ S ][ pos ][ sum ]; } } } rep ( i , 1 , n ) rep ( j , 0 , m ) ans += f [ up ][ i ][ j ]; printf ( \"%lld \\n \" , ans ); return 0 ; }","title":"\u9898\u89e3 [\u7701\u9009\u8054\u8003 2021 A:B \u5377] \u6eda\u699c"}]}